"use strict";(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[2154],{52948:(t,e,r)=>{r.d(e,{Z:()=>n});var s=r(95004),o=r(29158),i=r(2629);class l extends s.Component{shouldComponentUpdate(){return!!this.props.shouldUpdate}render(){return this.props.children}}const n=t=>{var e=t.className,r=t.index,s=t.children,n=t.shouldUpdate,c=void 0!==n&&n;return(0,i.jsx)(o.Z.Consumer,{children:t=>{var o=t.window,n=o[r]?o[r].opacity:0;return(0,i.jsx)("div",{style:{opacity:n},className:e,children:(0,i.jsx)(l,{shouldUpdate:c,children:s})})}})}},29158:(t,e,r)=>{r.d(e,{Z:()=>o});var s=r(95004);const o=(0,s.createContext)({window:{},scrollContainerRef:(0,s.createRef)()})},90855:(t,e,r)=>{r.d(e,{Z:()=>W});var s=r(33970),o=r.n(s),i=r(50209),l=r.n(i),n=r(5754),c=r.n(n),a=r(95004),h=r(79615),d=r(68144),p=r(78667),v=r(21283),u=r(94576),m=r(29158);const C="kDCXR",f="GTDnP",g="wOp1Q",S="jxu4l";var R=r(2629),x=1/30*1e3;class b extends a.Component{constructor(){super(...arguments),l()(this,"state",{scrollPosition:0,containerWidth:0,scrollWidth:0}),l()(this,"scrollContainerRef",(0,a.createRef)()),l()(this,"onScroll",(0,v.Z)((()=>{var t=this.scrollContainerRef.current?Math.max(this.scrollContainerRef.current.scrollLeft,0):0;this.setState({scrollPosition:t})}),x)),l()(this,"scrollChildrenDidChange",(0,v.Z)((()=>{var t,e=null===(t=this.scrollContainerRef.current)||void 0===t?void 0:t.scrollWidth;void 0!==e&&this.setState({scrollWidth:e})}),250)),l()(this,"onResize",(0,v.Z)((()=>{var t,e,r,s;this.setState({containerWidth:null===(t=this.scrollContainerRef)||void 0===t||null===(e=t.current)||void 0===e?void 0:e.clientWidth,scrollWidth:null===(r=this.scrollContainerRef)||void 0===r||null===(s=r.current)||void 0===s?void 0:s.scrollWidth})}),x)),l()(this,"scrollLeft",(()=>{this.scroll(!1)})),l()(this,"scrollRight",(()=>{this.scroll(!0)})),l()(this,"scroll",(t=>{var e=this.scrollContainerRef.current,r=this.props,s=r.itemWidth,o=r.maxItemsToScroll,i=r.visibleWidth,l=this.state,n=l.containerWidth,c=l.scrollPosition;if(e){var a=Math.min(i,n),h=a/s,d=Math.min(null!=o?o:1/0,Math.round(h/2)),p=Math.max(d,1)*(t?1:-1);if(this.props.onScroll){var v=c,u=a+c,m=Math.floor(v/s),C=Math.floor(u/s);if(!1===this.props.onScroll({firstIndex:m,lastIndex:C,right:t}))return}var f=Math.abs(2*s*p);!t&&c<f?e.scrollTo({left:0,behavior:"smooth"}):e.scrollBy({left:s*p,behavior:"smooth"})}})),l()(this,"onScrollContainerResize",(t=>{var e=o()(t,1)[0].target;this.setState({containerWidth:e.clientWidth,scrollWidth:e.scrollWidth})}))}componentDidMount(){var t=this.scrollContainerRef.current;u.ZP.on("resize",this.onResize),t&&(this.resizeObserver=new ResizeObserver(this.onScrollContainerResize),this.resizeObserver.observe(t)),this.setState({scrollWidth:(null==t?void 0:t.scrollWidth)||0,containerWidth:null==t?void 0:t.clientWidth}),t&&(this.mutationObserver=new MutationObserver(this.scrollChildrenDidChange),this.mutationObserver.observe(t,{childList:!0,subtree:!0}))}componentWillUnmount(){var t,e;u.ZP.off("resize",this.onResize),null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.scrollChildrenDidChange.cancel(),this.onScroll.cancel()}render(){var t=this.props,e=t.children,r=t.visibleWidth,s=t.className,o=t.scrollContainerClassName,i=t.arrowButtonClassName,l=t.itemWidth,n=t.maxItemsToScroll,a=t.appContext._t,p=this.state,v=p.scrollPosition,u=p.containerWidth,x=p.scrollWidth,b="calc((100% - ".concat(r,"px) / 2)"),W=void 0===n?v<l/2:x===u,k=void 0===n?v+u>=x-1:x===u;return(0,R.jsx)("div",{className:c()(s,C),children:(0,R.jsx)("div",{className:c()(o,S),onScroll:this.onScroll,ref:this.scrollContainerRef,children:(0,R.jsxs)(m.Z.Provider,{value:{window:this.calculateWindowBasedOnScroll(v),scrollContainerRef:this.scrollContainerRef},children:[(0,R.jsx)("div",{style:{paddingLeft:b}}),e,(0,R.jsx)("div",{style:{paddingRight:b}}),(0,R.jsx)(h.Z,{className:c()(f,i,{[g]:W}),style:{left:0,paddingLeft:b},label:a("Scroll carousel left"),onClick:this.scrollLeft,children:(0,R.jsx)(d.UX,{size:{height:40,width:40}})}),(0,R.jsx)(h.Z,{className:c()(f,i,{[g]:k}),style:{right:0,paddingRight:b},label:a("Scroll carousel right"),onClick:this.scrollRight,children:(0,R.jsx)(d.jV,{size:{height:40,width:40}})})]})})})}calculateWindowBasedOnScroll(t){for(var e=this.props,r=e.visibleWidth,s=e.itemWidth,o=r+t,i=t/s,l=Math.floor(i),n=1-(i-l),c=Math.min(1.5*n,1),a=o/s,h=Math.floor(a),d=a-h,p={[l]:{opacity:c},[h]:{opacity:Math.min(1.5*d,1)}},v=l+1;v<h;v+=1)p[v]={opacity:1};return p}}const W=(0,p.HJ)(b)},38113:(t,e,r)=>{r.d(e,{Z:()=>u});var s=r(54138),o=r.n(s),i=r(54589),l=r.n(i),n=r(5754),c=r.n(n),a=r(73683);const h="WWBSO",d="_y4kh";var p=r(2629),v=["children","className","wrapperClassName"];const u=t=>{var e=t.children,r=t.className,s=t.wrapperClassName,i=l()(t,v);return(0,p.jsx)(a.rU,o()(o()({className:c()(h,s)},i),{},{children:(0,p.jsx)("span",{className:c()(d,r),tabIndex:-1,children:e})}))}},26705:(t,e,r)=>{r.d(e,{ZP:()=>f});var s=r(54138),o=r.n(s),i=r(50209),l=r.n(i),n=r(95004),c=r(63665),a=r(78667),h=r(7070),d=r(64051),p=r(2493),v=r(2629);class u extends d.Z{constructor(){super(...arguments),l()(this,"addObjectsToExisting",(t=>{var e=this.state.objects,r=this.props,s=r.direction,o=r.getObjectsFromResponse;return s===c.cU.Top?o(t).concat(e):e.concat(o(t))})),l()(this,"preHandleContentFetch",(t=>{var e=this.props.updateUrlFromCurrentPageLink;if(t===c.vO.Refresh)null==e||e()}))}render(){var t=this.props,e=t.fetchDistance,r=t.direction,s=t.scrollContainer,i=t.debug,l=t.loader,a=this.state,h=a.loadingNextPage,d=a.nextLink,u=l&&(null==d?void 0:d.href)&&(0,n.cloneElement)(l,{style:o()(o()({},l.props.style),{},{visiblity:"".concat(h?"visible":"hidden")})}),m=r===c.cU.Top;return(0,v.jsxs)(p.Z,{onScrollToEdge:this.fetchNextPage,edgeDistance:e,scrollContainer:s,direction:r,debug:i,children:[m&&u,super.render(),!m&&u]})}}l()(u,"defaultProps",o()(o()({},d.c),{},{fetchDistance:400}));var m=(0,a.tM)(u);(0,h.D)(m,"Inner".concat(m.name));class C extends n.Component{render(){return(0,v.jsx)(m,o()(o()({},this.props),{},{ref:this.props.forwardedRef}))}}const f=C},2493:(t,e,r)=>{r.d(e,{Z:()=>a});var s=r(50209),o=r.n(s),i=r(95004),l=r(63665),n=r(21283),c=r(94576);class a extends i.PureComponent{constructor(){super(...arguments),o()(this,"checkContainedScroll",(0,n.Z)((()=>{var t=this.props.scrollContainer;!this.willUnmount&&(0,l.Re)(t)&&this.checkScroll({distanceFromTop:t.scrollTop,distanceFromBottom:t.scrollHeight-t.clientHeight-t.scrollTop,distanceFromRight:t.scrollWidth-t.scrollLeft-t.clientWidth})}),c.ZQ)),o()(this,"forceCheckScroll",(()=>{(0,l.Re)(this.props.scrollContainer)?this.checkContainedScroll():this.checkScroll(c.ZP.getInfo())})),o()(this,"checkScroll",(t=>{var e,r=t.distanceFromBottom,s=t.distanceFromTop,o=t.distanceFromRight,i=this.props,n=i.direction,c=i.edgeDistance,a=i.onScrollToEdge;switch(n){case l.cU.Top:e=s;break;case l.cU.Bottom:e=r;break;case l.cU.Right:e=o}void 0!==c&&void 0!==e&&c>=e&&a()})),o()(this,"updateScrollTop",(t=>{var e=(0,l.Re)(this.props.scrollContainer)?this.props.scrollContainer:document.body,r=t.lastScrollHeight,s=t.lastClientHeight,o=t.lastScrollTop,i=e.scrollTop+e.scrollHeight-r;s!==e.clientHeight&&(i+=s-e.clientHeight);var n=o-e.scrollTop;n&&(i+=n),i!==e.scrollTop&&(e.scrollTop=i)}))}componentDidMount(){this.attachEventListeners(),this.forceCheckScroll()}componentWillUnmount(){this.willUnmount=!0,this.removeEventListeners()}getSnapshotBeforeUpdate(t){var e=this.props.direction,r=t.scrollContainer;if(e!==l.cU.Top)return null;var s=(0,l.Re)(r)?r:document.body;return{lastScrollHeight:s.scrollHeight,lastClientHeight:s.clientHeight,lastScrollTop:s.scrollTop}}componentDidUpdate(t,e,r){(0,l.Re)(this.props.scrollContainer)&&t.scrollContainer!==this.props.scrollContainer&&(this.removeEventListeners(t),this.attachEventListeners()),r&&this.updateScrollTop(r),this.forceCheckScroll()}render(){return this.props.children}attachEventListeners(){(0,l.Re)(this.props.scrollContainer)?this.props.scrollContainer.addEventListener("scroll",this.checkContainedScroll,!1):c.ZP.on("scroll",this.checkScroll)}removeEventListeners(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;(0,l.Re)(t.scrollContainer)&&t.scrollContainer.removeEventListener("scroll",this.checkContainedScroll,!1),c.ZP.off("scroll",this.checkScroll)}}}}]);