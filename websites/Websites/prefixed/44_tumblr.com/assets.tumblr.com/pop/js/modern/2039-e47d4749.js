"use strict";(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[2039],{33264:(e,t,s)=>{s.d(t,{Z:()=>n});const n={blogRowFollowButton:"kk3cQ"}},15690:(e,t,s)=>{s.d(t,{Z:()=>d});var n=s(95004),i=s(3069),o=s(78667);const a="mrvd7",r="SYe4j";var l=s(2629);function d(e){const{_t:t}=(0,o.bp)(),{blog:s,onClick:d}=e,{name:c,url:p}=s,[u,m]=(0,n.useState)(e.selected??!!s.followed);(0,n.useEffect)((()=>{void 0!==e.selected&&m(!!e.selected)}),[e.selected]);return s.canBeFollowed?(0,l.jsx)(i.Z,{following:!!u,blogName:c,blogUrl:p,className:a,wrapperClassName:r,isPeeprHeader:!1,onFollow:(e,t)=>{m(t),null==d||d(e,t)},isBlogCarousel:!0,children:e=>t(e?"Following":"Follow")}):null}},171:(e,t,s)=>{s.d(t,{ZP:()=>C});var n=s(95004),i=s(51641),o=s(36485),a=s(92183),r=s(78667);const l="RO9wQ";var d=s(2629);const c="word-ads-pubmine-script",p={[a.E.RIGHT_RAIL]:101,[a.E.DASHBOARD]:101,[a.E.EXPLORE]:202,[a.E.COMMUNITY_HUB]:203,[a.E.PEEPR_RIGHT_RAIL]:204,[a.E.BLOG_PAGE]:1,[a.E.POST_PERMALINK]:1,[a.E.RECOMMENDED]:1,[a.E.TAKEOVER]:1,[a.E.LOGGED_OUT_LANDING]:1},u={[a.E.RIGHT_RAIL]:101,[a.E.DASHBOARD]:101,[a.E.EXPLORE]:102,[a.E.COMMUNITY_HUB]:103,[a.E.PEEPR_RIGHT_RAIL]:104,[a.E.BLOG_PAGE]:1,[a.E.POST_PERMALINK]:1,[a.E.RECOMMENDED]:1,[a.E.TAKEOVER]:1,[a.E.LOGGED_OUT_LANDING]:1},m=e=>{let{supplyProviderId:t=a.E.RIGHT_RAIL}=e;const{tumblrIponwebUserId:s,cspNonce:i,wwwBaseUrl:m,_t:h,isLoggedIn:g}=(0,r.bp)(),v=(e=>"ata-dynamic-1_"+e)(t),b=window,x=()=>{"undefined"!=typeof __tcfapi&&__tcfapi("ping",2,((e,t)=>{if(t&&e.gdprApplies)return __tcfapi("showUi",2,(()=>null));window.location.replace((0,o.Z)(`${m}/privacy`,{redirect:window.location.href}))}))};return(0,n.useEffect)((()=>{var e,n;b.__ATA_PP={pt:g?u[t]:p[t],ht:1,tn:"tumblr",amp:!1,ad:{label:{text:h("Advertisements")},reportAd:{text:h("Report this ad")},privacySettings:{text:h("Privacy"),onClick:x}},siteid:174375630,id_hash:s},null!==(e=b.__ATA)&&void 0!==e&&e.pageParams&&(b.__ATA.pageParams.pt=b.__ATA_PP.pt),b.__ATA||(b.__ATA={cmd:[],criteo:{cmd:[]}}),null===(n=b.__ATA)||void 0===n||n.cmd.push((()=>{var e,t;null===(e=b.__ATA)||void 0===e||null===(t=e.initDynamicSlot)||void 0===t||t.call(e,{id:v,location:110,formFactor:"002"})})),document.getElementById(c)||(()=>{const e=document.createElement("script");e.src="https://c0.pubmine.com/2.20.01613588427137/head.js",e.id=c,e.nonce=i,document.body.appendChild(e)})()}),[]),(0,d.jsx)("div",{id:v,className:l})};var h=s(27096);const g="smart-ads-script",v="https://www15.smartadserver.com",b=112148,x=1485677,f=1485682,j=1494033,C=e=>{let{supplyProviderId:t=a.E.RIGHT_RAIL,FallbackAdComponent:s=m,fallbackAdProps:o}=e;o||(o={supplyProviderId:t});const l=(0,h.Z)(),{cspNonce:c,isLoggedIn:p,tumblrIponwebUserId:u,getUserInfo:C}=(0,r.bp)(),[y,w]=(0,n.useState)("initializing"),{isLoading:I,data:_}=(0,i.useQuery)("user-info",(()=>C()),{refetchOnWindowFocus:!1}),N={[a.E.RIGHT_RAIL]:{pageId:x,formatId:b},[a.E.PEEPR_RIGHT_RAIL]:{pageId:p?f:j,formatId:b}},A=N[t]?N[t]:N[a.E.RIGHT_RAIL],T=((e,t)=>`sas_${t}_${e}`)(t,A.formatId),S=()=>{var e,t,s;const n=window;null===(e=n.sas)||void 0===e||e.events.off("noad",O,T),null===(t=n.sas)||void 0===t||t.events.off("error",P,T),null===(s=n.sas)||void 0===s||s.clean(T)},k=e=>{const t=window;if(e.origin!==v||!e.data)return;var s;"sasRefresh"===e.data.action&&(null===(s=t.sas)||void 0===s||s.refresh())},O=()=>{l.current&&w("noad")},P=()=>{l.current&&w("error")},E=()=>{if(p&&I)return;const e={};e.nonce=c,p&&(u&&(e.user=u),null!=_&&_.bornYear&&(e.age=(new Date).getFullYear()-(null==_?void 0:_.bornYear)));const t=window;var s,n,i,o;(e=>{var t,s;return null===(t=window)||void 0===t||null===(s=t.sas)||void 0===s?void 0:s.events.history("call").map((e=>{var t;return null==e||null===(t=e.data)||void 0===t?void 0:t.ad.formats[0].tagId})).includes(e)})(T)?(null===(s=t.sas)||void 0===s||s.events.on("noad",O,T),null===(n=t.sas)||void 0===n||n.events.on("error",P,T),null===(i=t.sas)||void 0===i||i.refresh()):null===(o=t.sas)||void 0===o||o.cmd.push((function(){var s,n,i,o;null===(s=t.sas)||void 0===s||s.call("onecall",{siteId:471751,pageId:A.pageId,formats:[{id:A.formatId,tagId:T}],target:Object.entries(e).map((e=>e.join("="))).join(";")}),null===(n=t.sas)||void 0===n||n.events.on("noad",O,T),null===(i=t.sas)||void 0===i||i.events.on("error",P,T),null===(o=t.sas)||void 0===o||o.render(T)}))};return(0,n.useEffect)((()=>(document.getElementById(g)||(()=>{var e;const t=window,s=document.createElement("script");s.src="https://ced.sascdn.com/tag/3905/smart.js",s.async=!0,s.nonce=c,s.id=g,document.body.appendChild(s),t.sas||(t.sas={cmd:[],call:()=>null,setup:()=>null,render:()=>null,refresh:()=>{},clean:()=>{},events:{history:()=>[{}],on:()=>{},off:()=>{}}}),null===(e=t.sas)||void 0===e||e.cmd.push((function(){var e;null===(e=t.sas)||void 0===e||e.setup({networkid:3905,domain:v,async:!0})})),window.addEventListener("message",k)})(),S)),[]),(0,n.useEffect)((()=>(E(),S)),[I,_]),"noad"===y||"error"===y?(0,d.jsx)(s,{...o}):(0,d.jsx)("div",{id:T,"data-testid":T})}},73702:(e,t,s)=>{s.d(t,{ZP:()=>H});var n=s(50209),i=s.n(n),o=s(5754),a=s.n(o),r=s(95004),l=s(60612),d=s(73792),c=s(79615),p=s(57475),u=s(77095),m=s(78667),h=s(63583),g=s.n(h),v=s(33264);const b="iOplf",x="dxDX3";var f=s(2629);class j extends r.Component{render(){const{rowTheme:e,avatar:t,avatarShape:s,blogName:n,blogTitle:i,blogUrl:o,onFollow:a,onClose:r,isFollowed:l,appContext:{_t:m}}=this.props,h=void 0!==a&&!l&&(0,f.jsx)(p.Z,{following:!!l,blogName:n,blogUrl:o,onFollow:a,className:v.Z.blogRowFollowButton}),j=(0,f.jsx)(c.Z,{wrapperClassName:x,onClick:r,label:m("Dismiss Recommendation"),children:(0,f.jsx)(u.Z,{colors:{primary:g().paletteTransparentWhite13},size:{width:10,height:10}})}),C={avatar:t,avatarShape:s,blogName:n,blogTitle:i,blogUrl:o};return(0,f.jsx)("div",{className:b,children:(0,f.jsx)(d.ZP,{...C,isMobile:!1,floatingButton:h,closeButton:j,theme:e||d.CK.Dark,openBlogCard:d.T6.Body})})}}const C=(0,m.HJ)(j);var y=s(13434),w=s(81584),I=s(86033),_=s(78093),N=s.n(_);const A="B4rcz",T="PwJi6",S="kqme1",k="_fk31",O="Kxfe3",P="vN7wd",E="ou8zw",R="E4V_b",Z="W9GZw",B=`${N().postSlideOutDurationInMs}ms ease-out`;function D(e,t,s){return t.length>0&&e>Math.max(...t)&&"exiting"===s?{transform:`translateY(-${59*t.length}px)`,transition:`transform ${B}`}:{}}class M extends r.Component{constructor(){super(...arguments),i()(this,"state",{indexesToRemove:[],animationType:"none",...this.props.getInitialContent()}),i()(this,"apiHelper",(0,w.ZP)(this.props.appContext.apiFetch)),i()(this,"fetchInProgress",null),i()(this,"renderRows",(e=>{const{rowTheme:t}=this.props,{blogs:s,indexesToRemove:n}=this.state;return s.slice(0,this.getNumberOfBlogsToShow()).map(((s,i)=>(0,f.jsx)("li",{className:S,children:(0,f.jsx)("div",{className:a()(k,{[O]:this.isBlogInAnimationState(i,"dismiss-blog"),[P]:this.isBlogInAnimationState(i,"follow-blog"),[E]:this.isBlogInAnimationState(i,"none")}),style:D(i,n,e),children:(0,f.jsx)(C,{blogName:s.name,blogTitle:s.title??"",blogUrl:s.url,avatar:s.avatar??[],isFollowed:s.followed,onFollow:s.canBeFollowed?this.animateFollowBlog.bind(this,i):void 0,onClose:this.animateDismissBlog.bind(this,i),rowTheme:t})})},`${s.name}-${i}`)))})),i()(this,"rowRemovalComplete",(()=>this.setState({animationType:"none"}))),i()(this,"getNumberOfBlogsToShow",(()=>this.props.numberOfBlogsToShow+this.state.indexesToRemove.length)),i()(this,"isBlogInAnimationState",((e,t)=>this.state.indexesToRemove.includes(e)&&this.state.animationType===t)),i()(this,"fetchBlogs",(()=>{const{nextLink:e}=this.state,{apiFetch:t}=this.props.appContext;e&&(this.cancelInProgressFetchIfNecessary(),this.fetchInProgress=(0,I.Z)(t(e.href)),this.fetchInProgress.then((e=>{const{blogs:t}=this.state,{getContentFromResponse:s}=this.props,{nextLink:n,blogs:i}=s(e);this.setState({nextLink:n,blogs:t.concat(i)})})))})),i()(this,"logBlogDismissal",((e,t,s)=>Promise.all(t.map((t=>this.apiHelper.logBlogDismissal(e[t].url).fetch()))).then((()=>s??this.fetchBlogs())))),i()(this,"removeRowAndAnimateSlideUp",(()=>{const{blogs:e,animationType:t,indexesToRemove:s}=this.state,n=e.filter(((e,t)=>!s.includes(t)));this.setState({indexesToRemove:[],blogs:n});const i=n.length<=5;"dismiss-blog"!==t?i&&this.fetchBlogs():this.logBlogDismissal(e,s,i)})),i()(this,"animateDismissBlog",(e=>this.setState({indexesToRemove:[e],animationType:"dismiss-blog"}))),i()(this,"animateFollowBlog",(e=>this.setState({indexesToRemove:[e],animationType:"follow-blog"}))),i()(this,"animateDismissAllBlogs",(()=>this.setState({indexesToRemove:[...Array(this.props.numberOfBlogsToShow).keys()],animationType:"dismiss-blog"}))),i()(this,"cancelInProgressFetchIfNecessary",(()=>{var e;return null===(e=this.fetchInProgress)||void 0===e?void 0:e.cancel()}))}componentDidMount(){this.fetchBlogs()}componentDidUpdate(e){e.recommendedTag!==this.props.recommendedTag?this.setState(this.props.getInitialContent(),(()=>this.fetchBlogs())):e.title!==this.props.title&&this.setState(this.props.getInitialContent())}componentWillUnmount(){this.cancelInProgressFetchIfNecessary()}render(){const{title:e,numberOfBlogsToShow:t,dismissAllLabel:s,isInDashboardStyle:n,appContext:{_t:i}}=this.props,{blogs:o,nextLink:a,animationType:r}=this.state;return o.length?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("ul",{className:T,"aria-label":e,style:{height:59*t},children:(0,f.jsx)(l.ZP,{in:"none"!==r,timeout:N().postSlideOutDurationInMs,onEntered:this.rowRemovalComplete,onExited:this.removeRowAndAnimateSlideUp,children:this.renderRows})}),s&&(0,f.jsx)("div",{className:Z,children:(0,f.jsx)(c.Z,{label:s,onClick:this.animateDismissAllBlogs,children:s})})]}):a?(0,f.jsx)("div",{className:A,children:(0,f.jsx)(y.Z,{small:!0})}):n?(0,f.jsx)("span",{className:R,children:i("No blogs available.")}):null}}i()(M,"defaultProps",{numberOfBlogsToShow:4,title:""});const F=(0,m.HJ)(M);class L extends r.Component{render(){return(0,f.jsx)(F,{...this.props})}}i()(L,"defaultProps",M.defaultProps);const H=L},17941:(e,t,s)=>{s.d(t,{Z:()=>j});var n=s(5754),i=s.n(n),o=s(95004),a=s(86179),r=s(79615),l=s(65214),d=s(42580),c=s(64633),p=s(20943),u=s(78667),m=s(80328),h=s(89465);const g="sNQra",v="WdYx4",b="tnoMg",x="D2Wgl";var f=s(2629);const j=e=>{let{tag:t,className:s,pageName:n,isFollowed:j,extraStyles:C}=e;const{_t:y,apiFetch:w,isLoggedIn:I}=(0,u.bp)(),{pathname:_}=(0,a.TH)(),[N,A]=(0,o.useState)(I&&j);(0,o.useEffect)((()=>{I&&void 0===j?(0,p.IR)(w,t).fetch((e=>{let{response:{following:t}}=e;return A(!!t)})):A(I&&j)}),[I,t,j]);const T=(0,h.k)(_,c.Vu.TagFollowButton),S=(0,m.Z)(T),k=(0,o.useCallback)((()=>(0,p.Wr)(w,t,n).fetch((()=>A(!0)))),[t]),O=(0,o.useCallback)((()=>(0,p.to)(w,t,n).fetch((()=>A(!1)))),[t]),P=y("Follow");return I&&void 0===N?null:N?(0,f.jsx)(r.Z,{wrapperClassName:i()(g,s),className:b,onClick:O,label:y("Unfollow this tag"),style:C,children:y("Unfollow")}):(0,f.jsx)(r.Z,{wrapperClassName:i()(g,s),className:v,onClick:I?k:void 0,label:y("Follow this tag"),style:C,...!I&&{"data-login-wall-type":"followTag","data-login-wall-tag-label":t,"data-login-wall-page":n,"data-login-wall-redirect":(0,l.fO)(t)},children:I?(0,f.jsx)("span",{className:x,children:P}):(0,f.jsx)("a",{className:x,href:(0,l.gZ)({formToShow:d.c.Register},{redirect_to:_,source:S}),children:P})})}},51197:(e,t,s)=>{s.d(t,{Z:()=>c});var n=s(19486),i=s(51416),o=s(84473),a=s(43523),r=s(78667);const l={pillTag:"HSIaV",pillTagInner:"jo4rU",pillIcon:"ZsnTE"};var d=s(2629);const c=function(e){let{timelineObject:t}=e;const{logEvent:s}=(0,r.bp)();return(0,d.jsx)("div",{className:l.tagRibbon,children:t.resources.map((e=>{let{name:t,link:r}=e;return(0,d.jsx)(i.Z,{className:l.pillTag,isThin:!0,children:(0,d.jsxs)(o.Z,{tagName:t,className:l.pillTagInner,toOverride:null==r?void 0:r.href,onClick:()=>{return e=t,void s({eventName:a.J.TagRibbonTagTap,eventDetails:{tag:e}});var e},children:[(0,d.jsx)("div",{className:l.pillIcon,children:(0,d.jsx)(n.Z,{})}),t]})},t)}))},t.id)}},82651:(e,t,s)=>{s.d(t,{ZP:()=>li,l9:()=>oi});var n=s(50209),i=s.n(n),o=s(5754),a=s.n(o),r=s(29774),l=s(95004),d=s(17941),c=s(84473),p=s(54382),u=s(43523),m=s(78667),h=s(63583),g=s.n(h);const v="ScibS",b="ve9db",x="uQnmG",f="zGQaS",j="iqdyd",C="LGuOI";var y=s(2629);const w=function(e){let{timelineObject:t}=e;const{logEvent:s}=(0,m.bp)(),n=t.newPostsCount,i=t.newPostsCountInt,o=t.followersCount??"0",a=t.followersCountInt??0,r=!!t.showFollowersCount,l=!!t.showNewPostsCount;return(0,y.jsxs)("div",{className:v,children:[(0,y.jsx)(c.Z,{className:b,tagName:t.hubName,onClick:()=>{s({eventName:u.J.HeaderTapped,eventDetails:{tag:t.hubName}})},children:(0,y.jsxs)("div",{className:x,style:{backgroundImage:`linear-gradient(${h.transparentBlack7}, ${h.transparentBlack65}), url("${t.headerImage}")`},children:[(0,y.jsxs)("div",{className:f,children:["#",t.hubName]}),(0,y.jsxs)("div",{className:j,children:[r&&(0,y.jsxs)(p.M2,{comment:"The number of followers this topic has. Placeholder is the count of followers",exemptNumberKeyFromParamCheck:!0,components:{b:(0,y.jsx)("b",{})},params:{followersCount:o},number:a,children:[(0,y.jsx)(p.CJ,{children:"[followersCount] follower"}),(0,y.jsx)(p.CN,{children:"[b][followersCount][/b] followers"})]}),r&&l&&" / ",l&&(0,y.jsxs)(p.M2,{comment:"The number of posts this topic has had recently. Placeholder is the count of posts",exemptNumberKeyFromParamCheck:!0,components:{b:(0,y.jsx)("b",{})},params:{newPostsCount:n},number:i,children:[(0,y.jsx)(p.CJ,{children:"[newPostsCount] recent post"}),(0,y.jsx)(p.CN,{children:"[b][newPostsCount][/b] recent posts"})]})]})]})}),(0,y.jsx)(d.Z,{tag:t.hubName,isFollowed:t.isFollowed,pageName:"search",className:C})]},t.hubName)};var I=s(26216);const _="moatContainer",N=(0,I.s)((e=>{let{timelineObject:{adGroupId:t,advertiserId:s,campaignId:n,creativeId:i},setInViewCallback:o}=e;const a=!(t&&s&&n&&i),{features:{useMoat:r}}=(0,m.bp)(),d=(0,l.useRef)(null);return(0,l.useEffect)((()=>{if(!r)return;const e=d.current,{moatScript:a,moatNoscript:l}=((e,t)=>{const{advertiserId:s,campaignId:n,adGroupId:i,creativeId:o}=e,a=[["moatClientLevel1",s||""],["moatClientLevel2",n||""],["moatClientLevel3",i||""],["moatClientLevel4",o||""]].map((e=>{let[t,s]=e;return`${t}=${encodeURIComponent(s)}`})).join("&"),r=`https://z.moatads.com/${t}/moatad.js#${a}`,l=`MOAT-${t}?${a.replace(/&/g,"&amp;")}`,d=document.createElement("script");d.src=r,d.async=!0;const c=document.createElement("noscript");return c.className=l,{moatScript:d,moatNoscript:c}})({adGroupId:t,advertiserId:s,campaignId:n,creativeId:i},"tumblrdisplay725780052135");null==o||o((()=>{null==e||e.appendChild(a),null==e||e.appendChild(l)}))}),[t,s,n,i,o,r]),r&&!a?(0,y.jsx)("div",{className:"moatScriptsContainer",ref:d}):null}),!0),A="google-ads-script",T=["fluid"],S=e=>{const{cspNonce:t,logEvent:s}=(0,m.bp)(),{slotId:n}=e,i=e=>{s({eventName:u.J.GoogleAdFilled,eventDetails:{slotId:n,event:e}})};return(0,l.useEffect)((()=>{document.getElementById(A)||(()=>{const e=document.createElement("script");e.src="https://securepubads.g.doubleclick.net/tag/js/gpt.js",e.async=!0,e.nonce=t,e.id=A,document.head.appendChild(e)})(),(t=>{var s;const n=window;n.googletag||(n.googletag={},n.googletag.cmd=[]),null===(s=n.googletag)||void 0===s||s.cmd.push((()=>{var s,o,a,r,l,d;null===(s=n.googletag)||void 0===s||null===(o=s.defineSlot("/22749103964/ca-pub-3245570501173456-tag",T,t))||void 0===o||o.setForceSafeFrame(!0).addService(null===(a=n.googletag)||void 0===a?void 0:a.pubads()),null===(r=n.googletag)||void 0===r||r.enableServices(),null===(l=n.googletag)||void 0===l||l.pubads().addEventListener("slotRenderEnded",(s=>{var n,o;s.slot.getSlotElementId()==t&&(s.isEmpty?null===(n=e.onEmpty)||void 0===n||n.call(e):(i(s),null===(o=e.onFilled)||void 0===o||o.call(e)))})),null===(d=n.googletag)||void 0===d||d.display(t)}))})(n)}),[n]),(0,y.jsx)("div",{id:n,"data-testid":n})};var k=s(48451),O=s(34320),P=s(70019),E=s(43166),R=s(59215);let Z,B,D,M,F,L,H;!function(e){e.MediationCandidateConsideration="mediation_candidate_consideration",e.SupplyOpportunityMissed="supply_opportunity_missed",e.SupplyOpportunityFilled="supply_opportunity_filled",e.MediationOpportunityMissed="mediation_opportunity_missed",e.AdDropped="ad_dropped"}(Z||(Z={})),function(e){e.BackfillNotNeeded="backfill_not_needed",e.WaterfallNotUsed="waterfall_not_used"}(B||(B={})),function(e){e.ForeignImpression="foreign_impression",e.Impression="impression"}(D||(D={})),function(e){e.AdRequest="ad_request"}(M||(M={})),function(e){e.IponWebSyncInit="iponweb_sync_init",e.IponWebSyncInitError="iponweb_sync_init_error"}(F||(F={})),function(e){e.NoAd="noAd",e.AdServed="adAvailable",e.AdError="adError",e.TeadsImpression="impression"}(L||(L={})),function(e){e.AdFilled="AdFilled",e.NoAd="NoAd",e.AdError="AdError"}(H||(H={}));var $=s(92183);const U=(e,t,s,n,i)=>{const{supplyRequestId:o,supplyOpportunityInstanceId:a,adProviderId:r,isTumblrSponsoredPost:l,sponsoredBadgeUrl:d,adProviderForeignPlacementId:c,adProviderPlacementId:p,adProviderInstanceId:u,mediationCandidateId:m,streamSessionId:h,streamGlobalPosition:g,placementId:v,price:b,creativeId:x,adId:f,adRequestId:j,adInstanceId:C,adInstanceCreatedTimestamp:y}=s,w=(new Date).getTime()-y;e({eventName:Z.SupplyOpportunityFilled,eventDetails:{price:b,supply_opportunity_instance_id:a,supply_provider_id:$.E.DASHBOARD,supply_request_id:o,ad_provider_id:r,is_tumblr_sponsored_post:l||d?1:0,ad_provider_placement_id:p,ad_provider_foreign_placement_id:c,ad_provider_instance_id:u,mediation_candidate_id:m,stream_session_id:h,stream_global_position:g,placement_id:v,fill_id:i||s.fillId,hydra_config_instance_id:n,hydra_signature:null==t?void 0:t.signature,creative_id:x,ad_id:f,ad_instance_age:w,ad_request_id:j,ad_instance_id:C}})};var W=s(55015);const z="uOyjG",q="kJSyc",G="CH8uH";class V extends l.Component{constructor(){super(...arguments),i()(this,"state",{}),i()(this,"getPostContextValue",(0,r.Z)((e=>({post:e,presentationStyle:W.Z.iponweb})))),i()(this,"onClick",(()=>{const{adm:e,placementId:t}=this.props.timelineObject,{logEvent:s}=this.props.appContext,{sendClickADMBeacon:n}=this.props.adContext;s({eventName:u.J.Click,eventDetails:{placement_id:t}}),n(e)}))}componentDidMount(){const{adContext:{adPlacementConfiguration:e,hydraConfigInstanceId:t},appContext:{logEvent:s},timelineObject:n}=this.props;this.generateIOWModel(),U(s,e,n,t)}render(){var e,t;const{iponWebResponse:s}=this.state;if(!(s&&null!=s&&s.sponsorName&&null!=s&&s.avatar&&null!=s&&s.title))return null;const n="string"!=typeof this.props.timelineObject.adm?null===(e=this.props.timelineObject.adm)||void 0===e?void 0:e.native:void 0,{_t:i}=this.props.appContext,o={url:s.avatar.url,width:s.avatar.w,height:s.avatar.h,hasOriginalDimensions:!0},a={blog:{name:i("Sponsored by %1$s",[s.sponsorName]),url:"",avatar:[o],isAdult:!1},permalinkUrl:""},r=(0,y.jsx)(O.Z,{postAttribution:a,presentationStyle:W.Z.iponweb,showsFollowButton:!1,showsSponsored:!1,isFollowingReblogger:!1,isNonInteractive:!0}),l=s.sponsorName&&s.img?(0,y.jsx)(k.Sw,{imageResponse:[{url:s.img.url,width:s.img.w,height:s.img.h,hasOriginalDimensions:!0}]}):null,d=s.cta?(0,y.jsx)("div",{className:G,children:(0,y.jsx)("p",{children:s.cta})}):null;return(0,y.jsx)(E.Mj.Provider,{value:this.getPostContextValue(this.props.timelineObject),children:(0,y.jsxs)("a",{className:z,href:null==n||null===(t=n.link)||void 0===t?void 0:t.url,onClick:this.onClick,role:"button",target:"_blank",rel:"noopener",children:[r,(0,y.jsxs)("div",{className:q,children:[(0,y.jsx)("h2",{children:s.title}),(0,y.jsx)("p",{children:s.description})]}),l,d]})})}generateIOWModel(){var e,t;const s="string"!=typeof this.props.timelineObject.adm&&(null===(e=this.props.timelineObject.adm)||void 0===e||null===(t=e.native)||void 0===t?void 0:t.assets)||[];this.setState({iponWebResponse:s.reduce(((e,t)=>{if(t.title&&(e.title=t.title.text),t.img)switch(t.img.type){case P.f.Icon:e.avatar=t.img;break;case P.f.Main:e.img=t.img}if(t.data)switch(t.data.type){case P.BM.Sponsored:e.sponsorName=t.data.value;break;case P.BM.Description:e.description=t.data.value;break;case P.BM.AdditionalDesc:e.additionalDescription=t.data.value;break;case P.BM.CTAText:e.cta=t.data.value}return e}),{})})}}const J=(0,R.X9)(V,{appContext:!0,adContext:!0}),K=(0,I.s)(J),Y=s.p+"src/assets/monetization/html/iab-safeframe/sf-843dd697.html",Q={"exp-ovr":1,"exp-push":0,bg:0,pin:0,"read-cookie":0,"write-cookie":0};let X;!function(e){e.GeometryUpdated="geom-update"}(X||(X={}));var ee=s(57905);class te extends ee.Z{constructor(e){super(`Could not load the Safeframe Library with error: ${e}`,"SafeframeLoadError")}}var se=s(96467),ne=s.n(se),ie=s(94576);function oe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne().postWidth;return Math.min(e,ie.ZP.getInfo().innerWidth)}const ae=()=>{var e,t;return void 0!==(null===(e=window.$sf)||void 0===e||null===(t=e.host)||void 0===t?void 0:t.boot)},re=(e,t,s)=>{var n;const i=de(e),o=(null==s?void 0:s.self)&&le(s.self),a=i&&ce(i);return!!(t===X.GeometryUpdated&&i&&o&&"true"===(null===(n=i.parentElement)||void 0===n?void 0:n.dataset.isResizable)&&a)&&(pe(i,o),pe(a,o),!0)},le=e=>{if(!e||!e.w||!e.h)return null;const t=oe(ne().postWidth),s=t/e.w;return 1===s?null:{w:t,h:Math.ceil(e.h*s)}},de=e=>document.getElementById(`sf_pos_rel_el_${e}`),ce=e=>e.querySelector("iframe"),pe=(e,t)=>{e.style.width=`${t.w}px`,e.style.height=`${t.h}px`},ue=async()=>{try{return window.$sf||(await s.e(4526).then(s.t.bind(s,79740,23)),await s.e(7266).then(s.t.bind(s,20999,23)),await s.e(7828).then(s.t.bind(s,99924,23)),new window.$sf.host.Config({renderFile:Y,positions:{},onPosMsg:re})),await new Promise(((e,t)=>{let s=0;const n=()=>ae()?e():s>=10?t("Exceeded max attempts to check for the Safeframe API."):(s+=1,void setTimeout(n,1e3));n()}))}catch(e){throw new te(e)}};class me extends l.Component{constructor(){super(...arguments),i()(this,"createHtmlField",(()=>{const{frameUrl:e,conf:t,html:s}=this.props,n=JSON.stringify(t);if(e)return`\n        {\n          "id" : "${t.id}",\n          "html" : "<script src=\\"${e}\\"><\/script>",\n          "conf" : ${n}\n        }\n        `;if(s){const e=JSON.stringify(s);return`\n        {\n          "id" : "${t.id}",\n          "html" : ${e},\n          "conf" : ${n}\n        }\n        `}return""}))}componentDidUpdate(e){this.props.html===e.html&&this.props.frameUrl===e.frameUrl||(this.generateSafeframeData(),ae()&&(window.$sf.host.nuke(this.props.conf.id),window.$sf.host.boot()))}async componentDidMount(){if(this.generateSafeframeData(),me.HAS_BEEN_INITIALIZED)ae()&&window.$sf.host.boot();else{const e=Node.prototype.removeChild;Node.prototype.removeChild=function(t){return t.parentNode!==this?(t.remove&&t.remove(),t):e.call(this,t)},await ue(),me.HAS_BEEN_INITIALIZED=!0}}componentWillUnmount(){this.props.conf.id&&ae()&&window.$sf.host.nuke(this.props.conf.id)}render(){return(0,y.jsx)("div",{id:this.props.conf.id})}generateSafeframeData(){const{adRequestContext:{currentAdRequests:e},conf:{id:t}}=this.props,s=document.createElement("script");if(s.className="sf_data",s.type="text/x-safeframe",s.innerHTML=this.createHtmlField(),t){const s=e[t];s&&s.setStartTime()}document.body.appendChild(s)}}i()(me,"HAS_BEEN_INITIALIZED",!1);const he=(0,R.X9)(me,{adRequestContext:!0});const ge=class{constructor(e,t){if("object"==typeof e)if(this.id=e.id,this.dest=e.dest||t,this.bg=e.bg||"transparent",this.tgt=e.tgt||"_top",this.css=e.css,this.w="string"==typeof e.w?String(e.w):Number(e.w)||0,this.h=Number(e.h)||0,this.z=Number(e.z)||0,this.supports=e.supports||Q,this.w&&this.h)this.size="string"==typeof this.w?"":`${this.w}x${this.h}`;else{const t=e.size;if(t){const e=t.split(/x/gi);this.w=Number(e[0])||0,this.h=Number(e[1])||0,this.size=t}else this.size=""}else this.id=e,this.dest=t}};var ve=s(14542),be=s(22979);const xe=e=>!!e.streamGlobalPosition||e.supplyProviderId===$.E.DASHBOARD;let fe;!function(e){e.GOOGLE_NATIVE_DASHBOARD="googleNativeDashboardHydraSource",e.TEADS_DASHBOARD_SUBSEQUENT="teadsDashboard",e.TEADS_DASHBOARD_TOP="teadsDashboardTop",e.TEADS_TEST_DASHBOARD="teadsTestHydraSource",e.TEADS_DEFAULT="teadsHydraSource",e.FLURRY_DEFAULT="flurryHydraSource",e.ONE_MOBILE_DEFAULT="oneMobileHydraSource"}(fe||(fe={}));const je=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$.E.DASHBOARD,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=null==t?void 0:t.placements;if(!o)return"";switch(e){case be.db.Google:return o[fe.GOOGLE_NATIVE_DASHBOARD].adPlacementId;case be.db.Teads:return i.teadsTestPlacement?o[fe.TEADS_TEST_DASHBOARD].adPlacementId:s===$.E.DASHBOARD?void 0!==n&&n<=3?o[fe.TEADS_DASHBOARD_TOP].adPlacementId:o[fe.TEADS_DASHBOARD_SUBSEQUENT].adPlacementId:o[fe.TEADS_DEFAULT].adPlacementId;case be.db.Flurry:return o[fe.FLURRY_DEFAULT].adPlacementId;case be.db.OneMobile:return o[fe.ONE_MOBILE_DEFAULT].adPlacementId;default:return""}},Ce=(e,t)=>{var s;const n=t;window.native=window.native||[],null===(s=window.native)||void 0===s||s.push({passbackHandler:()=>{window.top&&window.top.postMessage&&window.top.postMessage(`{"flurryMsg": {"noAd": "${e}"}}`,"*")},successHandler:()=>{window.top&&window.top.postMessage&&window.top.postMessage(`{"flurryMsg": {"adAvailable": "${e}"}}`,"*")},errorHandler:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{error:s="Unknown Flurry Error"}=t;window.top&&window.top.postMessage&&window.top.postMessage(`{"flurryMsg": {"adError": "${e}", "errorMsg": "${s}"}}`,"*")},code:n}),window.apiKey="XQN3HX9KDMPKQNDS5DJK",window.publisherUrl="https://www.tumblr.com/"},ye=function(e,t){var s,n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const o=null===(s=(n=window).getSuid)||void 0===s?void 0:s.call(n),a={dcn:"8a969588016f6ff76855f7d814460018",pos:t,secure:"1"};var r,l;o&&(a["u(id)"]=o),i&&(a.us_privacy=i),e&&(a["p(supplyId)"]=e),null===(r=(l=window).admaxAd)||void 0===r||r.call(l,a),setTimeout((()=>{const t=document.querySelector('div[id^="ad"]');if(t){var s;const n=Array.from(t.childNodes).find((e=>8===e.nodeType));"No Ads"===(null==n||null===(s=n.textContent)||void 0===s?void 0:s.trim())&&window.top.postMessage(`{"oneMobileMsg": {"noAd": "${e}"}}`,"*")}else window.top.postMessage(`{"oneMobileMsg": {"noAd": "${e}"}}`,"*")}),7e3)},we="Qrht9",Ie="TGnTP",_e={[be.db.Google]:.5926,[be.db.Teads]:.5926,[be.db.Flurry]:.6852,[be.db.OneMobile]:250/300},Ne={[be.db.Google]:ne().postWidth,[be.db.Teads]:ne().postWidth,[be.db.Flurry]:ne().postWidth,[be.db.OneMobile]:ne().sidebarAdWidth};class Ae extends l.Component{constructor(){super(...arguments),i()(this,"safeFrameScriptMapping",{[be.db.Google]:()=>"",[be.db.Teads]:e=>`<script src="//a.teads.tv/page/${e}/tag?supply_id=${this.props.supplyOpportunityInstanceId}"><\/script>`,[be.db.OneMobile]:e=>{var t,s;return`<script src="https://web.ssp.yahoo.com/js/admax/admax_api_https.js"><\/script>\n    <script>\n    const supplyOpportunityInstanceId = "${this.props.supplyOpportunityInstanceId}"\n    const placementId = "${e}"\n    const ccpaPrivacyConsentString = "${(null===(t=this.props.adContext)||void 0===t||null===(s=t.privacy)||void 0===s?void 0:s.ccpaPrivacyString)||""}"\n    const init = ${ye}\n    init(supplyOpportunityInstanceId, placementId, ccpaPrivacyConsentString)\n    <\/script>`},[be.db.Flurry]:e=>`<script type="text/javascript">\n    (function() {\n      const supplyOpportunityInstanceId = "${this.props.supplyOpportunityInstanceId}"\n      const placementId = "${e}"\n      const init = ${Ce};\n      init(supplyOpportunityInstanceId, placementId)\n    })();\n    <\/script>\n    <script async src="https://s.yimg.com/dy/ads/native.js"><\/script>`})}componentWillUnmount(){var e;const{ad:t}=this.props;if((0,be.MA)(t)&&t.clientSideAdType===be.db.Teads)null===(e=window.teads)||void 0===e||e.cleanup()}render(){const{ad:e,presentationStyle:t,streamPosition:s,supplyOpportunityInstanceId:n,onEmpty:i,onFilled:o,onError:r}=this.props;if(!e)return null;const l=this.generateSafeFrameConfig();if((0,be.MA)(e)||e.adProviderId===be.Rd.TripleliftBanner||(0,be.ou)(e)){let t=(0,y.jsx)(he,{conf:l,html:this.generateHTMLFromAd(e)},l.id);if((0,be.MA)(e)&&e.clientSideAdType==be.db.Google){const e=`google_ad_${n}_${s}`;t=(0,y.jsx)(S,{slotId:e,onEmpty:i,onFilled:o,onError:r})}return(0,y.jsxs)("div",{style:{width:l.w},"data-is-resizable":(0,be.MA)(e)&&!(0,be.uY)(e),className:a()(_,{[we]:xe(e)}),children:[(0,y.jsx)(N,{timelineObject:e}),t]})}return(0,be.uz)(e)&&t?(0,y.jsx)(ve.Z,{presentationStyle:t,timelineObject:e}):(0,be.lR)(e)?(0,y.jsx)("div",{className:Ie,children:(0,y.jsx)(K,{timelineObject:e})}):null}generateHTMLFromAd(e){const{appContext:{features:t},adContext:{adPlacementConfiguration:s},location:n=$.E.DASHBOARD,streamPosition:i}=this.props;if((0,be.MA)(e)&&e.clientSideAdType in this.safeFrameScriptMapping){const o=je(e.clientSideAdType,s,n,i,t);return this.safeFrameScriptMapping[e.clientSideAdType](o)}return e&&this.isAdmAd(e)&&"string"==typeof e.adm?null==e?void 0:e.adm:""}generateSafeFrameConfig(){const{supplyOpportunityInstanceId:e,ad:t}=this.props;let s;return s=t&&this.isAdmAd(t)?{w:(null==t?void 0:t.width)||"100%",h:(null==t?void 0:t.height)||"auto"}:{w:oe(Ne[t.clientSideAdType]||ne().postWidth),h:(0,be.MA)(t)&&_e[t.clientSideAdType]?Math.ceil(_e[t.clientSideAdType]*oe(Ne[t.clientSideAdType])):0},new ge({id:((null==t?void 0:t.supplyOpportunityInstanceId)||e)+((null==t?void 0:t.id)||t.adInstanceId),dest:((null==t?void 0:t.supplyOpportunityInstanceId)||e)+((null==t?void 0:t.id)||t.adInstanceId),supports:{"exp-push":1},...s})}isAdmAd(e){return!!(0,be.ou)(e)||!(!(0,be.lR)(e)||e.adProviderId!==be.Rd.TripleliftBanner)}}const Te=(0,R.X9)(Ae,{appContext:!0,adContext:!0});var Se=s(26255),ke=s(171);let Oe;!function(e){e.NO_FILL="no_fill",e.OTHER="other"}(Oe||(Oe={}));const Pe={[be.db.Google]:"googleNativeDashboardHydraSource",[be.db.Teads]:"teadsHydraSource",[be.db.Flurry]:"flurryHydraSource",[be.db.OneMobile]:"oneMobileHydraSource",[be.db.IponWeb]:"iponwebMrecHydraSource",[be.db.Post]:"",[be.Rd.TripleliftBanner]:"",[be.Rd.Smart]:"smartHydraSource"};class Ee extends l.Component{constructor(){super(...arguments),i()(this,"state",{currentIndex:0,currentClientSideAdType:void 0,served:!1}),i()(this,"adTypeInitMapping",{[be.db.Google]:()=>{},[be.db.Teads]:e=>{try{const{timelineObject:{supplyOpportunityInstanceId:t},appContext:{logEvent:s,features:{teadsLivePlacementNoCollapse:n}}}=this.props,{currentAd:i}=this.state,o=JSON.parse(e.data);if(!t||!o.tumblrMsg)return;switch(t){case o.tumblrMsg[L.NoAd]:return void(n||this.handleNoAdResponse(be.db.Teads));case o.tumblrMsg[L.AdServed]:return void this.handleSuccessfulAdResponse();case o.tumblrMsg[L.TeadsImpression]:s(this.generateAnalyticsEvent({eventName:D.ForeignImpression,ad:i}))}}catch(e){return}},[be.db.OneMobile]:e=>{try{const t=JSON.parse(e.data),{supplyOpportunityInstanceId:s}=this.props.timelineObject;if(!s)return;if(s===t.oneMobileMsg[L.NoAd])this.handleNoAdResponse(be.db.OneMobile)}catch(e){return}},[be.db.Flurry]:e=>{try{const t=JSON.parse(e.data),{timelineObject:{supplyOpportunityInstanceId:s}}=this.props;if(!s)return;switch(s){case t.flurryMsg[L.NoAd]:return void this.handleNoAdResponse(be.db.Flurry);case t.flurryMsg[L.AdServed]:return void this.handleSuccessfulAdResponse();case t.flurryMsg[L.AdError]:return void this.handleNoAdResponse(be.db.Flurry,t.flurryMsg.errorMsg)}}catch(e){return}}}),i()(this,"fallbackAdMapping",{[$.E.RIGHT_RAIL]:()=>{const{appContext:{features:{wordAdsWebAdSource:e}}}=this.props;return e?{Component:ke.ZP,props:{supplyProviderId:this.props.supplyProviderId}}:null},[$.E.EXPLORE]:()=>{const{appContext:{features:{wordAdsWebAdSource:e}}}=this.props;return e?{Component:ke.ZP,props:{supplyProviderId:this.props.supplyProviderId}}:null},[$.E.COMMUNITY_HUB]:()=>{const{appContext:{features:{wordAdsWebAdSource:e}}}=this.props;return e?{Component:ke.ZP,props:{supplyProviderId:this.props.supplyProviderId}}:null}}),i()(this,"getAdToRender",(0,r.Z)(((e,t,s)=>{const n=t||s;return(null==n?void 0:n.id)===(null==e?void 0:e.id)?{...n,...e}:n}))),i()(this,"onBeforeUnload",(()=>{var e;const{appContext:{logEvent:t},timelineObject:s}=this.props;if(this.detachAdEventHandlers(this.state.currentAd),0===this.state.currentIndex&&!this.state.currentAd&&((0,be.uz)(s)||null!=s&&null!==(e=s.resources)&&void 0!==e&&e.backfill)){var n;const e=(0,be.uz)(s)?s:null===(n=s.resources)||void 0===n?void 0:n.backfill;t(this.generateAnalyticsEvent({eventName:Z.AdDropped,ad:e,dropReason:B.WaterfallNotUsed}),{sendPayloadImmediately:!0})}})),i()(this,"handleSuccessfulAdResponse",(()=>{const{currentAd:e,currentIndex:t}=this.state,{appContext:{logEvent:s},adContext:{adPlacementConfiguration:n,hydraConfigInstanceId:i},setProvideEventDetails:o,setImpressionsEnabled:a,timelineObject:r}=this.props;let l,d;!(0,be.uz)(r)&&r.resources?(l=r.resources.clientSideAds,d=r.resources.backfill):(l=[],d=r);const c=l.length,p=this.getCurrentAdRequest();if(p&&(p.setEndTime(),p.generateAdInstance()),(0,be.uz)(r)||(s(this.generateAnalyticsEvent({eventName:M.AdRequest,ad:e,adRequestStatus:H.AdFilled})),o((()=>this.generateAnalyticsEvent({eventName:D.Impression,ad:e}).eventDetails)),a(!0),s(this.generateAnalyticsEvent({eventName:Z.SupplyOpportunityFilled,ad:e}))),(0,be.uz)(e)){const t=this.state.fillId||(0,Se.Z)();U(s,n,e,i,t),this.setState({fillId:t,served:!0})}else this.setState({served:!0});t<=c&&d&&!(0,be.uz)(r)&&s(this.generateAnalyticsEvent({eventName:Z.AdDropped,ad:d,dropReason:B.BackfillNotNeeded}))})),i()(this,"handleNoAdResponse",((e,t)=>{const{logEvent:s}=this.props.appContext,{currentClientSideAdType:n,currentAd:i}=this.state,o=this.getCurrentAdRequest();null==o||o.setEndTime(),null==o||o.setErrorDetails(t?{error_type:Oe.OTHER,provider_error_message:t}:{error_type:Oe.NO_FILL}),s(this.generateAnalyticsEvent({eventName:M.AdRequest,ad:i,...t?{adRequestStatus:H.AdError}:{adRequestStatus:H.NoAd}})),n===e&&this.getNextAd()})),i()(this,"generateAnalyticsEvent",(e=>{const{isInstream:t,timelineObject:s,supplyProviderId:n,rootSupplyOpportunityId:i,refresh:o,adContext:{adPlacementConfiguration:a,hydraConfigInstanceId:r,adProviderInstanceIdMap:l},appContext:{features:d},dashboardContext:{tabId:c}}=this.props,{streamGlobalPosition:p}=s,{eventName:u,ad:m,adRequestStatus:h,dropReason:g=B.BackfillNotNeeded}=e,v={tab:c,refresh:o,root_supply_opportunity_instance_id:i,...a&&{hydra_signature:a.signature,hydra_config_instance_id:r}},b=this.getCurrentAdRequest(),x=n||$.E.DASHBOARD;switch(Object.values(M).includes(u)||(v.supply_opportunity_instance_id=s.supplyOpportunityInstanceId,v.supply_provider_id=x,t&&(v.stream_session_id=s.streamSessionId,v.stream_global_position=p)),u){case Z.MediationOpportunityMissed:v.supply_request_id=null==s?void 0:s.supplyRequestId;break;case Z.AdDropped:((0,be.N0)(m)||(0,be.uz)(m)||(0,be.ou)(m))&&(v.ad_provider_id=m.adProviderId,v.ad_provider_placement_id=m.adProviderPlacementId,v.ad_provider_foreign_placement_id=m.adProviderForeignPlacementId,v.ad_provider_instance_id=m.adProviderInstanceId,v.ad_request_id=m.adRequestId,v.supply_opportunity_instance_id=s.supplyOpportunityInstanceId,v.mediation_candidate_id=m.mediationCandidateId,v.ad_instance_id=m.adInstanceId,v.ad_instance_age=this.getAdInstanceAge(m),v.supply_request_id=s.supplyRequestId,v.supply_provider_id=s.supplyProviderId,v.drop_reason=g,v.is_tumblr_sponsored_post=m.isTumblrSponsoredPost?1:0,v.placement_id=m.placementId);break;case D.ForeignImpression:case Z.MediationCandidateConsideration:if((0,be.MA)(m)||(0,be.ou)(m)){if(v.ad_provider_id=(0,be.ou)(m)?m.adProviderId:m.clientSideAdType,v.is_tumblr_sponsored_post=0,(0,be.MA)(m)){const e=Pe[v.ad_provider_id];a&&e&&(v.ad_provider_placement_id=e,v.ad_provider_foreign_placement_id=je(m.clientSideAdType,a,x,p,d),v.ad_provider_instance_id=l[e])}m.placementId&&(v.placement_id=m.placementId)}(0,be.uz)(m)&&(v.ad_provider_id=m.adProviderId,v.is_tumblr_sponsored_post=1,v.ad_provider_placement_id=m.adProviderPlacementId,v.ad_provider_foreign_placement_id=m.adProviderForeignPlacementId,v.ad_provider_instance_id=m.adProviderInstanceId),v.mediation_candidate_id=null==m?void 0:m.mediationCandidateId,v.supply_request_id=s.supplyRequestId,v.supply_provider_id=x;break;case Z.SupplyOpportunityFilled:{if((0,be.MA)(m)||(0,be.ou)(m)){if(m.placementId&&(v.placement_id=m.placementId),v.ad_provider_id=(0,be.ou)(m)?m.adProviderId:m.clientSideAdType,v.is_tumblr_sponsored_post=0,(0,be.MA)(m)){const e=Pe[v.ad_provider_id];a&&(v.ad_provider_placement_id=e,v.ad_provider_foreign_placement_id=je(m.clientSideAdType,a,x,p,d),v.ad_provider_instance_id=l[e])}v.ad_request_id=null==b?void 0:b.adRequestId,v.mediation_candidate_id=m.mediationCandidateId,null!=b&&b.adInstances&&b.adInstances[0]&&(v.ad_instance_id=b.adInstances[0].ad_instance_id,v.ad_instance_age=this.getAdInstanceAge(m)),v.supply_request_id=s.supplyRequestId,v.supply_provider_id=x,m.placementId&&(v.placement_id=m.placementId)}const e=(0,Se.Z)();v.fill_id=e,this.setState({fillId:e});break}case D.Impression:if((0,be.MA)(m)||(0,be.ou)(m)){if(v.ad_provider_id=(0,be.ou)(m)?m.adProviderId:m.clientSideAdType,v.is_tumblr_sponsored_post=0,(0,be.MA)(m)){const e=Pe[v.ad_provider_id];a&&(v.ad_provider_foreign_placement_id=je(m.clientSideAdType,a,x,p,d),v.ad_provider_placement_id=e,v.ad_provider_instance_id=l[e])}v.mediation_candidate_id=m.mediationCandidateId,null!=b&&b.adInstances[0]&&(v.ad_instance_id=b.adInstances[0].ad_instance_id,v.ad_instance_age=this.getAdInstanceAge(m)),v.supply_request_id=s.supplyRequestId,v.supply_provider_id=s.supplyProviderId}if(this.state.fillId)v.fill_id=this.state.fillId;else{const e=(0,Se.Z)();v.fill_id=e,this.setState({fillId:e})}v.ad_request_id=null==b?void 0:b.adRequestId;break;case M.AdRequest:if((0,be.MA)(m)||(0,be.ou)(m)){if(v.ad_provider_id=(0,be.ou)(m)?m.adProviderId:m.clientSideAdType,(0,be.MA)(m)){const e=Pe[v.ad_provider_id];a&&(v.ad_provider_foreign_placement_id=je(m.clientSideAdType,a,x,p,d),v.ad_provider_placement_id=e,v.ad_provider_instance_id=l[e])}v.ad_instances=null==b?void 0:b.adInstances}v.ad_request_is_success=h===H.AdError?0:1,v.ad_request_id=null==b?void 0:b.adRequestId,v.ads_returned=h===H.AdFilled?1:0,v.ad_request_latency=b&&b.requestEndTime-b.requestStartTime,v.ads_requested=1,h===H.AdError&&(v.ad_request_error_detail=null==b?void 0:b.errorDetails)}return{eventName:u,eventDetails:v}}))}componentDidMount(){window.addEventListener("beforeunload",this.onBeforeUnload),this.determineAdFetch()}componentWillUnmount(){window.removeEventListener("beforeunload",this.onBeforeUnload),this.onBeforeUnload()}componentDidUpdate(e){const{appContext:{features:{rightRailFallback:t}}}=this.props;this.props.timelineObject.supplyOpportunityInstanceId!==e.timelineObject.supplyOpportunityInstanceId&&this.setState((e=>({currentIndex:0,...t&&{previousAd:e.currentAd||e.previousAd}})),(()=>this.determineAdFetch()))}render(){const{children:e,supplyProviderId:t=$.E.DASHBOARD,timelineObject:s}=this.props,{streamGlobalPosition:n,supplyOpportunityInstanceId:i}=s,{currentClientSideAdType:o,currentAd:a,served:r}=this.state,l=this.getAdToRender(s,a),d=this.getFallBackAd();return(l||d)&&(null==e?void 0:e({supplyOpportunityInstanceId:i,location:t,streamPosition:t===$.E.DASHBOARD?n:void 0,ad:l,fallbackAd:d||{},adServed:r,onFilled:this.handleSuccessfulAdResponse,onEmpty:()=>{this.handleNoAdResponse(o)},onError:()=>{this.handleNoAdResponse(o)}}))}getNextAd(){var e,t;const{currentAd:s,currentIndex:n}=this.state,{timelineObject:i,appContext:{logEvent:o}}=this.props,a=(0,be.uz)(i)?[i]:(null===(e=i.resources)||void 0===e?void 0:e.clientSideAds)||[],r=(0,be.ou)(i)?i:null===(t=i.resources)||void 0===t?void 0:t.backfill,l=a.length;this.detachAdEventHandlers(s);const d=n===l?r:n<l?a[n]:void 0;o(this.generateAnalyticsEvent(d?{eventName:Z.MediationCandidateConsideration,ad:d}:0!==a.length||r?{eventName:Z.MediationOpportunityMissed}:{eventName:Z.SupplyOpportunityMissed}));const c={currentIndex:n+1,currentClientSideAdType:d?d.clientSideAdType||be.db.Post:void 0,currentAd:d||void 0};!d||(0,be.MA)(d)&&this.adTypeInitMapping[d.clientSideAdType]||(c.served=!0),this.setState(c,(()=>{(0,be.uz)(d)&&this.handleSuccessfulAdResponse()})),(0,be.uz)(d)||(this.initializeAdEventHandlers(d),this.initializeAdRequest(d))}getFallBackAd(){const{supplyProviderId:e,isApproachingView:t}=this.props;var s,n;return t()&&e&&e in this.fallbackAdMapping?null===(s=(n=this.fallbackAdMapping)[e])||void 0===s?void 0:s.call(n):null}initializeAdRequest(e){const{adRequestContext:{generateNewAdRequest:t,clearAdRequest:s},timelineObject:{supplyOpportunityInstanceId:n}}=this.props;e?t(n,(0,be.ou)(e)?this.handleSuccessfulAdResponse:void 0):s(n)}initializeAdEventHandlers(e){if(!(0,be.MA)(e))return;const t=this.adTypeInitMapping[e.clientSideAdType];t&&window.addEventListener("message",t)}determineAdFetch(){const{isApproachingView:e,setApproachingViewCallback:t}=this.props;e()?this.getNextAd():t((()=>this.getNextAd()))}detachAdEventHandlers(e){if(!(0,be.MA)(e))return;const t=this.adTypeInitMapping[e.clientSideAdType];t&&window.removeEventListener("message",t)}getCurrentAdRequest(){const{timelineObject:{supplyOpportunityInstanceId:e},adRequestContext:{currentAdRequests:t}}=this.props;return t[e]}getAdInstanceAge(e){var t;return(0,be.MA)(e)?null===(t=this.getCurrentAdRequest())||void 0===t?void 0:t.getAdInstanceAge():(0,be.N0)(e)||(0,be.ou)(e)?(new Date).getTime()-e.adInstanceCreatedTimestamp:void 0}}const Re=(0,R.X9)(Ee,{appContext:!0,adContext:!0,adRequestContext:!0,dashboardContext:!0}),Ze=(0,I.s)(Re,!0);var Be=s(86179),De=s(65214),Me=s(42580),Fe=s(64633),Le=s(20943),He=s(80328);const $e={tagInfoRow:"u8J1W",tagLink:"MgGEG",tagImage:"ZqH9E",tagDescription:"wVZAK",tagName:"hIUaH",postsCount:"M523y",tagFloatingButton:"hc4QI"},Ue=(0,m.HJ)((function(e){let{timelineObject:t,appContext:{apiFetch:s,isLoggedIn:n,_t:i}}=e;const{logEvent:o}=(0,m.bp)(),{pathname:a}=(0,Be.TH)(),[r,d]=(0,l.useState)(void 0),h=r??t.isFollowed,g=t.newPostsCount,v=t.newPostsCountInt,b=t.followersCount??"0",x=t.followersCountInt??0,f=!!t.showFollowersCount,j=!!t.showNewPostsCount;let C=null;return j?C=(0,y.jsxs)(p.M2,{comment:"The number of posts this topic has had recently. Placeholder is the count of posts",exemptNumberKeyFromParamCheck:!0,components:{b:(0,y.jsx)("b",{})},params:{newPostsCount:g},number:v,children:[(0,y.jsx)(p.CJ,{children:"[newPostsCount] recent post"}),(0,y.jsx)(p.CN,{children:"[b][newPostsCount][/b] recent posts"})]}):f&&(C=(0,y.jsxs)(p.M2,{comment:"The number of followers this topic has. Placeholder is the count of followers",exemptNumberKeyFromParamCheck:!0,components:{b:(0,y.jsx)("b",{})},params:{followersCount:b},number:x,children:[(0,y.jsx)(p.CJ,{children:"[followersCount] follower"}),(0,y.jsx)(p.CN,{children:"[b][followersCount][/b] followers"})]})),(0,y.jsxs)("div",{className:$e.tagInfoRow,children:[(0,y.jsxs)(c.Z,{className:$e.tagLink,tagName:t.hubName,onClick:()=>{o({eventName:u.J.SearchResultsTagElementTap,eventDetails:{tag:t.hubName}})},children:[(0,y.jsx)("div",{className:$e.tagImage,children:(0,y.jsx)(k.pC,{imageResponse:[{url:t.image,width:ne().desktopPostAvatarSize,height:ne().desktopPostAvatarSize}],isSquare:!0,altText:t.hubName,sizes:`${ne().desktopPostAvatarSize}px`})}),(0,y.jsxs)("div",{className:$e.tagDescription,children:[(0,y.jsxs)("div",{className:$e.tagName,children:["#",t.hubName]}),(0,y.jsx)("div",{className:$e.postsCount,children:C})]})]}),(0,y.jsx)("div",{className:$e.tagFloatingButton,children:(0,y.jsx)("a",{className:$e.tagFollowButton,onClick:e=>{n&&(null==e||e.preventDefault(),h?(0,Le.to)(s,t.hubName,"search").fetch().then((()=>d(!1))):(0,Le.Wr)(s,t.hubName,"search").fetch().then((()=>d(!0))))},href:(0,De.gZ)({formToShow:Me.c.Register},{redirect_to:a,source:(0,He.Z)(Fe.yy.HubsRelatedTagsFollowButton)}),children:i(h?"Unfollow":"Follow")})})]},t.id)}));var We=s(51197),ze=s(79615),qe=s(64560),Ge=s(87517),Ve=s(51400),Je=s(45051);const Ke="Te4Pg",Ye="RUFdS",Qe="YEJRy",Xe="GVCZ4",et="CFBrV",tt="bdzlZ";class st extends l.Component{constructor(){super(...arguments),i()(this,"renderOption",((e,t,s,n)=>{const{text:i,displayType:o,link:r}=e,{type:l,href:d}=r,c={className:a()(Xe,{[et]:o===be.pI.Selected,[tt]:o===be.pI.Discreet}),key:i,label:i},p={};s&&t&&(p.backgroundColor=o===be.pI.Selected?n:t,p.color=o===be.pI.Selected?t:n);let u=null;const m=()=>{this.onActionClick(l,e)};switch(l){case qe.U.Web:u=(0,y.jsx)("a",{...c,href:d,target:"_blank",rel:"noopener",onClick:m,style:p,children:i});break;case qe.U.Action:u=(0,y.jsx)(ze.Z,{...c,style:p,onClick:m,children:i})}return u})),i()(this,"getDismissOnClick",(e=>e.onTap===be.sq.Dismiss?this.dismiss:Je.Z)),i()(this,"dismiss",(e=>{const{timelineObject:t,timelineContext:{onRemoveTimelineObject:s},toastContext:{toggleToast:n}}=this.props;null==s||s({id:t.id}),null!=e&&e.response&&(null==n||n(e.response.message))})),i()(this,"onActionClick",((e,t)=>{const s=(0,Ve.w)(this.props.timelineObject),{apiFetch:n}=this.props.appContext;switch(this.logOptionEvent(t.onTap===be.sq.Dismiss,t.text,null==s?void 0:s.bannerId),e){case qe.U.Web:this.getDismissOnClick(t)();break;case qe.U.Action:{const e=(0,Ge.Z)(t.link,n,this.getDismissOnClick(t));e&&e()}}})),i()(this,"logOptionEvent",((e,t,s)=>{this.props.appContext.logEvent({eventName:u.J.BannerActionClick,eventDetails:{is_dismiss:e,action_label:t,banner_id:s}})}))}render(){const{timelineObject:e}=this.props,t=(0,Ve.w)(e);if(!t)return null;const{title:s}=t,n={};return t.backgroundColor&&t.textColor&&(n.backgroundColor=t.backgroundColor,n.color=t.textColor),(0,y.jsxs)("div",{className:Ke,style:n,children:[(0,y.jsx)("h3",{className:Ye,children:s}),this.renderOptions()]})}renderOptions(){const{timelineObject:e}=this.props,{options:t,buttonColor:s,backgroundColor:n,textColor:i}=(0,Ve.w)(e);return t&&0!==t.length?(0,y.jsx)("div",{className:Qe,children:t.map((e=>this.renderOption(e,s,n,i)))}):null}}const nt=(0,R.X9)(st,{appContext:!0,toastContext:!0,timelineContext:!0}),it=(0,I.s)(nt);var ot=s(98384);const at={answerTimeBanner:"tDrb8",leftContent:"r46S_",image:"EhYXO"},rt=(0,I.s)((e=>{var t;let{timelineObject:{text:s,iconUrl:n,links:i,placementId:o},appContext:{logEvent:a}}=e;const r=(0,l.useCallback)((()=>{a({eventName:u.J.Click,eventDetails:{placement_id:o}})}),[a,o]),d=n?[{url:n,height:64,width:64}]:null;return(0,y.jsxs)("a",{className:at.answerTimeBanner,href:null===(t=i.destination)||void 0===t?void 0:t.href,target:"_blank",rel:"noopener",onClick:r,children:[(0,y.jsxs)("div",{className:at.leftContent,children:[d&&(0,y.jsx)("figure",{className:at.image,children:(0,y.jsx)(k.pC,{sizes:"25px",imageResponse:d,isSquare:!0})}),(0,y.jsx)("div",{className:at.description,children:s})]}),(0,y.jsx)("div",{className:at.caret,children:(0,y.jsx)(ot.iL,{colors:{primary:g().paletteTransparentWhite65},size:{height:13,width:13}})})]})}));var lt=s(73792),dt=s(57475),ct=s(33264);const pt="wtNDp",ut="r6SOU",mt=e=>{let{className:t,rowTheme:s,avatar:n,avatarShape:i,blogName:o,blogTitle:r,blogUrl:l,onFollow:d,isFollowed:c}=e;const p=(0,y.jsx)(dt.Z,{following:!!c,blogName:o,blogUrl:l,onFollow:d,className:a()(ct.Z.blogRowFollowButton,ut),showUnfollowText:!0}),u={avatar:n,avatarShape:i,blogName:o,blogTitle:r,blogUrl:l};return(0,y.jsx)("div",{className:a()(pt,t),children:(0,y.jsx)(lt.ZP,{...u,floatingButton:p,theme:s||lt.CK.Dark,openBlogCard:lt.T6.Body,isMobile:!1})})},ht="l6TJ6",gt=(0,m.HJ)((function(e){var t;let{timelineObject:s,appContext:{isLoggedIn:n}}=e;const[i,o]=(0,l.useState)(void 0),a=s.resources[0];if(!a)return null;const r=i??a.followed;return(0,y.jsx)(mt,{className:ht,avatar:a.avatar,avatarShape:null===(t=a.theme)||void 0===t?void 0:t.avatarShape,blogName:a.name,blogTitle:a.title,blogUrl:a.url,isFollowed:r,onFollow:()=>{n&&o(!r)}},s.id)})),vt=(0,m.HJ)((function(e){var t;let{timelineObject:s,appContext:{isLoggedIn:n}}=e;const[i,o]=(0,l.useState)(void 0),a=s.resources[0];if(!a)return null;const r=i??a.followed;return(0,y.jsx)(mt,{avatar:a.avatar,avatarShape:null===(t=a.theme)||void 0===t?void 0:t.avatarShape,blogName:a.name,blogTitle:a.title,blogUrl:a.url,isFollowed:r,onFollow:()=>{n&&o(!r)},rowTheme:lt.CK.BlogTheme},s.id)}));var bt=s(30420);const xt={ctaCard:"YPDbZ",ctaContent:"vUbJS",withImage:"Qb2yW",text:"oPeFl",textPositionTop:"c49bG",textPositionBottom:"u0WK9",button:"KQzUb",ctaAction:"ZGCkJ"},ft=e=>{var t,s,n;let{ctaCard:i,onActionClick:o,isDoingAction:r=!1}=e;const l=!(null===(t=i.image)||void 0===t||!t.response),d=(null===(s=i.image)||void 0===s?void 0:s.textPosition)||be.Bk.Middle;return(0,y.jsxs)("div",{className:xt.ctaCard,children:[(0,y.jsxs)("div",{className:a()(xt.ctaContent,{[xt.withImage]:l,[xt.textPositionTop]:d===be.Bk.Top,[xt.textPositionMiddle]:d===be.Bk.Middle,[xt.textPositionBottom]:d===be.Bk.Bottom}),children:[(null===(n=i.image)||void 0===n?void 0:n.response)&&(0,y.jsx)(k.Sw,{imageResponse:i.image.response,altText:i.text,sizes:""}),(0,y.jsx)("p",{className:xt.text,children:i.text})]}),(0,y.jsx)(ze.Z,{disabled:r,className:xt.ctaAction,onClick:o,wrapperClassName:xt.button,children:i.buttonText})]})};var jt=s(74446);const Ct="AYRVj",yt="jCB92",wt="FYQEO",It="HIc07",_t=e=>{let{timelineObject:{campaignName:t,dismissal:s,elements:n,id:i}}=e;const[o,r]=(0,l.useState)(!1),[d,c]=(0,l.useState)(0),{_t:p,logEvent:g,apiFetch:v}=(0,m.bp)(),{onRemoveTimelineObject:b}=(0,jt.i)(),x=()=>n[d],f=e=>{g({eventName:u.J.TimeLineCTAClick,eventDetails:{is_dismissal:e,campaign_name:t,card_index:d}})},j=()=>b({id:i}),C=()=>{const{action:e}=x();if(f(!1),e)if(e.type===qe.U.Web){const e=s.options[0];w(e.link,I)}else w(e,_);else _()},w=(e,t)=>{r(!0),(0,Ge.Z)(e,v,t)()},I=()=>{const{action:e}=x(),{href:t}=e;t&&window.location.assign(t)},_=()=>{n.length===d+1?j():(r(!1),c(d+1))};return(0,y.jsxs)("div",{className:Ct,children:[n.map(((e,t)=>(0,y.jsx)("div",{className:a()(yt,{[wt]:t===d}),children:(0,y.jsx)(ft,{isDoingAction:o,ctaCard:e,onActionClick:C})},t))),(0,y.jsx)(ze.Z,{disabled:o,className:It,onClick:()=>{const e=((e,t)=>{const s={...e.bodyParams,cardIndex:t.toString()};return{...e,bodyParams:s}})(s.options[0].link,d);f(!0),w(e,j)},label:p("Close"),children:(0,y.jsx)(bt.Z,{colors:{primary:h.paletteTransparentWhite13}})})]})};var Nt=s(13911);const At=s.p+"src/assets/images/tour-guide/heart border 1-4729e853.svg",Tt=s.p+"src/assets/images/tour-guide/heart border 2-75fd75aa.svg",St=s.p+"src/assets/images/tour-guide/reblog border 1-c1d9d794.svg",kt=s.p+"src/assets/images/tour-guide/reblog border 2-c93a5638.svg";var Ot=s(34570),Pt=s(56305);const Et={celebration:"t3dLo",heading:"D1IY6",body:"y7aw1",button:"ZKWeK"},Rt=e=>{let t,s,{timelineObject:{celebrationType:n,title:i,body:o,button:a}}=e;const{logEvent:r}=(0,m.bp)();switch(n){case"first_like":t=At,s=Tt;break;case"first_reblog":t=St,s=kt}return(0,y.jsxs)("div",{className:Et.celebration,children:[t&&(0,y.jsx)("img",{className:Et.topImage,alt:"",src:t}),(0,y.jsx)("h1",{className:Et.heading,children:(0,y.jsx)(Ot.Z,{text:i})}),(0,y.jsx)("p",{className:Et.body,children:o}),a&&(0,y.jsx)(Pt.Z,{onClick:()=>{r({eventName:u.J.CelebrationCTAClicked,eventDetails:{celebrationType:n}})},href:a.links.tap.href,className:Et.button,showBlogCard:!1,children:a.label}),s&&(0,y.jsx)("img",{className:Et.bottomImage,alt:"",src:s})]})};var Zt=s(20583);const Bt="r64Rl",Dt="ndiCy",Mt="h6feK",Ft=e=>{let{timelineObject:t}=e;const{lineColor:s,labelContentBlock:n}=t,i={borderColor:s};return(0,y.jsxs)("div",{className:Bt,children:[(0,y.jsx)("div",{className:Mt,style:i}),(0,y.jsx)("div",{className:Dt,children:(0,Zt.Q7)(n.text,n.formatting)}),(0,y.jsx)("div",{className:Mt,style:i})]})};var Lt=s(5700);const Ht="XJ7bf",$t="f3f_v",Ut=e=>{let{location:t=$.E.DASHBOARD,ad:s,adServed:n,supplyOpportunityInstanceId:i,streamPosition:o,presentationStyle:r,onFilled:l,onEmpty:d,onError:c}=e;return(0,y.jsxs)("div",{className:a()(Ht,{[$t]:!n}),children:[s&&!(0,be.uz)(s)&&(0,y.jsx)(O.Z,{postState:Lt.hA.Published,showsFollowButton:!1,showsSponsored:!0,isAd:!0,isFollowingReblogger:!1}),(0,y.jsx)(Te,{location:t,streamPosition:o,ad:s,supplyOpportunityInstanceId:i,presentationStyle:r,onFilled:l,onEmpty:d,onError:c})]})};var Wt=s(1445);const zt="hMigf",qt="gFol4",Gt="R5Hde",Vt="zm_kH",Jt="vVKEw",Kt=e=>{let{timelineObject:{columnCount:t,position:s,elements:n,parentPostId:i},onClick:o}=e;return(0,y.jsx)("div",{className:a()(zt,{[qt]:"group_top"===s,[Vt]:"group_middle"===s,[Gt]:"group_bottom"===s}),style:{gridTemplateColumns:`repeat(${t}, 1fr)`},children:n.map((e=>(0,y.jsx)(Wt.Z,{onClick:o,chiclet:e,className:Jt,parentPostId:i},e.id)))})};var Yt=s(1142),Qt=s(38113),Xt=s(43074),es=s(21148),ts=s(90655),ss=s(26963),ns=s(68715);const is="pafF1",os=()=>{const{logEvent:e}=(0,m.bp)(),t=(0,Be.TH)(),s=(0,Be.UO)(),n=(0,ss.b)(t.search),i=(0,es.Ud)({params:s,path:t.pathname},n,Xt.kq),o=(0,ns.w)({...Xt.kq,searchTerm:i.searchTerm,selectedTime:ts.Ak.AllTime},Xt.kq);return(0,y.jsx)(Qt.Z,{to:o,className:is,onClick:()=>{e({eventName:u.J.SearchResultsClearFiltersCtaTap})},children:(0,y.jsx)(p.ZP,{comment:"Action to reset the filters on the search page",children:"Clear filters"})})};var as=s(4870),rs=s(17709),ls=s(18042),ds=s(9557),cs=s(37236),ps=s(67023),us=s(43684),ms=s(88926),hs=s(5136),gs=s(92023),vs=s(53);const bs="yH8FA",xs="D8y52",fs=e=>{let{subscriberInfo:{planOwner:t,blogName:s}}=e;const{_c:n,features:{newBlogViewRoutes:i}}=(0,m.bp)(),{openConversationWindow:o}=(0,vs.h)();return(0,y.jsxs)("div",{className:bs,children:[(0,y.jsx)(hs.Z,{linkTo:(0,gs.SS)({peeprBlogname:s},i),keepDropdownOpenAfterClick:!1,className:xs,children:n("Menu item to view the blog","View Blog")},"View blog"),(0,y.jsx)(hs.Z,{onClick:()=>{o({selectedBlogName:t,otherParticipantName:s})},keepDropdownOpenAfterClick:!0,className:xs,children:n("Menu item to message blog","Message")},"Message")]})},js="j99wS",Cs="bN_1q",ys="elCGV",ws="xWYkn",Is="d5xXI",_s="uF5P9",Ns="tGth_",As="EWLNr",Ts=(e,t)=>{const{price:s,currencyCode:n,periodAbbreviation:i}=e;return`${(0,ms.T4)(s,n,t)}/${i}`},Ss=(e,t)=>{const{startTime:s}=e;return t(new Date(1e3*s),ps.Cx.Notes)},ks=e=>{let{subscriberInfo:t,subscriberInfo:{avatar:s,blogName:n,subscription:i}}=e;const{_getLocaleDateString:o,_getPriceInCurrency:a}=(0,m.bp)();return(0,y.jsxs)("div",{className:js,children:[(0,y.jsxs)("div",{className:Cs,children:[(0,y.jsx)(rs.Z,{className:ys,avatarShape:cs.o.Square,imageResponse:s,dimension:se.radarAvatarSize,name:n,showBlogCard:!0}),(0,y.jsx)(Pt.Z,{blogName:n,showBlogCard:!0,children:(0,y.jsx)("span",{className:ws,children:n})})]}),(0,y.jsx)("span",{className:Is,children:Ss(i,o)}),(0,y.jsx)("span",{className:_s,children:Ts(i,a)}),(0,y.jsx)("div",{className:Ns,children:(0,y.jsx)(ds.Z,{type:us.Oj.Click,render:()=>(0,y.jsx)(fs,{subscriberInfo:t}),position:us.I2.BottomEnd,width:"216px",height:"auto",isChromeless:!0,children:(0,y.jsx)(ze.Z,{wrapperClassName:As,children:(0,y.jsx)(ls.b,{colors:{primary:g().paletteGray65}})})})})]})},Os="HdJYO",Ps="fdt9t",Es="mncDp",Rs="B73mx",Zs="Z8zJd",Bs="FzIve",Ds="g8mTb",Ms="kmBcT",Fs=e=>{let{status:t}=e;switch(t){case as.Ti.Cancelled:return(0,y.jsx)(p.ZP,{children:"Cancelled"});case as.Ti.OnHold:return(0,y.jsx)(p.ZP,{children:"On-Hold"});default:return(0,y.jsx)(p.ZP,{children:"Expired"})}},Ls=e=>{let{subscriberInfo:t,subscriberInfo:{avatar:s,blogName:n,subscription:i}}=e;const{status:o}=i;return(0,y.jsxs)("div",{className:Os,children:[(0,y.jsxs)("div",{className:Ps,children:[(0,y.jsx)(rs.Z,{className:Es,avatarShape:cs.o.Square,imageResponse:s,dimension:se.radarAvatarSize,name:n,showBlogCard:!0}),(0,y.jsx)(Pt.Z,{blogName:n,showBlogCard:!0,children:(0,y.jsx)("span",{className:Rs,children:n})})]}),(0,y.jsx)("span",{className:Zs,children:(0,ms.o$)(i,"endTime")}),(0,y.jsx)("span",{className:Bs,children:(0,y.jsx)(Fs,{status:o})}),(0,y.jsx)("div",{className:Ds,children:(0,y.jsx)(ds.Z,{type:us.Oj.Click,render:()=>(0,y.jsx)(fs,{subscriberInfo:t}),position:us.I2.BottomEnd,width:"216px",height:"auto",isChromeless:!0,children:(0,y.jsx)(ze.Z,{wrapperClassName:Ms,children:(0,y.jsx)(ls.b,{colors:{primary:g().paletteGray65}})})})})]})},Hs=e=>{let{timelineObject:t}=e;const{subscription:{status:s}}=t;return s===as.Ti.Active||s===as.Ti.Pending||s===as.Ti.PendingCancel?(0,y.jsx)(ks,{subscriberInfo:t}):(0,y.jsx)(Ls,{subscriberInfo:t})};var $s=s(50049),Us=s(59514),Ws=s(6790),zs=s(73078),qs=s(51416);const Gs="UPJCY",Vs="RKpvd",Js="yi1kb",Ks="_IvWq",Ys="dnt9O",Qs=e=>{let{onDismiss:t,onCancelClick:s,memberPerks:n,blogName:i,subscription:o}=e;const{_t:a}=(0,m.bp)(),r=(0,ms.o$)(o,"nextBillingTime");return(0,y.jsxs)(Us.Z,{centerContent:!0,onGlassClick:t,children:[(0,y.jsx)(Ws.ZP,{disable:Ws.z9}),(0,y.jsx)(zs.Z,{className:Gs,title:a("Now wait just a minute"),body:(0,y.jsxs)("div",{children:[a("Are you sure you want to stop supporting %1$s? You'll miss out on exclusive content plus...",[i]),(0,y.jsx)("div",{className:Vs,children:null==n?void 0:n.map(((e,t)=>(0,y.jsx)("span",{className:Js,children:(0,y.jsx)(qs.Z,{className:Ks,children:e})},t)))})]}),buttons:[{text:a("Nevermind"),onClick:t,buttonStyle:zs.X.Confirm},{text:a("Cancel subscription"),onClick:s,buttonStyle:zs.X.Cancel}],footer:(0,y.jsx)("div",{className:Ys,children:a("Your subscription will still be active until the end of your current billing period. Cancellation will be effective on %1$s.",[r])})})]})};var Xs=s(81584),en=s(93613),tn=s(44561),sn=s(37607);const nn={items:"wFg_m",item:"tOYA1",button:"uV7We",toggle:"LyzRP",cancelButton:"iiHzj"},on=e=>{let{blogName:t,subscription:s}=e;const{_c:n,_t:i,apiFetch:o,getUserInfo:a,wwwBaseUrl:r}=(0,m.bp)(),{canCancel:d,canRepurchase:c,isManagedByTumblrpay:u,memberPerks:h}=s,{openConversationWindow:v}=(0,vs.h)(),{toggleToast:b}=(0,en.V)(),[x,f]=(0,l.useState)(!1),[j,C]=(0,l.useState)(!1),w=async()=>{const e=await a(),s=(0,tn.Z)(e.blogs);v({selectedBlogName:null==s?void 0:s.name,otherParticipantName:t})},I=()=>{C(!0),(0,sn.Z)(o,t,as.zF.Month,window.location.host).fetch((e=>{let{response:t}=e;window.location.assign(t.url)})).catch((()=>{C(!1),b(i("Something went wrong. Please try again."),"error")}))},_=(0,l.useCallback)((()=>{(0,Xs.ZP)(o).unsubscribeToBlogMembership(t).fetch((()=>{f(!1),window.location.reload()})).catch((()=>{f(!1),b(i("Something went wrong. Please try again."),"error")}))}),[t,i,b,o]),N=()=>f(!x);return(0,y.jsxs)("div",{className:nn.popover,children:[(0,y.jsx)(ds.Z,{width:250,height:"auto",usePortals:!0,position:us.I2.BottomEnd,component:(0,y.jsxs)("div",{className:nn.items,children:[(0,y.jsx)(hs.Z,{className:nn.item,linkTo:(0,De.nh)({blogName:t}),children:(0,y.jsx)(p.ZP,{comment:"Button linking to the user's creator profile",children:"View Profile"})}),(0,y.jsx)(hs.Z,{className:nn.item,isWrappingButton:!0,children:(0,y.jsx)(ze.Z,{wrapperClassName:`${nn.button} ${nn.messageButton}`,onClick:w,children:(0,y.jsx)(p.ZP,{comment:"Opens a messaging window to start a conversation with blog owner",children:"Message"})})}),(0,y.jsx)(hs.Z,{className:nn.item,linkTo:`${r}/support`,alwaysExternalLink:!0,children:(0,y.jsx)(p.ZP,{children:"Contact support"})}),d&&u&&(0,y.jsx)(hs.Z,{className:nn.item,isWrappingButton:!0,children:(0,y.jsx)(ze.Z,{wrapperClassName:`${nn.button} ${nn.cancelButton}`,onClick:N,children:(0,y.jsx)(p.ZP,{children:"Cancel subscription"})})}),c&&u&&(0,y.jsx)(hs.Z,{className:nn.item,isWrappingButton:!0,isDisabled:j,children:(0,y.jsx)(ze.Z,{wrapperClassName:`${nn.button}`,onClick:I,children:(0,y.jsx)(p.ZP,{children:"Renew subscription"})})})]}),children:(0,y.jsx)(ze.Z,{wrapperClassName:nn.toggle,label:n("Opens a menu containing a list of actions to perform on a subscription","Subscription actions"),children:(0,y.jsx)(ls.b,{colors:{primary:g().paletteGray65}})})}),x&&(0,y.jsx)("div",{className:nn.cancellationContainer,children:(0,y.jsx)(Qs,{memberPerks:h,subscription:s,onDismiss:N,onCancelClick:_,blogName:t})})]})},an="lwm3X",rn="YK1By",ln="Ndj6c",dn="Ju3ao",cn="yQEkv",pn="Tk6kK",un="CgUNj",mn="KCnB5",hn="bs37e",gn="WIcuN",vn=e=>{let{subscriptionInfo:t}=e;const{avatar:s,blogName:n,subscription:i}=t,{status:o}=i,{_t:r}=(0,m.bp)(),l=(0,ms.VU)(i),d=(0,ms.o$)(i,"endTime"),c=(0,ms.o$)(i,"nextBillingTime");return(0,y.jsxs)("div",{className:an,children:[(0,y.jsxs)("div",{className:rn,children:[(0,y.jsx)(rs.Z,{className:ln,avatarShape:cs.o.Square,imageResponse:s,dimension:se.subscriptionAvatarSize}),(0,y.jsx)("span",{className:dn,children:n})]}),o!==as.Ti.PendingCancel&&(0,y.jsx)("span",{className:a()(pn,cn),children:l}),(0,y.jsx)("span",{className:a()(cn,{[mn]:o!==as.Ti.PendingCancel,[un]:o===as.Ti.PendingCancel}),children:o===as.Ti.PendingCancel?(0,y.jsx)(p.ZP,{comment:"cancellation effective date",params:{date:d},children:"Cancellation effective [date]"}):c}),(0,y.jsx)("div",{className:hn,children:(0,y.jsx)(on,{subscription:i,blogName:n})}),o===as.Ti.PendingCancel&&(0,y.jsx)($s.Z,{wrapperClassName:gn,theme:"info",title:r("Your Post+ subscription has been cancelled"),message:(0,y.jsx)(p.ZP,{comment:"Cancellation message",params:{blogname:n,date:d},components:{bold:(0,y.jsx)("strong",{})},children:"This subscription will still be active until the end of your current billing period. Enjoy exclusive +Posts and perks from [blogname] until [bold][date][/bold]."})})]})},bn="MMaPu",xn="E8t7S",fn="vkWQP",jn="PYsHz",Cn="JplSy",yn="GdfMv",wn="bKR7d",In=e=>{let{subscriptionInfo:{avatar:t,blogName:s,subscription:n}}=e;const{status:i}=n,o=(0,ms.o$)(n,"endTime");let a;switch(i){case as.Ti.Cancelled:a=(0,y.jsx)(p.ZP,{comment:"cancelled on date",params:{date:o},children:"Cancelled [date]"});break;case as.Ti.OnHold:a=(0,y.jsx)(p.ZP,{comment:"on-hold effective date",params:{date:o},children:"On-Hold since [date]"});break;default:a=(0,y.jsx)(p.ZP,{comment:"expired on date",params:{date:o},children:"Expired [date]"})}return(0,y.jsxs)("div",{className:bn,children:[(0,y.jsxs)("div",{className:xn,children:[(0,y.jsx)(rs.Z,{className:fn,avatarShape:cs.o.Square,imageResponse:t,dimension:se.subscriptionAvatarSize}),(0,y.jsx)("span",{className:jn,children:s})]}),(0,y.jsx)("span",{className:Cn,children:a}),(0,y.jsx)("div",{className:wn,children:(0,y.jsx)(on,{subscription:n,blogName:s})}),i===as.Ti.OnHold&&(0,y.jsx)($s.Z,{wrapperClassName:yn,theme:"info",message:(0,y.jsx)(p.ZP,{children:"This subscription is on hold due to a payment issue. Please check your payment information."})})]})},_n=e=>{let{timelineObject:t}=e;const{subscription:{status:s}}=t;return s===as.Ti.Active||s===as.Ti.Pending||s===as.Ti.PendingCancel?(0,y.jsx)(vn,{subscriptionInfo:t}):(0,y.jsx)(In,{subscriptionInfo:t})};var Nn=s(83054),An=s(26372),Tn=s(41169),Sn=s(83644),kn=s(19403);let On;!function(e){e.Image="image",e.Video="video"}(On||(On={}));var Pn=s(19635),En=s.n(Pn);const Rn="njwip",Zn="fSAfy",Bn="Z4Uny",Dn="Cewkz",Mn="xACoA",Fn="H4DuS",Ln="erLM8",Hn="RPM5v",$n="nVX2y",Un=["ad.doubleclick.net","creatives.sascdn.com"];class Wn extends l.Component{constructor(){super(...arguments),i()(this,"provideEventDetails",kn.L),i()(this,"getVideoCrossOrigin",(e=>{const t=e?new URL(e).hostname:"";if(!(Un.indexOf(t)>-1))return"anonymous"})),i()(this,"renderVideoTakeover",(e=>{const{timelineObject:t}=this.props,{text:s,sponsoredDayVideoDisableAutoLooping:n,sponsoredDayVideoDisableSound:i}=t,{height:o,width:r,url:l}=e,d={height:o,width:r,url:l};return(0,y.jsxs)(y.Fragment,{children:[this.renderCTALinkContent((0,y.jsx)("div",{className:Dn,style:{paddingBottom:o/r*100+"%"},children:(0,y.jsx)("div",{className:a()(Mn,_),children:(0,y.jsx)(Tn.Z,{media:d,minHeight:o/r*100,hasNoMaxUndockedHeight:!0,isVideoSponsoredDay:!0,disableAutolooping:n,soundDisabled:i,useViewabilityTracker:!0,timelineObject:t,playerStyle:{borderRadius:En().borderRadiusForSmallElements},videoElementProps:{crossOrigin:this.getVideoCrossOrigin(l)}})})}),this.logClickOnBanner(u.J.VideoClickThrough)),this.renderCTALinkContent((0,y.jsx)("div",{className:Ln,children:s}),this.logClickOnButton,Fn),this.renderSponsoredIndicator()]})})),i()(this,"renderImageTakeover",(e=>{const{text:t}=this.props.timelineObject,s=!t||0===t.trim().length,n=(0,y.jsxs)(y.Fragment,{children:[(0,be.nJ)(this.props.timelineObject)&&(0,y.jsx)(N,{timelineObject:this.props.timelineObject}),(0,y.jsx)(Nn.Z,{imageResponse:e,sizes:`(max-width: ${ne().phoneResponsiveMaxBreakpoint}px) 100vw, ${ne().postWidth}px`,className:$n})]});return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:a()(Rn,_),style:{paddingBottom:"40%"},children:[this.renderCTALinkContent(n,this.logClickOnBanner(u.J.PhotoClickThrough),Bn),this.renderSponsoredIndicator()]}),!s&&this.renderCTALinkContent((0,y.jsx)("div",{className:Ln,children:t}),this.logClickOnButton,Fn)]})})),i()(this,"renderCTALinkContent",((e,t,s)=>{const{sponsoredDayClickthrough:n,blog:i}=this.props.timelineObject,o={children:e,onClick:t,className:s};return n&&i?(0,y.jsx)(Pt.Z,{blogName:i.name,blog:i,showBlogCard:!1,...o}):(0,y.jsx)("a",{href:this.getDestinationLink(),target:"_blank",rel:"noopener",...o})})),i()(this,"renderSponsoredIndicator",(()=>{const{displayType:e,sponsoredBadgeUrl:t}=this.props.timelineObject;return e===Sn.y.Sponsored&&(0,y.jsx)("div",{className:Hn,children:(0,y.jsx)(An.Z,{link:t,color:g().white,showAdFreeLink:!1})})})),i()(this,"logClickOnBanner",(e=>()=>{this.logClick(u.J.Click),this.logClick(e)})),i()(this,"logClickOnButton",(()=>{this.logClick(u.J.Click),this.logClick(u.J.CTAButton)})),i()(this,"logClick",(e=>{const{timelineObject:t,appContext:{logEvent:s}}=this.props;s({eventName:e,eventDetails:{placement_id:t.placementId,...this.provideEventDetails(t,!0)}})})),i()(this,"getDestinationLink",(()=>{var e,t;return null===(e=this.props.timelineObject.links)||void 0===e||null===(t=e.destination)||void 0===t?void 0:t.href}))}render(){const{assets:e}=this.props.timelineObject;if(!e||!this.getDestinationLink())return null;const{videoAsset:t,imageAssets:s}=e.reduce(((e,t)=>{switch(t.type){case On.Video:e.videoAsset=t;break;case On.Image:e.imageAssets.push(t)}return e}),{imageAssets:[]});return t||s.length>0?(0,y.jsx)("div",{className:Zn,children:t?this.renderVideoTakeover(t):!!s.length&&this.renderImageTakeover(s)}):null}}const zn=(0,R.X9)(Wn,{appContext:!0,adContext:!0}),qn=(0,I.s)(zn);var Gn=s(90891);const Vn="mkkHd",Jn=e=>{let{timelineObject:{button:t}}=e;const{apiFetch:s}=(0,m.bp)(),n={};switch(t.links.tap.type){case qe.U.Web:n.href=t.links.tap.href,n.className=Vn;break;case qe.U.Action:n.onClick=(0,Ge.Z)(t.links.tap,s),n.wrapperClassName=Vn}return(0,y.jsx)(Gn.Z,{isRounded:!0,...n,children:t.label})};var Kn=s(2541);const Yn="HphhS",Qn="_TztT",Xn=e=>{let{timelineObject:{text:t,highlightText:s,links:n,alignment:i}}=e,o=[t];if(s){const e=new RegExp(`(${(0,Kn.h)(s)})`,"gi");o=t.split(e).reduce(((e,t,n)=>{if(!t)return e;const i=t.toLowerCase()===s.toLowerCase()?(0,y.jsx)("span",{"data-testid":`highlight-${n}`,children:t},n):t;return e.push(i),e}),[])}const r=a()(Yn,{[Qn]:"center"===i});return null!=n&&n.tap?(0,y.jsx)(Pt.Z,{href:n.tap.href,showBlogCard:!1,className:r,children:o}):(0,y.jsx)("div",{className:r,children:o})};var ei=s(25190),ti=s(68280),si=s(58388),ni=s(94522),ii=s(93678);const oi=()=>3,ai=(0,r.Z)((e=>({maximumContentHeight:.8*e,maximumContentHeightBufferTolerance:1.2*e})));class ri extends l.Component{constructor(){super(...arguments),i()(this,"state",{hasErrored:!1}),i()(this,"assignRef",(e=>this.ref=e)),i()(this,"getPresentationStyle",((e,t)=>{const{presentationStyle:s,displayMode:n}=this.props;return s||(n===be.mt.Masonry?W.Z.masonry:t?{...e===si.ZP.Desktop?W.Z.desktop:W.Z.mobile,...this.getTruncationStyle()}:e===si.ZP.Desktop?W.Z.desktop:W.Z.mobile)})),i()(this,"toggleExpanded",(()=>{this.props.toggleExpandedInGrid&&this.props.toggleExpandedInGrid(this.props.timelineObject,oi())})),i()(this,"getTruncationStyle",(()=>{const{clientInnerHeight:e}=this.props;return e?ai(e):{}})),i()(this,"handleGridViewClick",(e=>{e.preventDefault(),this.toggleExpanded()}))}shouldComponentUpdate(e,t){return!(0,ni.X)(e,this.props)||t.hasErrored!==this.state.hasErrored}componentDidCatch(e){this.setState({hasErrored:!0});const{id:t,objectType:s}=this.props.timelineObject,n=`[TimelineObject error: object type ${s} with ID ${t}] ${e.message}`;window.dispatchEvent(new ErrorEvent("error",{error:e,message:n}))}render(){if(this.state.hasErrored)return null;const{timelineObject:e,displayMode:t}=this.props;if((0,be.xT)(e)&&e.isNsfw&&!e.blog.isMember)return null;switch(t){case be.mt.Grid:return this.renderInGrid();case be.mt.List:default:return this.renderInList()}}renderInList(e){const{timelineObject:t,className:s}=this.props;if(t.isExpandedInGrid&&!e)return null;const n=(0,be.xT)(t)||(0,be.ET)(t)?a()(ii.Z.listTimelineObject,{[ii.Z.sortDragDropTarget]:t.queuedState===Lt.SH.Queued,[ii.Z.animateOut]:t.animateOut,[ii.Z.masonryTimelineObject]:this.props.displayMode===be.mt.Masonry}):(0,be.g5)(t)?a()(ii.Z.listTimelineObject,{[ii.Z.animateOut]:t.animateOut}):(0,be.Ry)(t)?a()(ii.Z.listTimelineObject,ii.Z.paywallTimelineObject):ii.Z.listTimelineObject,i=this.renderObjectInList();return i&&(0,y.jsx)("div",{ref:this.assignRef,className:a()(n,s),tabIndex:-1,"data-id":(0,be.xT)(t)?t.id:void 0,children:(0,y.jsx)("div",{className:ii.Z.listTimelineObjectInner,tabIndex:-1,children:i})})}renderObjectInList(){const{timelineObject:e,displayMode:t,isInboxTimeline:s,index:n,appContext:{features:i,logEvent:o},relatedPostsContext:{addInteractedRelatedPost:r}}=this.props;return e.displayType===Sn.y.Sponsored&&(e.adInstanceCreationTime=Date.now()),(0,be.xT)(e)&&!(0,be.uz)(e)?(0,y.jsx)(ei.ZP,{children:i=>{let{device:o}=i;return(0,y.jsx)(ve.Z,{isInInboxTimeline:s,presentationStyle:this.getPresentationStyle(o,!0),timelineObject:e,isNarrow:t===be.mt.Masonry,postIndex:n??0})}}):(0,be.ET)(e)?(0,y.jsx)(Nt.Z,{timelineObject:e,displayMode:t}):(0,be.iZ)(e)?(0,y.jsx)(Ft,{timelineObject:e}):(0,be.uN)(e)?(0,y.jsx)(Xn,{timelineObject:e}):(0,be.pN)(e)?(0,y.jsx)(qn,{timelineObject:e}):(0,be.g5)(e)?(0,y.jsx)(it,{timelineObject:e}):(0,be.kZ)(e)?(0,y.jsx)(_t,{timelineObject:e}):(0,be.LW)(e)?(0,y.jsx)(Hs,{timelineObject:e}):(0,be.$n)(e)?(0,y.jsx)(_n,{timelineObject:e}):((0,be.A6)(e)||(0,be.uz)(e))&&i.redpopMoneyballAds?(0,y.jsx)(ei.ZP,{children:t=>{let{device:s}=t;return(0,y.jsxs)(y.Fragment,{children:[(0,be.uz)(e)&&e.admMediaType!==be.kO.TspVideo&&(0,y.jsx)(N,{timelineObject:e}),(0,y.jsx)(Ze,{isInstream:!0,timelineObject:e,supplyProviderId:$.E.DASHBOARD,children:t=>{let{ad:n,adServed:i,supplyOpportunityInstanceId:o,location:r,streamPosition:l,onFilled:d,onEmpty:c,onError:p}=t;return(0,y.jsx)("div",{className:a()(ii.Z.listTimelineObject,_),children:(0,y.jsx)(Ut,{ad:n,adServed:i,supplyOpportunityInstanceId:o,location:r,streamPosition:l,presentationStyle:this.getPresentationStyle(s,(0,be.uz)(e)&&!!e.isBlazed),onFilled:d,onEmpty:c,onError:p})})}})]})}}):(0,be.FP)(e)?(0,y.jsx)(rt,{timelineObject:e}):(0,be.lR)(e)?(0,y.jsx)(Te,{ad:e,supplyOpportunityInstanceId:e.supplyOpportunityInstanceId}):(0,be.nB)(e)?(0,y.jsx)(gt,{timelineObject:e}):(0,be.C7)(e)?(0,y.jsx)(vt,{timelineObject:e}):(0,be.wQ)(e)?(0,y.jsx)(Ue,{timelineObject:e}):(0,be.dp)(e)?(0,y.jsx)(w,{timelineObject:e}):(0,be.CA)(e)?(0,y.jsx)(We.Z,{timelineObject:e}):(0,be.RE)(e)?(0,y.jsx)(os,{}):(0,be.cz)(e)?(0,y.jsx)(Kt,{timelineObject:e,onClick:e=>{let{postId:t,parentPostId:s,serveId:n}=e;o({eventName:u.J.PreviewChicletRowChicletTap,eventDetails:{serve_id:n}}),r(t,s,n)}}):(0,be.y3)(e)?(0,y.jsx)(Rt,{timelineObject:e}):(0,be.Ih)(e)?(0,y.jsx)(Jn,{timelineObject:e}):("production"===ti.Z.Development&&console.warn(`Unsupported timeline object type "${e.objectType}" with ID ${e.id}`),null)}renderInGrid(){const{timelineObject:e,gridChildren:t,hoverContent:s,appContext:{_c:n}}=this.props,i=`calc(${100/oi()}% - 2px)`;return(0,be.xT)(e)?e.isExpandedInGrid?(0,y.jsx)("div",{className:ii.Z.expandedGridObjectContainer,children:this.renderInList(!0)}):(0,y.jsxs)("div",{className:ii.Z.gridTimelineObject,ref:this.assignRef,style:{width:i},children:[(0,y.jsx)("button",{className:ii.Z.gridObjectExpandCover,"aria-label":n("Button that shows the full post content when clicked, shown on posts that are very long","Expand"),onClick:this.toggleExpanded,children:(0,y.jsx)("div",{className:ii.Z.gridObjectExpandCoverInner,tabIndex:-1,children:(0,y.jsx)("div",{className:a()(ii.Z.expandedCover,{[ii.Z.expandedCoverIsExpanded]:e.hasExpandedVersionBelowIt})})})}),(0,y.jsx)(Yt.Z,{tabIndex:-1,timelineObject:e,className:ii.Z.postInGrid,onClick:this.handleGridViewClick,children:t,hoverContent:s,forceHover:e.hasExpandedVersionBelowIt})]}):null}}i()(ri,"defaultProps",{displayMode:be.mt.List});const li=(0,R.CN)(ri,{appContext:!0,relatedPostsContext:!0})},26622:(e,t,s)=>{s.d(t,{Z:()=>K});var n=s(50209),i=s.n(n),o=s(5754),a=s.n(o),r=s(95004),l=s(36485),d=s(26173),c=s(73792),p=s(90855),u=s(52948),m=s(29158),h=s(13434),g=s(26705),v=s(17709),b=s(56305),x=s(25493),f=s(15690),j=s(1142),C=s(64796),y=s(37236),w=s(43523),I=s(12885),_=s(50869),N=s(96467),A=s.n(N);const T="_X19c",S="txEJf",k="_5p5FC",O="xuN5Q",P="ZtkzZ",E="K0Rj5",R="w6XLs",Z="BQhXD",B="nEems";var D=s(2629);const M=e=>{const t=e.find((e=>{let{type:t,trail:s,content:n}=e;return(0,j.o)({type:t,trail:s,content:n,prioritizeImageBlocks:!0}).type===C.Z}));return t||null},F=e=>{let{blog:t,posts:s}=e;const{theme:n={},secondsSinceLastActivity:i=999999,avatar:o}=t,{avatarShape:r=y.o.Circle}=n;if(!s)return null;const l=M(s);return l?(0,D.jsxs)("div",{className:T,style:(0,I.ZP)(t),children:[(0,D.jsxs)("div",{className:S,children:[(0,D.jsx)("div",{className:a()(k,R,r===y.o.Circle?E:P),children:(0,D.jsx)(b.Z,{blogName:t.name,href:t.url,target:"_blank",rel:"noopener",showBlogCard:!0,blog:t,krakenEventName:w.J.BlogUrlClick,children:(0,D.jsx)(v.Z,{avatarShape:r,imageResponse:o,dimension:N.miniBlogCardAvatarSize,isOnline:(0,_.k)(i),bigStatusIndicator:!0})})}),(0,D.jsx)("div",{className:O,children:(0,D.jsx)(x.ZP,{blog:t,isBlogCardHeader:!0,hideFollowButton:!0,hideHeaderImage:!0})})]}),(0,D.jsx)("div",{className:Z,children:(0,D.jsx)(j.Z,{timelineObject:l,prioritizeImageBlocks:!0,openInPeepr:!0,blurImageBackground:!0})}),(0,D.jsx)("div",{className:B,children:(0,D.jsx)(f.Z,{blog:t})})]}):null};var L=s(73702),H=s(10381),$=s(8293),U=s(63665),W=s(22979),z=s(81584),q=s(1308),G=s(78667);const V={desktopContainer:"B15CE",blogCarousel:"H14Pr",title:"uJiXu",collapseSpacingInMobile:"GmRO3",blogCardWrapper:"I6Y3s",postCardWrapper:"pqNoe"};class J extends r.Component{constructor(){super(...arguments),i()(this,"renderVertical",(()=>(0,D.jsxs)("div",{className:V.desktopContainer,children:[this.renderTitle(),(0,D.jsx)(L.ZP,{title:this.getTitle(),rowTheme:this.props.rowTheme||c.CK.Dark,getInitialContent:this.getInitialBlogsContent,getContentFromResponse:this.getContentFromResponse,dismissAllLabel:this.props.appContext._t("Show more blogs")})]}))),i()(this,"renderHorizontal",(()=>{const e=A().timelineMasonryPostWidth+A().timelineMasonryPostSpacing;return(0,D.jsx)(H.U$,{children:t=>{let{width:s}=t;return(0,D.jsxs)(D.Fragment,{children:[this.renderTitle(),(0,D.jsx)(p.Z,{className:V.blogCarousel,visibleWidth:s,itemWidth:e,children:(0,D.jsx)(m.Z.Consumer,{children:this.renderHorizontalCarouselContent})})]})}})})),i()(this,"renderHorizontalCarouselContent",(e=>{var t,s;let{scrollContainerRef:n}=e;return(0,D.jsx)(g.ZP,{getInitialPage:this.getInitialContent,getObjectsFromResponse:this.getBlogsFromResponse,getNextLink:this.getBlogsNextLink,direction:U.cU.Right,scrollContainer:n.current,loader:(0,D.jsx)("div",{className:V.blogCarouselLoader,children:(0,D.jsx)(h.Z,{centerOrientation:h.Q.HorizontalAndVertical})}),children:null!==(t=this.props.appContext)&&void 0!==t&&null!==(s=t.features)&&void 0!==s&&s.postCentricBlogCarousel?this.renderHorizontalPaginatorChildrenPostCentric:this.renderHorizontalPaginatorChildren})})),i()(this,"renderHorizontalPaginatorChildrenPostCentric",(e=>{let{objects:t}=e;return(0,D.jsx)(D.Fragment,{children:t.map(((e,t)=>M(e.posts)?(0,D.jsx)(u.Z,{index:t,children:(0,D.jsx)("div",{className:V.postCardWrapper,children:(0,D.jsx)(F,{blog:(0,$.WA)(e),posts:e.posts})})},`${e.name}-${t}`):null))})})),i()(this,"renderHorizontalPaginatorChildren",(e=>{let{objects:t}=e;return(0,D.jsx)(D.Fragment,{children:t.map(((e,t)=>(0,D.jsx)(u.Z,{index:t,children:(0,D.jsx)("div",{className:V.blogCardWrapper,children:(0,D.jsx)(d.Z,{blogName:e.name,blog:(0,$.WA)(e),posts:e.posts,isBlogCarousel:!0})})},`${e.name}-${t}`)))})})),i()(this,"renderTitle",(()=>{const e=this.getTitle();return e&&(0,D.jsx)("div",{className:a()(V.title,{[V.collapseSpacingInMobile]:this.props.collapseSpacingInMobile}),children:e})})),i()(this,"getTitle",(()=>{var e,t;return(null===(e=this.props.timelineObject)||void 0===e||null===(t=e.display)||void 0===t?void 0:t.title)||""})),i()(this,"getInitialContent",(()=>{const{elements:e}=this.props.timelineObject;return{objects:this.transformCarouselElementsToBlogs(e),nextLink:this.getBlogsNextLink({response:{timeline:this.props.timelineObject}})}})),i()(this,"getInitialBlogsContent",(()=>{const{elements:e}=this.props.timelineObject;return{blogs:this.transformCarouselElementsToBlogs(e),nextLink:this.getBlogsNextLink({response:{timeline:this.props.timelineObject}})}})),i()(this,"getContentFromResponse",(e=>({blogs:this.getBlogsFromResponse(e),nextLink:this.getBlogsNextLink(e)}))),i()(this,"getBlogsNextLink",(e=>{var t,s;let{response:n}=e;const i=null===(t=n.timeline)||void 0===t||null===(s=t.links)||void 0===s?void 0:s.next;return null!=i&&i.href?{...i,href:(0,l.Z)(null==i?void 0:i.href,(0,q.n9)(z.$b))}:i})),i()(this,"getBlogsFromResponse",(e=>{var t;let{response:s}=e;return this.transformCarouselElementsToBlogs(null===(t=s.timeline)||void 0===t?void 0:t.elements)})),i()(this,"transformCarouselElementsToBlogs",(e=>e.reduce(((e,t)=>{let{resources:s,display:n}=t;if(s){let t=e=>e;null!=n&&n.reason&&(t=e=>({...e,recommendationReason:n.reason})),e.push(...s.map(t))}return e}),[])))}render(){return this.props.displayMode===W.mt.List?this.renderHorizontal():this.renderVertical()}}i()(J,"defaultProps",{collapseSpacingInMobile:!0});const K=(0,G.HJ)(J)},13911:(e,t,s)=>{s.d(t,{Z:()=>$});var n=s(50209),i=s.n(n),o=s(95004),a=s(68280),r=s(22979),l=s(78667),d=s(96467),c=s(26622),p=s(46675),u=s(90855),m=s(52948),h=s(29158),g=s(96977),v=s(38113),b=s(13434),x=s(26705),f=s(10381),j=s(65214),C=s(43523),y=s(63665),w=s(66498),I=s(14544),_=s(63583),N=s.n(_),A=s(78380);const T="BYDbJ",S="w3kAG",k="SEBxd",O="GRKki",P="VV6Pq",E="aPzgz",R="D6mkH";var Z=s(2629);class B extends o.Component{constructor(){super(...arguments),i()(this,"getInitialContent",(()=>{const{elements:e,links:t}=this.props.timelineObject;return{objects:e,nextLink:null==t?void 0:t.next}})),i()(this,"getVideoHubsFromResponse",(e=>{let{response:t}=e;return t.timeline.elements})),i()(this,"getNextLink",(e=>{var t,s;let{response:n}=e;return null==n||null===(t=n.timeline)||void 0===t||null===(s=t.links)||void 0===s?void 0:s.next}))}render(){const{itemWidth:e}=this.props;return(0,Z.jsx)(f.U$,{children:t=>{let{width:s}=t;return(0,Z.jsx)(u.Z,{visibleWidth:s,className:T,itemWidth:e,children:(0,Z.jsx)(h.Z.Consumer,{children:e=>{let{scrollContainerRef:t}=e;return(0,Z.jsx)(x.ZP,{getObjectsFromResponse:this.getVideoHubsFromResponse,getInitialPage:this.getInitialContent,direction:y.cU.Right,getNextLink:this.getNextLink,scrollContainer:t.current,loader:(0,Z.jsx)("div",{className:S,children:(0,Z.jsx)(b.Z,{centerOrientation:b.Q.HorizontalAndVertical})}),children:e=>{let{objects:t}=e;return t.map(((e,t)=>(0,Z.jsx)(F,{index:t,videoHub:e},e.hubName)))}})}})})}})}}const D={[w.Z.cybernetic]:N().paletteAccent,[w.Z.vampire]:N().paletteTransparentWhite65,[w.Z.pumpkin]:N().paletteWhiteOnDark,[w.Z.snowBright]:N().paletteWhiteOnDark,[w.Z.pride]:N().paletteWhiteOnDark},M=function(e){var t;let s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=null===(t=e.links)||void 0===t?void 0:t.tap.href,i=s?(0,A.so)(e.hubName):void 0;if(!i&&n){const e=new URL(n);return{pathname:e.pathname,search:e.search}}{const t=null==i?void 0:i.blogName,s=void 0!==(null==i?void 0:i.id)?null==i?void 0:i.id.toString():void 0;return{pathname:(0,j.hc)({hubName:e.hubName,blogName:t,postId:s})}}};function F(e){var t,s,n;let{index:i,videoHub:a}=e;const r=(0,I.M)(),d=D[r.name]||a.borderColor,[c,p]=(0,o.useState)((null===(t=a.media[0])||void 0===t?void 0:t.url)??(null===(s=a.media[0])||void 0===s||null===(n=s.poster)||void 0===n?void 0:n.url)),[u,h]=(0,o.useState)(M(a,!1)),{logEvent:b}=(0,l.bp)(),x=()=>{p((e=>(e=>{var t;const s=null===(t=(0,A.so)(e))||void 0===t?void 0:t.content;if(!s)return;const n=s.find(A.Lo);var i;if(n)return null==n||null===(i=n.poster)||void 0===i?void 0:i[0].url;{var o,a,r;const e=s.find(A.Lb);return(null==e||null===(o=e.media)||void 0===o?void 0:o[0].url)??(null==e||null===(a=e.media)||void 0===a||null===(r=a[0].poster)||void 0===r?void 0:r.url)}})(a.hubName)??e)),h(M(a))};return(0,o.useEffect)((()=>{const e=e=>{e.key===`video_hub_${a.hubName}_last_post_viewed`&&x()};return window.addEventListener("storage",e),x(),()=>window.removeEventListener("storage",e)}),[]),(0,Z.jsx)(m.Z,{index:i,shouldUpdate:!0,children:(0,Z.jsx)("div",{className:k,children:(0,Z.jsx)(v.Z,{to:u,onClick:()=>b({eventName:C.J.VideoHubCardTapped,eventDetails:{tag:a.hubName}}),children:(0,Z.jsxs)("div",{"data-testid":`${a.hubName}_bg_carousel_item`,className:O,style:{backgroundImage:`linear-gradient(360deg, ${_.transparentBlack85} 0%, transparent 50%), url("${c}")`,borderColor:d,filter:`drop-shadow(1px 1px 0px ${d}) drop-shadow(2px 2px 0px ${d})`},children:[(0,Z.jsx)("div",{className:R,children:(0,Z.jsx)(g.Z,{size:{width:70,height:70}})}),(0,Z.jsx)("div",{className:P,children:a.title}),(0,Z.jsx)("div",{className:E,children:a.subtitle||(a.tags||[]).map((e=>`#${e}`)).join(" ")})]})})})})}const L=B;class H extends o.Component{constructor(){super(...arguments),i()(this,"logWarningInConsole",(()=>{const{timelineObject:e}=this.props;return e&&"production"===a.Z.Development&&(0===e.elements.length?console.warn(`Unsupported unknown carousel timeline object type with ID ${e.id}`):console.warn(`Unsupported carousel timeline object type "${e.elements[0].objectType}" with ID ${e.id}`)),null}))}render(){const{timelineObject:e}=this.props;return(0,r.eO)(e)?(0,Z.jsx)(c.Z,{...this.props,timelineObject:e}):(0,r.$w)(e)?(0,Z.jsx)(p.Z,{...this.props,timelineObject:e,itemWidth:d.tagChicletCarouselItemWith+d.carouselItemSpacing,loaderClass:"carouselLoaderChiclet"}):(0,r.H0)(e)?(0,Z.jsx)(p.Z,{...this.props,timelineObject:e,itemWidth:d.tagCardCarouselItemWidth+d.carouselItemSpacing,loaderClass:"carouselLoaderTagCard"}):(0,r.h5)(e)?(0,Z.jsx)(L,{...this.props,timelineObject:e,itemWidth:d.videoHubCardCarouselItemWidth+d.carouselItemSpacing}):(this.logWarningInConsole(),null)}}const $=(0,l.HJ)(H)},46675:(e,t,s)=>{s.d(t,{Z:()=>U});var n=s(50209),i=s.n(n),o=s(95004),a=s(90855),r=s(52948),l=s(29158),d=s(13434),c=s(26705),p=s(48451),u=s(17941),m=s(84473),h=s(43523),g=s(59215),v=s(96467),b=s.n(v),x=s(5984);const f="quD2R",j="jOrvN",C="XtlxR",y="pAmwO",w="FvvEQ";var I=s(2629);class _ extends o.Component{constructor(){super(...arguments),i()(this,"renderChicletContent",((e,t)=>{let{objectData:{backgroundImage:s}}=e;const{tagName:n,appContext:{_c:i}}=this.props;return s?(0,I.jsx)("div",{className:y,children:(0,I.jsx)(p.Sw,{imageResponse:[{url:s,width:b().tagCardImageWidth,height:b().tagCardImageWidth*b().tagCardImageSizeRatio}],isSquare:!1,altText:i("Alt text for a tag's image. Placeholder is the untranslated tag text.","#%1$s",[n]),sizes:2*b().tagCardImageWidth+"px"})},t):null})),i()(this,"logUserClickedOnTagCard",(()=>{const{tabId:e}=this.props.dashboardContext;this.props.appContext.logEvent({eventName:h.J.ClickedOnTagCard,eventDetails:{tag:this.props.tagName,tab:e}})}))}render(){const{tagName:e,posts:t,backgroundColor:s,borderColor:n}=this.props,i=(0,x.ps)(s);return(0,I.jsxs)("div",{className:f,style:{backgroundColor:s,borderColor:n},children:[(0,I.jsxs)(m.Z,{tagName:e,onClick:this.logUserClickedOnTagCard,children:[(0,I.jsx)("div",{className:j,style:{color:i},children:(0,I.jsxs)("span",{children:["#",e]})}),(0,I.jsx)("div",{className:C,children:t.slice(0,2).map(this.renderChicletContent)})]}),(0,I.jsx)(u.Z,{tag:e,isFollowed:!1,pageName:"tagged",className:w,extraStyles:{backgroundColor:i,color:s}})]})}}const N=(0,g.X9)(_,{appContext:!0,dashboardContext:!0});var A=s(10381),T=s(63665),S=s(22979);const k="https://assets.tumblr.com/images/carousel",O={[`${k}/aged_postref.gif`]:{mp4:s.p+"src/assets/videos/carousel/aged_postref-e4cac741.mp4",webm:s.p+"src/assets/videos/carousel/aged_postref-2a1f0006.webm"},[`${k}/changes.gif`]:{mp4:s.p+"src/assets/videos/carousel/changes-91c7a7b0.mp4",webm:s.p+"src/assets/videos/carousel/changes-4a0ea398.webm"},[`${k}/explore.gif`]:{mp4:s.p+"src/assets/videos/carousel/explore-9b9aad4a.mp4",webm:s.p+"src/assets/videos/carousel/explore-15f47fc4.webm"},[`${k}/for_you.gif`]:{mp4:s.p+"src/assets/videos/carousel/for_you-66f88213.mp4",webm:s.p+"src/assets/videos/carousel/for_you-c1a9c8bd.webm"},[`${k}/merch.gif`]:{mp4:s.p+"src/assets/videos/carousel/merch-d1e81be9.mp4",webm:s.p+"src/assets/videos/carousel/merch-ab8b2df8.webm"},[`${k}/staff_picks.gif`]:{mp4:s.p+"src/assets/videos/carousel/staff_picks-011b4f2c.mp4",webm:s.p+"src/assets/videos/carousel/staff_picks-a6a2f284.webm"},[`${k}/tagged.gif`]:{mp4:s.p+"src/assets/videos/carousel/tagged-19a5b2a2.mp4",webm:s.p+"src/assets/videos/carousel/tagged-eeb34763.webm"},[`${k}/trending.gif`]:{mp4:s.p+"src/assets/videos/carousel/trending-07dcb725.mp4",webm:s.p+"src/assets/videos/carousel/trending-9f04dba5.webm"}};var P=s(45051);const E="Oii0L",R="NWfPW",Z="aJgDC",B="TQmoN",D="T4ddP",M="NZ8ux",F="LnVVz";class L extends o.Component{constructor(){super(...arguments),i()(this,"getInitialContent",(()=>{const{elements:e,links:t}=this.props.timelineObject;return{objects:e,nextLink:null==t?void 0:t.next}})),i()(this,"getTagsFromResponse",(e=>{let{response:t}=e;return t.timeline.elements})),i()(this,"getNextLink",(e=>{var t,s;let{response:n}=e;return null==n||null===(t=n.timeline)||void 0===t||null===(s=t.links)||void 0===s?void 0:s.next}))}render(){return(0,I.jsx)(A.U$,{children:e=>{let{width:t}=e;return(0,I.jsx)(a.Z,{visibleWidth:t,className:E,itemWidth:this.props.itemWidth,children:(0,I.jsx)(l.Z.Consumer,{children:e=>{let{scrollContainerRef:t}=e;return(0,I.jsx)(c.ZP,{getObjectsFromResponse:this.getTagsFromResponse,getInitialPage:this.getInitialContent,direction:T.cU.Right,getNextLink:this.getNextLink,scrollContainer:t.current,loader:(0,I.jsx)("div",{className:this.props.loaderClass,children:(0,I.jsx)(d.Z,{centerOrientation:d.Q.HorizontalAndVertical})}),children:e=>{let{objects:t}=e;return t.map(((e,t)=>{switch(e.objectType){case S.RP.FollowedTag:return(0,I.jsx)(H,{index:t,tag:e,onClick:P.Z},e.tagName);case S.RP.Tag:return(0,I.jsx)($,{index:t,tag:e},t)}}))}})}})})}})}}function H(e){var t,s;let{index:n,tag:i,onClick:a}=e;const l=function(e){const t=new URL(e,"https://invalid.tld/");t.search="";const s=t.href;return O[s]||void 0}(i.backgroundImage),[d,c]=(0,o.useState)(!1);return(0,I.jsx)(r.Z,{index:n,shouldUpdate:!0,children:(0,I.jsx)("div",{className:M,children:(0,I.jsx)(m.Z,{tagName:i.tagName,className:R,onClick:a,toOverride:null===(t=i.links)||void 0===t||null===(s=t.tap)||void 0===s?void 0:s.href,children:(0,I.jsxs)("div",{className:Z,"data-testid":"chiclet-wrapper",style:i.backgroundImage&&!l?{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("${i.backgroundImage}")`,backgroundSize:"cover",backgroundPosition:"center"}:i.backgroundColor&&!l?{backgroundColor:i.backgroundColor}:void 0,children:[l&&(0,I.jsxs)("video",{className:B,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,crossOrigin:"anonymous",onLoadedMetadata:()=>c(!0),style:d?{display:"block"}:{},children:[(0,I.jsx)("source",{src:l.webm,type:"video/webm"}),(0,I.jsx)("source",{src:l.mp4,type:"video/mp4"})]}),l&&(0,I.jsx)("div",{className:D}),(0,I.jsx)("span",{children:i.tagName})]})})})},i.tagName)}function $(e){let{index:t,tag:s}=e;return(0,I.jsx)("div",{className:F,children:(0,I.jsx)(r.Z,{index:t,children:(0,I.jsx)(N,{...s})})})}const U=L},21148:(e,t,s)=>{s.d(t,{BD:()=>c,Ud:()=>p});var n=s(5700),i=s(90655),o=s(44655),a=s(86033),r=s(12871);const l={post:{skipComponent:"related_tags,blog_search",limit:20},blog:{limit:20},tag:{limit:20}},d=(e,t,s)=>(0,a.Z)((0,o.o)(e,{searchKeyword:s.searchTerm,requestMode:s.searchMode,postType:s.selectedPostType,days:s.selectedTime,timelineType:t,...l[t]}).fetch()),c=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["blog","post","tag"];const n=s.map((s=>d(e,s,t)));return(0,a.Z)(Promise.all(n).then((e=>s.reduce(((t,s,n)=>(t[s]=e[n],t)),{}))),(()=>{n.forEach((e=>e.cancel()))}))};function p(e,t,s){let{params:o,path:a}=e;const{selectedPostType:l,searchTerm:d}=o,c=a.split("/"),p=i.fh.find((e=>c.includes(e))),u=(0,r.y)(d),{v:m,t:h}=t||{},g=Number(h);return{searchTerm:u,selectedTime:g<36e3&&g>=0?g:s.selectedTime,activeTimeline:Object.values(i.D1).includes(m)?m:s.activeTimeline,searchMode:p??s.searchMode,selectedPostType:(0,n.IP)(l)?l:void 0}}},2541:(e,t,s)=>{s.d(t,{h:()=>o});const n=/[\\^$.*+?()[\]{}|]/g,i=RegExp(n.source);function o(e){return e&&i.test(e)?e.replace(n,"\\$&"):e}},37607:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(81584);function i(e,t,s,i){return(0,n.ZP)(e).generateCheckoutUrl(t,{period:s,host:i})}},68715:(e,t,s)=>{s.d(t,{w:()=>r});var n=s(65214),i=s(5700),o=s(93099),a=s(64038);function r(e,t){let{searchTerm:s,searchMode:r,selectedPostType:l,selectedTime:d,activeTimeline:c}=e,{searchMode:p,selectedPostType:u,selectedTime:m,activeTimeline:h}=t;const g={searchTerm:s,...r!==p&&{searchMode:r},...l!==u&&(0,i.IP)(l)&&{selectedPostType:l}},v=(0,o.Z)((0,a.Z)(n.o_.searchWithOptionalParams,g),g),b=new URLSearchParams;"recent"!==r&&d!==m&&b.set("t",d.toString()),c!==h&&b.set("v",c);const x=b.toString();return x?`${v}?${x}`:v}},78380:(e,t,s)=>{s.d(t,{Lb:()=>r,Lo:()=>a,VC:()=>d,so:()=>l});var n=s(59443),i=s(5700),o=s(92895);const a=e=>(0,i.gD)(e)&&(0,o.c7)(e),r=e=>{var t,s;return(0,i.RD)(e)&&((null===(t=e.media)||void 0===t?void 0:t[0].type)===n.lu.Gif||(null===(s=e.media)||void 0===s?void 0:s[0].type)===n.lu.Webp)},l=e=>{try{var t;const s=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(`video_hub_${e}_last_post_viewed`);if(s){const e=JSON.parse(s);if(e.id&&e.blogName)return e}}catch(e){console.error(e)}},d=(e,t)=>{try{let i;var s,n;if(t)i=JSON.stringify(t),null===(s=window.localStorage)||void 0===s||s.setItem(`video_hub_${e}_last_post_viewed`,i);else null===(n=window.localStorage)||void 0===n||n.removeItem(`video_hub_${e}_last_post_viewed`);window.dispatchEvent(new StorageEvent("storage",{key:`video_hub_${e}_last_post_viewed`,newValue:i}))}catch(e){console.error(e)}}}}]);