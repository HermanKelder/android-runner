/*! For license information please see 9347-0087fb31.js.LICENSE.txt */
(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[9347],{98465:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={overlay:"R5xCG",fire:"_OHHp",fireEmoji:"Q_Mpz",firefall:"hGGIh",igniteSuccess:"Z9CC5",flame:"hnU80",flamefly:"MwgAh",one:"Lyjvv",flame3:"w83t4",two:"HLVUD",flameMain:"aMIf6",flameWobble:"hy7Ja",three:"FKIz9",four:"tiQnH",five:"udvLD"}},20814:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={icon:"OIzSg",title:"YZnLZ",subtitle:"oQs98",container:"GzZtE",igniteProductionOptions:"IOcGh",radioInnerContainer:"QXuBs",price:"XezzS",description:"XjFjI",igniteAlert:"IwJZG",targeting:"VVkpl",targetingText:"xx3Yj",targetingLabel:"R15af",infoText:"_vOn7",modalFooter:"k9mqe",igniteButtons:"QgXyr",igniteExtinguishButton:"rw1Ql",helpButton:"T6LPn",igniteCancelButton:"M4lpn",igniteSuccessButton:"ILRkA",extinguishCancelButton:"PHxLn",extinguishConfirmButton:"aYIQf",hasCustomBg:"DPlCX",successPopoverButton:"s2wDP",loadingText:"amVpp",popoverContainer:"ST0Bu",targetWrapper:"uJ6_Y",popover:"QJf1C",audienceButton:"tiqnP",audienceCaret:"F0ual",dropdownBtnContainer:"MarEW"}},43099:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={masonry:"hyiL2",column:"USr9U"}},74708:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={reorderButton:"_WHTS"}},93678:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={listTimelineObject:"So6RQ",listTimelineObjectInner:"ge_yK",paywallTimelineObject:"hbJOQ",expandedGridObjectContainer:"gODLh",postInGrid:"rCRIW",gridTimelineObject:"tCZnl",expandedCover:"ojpYJ",expandedCoverIsExpanded:"aRqkN",gridObjectExpandCover:"Yxz86",gridObjectExpandCoverInner:"ju4hw",impressionLoggingWrapper:"c79Av",hiddenObserver:"qj1WD",hiddenObserverMiddlePoint:"XJ0js",animateOut:"jYrjr",slideLeft:"EAhje",masonryTimelineObject:"i4aRn",sortDragDropTarget:"RFqS2",merginObject:"osIkK"}},1181:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={header:"KWFLb",headerText:"a3_ie",headerLink:"Y7QU6",cover:"EAugG",content:"Qb2zX",isShowingCover:"vS0xc",coverHeader:"UF4Vo",coverAuthorNotice:"MIDUS",coverButton:"bkPoT",coverContent:"UypGJ",communityLabel:"dR2LL",loader:"ynaAM",communityLabelHeader:"H71ba",missingLabel:"ZK4MW",communityLabelDetail:"Cc6H4"}},40657:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={header:"BjErQ",dogEarWrapper:"_QcnS",dogEar:"jk63e",dogEarLink:"c7hPc",avatar:"RYkKH",sponsoredSubHeading:"rGP1C",narrowSponsoredSubHeading:"Euban",timestamp:"j8f9p",sponsoredText:"zYMVR",headerContent:"q4Pce",headerSponsored:"CsjTP",headerHasInlineAvatar:"J_Wh8",hidesPosterBlogname:"xjVqt",leftContent:"ZJdm4",leftContentMain:"ffqNn",leftContentSecondary:"pVS0A",innerText:"rJe2J",attribution:"WJ6ij",postAttribution:"vGkyT",reblogAttribution:"jOhmG",rebloggedFromName:"eLzSX",leftContentMainStacked:"nQmSU",followButton:"rmjNp",private:"ps_dU",lock:"rFnRs",rightContent:"KFWnx",headerBloglessAdvertiser:"yWEqH"}},83707:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},o=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],i=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],a=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],l="undefined"!=typeof window&&void 0!==window.document?window.document:{},r="fullscreenEnabled"in l&&Object.keys(n)||o[0]in l&&o||i[0]in l&&i||a[0]in l&&a||[];const d={requestFullscreen:function(e){return e[r[n.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[r[n.requestFullscreen]]},get exitFullscreen(){return l[r[n.exitFullscreen]].bind(l)},get fullscreenPseudoClass(){return":"+r[n.fullscreen]},addEventListener:function(e,t,s){return l.addEventListener(r[n[e]],t,s)},removeEventListener:function(e,t,s){return l.removeEventListener(r[n[e]],t,s)},get fullscreenEnabled(){return Boolean(l[r[n.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return l[r[n.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return l[("on"+r[n.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return l[("on"+r[n.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return l[("on"+r[n.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return l[("on"+r[n.fullscreenerror]).toLowerCase()]=e}}},70817:(e,t)=>{function s(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return a[e];var s,i=String(e);return(s=n[i.toLowerCase()])?s:(s=o[i.toLowerCase()])||(1===i.length?i.charCodeAt(0):void 0)}s.isEventKey=function(e,t){if(e&&"object"==typeof e){var s=e.which||e.keyCode||e.charCode;if(null==s)return!1;if("string"==typeof t){var i;if(i=n[t.toLowerCase()])return i===s;if(i=o[t.toLowerCase()])return i===s}else if("number"==typeof t)return t===s;return!1}};var n=(t=e.exports=s).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(i=97;i<123;i++)n[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)n[i-48]=i;for(i=1;i<13;i++)n["f"+i]=i+111;for(i=0;i<10;i++)n["numpad "+i]=i+96;var a=t.names=t.title={};for(i in n)a[n[i]]=i;for(var l in o)n[l]=o[l]},29193:(e,t,s)=>{"use strict";var n=s(2062);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,s,o,i,a){if(a!==n){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return s.PropTypes=s,s}},67773:(e,t,s)=>{e.exports=s(29193)()},2062:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},84362:(e,t,s)=>{"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(s(50920)),i=n(s(38642)),a=n(s(88249)),l=n(s(45182)),r=n(s(30157)),d=n(s(16544)),c=n(s(54589)),p=n(s(42307)),u=n(s(95004));n(s(67773)),n(s(75714));var h,m=(h=null,function(){if(null!==h)return h;var e,t,s,n=!1;try{window.addEventListener("test",null,(e={},t="passive",s={get:function(){n=!0}},Object.defineProperty(e,t,s)))}catch(e){}return h=n,n}()),g={capture:!1,passive:!1};function v(e){return p({},g,e)}function b(e,t,s){var n=[e,t];return n.push(m?s:s.capture),n}function x(e,t,s,n){e.addEventListener.apply(e,b(t,s,n))}function f(e,t,s,n){e.removeEventListener.apply(e,b(t,s,n))}function C(e,t){e.children,e.target;var s=c(e,["children","target"]);Object.keys(s).forEach((function(e){if("on"===e.substring(0,2)){var n=s[e],o=d(n),i="object"===o;if(i||"function"===o){var a="capture"===e.substr(-7).toLowerCase(),l=e.substring(2).toLowerCase();l=a?l.substring(0,l.length-7):l,i?t(l,n.handler,n.options):t(l,n,v({capture:a}))}}}))}var y=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}return r(t,e),i(t,[{key:"componentDidMount",value:function(){this.applyListeners(x)}},{key:"componentDidUpdate",value:function(e){this.applyListeners(f,e),this.applyListeners(x)}},{key:"componentWillUnmount",value:function(){this.applyListeners(f)}},{key:"applyListeners",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props,s=t.target;if(s){var n=s;"string"==typeof s&&(n=window[s]),C(t,e.bind(null,n))}}},{key:"render",value:function(){return this.props.children||null}}]),t}(u.PureComponent);y.propTypes={},t.withOptions=function(e,t){return{handler:e,options:v(t)}},t.default=y},74802:(e,t,s)=>{"use strict";var n=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(s(95004)),i=(n(s(75714)),function(e){e.index;var t=e.children;o.default.Children.count(t)});t.default=i},35999:(e,t,s)=>{"use strict";var n=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,s=e.children,n=e.startIndex,a=e.startX,l=e.pageX,r=e.viewLength,d=e.resistance,c=o.default.Children.count(s)-1,p=n+(a-l)/r;d?p<0?p=Math.exp(p*i.default.RESISTANCE_COEF)-1:p>c&&(p=c+1-Math.exp((c-p)*i.default.RESISTANCE_COEF)):p<0?t=((p=0)-n)*r+l:p>c&&(t=((p=c)-n)*r+l);return{index:p,startX:t}};var o=n(s(95004)),i=n(s(36396))},36396:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3}},65901:(e,t,s)=>{"use strict";var n=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(s(95004)),i=function(e,t){var s=!1,n=function(e){return e?e.key:"empty"};if(e.children.length&&t.children.length){var i=o.default.Children.map(e.children,n)[e.index];if(null!=i)i===o.default.Children.map(t.children,n)[t.index]&&(s=!0)}return s};t.default=i},94193:(e,t,s)=>{"use strict";var n=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"checkIndexBounds",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"computeIndex",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"constant",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"getDisplaySameSlide",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return r.default}});var o=n(s(74802)),i=n(s(35999)),a=n(s(36396)),l=n(s(65901)),r=n(s(10185))},10185:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){var s=e%t;return s<0?s+t:s};t.default=s},89635:(e,t,s)=>{"use strict";var n=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){function s(e){var t;return(0,a.default)(this,s),(t=(0,r.default)(this,(0,d.default)(s).call(this,e))).timer=null,t.state={},t.handleInterval=function(){var e=t.props,s=e.children,n=e.direction,o=e.onChangeIndex,i=e.slideCount,a=t.state.index,l=a;"incremental"===n?l+=1:l-=1,(i||s)&&(l=(0,m.mod)(l,i||p.default.Children.count(s))),void 0===t.props.index&&t.setState({index:l}),o&&o(l,a)},t.handleChangeIndex=function(e,s,n){void 0===t.props.index&&t.setState({index:e}),t.props.onChangeIndex&&t.props.onChangeIndex(e,s,n)},t.handleSwitching=function(e,s){t.timer?(clearInterval(t.timer),t.timer=null):"end"===s&&t.startInterval(),t.props.onSwitching&&t.props.onSwitching(e,s)},t.handleVisibilityChange=function(e){e.target.hidden?clearInterval(t.timer):t.startInterval()},t.state.index=e.index||0,t}return(0,c.default)(s,t),(0,l.default)(s,[{key:"componentDidMount",value:function(){this.startInterval()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;"number"==typeof t&&t!==this.props.index&&this.setState({index:t})}},{key:"componentDidUpdate",value:function(e){!(0,u.shallowEqualObjects)({index:e.index,interval:e.interval,autoplay:e.autoplay},{index:this.props.index,interval:this.props.interval,autoplay:this.props.autoplay})&&this.startInterval()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"startInterval",value:function(){var e=this.props,t=e.autoplay,s=e.interval;clearInterval(this.timer),t&&(this.timer=setInterval(this.handleInterval,s))}},{key:"render",value:function(){var t=this.props,s=t.autoplay,n=(t.direction,t.index,t.interval,t.onChangeIndex),a=(0,i.default)(t,["autoplay","direction","index","interval","onChangeIndex"]),l=this.state.index;return s?p.default.createElement(h.default,{target:"document",onVisibilityChange:this.handleVisibilityChange},p.default.createElement(e,(0,o.default)({index:l,onChangeIndex:this.handleChangeIndex,onSwitching:this.handleSwitching},a))):p.default.createElement(e,(0,o.default)({index:l,onChangeIndex:n},a))}}]),s}(p.default.Component);return t.propTypes={},t.defaultProps={autoplay:!0,direction:"incremental",interval:3e3},t};var o=n(s(42307)),i=n(s(54589)),a=n(s(50920)),l=n(s(38642)),r=n(s(88249)),d=n(s(45182)),c=n(s(30157)),p=n(s(95004)),u=(n(s(67773)),s(26152)),h=n(s(84362)),m=s(94193)},32150:(e,t,s)=>{"use strict";var n=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){function s(){var e,t;(0,a.default)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=(0,r.default)(this,(e=(0,d.default)(s)).call.apply(e,[this].concat(o)))).state={},t.handleKeyDown=function(e){var s,n=t.props,o=n.axis,i=void 0===o?"x":o,a=n.children,l=n.onChangeIndex,r=n.slideCount;switch((0,u.default)(e)){case"page down":case"down":"y"===i?s="decrease":"y-reverse"===i&&(s="increase");break;case"left":"x"===i?s="decrease":"x-reverse"===i&&(s="increase");break;case"page up":case"up":"y"===i?s="increase":"y-reverse"===i&&(s="decrease");break;case"right":"x"===i?s="increase":"x-reverse"===i&&(s="decrease")}if(s){var d=t.state.index,c=d;"increase"===s?c+=1:c-=1,(r||a)&&(c=(0,m.mod)(c,r||p.default.Children.count(a))),void 0===t.props.index&&t.setState({index:c}),l&&l(c,d)}},t.handleChangeIndex=function(e,s,n){void 0===t.props.index&&t.setState({index:e}),t.props.onChangeIndex&&t.props.onChangeIndex(e,s,n)},t}return(0,c.default)(s,t),(0,l.default)(s,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({index:this.props.index||0})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;"number"==typeof t&&t!==this.props.index&&this.setState({index:t})}},{key:"render",value:function(){var t=this.props,s=(t.index,t.onChangeIndex,(0,i.default)(t,["index","onChangeIndex"])),n=this.state.index;return p.default.createElement(h.default,{target:"window",onKeyDown:this.handleKeyDown},p.default.createElement(e,(0,o.default)({index:n,onChangeIndex:this.handleChangeIndex},s)))}}]),s}(p.default.Component);return t.propTypes={},t};var o=n(s(42307)),i=n(s(54589)),a=n(s(50920)),l=n(s(38642)),r=n(s(88249)),d=n(s(45182)),c=n(s(30157)),p=n(s(95004)),u=(n(s(67773)),n(s(70817))),h=n(s(84362)),m=s(94193)},47414:(e,t,s)=>{"use strict";var n=s(41463);Object.defineProperty(t,"p6",{enumerable:!0,get:function(){return a.default}});var o=n(s(89635)),i=n(s(32150)),a=n(s(61450))},61450:(e,t,s)=>{"use strict";var n=s(63268),o=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){function s(e){var t;return(0,l.default)(this,s),(t=(0,d.default)(this,(0,c.default)(s).call(this,e))).timer=null,t.state={},t.handleChangeIndex=function(e,s,n){var o=t.props,i=o.slideCount,a=o.onChangeIndex,l=e-s,r=t.state.index+l;i&&(r=(0,h.mod)(r,i)),void 0===t.props.index&&t.setIndex(r,e,l),a&&a(r,t.state.index,n)},t.handleTransitionEnd=function(){t.timer=setTimeout((function(){t.setWindow()}),0),t.props.onTransitionEnd&&t.props.onTransitionEnd()},t.state.index=e.index||0,t}return(0,p.default)(s,t),(0,r.default)(s,[{key:"UNSAFE_componentWillMount",value:function(){this.setWindow(this.state.index)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;if("number"==typeof t&&t!==this.props.index){var s=t-this.props.index;this.setIndex(t,this.state.indexContainer+s,s)}}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"setIndex",value:function(e,t,s){var n={index:e,indexContainer:t,indexStart:this.state.indexStart,indexStop:this.state.indexStop};s>0&&(!this.props.slideCount||n.indexStop<this.props.slideCount-1)&&(n.indexStop+=1),e>n.indexStop&&(n.indexStop=e);var o=n.indexStart-e;o>0&&(n.indexContainer+=o,n.indexStart-=o),this.setState(n)}},{key:"setWindow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.index,t=this.props.slideCount,s=this.props.overscanSlideBefore,n=this.props.overscanSlideAfter;t&&(s>e&&(s=e),n+e>t-1&&(n=t-e-1)),this.setState({indexContainer:s,indexStart:e-s,indexStop:e+n})}},{key:"render",value:function(){for(var t=this.props,s=(t.children,t.index,t.onChangeIndex,t.onTransitionEnd,t.overscanSlideAfter,t.overscanSlideBefore,t.slideCount,t.slideRenderer),n=(0,a.default)(t,["children","index","onChangeIndex","onTransitionEnd","overscanSlideAfter","overscanSlideBefore","slideCount","slideRenderer"]),o=this.state,l=o.indexContainer,r=o.indexStart,d=o.indexStop,c=[],p=r;p<=d;p+=1)c.push(s({index:p,key:p}));return u.default.createElement(e,(0,i.default)({index:l,onChangeIndex:this.handleChangeIndex,onTransitionEnd:this.handleTransitionEnd},n),c)}}]),s}(u.PureComponent);return t.propTypes={},t.defaultProps={overscanSlideAfter:2,overscanSlideBefore:3},t};var i=o(s(42307)),a=o(s(54589)),l=o(s(50920)),r=o(s(38642)),d=o(s(88249)),c=o(s(45182)),p=o(s(30157)),u=n(s(95004)),h=(o(s(67773)),s(94193))},33894:(e,t,s)=>{"use strict";var n=s(63268),o=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),t.getDomTreeShapes=y,t.findNativeHandler=j,t.default=t.SwipeableViewsContext=void 0;var i=o(s(42307)),a=o(s(54589)),l=o(s(50920)),r=o(s(38642)),d=o(s(88249)),c=o(s(45182)),p=o(s(30157)),u=n(s(95004)),h=(o(s(67773)),o(s(75714)),s(94193));function m(e,t,s,n){return e.addEventListener(t,s,n),{remove:function(){e.removeEventListener(t,s,n)}}}var g={direction:"ltr",display:"flex",willChange:"transform"},v={width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"},b={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(e){return"translate(".concat(-e,"%, 0)")},"x-reverse":function(e){return"translate(".concat(e,"%, 0)")},y:function(e){return"translate(0, ".concat(-e,"%)")},"y-reverse":function(e){return"translate(0, ".concat(e,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function x(e,t){var s=t.duration,n=t.easeFunction,o=t.delay;return"".concat(e," ").concat(s," ").concat(n," ").concat(o)}function f(e,t){var s=b.rotationMatrix[t];return{pageX:s.x[0]*e.pageX+s.x[1]*e.pageY,pageY:s.y[0]*e.pageX+s.y[1]*e.pageY}}function C(e){return e.touches=[{pageX:e.pageX,pageY:e.pageY}],e}function y(e,t){for(var s=[];e&&e!==t&&e!==document.body&&!e.hasAttribute("data-swipeable");){var n=window.getComputedStyle(e);"absolute"===n.getPropertyValue("position")||"hidden"===n.getPropertyValue("overflow-x")?s=[]:(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&s.push({element:e,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),e=e.parentNode}return s}var w=null;function j(e){var t=e.domTreeShapes,s=e.pageX,n=e.startX,o=e.axis;return t.some((function(e){var t=s>=n;"x"!==o&&"y"!==o||(t=!t);var i=Math.round(e[b.scrollPosition[o]]),a=i>0,l=i+e[b.clientLength[o]]<e[b.scrollLength[o]];return!!(t&&l||!t&&a)&&(w=e.element,!0)}))}var k=u.createContext();t.SwipeableViewsContext=k;var S=function(e){function t(e){var s;return(0,l.default)(this,t),(s=(0,d.default)(this,(0,c.default)(t).call(this,e))).rootNode=null,s.containerNode=null,s.ignoreNextScrollEvents=!1,s.viewLength=0,s.startX=0,s.lastX=0,s.vx=0,s.startY=0,s.isSwiping=void 0,s.started=!1,s.startIndex=0,s.transitionListener=null,s.touchMoveListener=null,s.activeSlide=null,s.indexCurrent=null,s.firstRenderTimeout=null,s.setRootNode=function(e){s.rootNode=e},s.setContainerNode=function(e){s.containerNode=e},s.setActiveSlide=function(e){s.activeSlide=e,s.updateHeight()},s.handleSwipeStart=function(e){var t=s.props.axis,n=f(e.touches[0],t);s.viewLength=s.rootNode.getBoundingClientRect()[b.length[t]],s.startX=n.pageX,s.lastX=n.pageX,s.vx=0,s.startY=n.pageY,s.isSwiping=void 0,s.started=!0;var o=window.getComputedStyle(s.containerNode),i=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform");if(i&&"none"!==i){var a=i.split("(")[1].split(")")[0].split(","),l=window.getComputedStyle(s.rootNode),r=f({pageX:parseInt(a[4],10),pageY:parseInt(a[5],10)},t);s.startIndex=-r.pageX/(s.viewLength-parseInt(l.paddingLeft,10)-parseInt(l.paddingRight,10))||0}},s.handleSwipeMove=function(e){if(s.started){if(null===w||w===s.rootNode){var t=s.props,n=t.axis,o=t.children,i=t.ignoreNativeScroll,a=t.onSwitching,l=t.resistance,r=f(e.touches[0],n);if(void 0===s.isSwiping){var d=Math.abs(r.pageX-s.startX),c=Math.abs(r.pageY-s.startY),p=d>c&&d>h.constant.UNCERTAINTY_THRESHOLD;if(!l&&("y"===n||"y-reverse"===n)&&(0===s.indexCurrent&&s.startX<r.pageX||s.indexCurrent===u.Children.count(s.props.children)-1&&s.startX>r.pageX))return void(s.isSwiping=!1);if(d>c&&e.preventDefault(),!0===p||c>h.constant.UNCERTAINTY_THRESHOLD)return s.isSwiping=p,void(s.startX=r.pageX)}if(!0===s.isSwiping){e.preventDefault(),s.vx=.5*s.vx+.5*(r.pageX-s.lastX),s.lastX=r.pageX;var m=(0,h.computeIndex)({children:o,resistance:l,pageX:r.pageX,startIndex:s.startIndex,startX:s.startX,viewLength:s.viewLength}),g=m.index,v=m.startX;if(null===w&&!i)if(j({domTreeShapes:y(e.target,s.rootNode),startX:s.startX,pageX:r.pageX,axis:n}))return;v?s.startX=v:null===w&&(w=s.rootNode),s.setIndexCurrent(g);var b=function(){a&&a(g,"move")};!s.state.displaySameSlide&&s.state.isDragging||s.setState({displaySameSlide:!1,isDragging:!0},b),b()}}}else s.handleTouchStart(e)},s.handleSwipeEnd=function(){if(w=null,s.started&&(s.started=!1,!0===s.isSwiping)){var e,t=s.state.indexLatest,n=s.indexCurrent,o=t-n;e=Math.abs(s.vx)>s.props.threshold?s.vx>0?Math.floor(n):Math.ceil(n):Math.abs(o)>s.props.hysteresis?o>0?Math.floor(n):Math.ceil(n):t;var i=u.Children.count(s.props.children)-1;e<0?e=0:e>i&&(e=i),s.setIndexCurrent(e),s.setState({indexLatest:e,isDragging:!1},(function(){s.props.onSwitching&&s.props.onSwitching(e,"end"),s.props.onChangeIndex&&e!==t&&s.props.onChangeIndex(e,t,{reason:"swipe"}),n===t&&s.handleTransitionEnd()}))}},s.handleTouchStart=function(e){s.props.onTouchStart&&s.props.onTouchStart(e),s.handleSwipeStart(e)},s.handleTouchEnd=function(e){s.props.onTouchEnd&&s.props.onTouchEnd(e),s.handleSwipeEnd(e)},s.handleMouseDown=function(e){s.props.onMouseDown&&s.props.onMouseDown(e),e.persist(),s.handleSwipeStart(C(e))},s.handleMouseUp=function(e){s.props.onMouseUp&&s.props.onMouseUp(e),s.handleSwipeEnd(C(e))},s.handleMouseLeave=function(e){s.props.onMouseLeave&&s.props.onMouseLeave(e),s.started&&s.handleSwipeEnd(C(e))},s.handleMouseMove=function(e){s.props.onMouseMove&&s.props.onMouseMove(e),s.started&&s.handleSwipeMove(C(e))},s.handleScroll=function(e){if(s.props.onScroll&&s.props.onScroll(e),e.target===s.rootNode)if(s.ignoreNextScrollEvents)s.ignoreNextScrollEvents=!1;else{var t=s.state.indexLatest,n=Math.ceil(e.target.scrollLeft/e.target.clientWidth)+t;s.ignoreNextScrollEvents=!0,e.target.scrollLeft=0,s.props.onChangeIndex&&n!==t&&s.props.onChangeIndex(n,t,{reason:"focus"})}},s.updateHeight=function(){if(null!==s.activeSlide){var e=s.activeSlide.children[0];void 0!==e&&void 0!==e.offsetHeight&&s.state.heightLatest!==e.offsetHeight&&s.setState({heightLatest:e.offsetHeight})}},s.state={indexLatest:e.index,isDragging:!1,renderOnlyActive:!e.disableLazyLoading,heightLatest:0,displaySameSlide:!0},s.setIndexCurrent(e.index),s}return(0,p.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.transitionListener=m(this.containerNode,"transitionend",(function(t){t.target===e.containerNode&&e.handleTransitionEnd()})),this.touchMoveListener=m(this.rootNode,"touchmove",(function(t){e.props.disabled||e.handleSwipeMove(t)}),{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout((function(){e.setState({renderOnlyActive:!1})}),0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;"number"==typeof t&&t!==this.props.index&&(this.setIndexCurrent(t),this.setState({displaySameSlide:(0,h.getDisplaySameSlide)(this.props,e),indexLatest:t}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var e=this;return{slideUpdateHeight:function(){e.updateHeight()}}}},{key:"setIndexCurrent",value:function(e){if(this.props.animateTransitions||this.indexCurrent===e||this.handleTransitionEnd(),this.indexCurrent=e,this.containerNode){var t=this.props.axis,s=b.transform[t](100*e);this.containerNode.style.WebkitTransform=s,this.containerNode.style.transform=s}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var e,t,s=this,n=this.props,o=(n.action,n.animateHeight),l=n.animateTransitions,r=n.axis,d=n.children,c=n.containerStyle,p=n.disabled,h=(n.disableLazyLoading,n.enableMouseEvents),m=(n.hysteresis,n.ignoreNativeScroll,n.index,n.onChangeIndex,n.onSwitching,n.onTransitionEnd,n.resistance,n.slideStyle),f=n.slideClassName,C=n.springConfig,y=n.style,w=(n.threshold,(0,a.default)(n,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"])),j=this.state,S=j.displaySameSlide,I=j.heightLatest,N=j.indexLatest,P=j.isDragging,T=j.renderOnlyActive,Z=p?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},A=!p&&h?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},E=(0,i.default)({},v,m);if(P||!l||S)e="all 0s ease 0s",t="all 0s ease 0s";else if(e=x("transform",C),t=x("-webkit-transform",C),0!==I){var M=", ".concat(x("height",C));e+=M,t+=M}var L={height:null,WebkitFlexDirection:b.flexDirection[r],flexDirection:b.flexDirection[r],WebkitTransition:t,transition:e};if(!T){var O=b.transform[r](100*this.indexCurrent);L.WebkitTransform=O,L.transform=O}return o&&(L.height=I),u.createElement(k.Provider,{value:this.getSwipeableViewsContext()},u.createElement("div",(0,i.default)({ref:this.setRootNode,style:(0,i.default)({},b.root[r],y)},w,Z,A,{onScroll:this.handleScroll}),u.createElement("div",{ref:this.setContainerNode,style:(0,i.default)({},L,g,c),className:"react-swipeable-view-container"},u.Children.map(d,(function(e,t){if(T&&t!==N)return null;var n,i=!0;return t===N&&(i=!1,o&&(n=s.setActiveSlide,E.overflowY="hidden")),u.createElement("div",{ref:n,style:E,className:f,"aria-hidden":i,"data-swipeable":"true"},e)})))))}}]),t}(u.Component);S.displayName="ReactSwipableView",S.propTypes={},S.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var I=S;t.default=I},26285:(e,t,s)=>{"use strict";var n=s(63268);Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return o.default}});var o=n(s(33894))},26152:(e,t,s)=>{"use strict";function n(e,t){if(e===t)return!0;if(!e||!t)return!1;var s=Object.keys(e),n=Object.keys(t),o=s.length;if(n.length!==o)return!1;for(var i=0;i<o;i++){var a=s[i];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}function o(e,t){if(e===t)return!0;if(!e||!t)return!1;var s=e.length;if(t.length!==s)return!1;for(var n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0}s.r(t),s.d(t,{shallowEqualArrays:()=>o,shallowEqualObjects:()=>n})},75714:e=>{"use strict";var t=function(){};e.exports=t},49515:(e,t,s)=>{"use strict";s.d(t,{Z:()=>N});var n=s(50209),o=s.n(n),i=s(95004),a=s(36343);const l=(0,a.q)("badge-ask");l.defaultProps={size:{width:14,height:14}};const r=l,d=(0,a.q)("badge-blaze");d.defaultProps={size:{width:14,height:14}};const c=d,p=(0,a.q)("badge-follow");p.defaultProps={size:{width:14,height:14}};const u=p,h=(0,a.q)("badge-like");h.defaultProps={size:{width:14,height:14}};const m=h,g=(0,a.q)("badge-mention");g.defaultProps={size:{width:14,height:14}};const v=g,b=(0,a.q)("badge-reblog");b.defaultProps={size:{width:14,height:14}};const x=b,f=(0,a.q)("badge-reply");f.defaultProps={size:{width:14,height:14}};const C=f,y=(0,a.q)("badge-tip");y.defaultProps={size:{width:14,height:14}};const w=y;var j=s(17901);const k="CvcGO",S="D9Rbd";var I=s(2629);class N extends i.Component{render(){const{icon:e,backgroundColor:t}=this.props;return(0,I.jsx)("div",{className:S,style:{backgroundColor:t},children:e})}}o()(N,"ofType",(e=>{switch(e){case j.w.Reblog:case j.w.Like:case j.w.Reply:case j.w.Follower:case j.w.Ask:case j.w.Tip:case j.w.Blaze:return N[e]();case j.w.UserMention:case j.w.NoteMention:return N.mention();default:return null}})),o()(N,"reblog",(()=>(0,I.jsx)(x,{className:k}))),o()(N,"like",(()=>(0,I.jsx)(m,{className:k}))),o()(N,"reply",(()=>(0,I.jsx)(C,{className:k}))),o()(N,"follower",(()=>(0,I.jsx)(u,{className:k}))),o()(N,"mention",(()=>(0,I.jsx)(v,{className:k}))),o()(N,"ask",(()=>(0,I.jsx)(r,{}))),o()(N,"tip",(()=>(0,I.jsx)(w,{className:k}))),o()(N,"blaze",(()=>(0,I.jsx)(c,{className:k})))},75408:(e,t,s)=>{"use strict";s.d(t,{x:()=>G,Z:()=>Q});var n=s(50209),o=s.n(n),i=s(5754),a=s.n(i),l=s(95004),r=s(17709),d=s(79615),c=s(59514),p=s(68144),u=s(62412),h=s(25190),m=s(59215),g=s(63583),v=s.n(g),b=s(78667),x=s(73683),f=s(64186),C=s(68384),y=s(13773);const w="AHkyw",j="N96N2",k="KxZIc",S="D_cxo",I="OfvnG",N="OX4Jm",P="iGp0T",T="g3qmO",Z="Uyky3",A="a5mFW",E="nd0kT";var M=s(2629);const L=e=>(0,M.jsx)("div",{className:P,children:(0,M.jsx)(f.Z,{count:e,style:{color:v().paletteWhite,borderColor:v().paletteWhite}})}),O=function(e){let{isSelected:t,onListItemClick:s,blog:n,pathGenerator:o,isMobile:i,showUnreadMessagesCount:l,showNotificationCount:c}=e;const{rerequestPoll:p,unreadMessagesByBlog:u,notificationCountByBlog:h}=(0,y.B)(),m=e=>{p(),s(e,n)},g=()=>{const e=i?24:16,s=n.title||" ";return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:N,children:[(0,M.jsx)(r.Z,{dimension:36,imageResponse:n.avatar}),!!l&&n.mentionKey&&L(u[n.mentionKey]),!!c&&n.uuid&&L(h[n.uuid])]}),(0,M.jsxs)("div",{className:T,children:[(0,M.jsx)("div",{className:Z,children:n.name}),(0,M.jsx)("div",{className:a()(A,{[E]:!n.title}),children:s})]}),t&&(0,M.jsx)("div",{className:k,children:(0,M.jsx)(C.Z,{size:{width:e,height:e}})})]})},v=a()(w,{[I]:i});return o?(0,M.jsx)(x.rU,{className:a()(v,S),onClick:m,to:o(n),state:{selectedBlog:n},children:g()}):(0,M.jsx)(d.Z,{wrapperClassName:v,className:j,onClick:m,label:n.name,children:g()})},R="criTZ",D="ZJtsP",F="tosY3",B="QYM1E",_=function(e){let{blogs:t,selectedBlogName:s,isMobile:n,onListItemClick:o,pathGenerator:i,showUnreadMessagesCount:l,showNotificationCount:r}=e;const{_t:d}=(0,b.bp)();return(0,M.jsxs)("div",{className:a()(R,{[B]:n}),children:[n&&(0,M.jsx)("div",{className:D,children:d("Blogs")}),(0,M.jsx)("div",{className:F,children:t.map(((e,t)=>(0,M.jsx)(O,{isSelected:s===e.name,blog:e,onListItemClick:o,pathGenerator:i,isMobile:n,showUnreadMessagesCount:l,showNotificationCount:r},t)))})]})},U="zOAiO",V="lHc1y",z="gcKSf",H="h6_FZ",W="HhrsO",q="wxU_r",$="SERD7";let G;!function(e){e[e.center=0]="center",e[e.left=1]="left"}(G||(G={}));class X extends l.Component{constructor(){super(...arguments),o()(this,"state",{isOpen:!1}),o()(this,"renderSelectorArrow",(()=>(0,M.jsx)(p.nT,{size:{width:14,height:14},colors:{primary:this.props.textColor??v().paletteTransparentWhite65}}))),o()(this,"toggleOpen",(()=>this.setState((e=>({isOpen:!e.isOpen})),(()=>{var e,t;return null===(e=(t=this.props).onToggle)||void 0===e?void 0:e.call(t,this.state.isOpen)})))),o()(this,"onClickListItem",((e,t)=>{e.stopPropagation();const{onClickSelectedBlog:s}=this.props;this.toggleOpen(),null==s||s(t,e)}))}render(){const{blogs:e,children:t}=this.props;return(0,M.jsx)(h.ZP,{children:s=>{let{isMobile:n}=s;return 1===e.length?this.renderBlogName(n):n?(0,M.jsxs)(M.Fragment,{children:[(null==t?void 0:t(this.toggleOpen))||this.renderSelectorElement(n),this.state.isOpen&&(0,M.jsx)(c.Z,{onGlassClick:this.toggleOpen,children:this.renderBlogsList(n)})]}):(0,M.jsx)(u.ZP,{isOpen:this.state.isOpen,toggle:this.toggleOpen,targetWrapperDisplayBlock:!0,width:240,height:"auto",maxHeight:300,component:this.renderBlogsList(n),children:(null==t?void 0:t(this.toggleOpen))||this.renderSelectorElement(n)})}})}renderSelectorElement(e){const{avatarOnly:t,align:s,selectedBlog:n,showUnreadMessagesCount:o,showNotificationCount:i,appContext:{_c:l}}=this.props;return(0,M.jsxs)(d.Z,{label:l("Variable is blog name","Select a blog. Current selection is %1$s",[n.name]),onClick:this.toggleOpen,wrapperClassName:U,className:a()(V,{[q]:s===G.left}),children:[this.renderAvatar(),!t&&this.renderBlogName(e),!t&&this.renderSelectorArrow(),o&&this.renderMessagingBadge(),i&&this.renderActivityBadge()]})}renderMessagingBadge(){const{selectedBlog:{mentionKey:e},pollerContext:{unreadMessagesCount:t,unreadMessagesByBlog:s}}=this.props;return this.renderBadge(t,s,e)}renderActivityBadge(){const{selectedBlog:{uuid:e},pollerContext:{notificationCount:t,notificationCountByBlog:s}}=this.props;return this.renderBadge(t,s,e)}renderBadge(e,t,s){const n=s&&t[s]&&1===Object.keys(t).length;return e&&!n?(0,M.jsx)("div",{className:$}):null}renderAvatar(){const{selectedBlog:e,avatarDimension:t,displayAvatar:s}=this.props;return s&&t&&(0,M.jsx)(r.Z,{dimension:t,imageResponse:e.avatar})}renderBlogName(e){const{selectedBlog:t,displayAvatar:s,maxTextWidth:n,textColor:o}=this.props;return(0,M.jsx)("div",{className:a()(z,{[W]:s,[H]:e}),style:{maxWidth:n,...o&&{color:o}},children:t.name})}renderBlogsList(e){const{selectedBlog:t,pathGenerator:s,blogs:n,showUnreadMessagesCount:o,showNotificationCount:i}=this.props;return(0,M.jsx)(_,{blogs:n,selectedBlogName:t.name,onListItemClick:this.onClickListItem,pathGenerator:s,isMobile:e,showUnreadMessagesCount:o,showNotificationCount:i})}}o()(X,"defaultProps",{avatarOnly:!1,avatarDimension:25,align:G.center,caretColor:v().paletteTransparentWhite65});const Q=(0,m.X9)(X,{appContext:!0,pollerContext:!0})},3732:(e,t,s)=>{"use strict";s.d(t,{SL:()=>i,mk:()=>n});const n=(0,s(95004).createContext)(void 0),{Provider:o,Consumer:i}=n},66306:(e,t,s)=>{"use strict";s.d(t,{Z:()=>P});var n=s(50209),o=s.n(n),i=s(5754),a=s.n(i),l=s(95004),r=s(13586),d=s(79615),c=s(36343);const p=e=>(0,c.q)("carousel-arrow",{style:{transform:`rotate(${e}deg)`,transformOrigin:"center"}}),u=p(180),h=p(0);[h,u].forEach((e=>e.defaultProps={size:{width:31,height:50}}));var m=s(43523),g=s(78667),v=s(78093);const b="xXVDM",x="BQiWl",f="EvNuu",C="w9aO4",y="YL2V0",w="DeYmO",j="uFGNN",k="EwcDy",S="Ld7nr";var I=s(2629);class N extends l.Component{constructor(){super(...arguments),o()(this,"state",{currentItemIndex:0}),o()(this,"increment",(()=>{const e=this.props.items.length-1;this.state.currentItemIndex===e&&this.quickWiggle("left"),this.props.appContext.logEvent({eventName:m.J.CarouselSlide,eventDetails:this.props.krakenEventDetails||{}}),this.setState({currentItemIndex:Math.min(this.state.currentItemIndex+1,e)})})),o()(this,"decrement",(()=>{0===this.state.currentItemIndex&&this.quickWiggle("right"),this.props.appContext.logEvent({eventName:m.J.CarouselSlide,eventDetails:this.props.krakenEventDetails||{}}),this.setState({currentItemIndex:Math.max(0,this.state.currentItemIndex-1)})})),o()(this,"focusOnItem",(e=>{e>=0&&e<this.props.items.length&&this.setState({currentItemIndex:e})})),o()(this,"getFocusOnItem",(e=>()=>this.focusOnItem(e))),o()(this,"handleIntersectionChange",(e=>{e&&this.quickWiggle("left")}))}quickWiggle(e){const t=100*this.state.currentItemIndex*-1;"left"===e?this.setState({temporaryTransformX:t-20+"%"}):this.setState({temporaryTransformX:`${t+20}%`}),clearTimeout(this.wiggleTimeout),this.wiggleTimeout=window.setTimeout((()=>{this.setState({temporaryTransformX:void 0})}),v.carouselSlideMoveTransitionTimeMs/2)}render(){const{items:e,appContext:{_t:t},hideIndicator:s,hideArrowIfLast:n,arrowProps:o,className:i,carouselItemClassName:l,alwaysShowArrow:c}=this.props,{currentItemIndex:p,temporaryTransformX:m}=this.state;if(1===e.length)return e;const g={transform:`translate3d(${m||`-${p}00%`}, 0, 0)`};return(0,I.jsxs)(r.df,{className:a()(b,i),onChange:this.handleIntersectionChange,threshold:.9,triggerOnce:!0,children:[(0,I.jsx)("div",{className:x,style:g,children:e.map(((e,t)=>(0,I.jsx)("div",{className:a()(f,l),onFocus:this.getFocusOnItem(t),children:e},`item-${t}`)))}),(!n||0!==p)&&(0,I.jsx)(d.Z,{wrapperClassName:a()(C,{[w]:c}),label:t("Previous"),onClick:this.decrement,tabIndex:-1,children:(0,I.jsx)(u,{...o})}),(!n||p<e.length-1)&&(0,I.jsx)(d.Z,{wrapperClassName:a()(y,{[w]:c}),label:t("Next"),onClick:this.increment,tabIndex:-1,children:(0,I.jsx)(h,{...o})}),!s&&this.renderIndicator()]})}renderIndicator(){const{items:e,appContext:{_cn:t}}=this.props,{currentItemIndex:s}=this.state;return(0,I.jsx)("div",{className:j,children:e.map(((e,n)=>(0,I.jsx)(d.Z,{className:a()(k,{[S]:n===s}),onClick:this.getFocusOnItem(n),tabIndex:-1,label:t("Buttons that control a carousel of content - placeholder is the number slide that clicking on the button shows","Show slide %1$s","Show slide %1$s",n+1)},`dot-${n}`)))})}}o()(N,"defaultProps",{hideIndicator:!1,hideArrowIfLast:!1,alwaysShowArrow:!1});const P=(0,g.HJ)(N)},63334:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var n=s(50209),o=s.n(n),i=s(95004),a=s(79615),l=s(78667),r=s(80057);const d={holder:"LaNUG",expandButton:"uR3i7"};var c=s(2629);class p extends i.Component{constructor(){super(...arguments),o()(this,"state",{clientHeight:void 0,unfoldNestedContent:!1,isExpanded:!1,maxHeightForVideo:0}),o()(this,"holderRef",(0,i.createRef)()),o()(this,"expand",(e=>{var t,s;e.stopPropagation(),null===(t=(s=this.props).onExpand)||void 0===t||t.call(s),this.setState({isExpanded:!0,unfoldNestedContent:!0})})),o()(this,"onVideoResize",((e,t)=>{const{maxHeight:s}=this.props,n=t>s&&e<s;this.shouldCrop()&&n&&this.setState({maxHeightForVideo:t+50})}))}componentDidMount(){var e;this.setState({clientHeight:null===(e=this.holderRef.current)||void 0===e?void 0:e.clientHeight})}static preventScroll(e){e.target.scroll(0,0)}shouldCrop(){const{clientHeight:e,isExpanded:t}=this.state,{maxHeight:s,maxHeightTolerance:n,preventTruncation:o,setIsLongPost:i}=this.props,a=void 0===e||e>s+(n||50),l=!t&&a&&!o;return null==i||i(a),l}render(){const{clientHeight:e,unfoldNestedContent:t,maxHeightForVideo:s}=this.state,{maxHeight:n,children:o,expandButtonClassName:i=d.expandButton,onCrop:l,appContext:{_t:u}}=this.props,h=this.shouldCrop();null==l||l(h);const m=h&&void 0!==e,g=u("Expand"),v={unfoldNestedContent:t,onVideoResize:this.onVideoResize},b={maxHeight:h?Math.max(s||n):void 0};return(0,c.jsx)(r.mO.Provider,{value:v,children:(0,c.jsxs)("div",{className:d.holder,style:b,onScroll:p.preventScroll,children:[(0,c.jsx)("div",{ref:this.holderRef,children:o}),m&&(0,c.jsx)(a.Z,{wrapperClassName:i,onClick:this.expand,label:g,children:g})]})})}}const u=(0,l.HJ)(p)},43619:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s(13586);const o="qrzdF";var i=s(2629);const a="250%",l=e=>{let{margin:t=a,children:s,wrapperClassName:l,wrapperStyle:r}=e;const{ref:d,inView:c,entry:p}=(0,n.YD)({rootMargin:t});if(Boolean(!c&&(null==p?void 0:p.target))){const{clientHeight:e,clientWidth:t}=null==p?void 0:p.target,s={maxWidth:t,height:e};return(0,i.jsx)("div",{ref:d,role:"figure",className:o,style:s})}return(0,i.jsx)("div",{className:l,style:r,ref:d,children:s})}},27755:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n=(0,s(36343).q)("airplane");n.defaultProps={size:{width:17,height:17}};const o=n},68384:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n=(0,s(36343).q)("checkmark");n.defaultProps={size:{width:24,height:24}};const o=n},28863:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n=(0,s(36343).q)("collapse");n.defaultProps={size:{width:24,height:24}};const o=n},60499:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(36343);const o=(0,n.$)({filledIcon:(0,n.q)("fire-filled"),emptyIcon:(0,n.q)("fire-empty")});o.defaultProps={filled:!1,size:{width:23,height:20}};const i=o},83302:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n=(0,s(36343).q)("full-screen");n.defaultProps={size:{width:24,height:24}};const o=n},7390:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(36343);const o=(0,n.$)({filledIcon:(0,n.q)("like-filled"),emptyIcon:(0,n.q)("like-empty")});o.defaultProps={filled:!1,size:{width:20,height:18}};const i=o},27252:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n=(0,s(36343).q)("memberships-lock");n.defaultProps={size:{width:36,height:36}};const o=n},10490:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n=(0,s(36343).q)("pause");n.defaultProps={size:{width:24,height:24}};const o=n},39934:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n=(0,s(36343).q)("post-flagged");n.defaultProps={size:{width:34,height:34}};const o=n},81022:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n=(0,s(36343).q)("posts-audio",{altIcon:"posts-audio-alt"});n.defaultProps={size:{width:24,height:24},useAltIcon:!1};const o=n},48430:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n=(0,s(36343).q)("posts-link",{altIcon:"posts-link-alt"});n.defaultProps={size:{width:24,height:24},useAltIcon:!1};const o=n},40565:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n=(0,s(36343).q)("posts-video",{altIcon:"posts-video-alt"});n.defaultProps={size:{width:24,height:24},useAltIcon:!1};const o=n},82145:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s(36343),o=s(55015),i=s(2629);const a=(0,n.q)("reblog"),l=(0,n.q)("reblog-compact"),r=e=>{let{isCompact:t,...s}=e;return t?(0,i.jsx)(l,{...s}):(0,i.jsx)(a,{...s})};r.defaultProps={size:o.Z.desktop.reblogIconSize,isCompact:!1};const d=r},17635:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(36343);const o=(0,n.$)({filledIcon:(0,n.q)("reply-filled"),emptyIcon:(0,n.q)("reply-empty")});o.defaultProps={filled:!1,size:{width:17,height:17}};const i=o},33951:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n=(0,s(36343).q)("tipping");n.defaultProps={size:{width:21,height:21}};const o=n},37560:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s(50209),o=s.n(n),i=s(95004),a=s(36485),l=s(2629);class r extends i.Component{render(){const{className:e,src:t,title:s,queryParams:n,scrolling:o,frameBorder:i,style:r,onLoad:d,placementId:c,allow:p,allowFullScreen:u}=this.props;return(0,l.jsx)("iframe",{className:e,name:c,title:s,src:(0,a.Z)(t,n),scrolling:o,frameBorder:i,style:r,onLoad:d,allow:p,allowFullScreen:u})}}o()(r,"defaultProps",{className:"",queryParams:{},scrolling:"no",frameBorder:0});const d=r},77434:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var n=s(5754),o=s.n(n),i=s(95004),a=s(4840),l=s(42914),r=s(16273);function d(e,t){Object.entries(t).forEach((t=>{let[s,n]=t;e.style[s]=n}))}var c=s(98465),p=s(2629);const u=e=>{const t=(0,i.useRef)(null),[s,n]=(0,i.useState)(0);return(0,i.useEffect)((()=>{const e=t.current;if(!e)return;const o=window.innerWidth,i=window.innerHeight;d(e,{width:`${o}px`,height:`${i}px`}),e.style.setProperty("--fire-container-height",`${i+30}px`),e.querySelectorAll(`.${c.Z.fireEmoji}`).forEach((e=>{const t=.4*Math.random()+.6,s=30*t,n=i/120;d(e,{height:`${30*t}px`,width:`${s}px`,opacity:`${t}`,animationDirection:t*n+"s",animationDelay:`-${Math.random()*t*n}s`,left:Math.random()*o-s/2+"px"})}));const a=(0,l.Z)((()=>{n(s+1)}),100);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)}),[s]),(0,p.jsxs)("div",{className:o()(c.Z.overlay,e.className),"data-testid":"ignite-animation",children:[(0,p.jsx)("div",{className:c.Z.fire,children:(0,p.jsxs)("svg",{width:"125",height:"189.864",viewBox:"0 0 125 189.864",children:[(0,p.jsx)("path",{className:c.Z.flameMain,fill:"#F36E21",d:"M76.553 186.09s-10.178-2.976-15.325-8.226-9.278-16.82-9.278-16.82-.241-6.647-4.136-18.465c0 0 3.357 4.969 5.103 9.938 0 0-5.305-21.086 1.712-30.418 7.017-9.333.571-35.654-2.25-37.534 0 0 13.07 5.64 19.875 47.54 6.806 41.899 16.831 45.301 6.088 53.985"}),(0,p.jsx)("path",{className:o()(c.Z.flameMain,c.Z.one),fill:"#F6891F",d:"M61.693 122.257c4.117-15.4 12.097-14.487-11.589-60.872 0 0 32.016 10.223 52.601 63.123 20.585 52.899-19.848 61.045-19.643 61.582.206.537-19.401-.269-14.835-18.532s-10.651-29.902-6.534-45.301z"}),(0,p.jsx)("path",{className:o()(c.Z.flameMain,c.Z.two),fill:"#FFD04A",d:"M81.657 79.192s11.549 24.845 3.626 40.02c-7.924 15.175-21.126 41.899-.425 64.998 0 0 40.847-33.305-3.201-105.018z"}),(0,p.jsx)("path",{className:o()(c.Z.flameMain,c.Z.three),fill:"#FDBA16",d:"M99.92 101.754s-23.208 47.027-12.043 80.072c0 0 32.741-16.073 20.108-45.79-12.631-29.717-8.065-21.928-8.065-34.282z"}),(0,p.jsx)("path",{className:o()(c.Z.flameMain,c.Z.four),fill:"#F36E21",d:"M103.143 105.917s8.927 30.753-1.043 46.868c-9.969 16.115-14.799 29.041-14.799 29.041s47.086-17.223 15.842-75.909z"}),(0,p.jsx)("path",{className:o()(c.Z.flameMain,c.Z.five),fill:"#FDBA16",d:"M62.049 104.171s-15.645 67.588 10.529 77.655c26.175 10.068-3.545-51.065-10.529-77.655z"}),(0,p.jsx)("path",{className:c.Z.flame,fill:"#F36E21",d:"M101.011 112.926s8.973 10.519 4.556 16.543c-6.197.266 1.185-12.063-4.556-16.543z"}),(0,p.jsx)("path",{className:o()(c.Z.flame,c.Z.one),fill:"#F36E21",d:"M55.592 126.854s-3.819 13.29 2.699 16.945c5.747-2.319-2.384-11.536-2.699-16.945z"}),(0,p.jsx)("path",{className:o()(c.Z.flame,c.Z.two),fill:"#F36E21",d:"M54.918 104.595s-3.959 6.109-1.24 8.949c3.252-.288-1.45-6.215 1.24-8.949z"})]})}),(0,p.jsx)("div",{ref:t,children:(0,r.Z)(0,60).map((e=>(0,p.jsx)("img",{src:a,alt:"",className:c.Z.fireEmoji},e)))})]})}},79406:(e,t,s)=>{"use strict";s.d(t,{Y:()=>i,p:()=>o});var n=s(95004);const o=(0,n.createContext)(void 0),i=()=>(0,n.useContext)(o)},64683:(e,t,s)=>{"use strict";s.d(t,{ZP:()=>Q});var n=s(50209),o=s.n(n),i=s(5754),a=s.n(i),l=s(95004),r=s(26285),d=s(47414),c=s(79615),p=s(59514),u=s(6790),h=s(83054),m=s(13586),g=s(79406),v=s(25190),b=s(43166),x=s(93415);const f=new class{constructor(){o()(this,"listeners",{})}on(e,t){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t),()=>{this.listeners[e]=this.listeners[e].filter((e=>e!==t))}}emit(e,t){(this.listeners[e]||[]).forEach((e=>e(t)))}},C=e=>{const[t,s]=(0,l.useState)(!0);(0,l.useEffect)((()=>(f.emit("mounted"),f.on("mounted",(()=>{s(!1)})))),[]),(0,l.useEffect)((()=>{const t=f.on("closeAll",(()=>{null==e||e(),t()}));return n}),[]);const n=(0,l.useCallback)((()=>{f.emit("closeAll")}),[]);return{isTopmost:t,closeAll:n}};var y=s(31710),w=s(14542),j=s(74754),k=s(10381),S=s(22979),I=s(81584),N=s(74446),P=s(59215),T=s(55015),Z=s(32156);const A="GHloH",E="Pha3k",M="LaNhI",L="yPZfR",O="WYaZw",R="j8GND";var D=s(2629);class F extends l.Component{constructor(){super(...arguments),o()(this,"state",{posts:[]}),o()(this,"apiHelper",(0,I.ZP)(this.props.appContext.apiFetch)),o()(this,"onLike",((e,t)=>{this.props.timelineContext.onLike(e,t),this.setState({posts:this.state.posts.map((s=>(0,S.xT)(s)&&s.id===e?(0,Z.bX)(s,t):s))})})),o()(this,"renderDesktopContent",(()=>{const{posts:e}=this.state;return!(e.length<3)&&(0,D.jsx)(k.U$,{children:t=>{let{width:s}=t;const n=(o=s,Math.min(4,Math.floor((o+20)/320+3e-4)));var o;const i=320*n-20;return(0,D.jsx)("div",{className:M,style:{width:i},children:(0,D.jsxs)(j.ZP.Provider,{value:j.Vn,children:[(0,D.jsx)("h2",{children:this.props.appContext._t("More like this")}),(0,D.jsx)(y.Z,{numberOfColumns:n,columnWidth:300,columnSpacing:20,elementSpacing:10,children:e.map((e=>this.renderElement(e))).filter((e=>e))})]})})}})})),o()(this,"renderElement",(e=>{const t=`${e.placementId?`${e.placementId}:`:""}${e.id}${e.isExpandedInGrid?":expanded":""}`;return(0,D.jsx)(w.Z,{presentationStyle:T.Z.masonry,timelineObject:{...e},isNarrow:!0},t)}))}async componentDidMount(){const e=this.apiHelper.getRelatedPosts(this.props.queryId,this.props.blogName,this.props.postsContext).fetch(),t=(await e).response.elements.filter((e=>"client_side_ad_waterfall"!==e.objectType));this.setState({posts:t},(()=>{this.props.onLoad(t.length>=3)}))}render(){return(0,D.jsx)(N.k.Provider,{value:{...this.props.timelineContext,onLike:this.onLike},children:(0,D.jsx)(v.ZP,{children:e=>{let{isMobile:t}=e;return!t&&this.renderDesktopContent()}})})}}const B=(0,P.X9)(F,{appContext:!0,timelineContext:!0});var _=s(43099);const U=function(e){let{glassProps:t,children:s}=e;const n=(0,b.I_)(),o=n?n.post:void 0,i=(0,l.useRef)(null),[r,d]=(0,l.useState)(!1),c=(0,g.Y)(),{isTopmost:u,closeAll:h}=C(null==c?void 0:c.closeLightbox),f=(0,l.useCallback)((e=>{var t;const s="string"==typeof(null===(t=e.target)||void 0===t?void 0:t.className)?e.target.className:"";(e.target===i.current||s.split(" ").includes(_.Z.column))&&h()}),[h]),y=!u;return(0,D.jsx)(v.ZP,{children:e=>{let{isMobile:n}=e;if(n||null==o||!o.id||o.adInstanceId)return(0,D.jsx)(p.Z,{...t,children:s});const l=o.rebloggedFromId?o.rebloggedFromId:o.id,c={...t,glassIsClickable:!1,opacity:y?0:t.opacity};return(0,D.jsx)(p.Z,{...c,children:(0,D.jsx)("div",{className:a()(A,{[E]:y}),onClick:f,ref:i,role:"dialog",children:(0,D.jsxs)(x.I.Provider,{value:i.current,children:[(0,D.jsx)(m.df,{threshold:.7,children:e=>{let{inView:t,ref:n}=e;return(0,D.jsx)("div",{className:a()(L,{[O]:r&&t}),ref:n,children:s})}}),(0,D.jsx)("div",{className:a()(R,{[E]:!r}),children:(0,D.jsx)(B,{queryId:`${l}`,blogName:o.blog.name,onLoad:d,postsContext:"lightbox"})})]})})})}})};var V=s(43523),z=s(68346),H=s(63583),W=s.n(H);const q={swipeableViews:"h5VS4",focus:"Semgf",mobileSlide:"xKxtH",mobileImage:"uNsrv",image:"MjNMI",left:"UBbzn",center:"kjHHx",right:"rquNV",caption:"dvdaL"};let $;!function(e){e[e.Center=q.center]="Center",e[e.Left=q.left]="Left",e[e.Right=q.right]="Right",e[e.Mobile=q.mobileImage]="Mobile"}($||($={}));const G=e=>{let{glassProps:t,children:s}=e;return(0,D.jsx)(p.Z,{...t,children:s})};class X extends l.Component{constructor(){super(...arguments),o()(this,"state",{isOpen:!1,currentIndex:0,images:[]}),o()(this,"tempIndex",-1),o()(this,"addImageToLightbox",(e=>{const t=this.state.images.length,s=this.state.images;return s.push(e),this.setState({images:s}),()=>this.openLightbox(t)})),o()(this,"toggleLightbox",(()=>{this.setState((e=>({isOpen:!e.isOpen})),this.logStateChange)})),o()(this,"closeLightbox",(()=>{this.setState({isOpen:!1},this.logStateChange)})),o()(this,"logStateChange",(()=>{this.props.adContext.sendClickADMBeacon(this.props.adm),this.props.appContext.logEvent({eventName:V.J.Photo,eventDetails:{placement_id:this.props.placementId,...this.props.krakenEventDetails}})})),o()(this,"renderDesktopContent",(()=>{const{currentIndex:e,images:t}=this.state,s=t.length,n=0===e,o=e===t.length-1,i=!n&&s>=2?this.renderImage(t[e-1],$.Left):null,a=this.renderImage(t[e],$.Center),l=!o&&s>=e+1?this.renderImage(t[e+1],$.Right):null;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(u.ZP,{hotkey:[{key:u.SV.Left,command:this.decrementImage},{key:u.SV.Right,command:this.incrementImage}]}),i,a,l]})})),o()(this,"renderMobileContent",(()=>{const{currentIndex:e,images:t}=this.state,s=(0,d.p6)(r.ZP);return(0,D.jsx)(c.Z,{onClick:this.toggleLightbox,label:this.props.appContext._c("Clicking on the image will expand it and open a lightbox","Close image"),children:(0,D.jsx)(s,{className:q.swipeableViews,containerStyle:{width:"100vw"},slideClassName:q.mobileSlide,slideStyle:{overflow:"visible"},index:e,slideCount:t.length,slideRenderer:e=>{let{index:s,key:n}=e;return this.renderImage(t[s],$.Mobile,n)},onChangeIndex:e=>{this.tempIndex=e},onTransitionEnd:()=>{-1!==this.tempIndex&&(this.setState({currentIndex:this.tempIndex}),this.tempIndex=-1)},overscanSlideBefore:1,overscanSlideAfter:1,resistance:!0})})})),o()(this,"renderImage",((e,t,s)=>{const{currentIndex:n,images:o}=this.state,{imageResponse:i,caption:l}=e;let r;switch(t){case $.Left:r=this.decrementImage;break;case $.Right:r=this.incrementImage;break;case $.Center:{const e=n===o.length-1;r=1===o.length?this.toggleLightbox:e?this.decrementImage:this.incrementImage}}const d=`${new z.Z(i).getLargestImage().width}px`;return r?(0,D.jsxs)(c.Z,{wrapperClassName:[q.image,t].join(" "),onClick:r,label:this.props.appContext._c("Clicking on the image will expand it and open a lightbox","Close image"),children:[(0,D.jsx)(h.Z,{imageResponse:i,sizes:d}),l&&(0,D.jsx)("div",{className:q.caption,children:l})]},s):(0,D.jsxs)("div",{className:a()(q.image,t),children:[(0,D.jsx)(h.Z,{imageResponse:i,sizes:d}),l&&(0,D.jsx)("div",{className:q.caption,children:l})]},s)})),o()(this,"decrementImage",(()=>{0!==this.state.currentIndex&&this.setState((e=>({...e,currentIndex:e.currentIndex-1})))})),o()(this,"incrementImage",(()=>{this.state.currentIndex!==this.state.images.length-1&&this.setState((e=>({...e,currentIndex:e.currentIndex+1})))})),o()(this,"openLightbox",(e=>{this.props.appContext.logEvent({eventName:V.J.FeatureExposed,eventDetails:{feature_key:"redpop_lightbox_open"}}),this.setState({isOpen:!0,currentIndex:e})})),o()(this,"contextValue",{addImageToLightbox:this.addImageToLightbox,closeLightbox:this.closeLightbox})}render(){var e;const{isOpen:t}=this.state,s=(null===(e=this.props.appContext.features)||void 0===e?void 0:e.redpopRelatedPostsLightbox)?U:G;return(0,D.jsxs)(g.p.Provider,{value:this.contextValue,children:[this.props.children,t&&(0,D.jsx)(v.ZP,{children:e=>{let{isMobile:t}=e;return(0,D.jsx)(s,{glassProps:{onGlassClick:this.toggleLightbox,centerContent:!0,color:W().black,opacity:.85},children:t?this.renderMobileContent():this.renderDesktopContent()})}})]})}}const Q=(0,P.X9)(X,{appContext:!0,adContext:!0})},77129:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var n=s(5754),o=s.n(n),i=s(95004),a=s(79615),l=s(78667),r=s(45051),d=s(79406);const c="k4_Vq";var p=s(2629);const u=e=>{let{children:t,imageResponse:s,altText:n,caption:u,className:h}=e;const m=(0,i.useRef)(r.Z),g=(0,i.useRef)({imageResponse:s,altText:n,caption:u}),{_t:v}=(0,l.bp)(),b=(0,d.Y)();(0,i.useEffect)((()=>{b&&(m.current=b.addImageToLightbox(g.current))}),[b]);const x=v("Image");return(0,p.jsx)(a.Z,{wrapperClassName:o()(c,h),onClick:()=>{m.current()},label:n?`${x}: ${n}`:x,children:t})}},31710:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var n=s(50209),o=s.n(n),i=s(95004),a=s(94522),l=s(43099),r=s(2629);const d=function(e){let{columns:t,columnWidth:s,elementSpacing:n=5,columnSpacing:o=n,elementContainerClass:i,numberOfColumns:a}=e;const d={width:s?`${s}px`:100/a+"%",maxWidth:s?`${s}px`:void 0},c={...d,marginLeft:o},p={marginTop:n};return(0,r.jsx)("div",{className:l.Z.masonry,children:t.map(((e,t)=>(0,r.jsx)("div",{className:l.Z.column,style:t>0?c:d,children:e.map(((e,s)=>{let{element:n,tabIndex:o}=e;return(0,r.jsx)("div",{tabIndex:o,className:i,style:s>0?p:void 0,children:n},`${t}-${s}`)}))},`column-${t}`)))})},c=e=>{let{fromChildren:t,numberOfColumns:s,offset:n=0,pinnedToUpperRightIndexes:o=[]}=e;const i=[];for(let e=0;e<s;e+=1)i.push([]);const a=[...t];return o.map(((e,t)=>{const n=a[e];a.splice(e,1),a.splice((t+1)*s-1,0,n)})),a.forEach(((e,t)=>{i[t%s].push({element:e,tabIndex:t+n})})),i};class p extends i.Component{constructor(){super(...arguments),o()(this,"state",{objectsToLayOut:[],columns:c({fromChildren:i.Children.toArray(this.props.children),numberOfColumns:this.props.numberOfColumns,pinnedToUpperRightIndexes:this.props.pinnedToUpperRightIndexes})}),o()(this,"columnSpacerRefs",[]),o()(this,"addNextObjectToLayOutToColumn",((e,t)=>{const{objectsToLayOut:s}=this.state,n=i.Children.count(this.props.children);if(!s.length)return void(this.state.columns!==e&&this.setState({columns:e}));if(t<0)return;const[o,...a]=s,l=[...e];l[t].push({element:o,tabIndex:n-s.length}),this.setState({columns:l,objectsToLayOut:a})})),o()(this,"naivelyLayOutObjects",((e,t,s,n)=>{const o=[...t],{numberOfColumns:i}=this.props,a=c({numberOfColumns:i,fromChildren:e,offset:n}),l=Math.max(s,0);for(let e=0;e<i;e+=1){const t=(e+l)%i;o[t]=[...o[t],...a[e]]}return o})),o()(this,"columnsWithoutRemovedChildren",((e,t)=>e.map((e=>e.filter((e=>{let{element:s}=e;return(0,i.isValidElement)(s)&&s.key&&t.indexOf(s.key)<0})))))),o()(this,"updateColumnsWithNewProps",((e,t)=>{if(!t.length)return e;const s=t.map((e=>{let{key:t}=e;return t}));return e.map((e=>e.map((e=>{let{element:n,tabIndex:o}=e;if(s.indexOf(n.key)>=0){const e=t.find((e=>e.key===n.key));if(e)return{tabIndex:o,element:e}}return{element:n,tabIndex:o}}))))}))}componentDidUpdate(e){const{numberOfColumns:t,children:s,pinnedToUpperRightIndexes:n}=this.props,o=!(0,a.X)(n,e.pinnedToUpperRightIndexes);if(t!==e.numberOfColumns||o)return void this.setState({columns:c({numberOfColumns:t,pinnedToUpperRightIndexes:n,fromChildren:i.Children.toArray(s)}),objectsToLayOut:[]});const l=i.Children.toArray(this.props.children),r=i.Children.toArray(e.children);this.makeLayoutPass(l,r)}render(){const{columns:e}=this.state,t=e.reduce(((e,t,s)=>[...e,[...t,{element:(0,r.jsx)("div",{ref:e=>this.columnSpacerRefs[s]=e},`column ${s} bottom spacer`),tabIndex:-1}]]),[]),s={...this.props};return delete s.children,(0,r.jsx)(d,{columns:t,...s})}makeLayoutPass(e,t){const s=(e,t)=>e.filter((e=>!t.find((t=>(null==e?void 0:e.key)===(null==t?void 0:t.key))))),n=s(t,e),o=s(e,t),l=e.reduce(((e,s,n)=>{const o=t[n];return o&&s&&(0,a.X)(s.props,o.props)||e.push(s),e}),[]);let r=this.updateColumnsWithNewProps(this.state.columns,l);const d=n.map((e=>e.key));let c=-1,p=-1;for(let e=0;e<this.props.numberOfColumns;e+=1){const t=this.columnSpacerRefs[e];if(t){const s=t.getBoundingClientRect().top;(s<p||-1===p)&&(p=s,c=e)}}const u=c;if(!n.length&&!o.length)return void this.addNextObjectToLayOutToColumn(r,u);const h=[...this.state.objectsToLayOut.filter((e=>(0,i.isValidElement)(e)&&e.key&&d.indexOf(e.key)<0)),...o],m=h.slice(0,Math.ceil(h.length/2));r=this.columnsWithoutRemovedChildren(r,d);const g=this.naivelyLayOutObjects(m,r,u,t.length),v=h.slice(Math.ceil(h.length/2));this.setState({columns:g,objectsToLayOut:v})}}const u=p},15321:(e,t,s)=>{"use strict";s.d(t,{d:()=>B,Z:()=>U});var n=s(50209),o=s.n(n),i=s(5754),a=s.n(i),l=s(95004),r=s(79615),d=s(5136),c=s(6001),p=s(3069),u=s(59514),h=s(13434),m=s(73078),g=s(10736),v=s(25694),b=s(64560),x=s(46819),f=s(67023),C=s(50899),y=s(43523),w=s(43684),j=s(17901),k=s(5700),S=s(81584),I=s(59215),N=s(34056),P=s(87517),T=s(73125),Z=s(91949),A=s(24228),E=s(63583),M=s.n(E),L=s(39277),O=s(20775),R=s(2629);const D=(0,I.X9)((e=>{let{postContext:{post:{id:t,blog:{uuid:s}}},appContext:{_t:n,apiFetch:o},timelineContext:{onRemoveTimelineObject:i},children:a,isOpen:l,toggleIsOpen:r}=e;return(0,R.jsxs)(R.Fragment,{children:[a,l&&(0,R.jsx)(u.Z,{onGlassClick:r,glassIsClickable:!1,children:(0,R.jsx)(m.Z,{"data-testid":"delete-dialog",title:n("Are you sure you want to delete this post?"),buttons:[{text:n("Cancel"),onClick:r,buttonStyle:m.X.Neutral},{text:n("OK"),onClick:()=>{const e=null==i?void 0:i({id:t});return r(),o(`/v2/blog/${s}/post/delete`,{method:"POST",body:{id:t}}).catch((()=>null==e?void 0:e()))},buttonStyle:m.X.Confirm}]})})]})}),{appContext:!0,postContext:!0,timelineContext:!0});var F=s(21912);let B;!function(e){e[e.Unclicked=0]="Unclicked",e[e.Success=1]="Success",e[e.Failure=2]="Failure"}(B||(B={}));class _ extends l.Component{constructor(){var e;super(...arguments),e=this,o()(this,"state",{copyLinkStatus:B.Unclicked,copyCustomLinkStatus:B.Unclicked,showingPinPostConfirmationDialog:!1,isOpenDeleteDialog:!1,canSubscribe:!0,isSubscribed:!1,isSubscribeFetching:!1,reportViolationStatus:"idle",communityLabelVisibilitySetting:x.Gl,toggleCommunityLabelStatus:"idle",isGeneratingBranchUrl:!1}),o()(this,"apiHelper",(0,S.ZP)(this.props.appContext.apiFetch)),o()(this,"containerRef",(0,l.createRef)()),o()(this,"hasUnfollowed",!1),o()(this,"toggleIsOpenDeleteDialog",(()=>this.setState((e=>({isOpenDeleteDialog:!e.isOpenDeleteDialog}))))),o()(this,"renderItems",(e=>{const{blogUrl:t,blogName:s,followed:n,postUrl:o,dismissal:i,isPostPublishedOrPrivate:l,date:u,renderPin:m=!1,postContext:{post:{id:v,isPromoted:x,canPin:C,isPinned:y,placementId:w,blogName:j,askingName:k,postAuthor:S},presentationStyle:{showsPreviewPostLink:I,usesInboxAttribution:N,hasCustomPostLink:Z}},timelineContext:A,appContext:{_c:E,apiFetch:L,isLoggedIn:_,_getRelativeDateString:U,wwwBaseUrl:V,features:{commentingUxRedesign:z,communityLabels:H}},canDelete:W,canEdit:q,editablePost:$,trail:G,shouldOpenInLegacy:X=!0}=this.props,{copyLinkStatus:Q,copyCustomLinkStatus:J,showingPinPostConfirmationDialog:Y,isOpenDeleteDialog:K,canSubscribe:ee}=this.state,te=[],se=v;if(u&&l&&te.push((0,R.jsx)(d.Z,{linkTo:o,title:E("Hover text for timestamp that links to a blog permalink. %1$s is the blog's domain","View post on %1$s",[(0,T.Z)(s)]),className:a()(F.Z.meatballItem,F.Z.thin,F.Z.timestamp),children:(0,R.jsx)("span",{className:F.Z.timestampDate,children:U(u,f.qC.Simple)})},"timestamp")),H&&te.push(...this.communityLabelCategoriesItem(e)),!l&&I&&te.push((0,R.jsx)(d.Z,{linkTo:o,className:a()(F.Z.meatballItem,F.Z.thin),children:(0,R.jsx)("span",{children:E("Link text for previewing an unpublished post","Preview Post")})},"preview-post")),m&&C){const e=a()(F.Z.meatballItem,F.Z.thin);y?te.push((0,R.jsx)(d.Z,{keepDropdownOpenAfterClick:!0,className:e,onClick:this.unpinPost,children:E("Link text for unpinning a post","Unpin")},"pin-post")):te.push((0,R.jsxs)(d.Z,{keepDropdownOpenAfterClick:!0,className:e,onClick:this.pinPostClick,children:[E("Link text for pinning a post","Pin"),Y&&this.renderPinPostConfirmationDialog()]},"pin-post"))}if(te.push((0,R.jsx)(c.Z,{blogIdentifier:s,postId:se,onPromote:null==A?void 0:A.onPromote,className:F.Z.meatballItem,isPromoted:!!x},"promoteForItem")),l){const e={[B.Success]:E("Success message after copying a link","Link copied!"),[B.Failure]:E("Error message when trying to copy a link","Failed to copy link."),[B.Unclicked]:E("Menu item to copy the link to a post to your clipboard","Copy link")},t={[B.Success]:F.Z.success,[B.Failure]:F.Z.failure,[B.Unclicked]:""};Z&&te.push((0,R.jsx)(d.Z,{onClick:this.copyCustomLink,keepDropdownOpenAfterClick:!0,className:a()(F.Z.meatballItem,t[J]),children:this.state.isGeneratingBranchUrl?(0,R.jsx)("div",{className:F.Z.loader,children:(0,R.jsx)(h.Z,{small:!0,color:M().paletteGray65})}):e[J]},"copyCustomLink"));let s=e[Q];Q===B.Unclicked&&Z&&(s=E("Menu item to copy the link to a post to your clipboard","Copy link to post")),te.push((0,R.jsx)(d.Z,{onClick:this.copyLink,keepDropdownOpenAfterClick:!0,className:a()(F.Z.meatballItem,t[Q]),children:this.state.isGeneratingBranchUrl?(0,R.jsx)("div",{className:F.Z.loader,children:(0,R.jsx)(h.Z,{small:!0,color:M().paletteGray65})}):s},"copyLink"))}if(_&&!e&&n&&t&&te.push((0,R.jsx)(d.Z,{isWrappingButton:!0,keepDropdownOpenAfterClick:!0,children:(0,R.jsx)(p.Z,{following:!0,blogName:s,blogUrl:t,className:F.Z.meatballItem,placementId:w,isPostHeader:!0,children:this.renderUnfollowText})},"unfollow")),z&&ee&&!N){const e=this.state.isSubscribed?E("Contextual action to unsubscribe from updates","Unsubscribe from conversation"):E("Contextual action to subscribe to updates","Subscribe to conversation");te.push((0,R.jsx)(d.Z,{keepDropdownOpenAfterClick:!0,isWrappingButton:!0,className:F.Z.meatballItem,children:this.state.isSubscribeFetching?(0,R.jsx)("div",{className:F.Z.loader,children:(0,R.jsx)(h.Z,{small:!0,color:M().paletteGray65})}):(0,R.jsx)(r.Z,{label:e,onClick:this.toggleSubscribePost,title:e,children:e})},"subscribe"))}q&&$&&te.push((0,R.jsx)(d.Z,{isWrappingButton:!0,keepDropdownOpenAfterClick:!0,className:a()(F.Z.meatballItem,{[F.Z.spaceRest]:!X}),children:(0,R.jsx)(g.Z,{isTextButton:!0,className:a()(F.Z.meatballItemReset,F.Z.expand),editablePost:$,trail:G,shouldAlwaysOpenInLegacy:X})},"edit")),W&&te.push((0,R.jsx)(d.Z,{isWrappingButton:!0,keepDropdownOpenAfterClick:!0,className:a()(F.Z.meatballItem,F.Z.red),onClick:this.toggleIsOpenDeleteDialog,children:(0,R.jsx)(D,{isOpen:K,toggleIsOpen:this.toggleIsOpenDeleteDialog,children:E("Link text to open delete dialog","Delete")})},"delete")),i&&i.options.forEach((e=>{const t=a()(F.Z.meatballItem,{[F.Z.red]:e.destructive});let s,n;const{type:o,href:i}=e.link;switch(o){case b.U.Action:s=(0,P.Z)(e.link,L,this.removePost);break;case b.U.Web:n=i;break;default:return}te.push((0,R.jsx)(d.Z,{linkTo:n,onClick:s,className:t,children:e.text},`dismissal-${e.text}`))})),H&&_&&te.push(...this.communityLabelItems());const ne=k||S;if(_&&!e){const e=N&&ne?(0,O.IX)(ne,o,V,{postId:se,recipientName:j},"message"):(0,O.IX)(j,o,V,{postId:se});te.push((0,R.jsx)(d.Z,{alwaysExternalLink:!0,linkTo:e,className:a()(F.Z.meatballItem,F.Z.red),children:E("Menu item to report a post or blog","Report")},"report"))}return te})),o()(this,"renderPinPostConfirmationDialog",(()=>{const{_t:e}=this.props.appContext;return(0,R.jsx)(u.Z,{onGlassClick:this.pinPostCancel,glassIsClickable:!1,children:(0,R.jsx)(m.Z,{title:e("Pin this post"),body:e("This will appear at the top of your blog and replace any previous pinned post. Are you sure?"),buttons:[{text:e("Nevermind"),buttonStyle:m.X.Neutral,onClick:this.pinPostCancel},{text:e("Yes"),buttonStyle:m.X.Confirm,onClick:this.pinPostConfirm}]})})})),o()(this,"onPopoverClose",(()=>this.hasUnfollowed&&this.removePost(null,{wasBlogUnfollowed:!0}))),o()(this,"onPopoverOpen",(()=>{const{appContext:{features:{commentingUxRedesign:e}},blogUuid:t,postContext:{post:{id:s}}}=this.props;this.setState({toggleCommunityLabelStatus:"idle"}),e&&t&&(this.setState({isSubscribeFetching:!0}),this.apiHelper.getNotes(t,{id:s,mode:j.L.Conversation}).fetch().then((e=>{let{response:{canSubscribe:t,isSubscribed:s}}=e;this.setState({canSubscribe:!!t,isSubscribed:!!s})})).finally((()=>this.setState({isSubscribeFetching:!1}))))})),o()(this,"removePost",(function(t){var s;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{postContext:o,timelineContext:{onRemoveTimelineObject:i}}=e.props;null!=o&&null!==(s=o.post)&&void 0!==s&&s.id&&(null==i||i({...n,id:o.post.id}))})),o()(this,"renderUnfollowText",(()=>this.props.appContext._c("Menu item to unfollow a blog","Unfollow"))),o()(this,"logMeatballsEvent",(e=>{this.props.appContext.logEvent({eventName:e,eventDetails:{placement_id:this.props.placementId}})})),o()(this,"generateBranchLink",(async e=>{const{blogName:t,postContext:{post:{id:s,slug:n}},appContext:{branch:o,routeSet:i}}=this.props,{branchUrl:a}=this.state;if(a)return a;this.setState({isGeneratingBranchUrl:!0});let l=e;return await(null==o?void 0:o.link({blogName:t,postId:s,url:e,pathname:window.location.pathname,slug:n,routeSet:i}).then((e=>{this.setState({branchUrl:e}),l=e})).finally((()=>{this.setState({isGeneratingBranchUrl:!1})}))),l})),o()(this,"copyLink",(async()=>{var e;const{postContext:{post:{blog:t,id:s,slug:n,postUrl:o,state:i}}}=this.props;let a=i===k.hA.Private?o:(0,A.b)(t,s,n);return a=null!==(e=this.props.appContext.branch)&&void 0!==e&&e.isBranchLoaded()?await this.generateBranchLink(a):a,(0,N.Z)(a).then((()=>{this.setState({copyLinkStatus:B.Success}),this.logMeatballsEvent(y.J.CopyPostLink),this.setLinkResetTimer()})).catch((()=>{this.setState({copyLinkStatus:B.Failure}),this.setLinkResetTimer()}))})),o()(this,"copyCustomLink",(async()=>{const{location:{pathname:e},appContext:{branch:t}}=this.props;let s=`${C.Cw}${e}`;return s=null!=t&&t.isBranchLoaded()?await this.generateBranchLink(s):s,(0,N.Z)(s).then((()=>{this.setState({copyCustomLinkStatus:B.Success}),this.logMeatballsEvent(y.J.CopyPostLink),this.setLinkResetTimer()})).catch((()=>{this.setState({copyCustomLinkStatus:B.Failure}),this.setLinkResetTimer()}))})),o()(this,"pinPostClick",(()=>{this.setState({showingPinPostConfirmationDialog:!0}),this.props.appContext.logEvent({eventName:y.J.PinPost})})),o()(this,"pinPostConfirm",(()=>(this.setState({showingPinPostConfirmationDialog:!1}),this.onPin(!0)))),o()(this,"pinPostCancel",(()=>{this.setState({showingPinPostConfirmationDialog:!1}),this.props.appContext.logEvent({eventName:y.J.PinPostCancel})})),o()(this,"unpinPost",(()=>this.onPin(!1))),o()(this,"onPin",(e=>{const{appContext:{logEvent:t},postContext:{post:s},timelineContext:{onPin:n}}=this.props;null==n||n(s.id,e),t({eventName:e?y.J.PinPostConfirm:y.J.UnpinPost});return(e?this.apiHelper.pinPost:this.apiHelper.unpinPost)(s.blogName,s.id).fetch().catch((()=>null==n?void 0:n(s.id,!e)))})),o()(this,"toggleSubscribePost",(()=>{const{blogName:e,postContext:{post:{id:t}}}=this.props,{isSubscribed:s}=this.state;return s||this.logMeatballsEvent(y.J.PostActivitySubscribe),this.setState({isSubscribed:!s,isSubscribeFetching:!0}),(s?this.apiHelper.unsubscribeToPost(e,t):this.apiHelper.subscribeToPost(e,t)).fetch().catch((()=>this.setState({isSubscribed:s}))).finally((()=>this.setState({isSubscribeFetching:!1})))})),o()(this,"reportViolation",(()=>{const{blogUuid:e,postContext:{post:{id:t},setCommunityLabel:s},toastContext:{toggleToast:n},appContext:{_c:o}}=this.props,i=String(e)||"",a=String(t)||"",{communityLabelVisibilitySetting:l}=this.state;return this.setState({reportViolationStatus:"pending"}),this.apiHelper.reportViolation(String(a),i,"community-label").fetch().then((()=>{n(o("Feedback when the report violation is successful","Thanks for the suggestion! Way to look out for yourself and others on Tumblr."),"success"),this.setState({reportViolationStatus:"success"}),l==x.fj&&this.removePost(null),s&&s(!0)})).catch((()=>{n(o("Feedback when the report violation fail","Oops! Something went wrong. Please try again later."),"error"),this.setState({reportViolationStatus:"failure"})}))})),o()(this,"communityLabelCategoriesItem",(e=>{var t;const s=[],n=(0,Z.nT)(this.props.postContext.post.communityLabels),o=null==n?void 0:n.categories,i=(0,R.jsx)(v.Z,{categories:o,isYourOwnBlog:e,hasCommunityLabel:null===(t=this.props.postContext.post.communityLabels)||void 0===t?void 0:t.hasCommunityLabel,reportViolation:this.reportViolation,reportViolationStatus:this.state.reportViolationStatus});return s.push((0,R.jsx)(d.Z,{className:a()(F.Z.meatballItem,F.Z.thin,F.Z.communityLabel),isWrappingButton:!0,children:i},"community-label")),s})),o()(this,"communityLabelItems",(()=>{const{appContext:{_c:e}}=this.props,t=[];return t.push((0,R.jsx)(d.Z,{linkTo:"/settings/account",className:F.Z.meatballItem,children:e("Menu item to redirect to content settings","Content settings")},"content-settings")),t}))}componentDidUpdate(e){e.followed&&!this.props.followed&&(this.hasUnfollowed=!0)}componentDidMount(){return this.props.appContext.getUserInfo().then((e=>{e.communityLabelVisibilitySetting==x.fj&&this.setState({communityLabelVisibilitySetting:x.fj})}))}render(){const e=this.props.postContext.post.id;return(0,R.jsx)(O.ZP,{...(0,O._r)(this.props),forwardedRef:this.containerRef,renderItems:this.renderItems,onPopoverClose:this.onPopoverClose,onPopoverOpen:this.onPopoverOpen,onBlock:this.removePost,popoverBoundary:w.gc.ScrollParent,showOverflowY:!0,postId:e})}setLinkResetTimer(){clearTimeout(this.copyLinkMessageTimer),this.copyLinkMessageTimer=setTimeout((()=>{this.setState({copyLinkStatus:B.Unclicked}),this.setState({copyCustomLinkStatus:B.Unclicked})}),3e3)}}const U=(0,L.Z)((0,I.X9)(_,{appContext:!0,postContext:!0,timelineContext:!0,toastContext:!0}))},93003:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var n=s(5754),o=s.n(n),i=s(90891),a=s(92023),l=s(43523),r=s(78667),d=s(63583),c=s.n(d);const p="veGhd",u="N4DvW";var h=s(2629);const m=e=>{let{className:t,blog:s,plan:n,useBlogColors:d,context:m}=e;const{logEvent:g}=(0,r.bp)(),v=null==n?void 0:n.checkoutLabels.support,b=d?c().blogBackgroundColor:c().paletteAccent,x=d?c().blogContrastingLinkColor:c().paletteAccentTransparent15;return(0,h.jsx)("div",{className:o()(p,t),children:(0,h.jsx)(i.Z,{className:u,label:v,theme:"default",size:"entireWidth",textColor:b,backgroundColor:x,disabledBackgroundColor:x,disabledTheme:"default",onClick:()=>{g({eventName:l.J.PostpSupportTap,eventDetails:{source:m}})},href:(0,a.T8)(s,{membership:{isSupport:!0}}),children:v})})}},11389:(e,t,s)=>{"use strict";s.d(t,{Z:()=>S});var n=s(5754),o=s.n(n),i=s(79615),a=s(59514),l=s(68144),r=s(68384),d=s(62412),c=s(25190),p=s(43684),u=s(63583),h=s.n(u);const m="JloGo",g="IQS1M",v="oE9j4",b="Ohe4v",x="jOW7m",f="ram4w",C="lAM6N",y="eHy7n",w="AYiEs";var j=s(2629);const k=e=>{const{content:t,isActive:s=!1,label:n,listItemClassName:a,listItemInnerClassName:l,onSelect:d,value:p}=e,{isMobile:u}=(0,c.v$)(),m=u?24:16;return(0,j.jsxs)(i.Z,{wrapperClassName:o()(x,a,{[g]:u}),className:o()(f,l),label:n,role:"option",onClick:e=>d(p,e),children:[t||n,s&&(0,j.jsx)(r.Z,{size:{width:m,height:m},colors:{primary:h().paletteGray65}})]})},S=e=>{const{value:t,title:s,titleEl:n,options:i,isOpen:r=!1,noChevron:u=!1,noTitle:g=!1,onChangeIsOpen:x,onChange:f,onClickGlass:S,width:I,chromelessPopover:N=!1,popoverPosition:P=p.I2.BottomStart,popoverRef:T,popoverWrapperClassName:Z,listItemClassName:A,listItemInnerClassName:E}=e,{isMobile:M}=(0,c.v$)(),L=i.find((e=>e.value===t)),O=(e,t)=>{f(e,t),null==x||x(!1)},R=(0,j.jsx)(j.Fragment,{children:i.map((e=>{let{label:s,content:n,value:o}=e;return(0,j.jsx)(k,{value:o,label:s,content:n||s,isActive:t===o,onSelect:O,listItemClassName:A,listItemInnerClassName:E},s)}))}),D=(0,j.jsxs)("button",{onClick:()=>{null==x||x(!r)},className:v,children:[(0,j.jsx)("span",{children:(null==L?void 0:L.label)||s}),!u&&(0,j.jsx)(l.sn,{size:{width:14,height:14},colors:{primary:h().paletteGray65},className:y})]}),F=n?(0,j.jsx)("button",{children:n}):D,B=(0,j.jsxs)("div",{role:"listbox","data-testid":"mobile-selector",className:o()({[w]:r}),children:[!g&&F,r&&(0,j.jsx)(a.Z,{onGlassClick:()=>{null==S||S()},children:(0,j.jsxs)("div",{className:m,children:[(0,j.jsx)("div",{className:C,children:n||s}),(0,j.jsx)("div",{className:b,children:R})]})})]}),_=(0,j.jsx)("div",{role:"listbox","data-testid":"desktop-selector",className:o()({[w]:r}),children:(0,j.jsx)(d.ZP,{isOpen:r,toggle:()=>{null==x||x(!r)},width:I,height:"auto",maxHeight:300,component:R,boundary:p.gc.ScrollParent,position:P,isChromeless:N,popoverWrapperClassName:Z,useFlex:!0,disableScroll:!0,isFlipEnabled:!1,popoverRef:T,children:g?(0,j.jsx)(j.Fragment,{}):F})});return(0,j.jsx)(j.Fragment,{children:M?B:_})}},62239:(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var n=s(2474),o=s(54382);const i="q9Ryt",a="qos2S",l="rjayT";var r=s(2629);const d=(0,r.jsx)("div",{className:l,children:(0,r.jsx)(n.Ii,{size:{width:15,height:15}})}),c=(0,r.jsx)("div",{className:a}),p=()=>(0,r.jsxs)("div",{className:i,children:[c,d,(0,r.jsx)("div",{children:(0,r.jsx)(o.ZP,{comment:"The text for the 'teaser line' that separates the free content from the membership-only content",children:"Teaser"})}),d,c]})},28798:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s(5754),o=s.n(n),i=s(79615),a=s(78667),l=s(74708),r=s(2629);const d=(0,a.HJ)((function(e){let{appContext:{_t:t},className:s}=e;return(0,r.jsx)(i.Z,{wrapperClassName:o()(l.Z.reorderButton,s),label:t("Reorder"),children:"::"})}))},26372:(e,t,s)=>{"use strict";s.d(t,{Z:()=>P});var n=s(5754),o=s.n(n),i=s(95004),a=s(60499),l=s(36343);const r=(0,l.q)("sponsored-border");r.defaultProps={size:{width:25,height:25}};const d=r,c=(0,l.q)("sponsored-dollar");c.defaultProps={size:{width:14,height:8}};const p=c;var u=s(43523),h=s(78667),m=s(43166),g=s(63583),v=s.n(g);const b="FqD9n",x="fLccs",f="b76BB",C="zU1s3",y="LVy2A",w="m544j",j="XuRmK",k="UGqjE",S="lEZQk",I="IBqNg";var N=s(2629);const P=function(e){let{dollarSize:t={width:8,height:11},blazeSize:s={width:13,height:13},link:n,color:l=v().paletteGray65,showSpinner:r=!0,showSponsoredText:c=!0,showAdFreeLink:g=!0,hideOnMobile:P=!0,isBlazeCampaign:T}=e;const{_c:Z,_t:A,wwwBaseUrl:E,logEvent:M}=(0,h.bp)(),{isNarrow:L}=(0,m.uu)(),O=(0,i.useRef)(null);let R=n??`${E}/docs/en/relevantads`;T&&(R=n??"https://tumblr.zendesk.com/hc/en-us/articles/5298854249367");return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("a",{className:o()({[x]:!L,[b]:L,[f]:P}),href:R,target:"_blank",children:[r&&(0,N.jsxs)("div",{className:C,children:[T?(0,N.jsx)("div",{className:j,children:(0,N.jsx)(a.Z,{filled:!0,filledIconColors:{primary:"#666"},size:s})}):(0,N.jsx)("div",{className:y,children:(0,N.jsx)(p,{size:t,colors:{primary:l}})}),(0,N.jsx)("div",{className:w,ref:O,children:(0,N.jsx)(d,{size:{width:22,height:22},colors:{primary:l}})})]}),c&&(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("div",{className:k,style:{color:l},children:T?Z("Label for blaze campaigns, were Blaze is the product name.","Sponsored with Blaze "):A("Sponsored")})})]}),g&&(0,N.jsx)("a",{className:S,href:"/settings/ad-free-browsing?source=tsd",target:"_blank",rel:"noopener noreferrer",onClick:()=>{M({eventName:u.J.AdFreeLinkClick})},children:(0,N.jsx)("div",{className:I,style:{color:l},children:A("Go Ad-Free")})})]})}},89006:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s(97013),o=s(54382);const i="MbFgY",a="fK9F5";var l=s(2629);const r=e=>{let{color:t,backgroundColor:s,size:r}=e;const d=s?{color:t,backgroundColor:s,padding:"2px 12px"}:{color:t};return(0,l.jsxs)("span",{className:i,style:d,children:[(0,l.jsx)(n.Z,{size:{width:r,height:r},colors:{primary:t}}),(0,l.jsx)("span",{className:a,children:(0,l.jsx)(o.ZP,{comment:"Indicates that the user has supported the creator of a post by subscribing to their blog.",children:"Supporting"})})]})}},26216:(e,t,s)=>{"use strict";s.d(t,{s:()=>f});var n=s(50209),o=s.n(n),i=s(95004),a=s(13586),l=s(83644),r=s(43523),d=s(19403),c=s(22979),p=s(78667),u=s(59215),h=s(7070),m=s(86179),g=s(96467),v=s(93678),b=s(2629);const x=function(e){let{logImpression:t}=e;const s=(0,i.useRef)(),n=(0,i.useRef)(!1),o=(0,m.TH)(),l=()=>{if(n.current&&s.current){const e=Math.floor(performance.now()-s.current);t(e)}s.current=void 0,n.current=!1};return(0,i.useEffect)((()=>(document.addEventListener("visibilitychange",l),function(){document.removeEventListener("visibilitychange",l)})),[]),(0,i.useEffect)((()=>l),[o]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a.df,{className:v.Z.hiddenObserver,onChange:e=>{e?s.current=performance.now():l()},rootMargin:`-${g.desktopHeaderHeightPx}px 0px`,children:(0,b.jsx)("div",{})}),(0,b.jsx)(a.df,{className:v.Z.hiddenObserverMiddlePoint,onChange:e=>{e&&(n.current=!0)},children:(0,b.jsx)("div",{})})]})};function f(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=1e3;class n extends i.Component{constructor(){super(...arguments),o()(this,"areImpressionsEnabled",!t),o()(this,"provideEventDetails",d.L),o()(this,"isIntersecting",!1),o()(this,"isAboutToIntersect",!1),o()(this,"isPostTruncated",!1),o()(this,"setIsPostTruncatedForImpressionEvent",(e=>{this.isPostTruncated=e})),o()(this,"setInViewCallback",(e=>{this.inViewCallback=e})),o()(this,"setApproachingViewCallback",(e=>{this.approachingViewCallback=e})),o()(this,"isInView",(()=>this.isIntersecting)),o()(this,"isApproachingView",(()=>this.isAboutToIntersect)),o()(this,"onEnterView",(e=>{var t;(this.isIntersecting=e,this.isIntersecting)?(null===(t=this.inViewCallback)||void 0===t||t.call(this),this.inViewCallback=null,this.didBeginIntersecting()):this.didEndIntersecting()})),o()(this,"beforeEnterView",(e=>{var t;(this.isAboutToIntersect=e,this.isAboutToIntersect)&&(null===(t=this.approachingViewCallback)||void 0===t||t.call(this))})),o()(this,"didBeginIntersecting",(()=>{if(!this.areImpressionsEnabled)return;const{timelineObject:e,adContext:t}=this.props,{adm:n}=e,{features:o}=this.props.appContext;n&&t.sendImpressionADMBeacon(n),o.redpopUseDwellTimeImpression||this.logImpression({eventName:r.J.Impression}),((null==e?void 0:e.displayType)===l.y.Sponsored||(0,c.WN)(e))&&(o.redpopUseDwellTimeImpression&&this.logImpression({eventName:r.J.Impression}),this.viewableImpressionTimer=window.setTimeout((()=>{this.logImpression({eventName:r.J.ViewableImpression}),this.viewableImpressionTimer=null}),s))})),o()(this,"logImpression",(e=>{let{eventName:t}=e;const{logImpression:s}=this.props.appContext,{tabId:n}=this.props.dashboardContext,{timelineObject:o}=this.props,{placementId:i,displayType:a,serveId:l}=o;s({placementId:i,displayType:a,serveId:l,eventName:t,eventDetails:{...this.provideEventDetails(o,!0),tab:n}})})),o()(this,"logImpressionWithDwellTime",(e=>{var t;const{logImpression:s}=this.props.appContext,{displayMode:n}=this.props.timelineContext,{tabId:o}=this.props.dashboardContext,{timelineObject:i}=this.props,{placementId:a,displayType:d,serveId:c,shouldShowTip:p}=i;(null==i?void 0:i.displayType)!==l.y.Sponsored&&s({placementId:a,displayType:d,serveId:c,eventName:r.J.Impression,eventDetails:{...this.provideEventDetails(i,!0),post_id:i.id,trackable_type:i.objectType,dwell_time:e,display_mode:n,blog_id:null===(t=i.blog)||void 0===t?void 0:t.uuid,has_tip:!!p,is_post_trucated:this.isPostTruncated,tab:o}})})),o()(this,"didEndIntersecting",(()=>{this.viewableImpressionTimer&&(window.clearTimeout(this.viewableImpressionTimer),this.viewableImpressionTimer=null)})),o()(this,"setImpressionsEnabled",(e=>{const t=this.areImpressionsEnabled;this.areImpressionsEnabled=e;t!==e&&e&&this.isIntersecting&&this.didBeginIntersecting()})),o()(this,"setProvideEventDetails",(e=>this.provideEventDetails=e))}render(){const{placementId:s,serveId:n,displayType:o}=this.props.timelineObject,i={...this.props,setIsPostTruncatedForImpressionEvent:this.setIsPostTruncatedForImpressionEvent,...t?{setImpressionsEnabled:this.setImpressionsEnabled,setProvideEventDetails:this.setProvideEventDetails,isInView:this.isInView,isApproachingView:this.isApproachingView,setInViewCallback:this.setInViewCallback,setApproachingViewCallback:this.setApproachingViewCallback}:{}},a=(0,b.jsx)(e,{...i});return s||n||o===l.y.Sponsored?(0,b.jsx)(C,{beforeEnterView:this.beforeEnterView,onEnterView:this.onEnterView,logDwelltimeImpression:this.logImpressionWithDwellTime,children:a}):a}componentDidUpdate(e){this.props.timelineObject.placementId!==e.timelineObject.placementId&&this.didEndIntersecting()}componentWillUnmount(){this.viewableImpressionTimer&&window.clearTimeout(this.viewableImpressionTimer)}}return(0,h.D)(n,`${e.name}WithImpressionLogging`),(0,u.X9)(n,{appContext:!0,adContext:!0,timelineContext:!0,dashboardContext:!0})}const C=e=>{let{children:t,beforeEnterView:s,onEnterView:n,logDwelltimeImpression:o}=e;const i=`${Math.max(window.innerHeight+270,700)}px`,{features:l}=(0,p.bp)();return(0,b.jsxs)("div",{className:v.Z.impressionLoggingWrapper,children:[l.redpopUseDwellTimeImpression&&(0,b.jsx)(x,{logImpression:o}),(0,b.jsx)(a.df,{onChange:n,className:v.Z.hiddenObserver}),(0,b.jsx)(a.df,{onChange:s,rootMargin:`0px 0px ${i} 0px`,triggerOnce:!0,className:v.Z.hiddenObserver}),t]})}},753:(e,t,s)=>{"use strict";s.d(t,{ej:()=>re,ZP:()=>se,$E:()=>ie});var n=s(56305),o=s(64683),i=s(43462),a=s(68280),l=s(5700),r=s(49827),d=s(50209),c=s.n(d),p=s(95004),u=s(79615),h=s(59215);const m="ZqZ6N",g="lYffY";var v=s(2629);class b extends p.Component{constructor(){super(...arguments),c()(this,"state",{expanded:!1}),c()(this,"expand",(()=>{this.setState({expanded:!0})}))}componentDidUpdate(){const{unfoldNestedContent:e}=this.props.postTruncationContext,{expanded:t}=this.state;e&&!t&&this.expand()}render(){if(this.state.expanded)return this.props.components;const{_t:e}=this.props.appContext,t=e("Keep reading");return(0,v.jsx)("div",{className:m,children:(0,v.jsx)(u.Z,{onClick:this.expand,className:g,label:t,children:t})})}}const x=(0,h.X9)(b,{appContext:!0,postTruncationContext:!0});var f=s(68384),C=s(78667),y=s(63583),w=s.n(y);const j="vtkd5",k="N9n3m",S="nXX23",I="uEVCb",N="Cetez",P="jkMFs",T=function(e){let{answered:t,choices:s,component:n,handleChoiceClick:o,isSelected:i,isPollAnswer:a,totalVotes:l}=e;const{_t:r}=(0,C.bp)();if(a){var d;if(!t)return(0,v.jsx)(u.Z,{label:r("Poll Choice"),onClick:o,wrapperClassName:S,children:(0,v.jsx)("div",{className:j,children:n})});const e=(null===(d=L(n.props.blockIndex,s))||void 0===d?void 0:d.voteCount)||0,a=Math.round(e/l*100);return(0,v.jsxs)("div",{className:j,children:[(0,v.jsx)("progress",{className:I,max:l,value:e}),(0,v.jsxs)("div",{className:k,children:[n,i&&(0,v.jsx)("div",{className:P,children:(0,v.jsx)(f.Z,{size:{width:14,height:14},colors:{primary:w().paletteBlack}})}),(0,v.jsxs)("div",{className:N,children:[a,"%"]})]})]})}return(0,v.jsx)(v.Fragment,{children:n})};var Z=s(81584),A=s(94522),E=s(45051);function M(e,t){return(0,l.U0)(t)&&t.choices.find((t=>{const s=t.blocks.find((t=>t===e));return s||0===s}))}function L(e,t){return t.find((t=>{const s=t.blocks.find((t=>t===e));return!!s||0===s}))||null}class O extends p.Component{constructor(){var e;super(...arguments),c()(this,"state",{answered:(e=this.props.layout,!!e.selected.length),selected:this.props.layout.selected,totalVotes:this.props.layout.choices.reduce(((e,t)=>e+t.voteCount),0),choices:this.props.layout.choices}),c()(this,"apiHelper",(0,Z.ZP)(this.props.appContext.apiFetch))}componentDidUpdate(e){const t={};(0,A.X)(this.props.layout.selected,e.layout.selected)||(t.selected=this.props.layout.selected),(0,A.X)(e.layout.choices,this.props.layout.choices)||(t.choices=this.props.layout.choices),Object.keys(t).length&&this.setState({...t})}render(){const{components:e,layout:t}=this.props;return(0,v.jsx)(v.Fragment,{children:e.map(((e,s)=>{const n=L(e.props.blockIndex,this.state.choices);return(0,v.jsx)(T,{answered:this.state.answered,choices:this.state.choices,component:e,handleChoiceClick:n?this.handleChoiceClick(n.choiceId):E.Z,isSelected:!!n&&this.state.selected.indexOf(n.choiceId)>-1,totalVotes:this.state.totalVotes,isPollAnswer:!!M(e.props.blockIndex,t)},s)}))})}handleChoiceClick(e){return()=>this.votePoll([e])}votePoll(e){return this.apiHelper.votePoll(this.props.layout.pollId,e).fetch((e=>{let{response:t}=e;this.setState({answered:!0,selected:t.selected,totalVotes:t.choices.reduce(((e,t)=>e+t.voteCount),0),choices:t.choices})}))}}const R=(0,C.HJ)(O);var D=s(5754),F=s.n(D),B=s(66306),_=s(68346),U=s(55855),V=s(96467),z=s(59992);const H="GzjsW",W="CQmeg",q="ntvhe";class $ extends p.Component{constructor(){super(...arguments),c()(this,"state",{isObjectFitSupported:!0})}componentDidMount(){var e,t;this.setState({isObjectFitSupported:null===(e=(t=CSS).supports)||void 0===e?void 0:e.call(t,"object-fit","cover")})}render(){const{layout:e,components:t,postContext:s,adContext:{adPlacementConfiguration:n,hydraConfigInstanceId:o}}=this.props,{isObjectFitSupported:i}=this.state;if(!i)return(0,v.jsx)(v.Fragment,{children:t});const a=(0,z.M3)(e),r=ie(re(a)),d=this.rowHasPaywallComponent();return(0,v.jsx)("div",{className:H,children:a.display.map((e=>{var i,a,c,u;const h=e.blocks;if(!h.length)return null;const m=h.map((e=>{if(d){const s=t.find((t=>t.props.blockIndex===e));if(s)return s}return t[r.indexOf(e)]}));if(!m.length||1===h.length&&(null===(i=m[0])||void 0===i||null===(a=i.props)||void 0===a||null===(c=a.block)||void 0===c?void 0:c.type)===l.kH.None)return null;const g=m.filter(X);if(1===m.length&&!g.length)return m;const b=h.reduce(((e,t)=>`${e} ${t}`),"");if((null===(u=e.mode)||void 0===u?void 0:u.type)===l.T8.Carousel)return(0,v.jsx)(B.Z,{items:m,krakenEventDetails:(0,U.U)({adPlacementConfiguration:n,hydraConfigInstanceId:o,timelineObject:this.props.postContext.post})},b);const x=g.map((e=>(0,z.J0)((0,l.I3)(e.props.block)))).sort(((e,t)=>e-t))[0];let f=!1;const C=m.map((e=>{var t;if(!X(e))return e;const n=e.props.block,o=new _.Z((0,l.I3)(n));if(((null==s||null===(t=s.presentationStyle)||void 0===t?void 0:t.showsSmallImagesAtOriginalWidth)??!0)&&1===m.length){o.getLargestImage().width<V.smallImagePostBreakpoint&&(f=!0)}else o.generateDisplayHeights((e=>{let{width:t}=e;return x*t}));const i={displayAtOriginalSize:f,block:{...n,media:o.getImagesArray(),imageScale:1/m.length}};return(0,p.cloneElement)(e,i)}));return(0,v.jsx)("div",{className:F()(W,{[q]:f}),children:C},b)}))})}rowHasPaywallComponent(){return this.props.components.some((e=>e.props.block.type===l.kH.Paywall))}}const G=(0,h.X9)($,{postContext:!0,adContext:!0});function X(e){var t,s;return(null==e||null===(t=e.props)||void 0===t||null===(s=t.block)||void 0===s?void 0:s.type)===l.kH.Image}const Q=(e,t)=>{const s=(0,i.i)(e,t);return(0,v.jsx)(i.Z,{block:e,blockIndex:t},s)},J=function(e){let t,{layout:s,components:n}=e;var o;(0,l.af)(s)?t=(0,v.jsx)(r.Z,{blog:null===(o=s.attribution)||void 0===o?void 0:o.blog,isAsking:!0,components:n}):(0,l.U0)(s)?t=(0,v.jsx)(R,{components:n,layout:s}):(0,l.Rf)(s)?t=(0,v.jsx)(r.Z,{blog:s.attribution.blog,isAsking:!1,components:n}):(0,l.le)(s)?t=(0,v.jsx)(G,{layout:s,components:n}):(0,l.eQ)(s)?t=(0,v.jsx)(x,{components:n}):((0,l.m9)(s)||(0,l.PV)(s))&&(t=(0,v.jsx)(v.Fragment,{children:n}));return t||("production"===a.Z.Development&&console.warn(`Unsupported layout type "${s.type}" in post`),null)};var Y=s(31679),K=s(43166);const ee=function(e){let{blocks:t}=e;const s=t.map((e=>({...e})));let n=[];const o=s.reduce(((e,t)=>{if((0,l.dz)(t)&&(0,l.pZ)(t)){const s=e.length-1;if(s>=0){const o=e[s];if((0,l.cd)(o)&&o.elements[0].subtype===t.subtype)return n.push({type:l.kH.None}),o.elements=o.elements.concat(t),e}const o={type:t.subtype===l.lr.OrderedListItem?l.kH.OrderedList:l.kH.UnorderedList,elements:[t]},i=[...n];return n=[],[...e,...i,o]}const s=[...n];return n=[],[...e,...s,t]}),[]);return o.push(...n),o};var te=s(16273);const se=e=>{let{blocks:t,layouts:s,postingBlog:i,isOriginalPost:a,adm:r,placementId:d,isEdit:c}=e;const p=(0,K.uu)(),{post:u,presentationStyle:h}=p,m=p===K.Nw,{hydraConfigInstanceId:g,adPlacementConfiguration:b}=(0,Y.b)(),x=function(e){if(!e)return[];return e.filter(l.Lk)}(s),f=function(e){let{layouts:t,numberOfBlocks:s,isOriginalPost:n,postingBlog:o}=e;const i=[];for(let e=0;e<s;e+=1)i.push(e);const a=[];if(!t.length){const e={type:l.ms.Rows,rows:i.map((e=>[e]))};a.push(e)}return t.forEach((e=>{if(a.push(e),(0,l.af)(e)){const t=i.slice(e.blocks.length);if(t.length){const e={type:n?l.ms.None:l.ms.Answer,blocks:t,...!n&&{attribution:{blog:o,type:"blog"}}};a.push(e)}}else if((0,l.PV)(e)){const t=i.slice(e.truncateAfter+1),s={type:l.ms.BelowTheFold,blocks:t};a.push(s)}})),a}({isOriginalPost:a,postingBlog:i,layouts:x,numberOfBlocks:t.length}),C=function(e,t){return e.map((e=>(0,l.LX)(e)?{...e,blog:t}:e))}(t,i),y=function(e){if(e.length<=1)return e;const t=[];let s,n,o,i,a,r;if(e.forEach((e=>{(0,l.PV)(e)?o=e:(0,l.eQ)(e)?i=e:(0,l.af)(e)?s=e:(0,l.Rf)(e)?n=e:(0,l.le)(e)?a=e:r=e})),o&&i){let e=[];if(s)e=[s];else if(a&&o.truncateAfter>-1){const t=o.blocks.length-1;e=[ne(a,t)[0]]}t.push({...o,nestedLayouts:e}),t.push(i)}else{if(!s)return e;if(!a)return e;{const e=s.blocks.length-1,o=ne(a,e),i=[o[1]];t.push({...s,nestedLayouts:[o[0]]}),t.push(n?{...n,type:l.ms.Answer,nestedLayouts:i}:{...r,type:l.ms.None,nestedLayouts:i})}}return t}(f),w=oe(y,C);return C.filter(l.RD).length?h.imagePostsOpenInPeepr?(0,v.jsx)(n.Z,{blogName:null==i?void 0:i.name,postId:null==u?void 0:u.id,showBlogCard:!1,children:w}):(0,v.jsx)(o.ZP,{adm:r,placementId:d,krakenEventDetails:c||m?{}:(0,U.U)({adPlacementConfiguration:b,hydraConfigInstanceId:g,timelineObject:u}),children:w}):(0,v.jsx)(v.Fragment,{children:w})};function ne(e,t){let s=[{type:l.ms.Rows,display:[]},{type:l.ms.Rows,display:[]}];if((0,l.oF)(e)){const n=e.display;n.forEach(((o,i)=>{const a=o.blocks[o.blocks.length-1];if(t===a){const t=n.slice(0,i+1),o=n.slice(i+1);s=[{...e,display:t},{...e,display:o}]}}))}if((0,l.Ps)(e)){const n=e.rows;n.forEach(((o,i)=>{const a=o[o.length-1];if(t===a){const t=n.slice(0,i+1),o=n.slice(i+1);s=[{...e,rows:t},{...e,rows:o}]}}))}return s}function oe(e,t){const s=[];return e.forEach((e=>{var n;if(e)if(null!==(n=e.nestedLayouts)&&void 0!==n&&n.length){const n=ie(re(e)),o=[],i=[];e.nestedLayouts.forEach(((e,s)=>{const n=ie(re(e));if(s>0){const e=i[i.length-1];if(e+1!==n[0]){const s=ae(t.slice(e+1,n[0])).map(Q);o.push(...s);const a=(0,te.Z)(e+1,n[0]);i.push(...a)}}o.push(...oe([e],t)),i.push(...n)}));const a=ae(t.slice(n[0],i[0])).map(Q),l=ae(t.slice(i[0]+i.length,n[n.length-1]+1)).map(Q);s.push(le(e,[...a,...o,...l]))}else{const n=ie(re(e,t)),o=ae(t.slice(n[0],n[n.length-1]+1));s.push(le(e,o.map(Q)))}})),s}function ie(e){return e.sort(((e,t)=>e-t))}function ae(e){return e&&ee({blocks:e})||[]}function le(e,t){const s=re(e).reduce(((e,t)=>e.concat(`${t} `)),`${e.type} `);return(0,v.jsx)(J,{layout:e,components:t},s)}function re(e,t){return(0,l.af)(e)||(0,l.Rf)(e)||(0,l.PV)(e)||(0,l.eQ)(e)||(0,l.m9)(e)?e.blocks:(0,l.Ps)(e)?e.rows.flat():(0,l.oF)(e)?e.display.map((e=>e.blocks)).flat():(0,l.U0)(e)&&(null==t?void 0:t.map(((e,t)=>t)))||[]}},10736:(e,t,s)=>{"use strict";s.d(t,{Z:()=>C});var n=s(50209),o=s.n(n),i=s(95004),a=s(73683),l=s(8156),r=s(79615),d=s(22183),c=s(25190),p=s(65214),u=s(43452),h=s(5700),m=s(81584),g=s(59215),v=s(63583),b=s.n(v),x=s(2629);class f extends i.Component{constructor(){super(...arguments),o()(this,"apiHelper",(0,m.ZP)(this.props.appContext.apiFetch)),o()(this,"setLegacyFormCloseHandler",(()=>{const{addOnCloseModalRouteHandler:e}=this.props.modalRouteContext;this.removeOnModalCloseListener=e(this.onLegacyFormClose)})),o()(this,"setFormCloseHandler",(()=>{const{addOnCloseModalRouteHandler:e}=this.props.modalRouteContext;this.removeOnModalCloseListener=e(this.onFormClose)})),o()(this,"refreshPostInTimeline",(()=>{const{timelineContext:e,editablePost:{id:t,blog:s}}=this.props;return this.apiHelper.getPosts({postId:t,blogIdentifier:s.name}).fetch((t=>{var s;null==e||null===(s=e.onEditTimelineObject)||void 0===s||s.call(e,t.response.posts[0])}))})),o()(this,"onFormClose",(e=>{var t;let{isModalSuccess:s,postStatus:n}=e;const{editablePost:{state:o}}=this.props,i=o!==h.hA.Published&&o!==h.hA.Private&&(n===u.$t.Now||n===u.$t.Private);return null===(t=this.removeOnModalCloseListener)||void 0===t||t.call(this),s&&!i?this.refreshPostInTimeline():Promise.resolve()})),o()(this,"onLegacyFormClose",(e=>{var t;let{isModalSuccess:s,legacyPostFormState:n}=e;const{timelineContext:o,editablePost:{state:i,id:a}}=this.props;if(null===(t=this.removeOnModalCloseListener)||void 0===t||t.call(this),s&&n&&n===i)return this.refreshPostInTimeline();var l;s&&n&&n!==i&&(null==o||null===(l=o.onRemoveTimelineObject)||void 0===l||l.call(o,{id:a}));return Promise.resolve()}))}componentWillUnmount(){var e;null===(e=this.removeOnModalCloseListener)||void 0===e||e.call(this)}render(){return(0,x.jsx)(c.ZP,{children:e=>{let{isMobile:t}=e;return this.getButton(t)}})}getButton(e){var t;const{editablePost:s,shouldAlwaysOpenInLegacy:n,appContext:{_t:o},className:i,disabled:r}=this.props;return n?e?this.getLegacyAnchor():this.getLegacyIframeButton():r?(0,x.jsx)(x.Fragment,{children:this.getLinkDisplay()}):(0,x.jsx)(a.rU,{onClick:this.setFormCloseHandler,to:(0,p.yj)({blogName:s.blog.name,postId:null===(t=s.id)||void 0===t?void 0:t.toString()},(0,l.Z)({editablePost:s})),"aria-label":o("Edit"),className:i,children:this.getLinkDisplay()})}getLinkDisplay(){const{isTextButton:e,appContext:{_t:t}}=this.props;return e?t("Edit"):this.getIcon()}getIcon(){const{disabled:e}=this.props;return(0,x.jsx)(d.Z,{size:{width:21,height:21},colors:{primary:e?b().paletteGray40:b().paletteGray65}})}getLegacyIframeButton(){var e;const{editablePost:t,disabled:s}=this.props,{_t:n}=this.props.appContext;return s?(0,x.jsx)(r.Z,{label:n("Edit"),disabled:s,children:this.getLinkDisplay()}):(0,x.jsx)(a.rU,{to:(0,p.yj)({blogName:t.blog.name,postId:null===(e=t.id)||void 0===e?void 0:e.toString()}),children:(0,x.jsx)(r.Z,{onClick:this.setLegacyFormCloseHandler,label:n("Edit"),children:this.getLinkDisplay()})})}getLegacyAnchor(){const{_t:e,wwwBaseUrl:t}=this.props.appContext,{disabled:s}=this.props,n=encodeURIComponent(`${t}/dashboard?restore=1`);return s?(0,x.jsx)(r.Z,{label:e("Edit"),disabled:s,children:this.getLinkDisplay()}):(0,x.jsx)("a",{href:`${t}/edit/${this.props.editablePost.id}?redirect_to=${n}&avoid_redirect=1`,role:"button",tabIndex:-1,children:(0,x.jsx)(r.Z,{label:e("Edit"),children:this.getLinkDisplay()})})}}o()(f,"defaultProps",{shouldAlwaysOpenInLegacy:!0});const C=(0,g.X9)(f,{appContext:!0,timelineContext:!0,modalRouteContext:!0})},53379:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var n=s(5754),o=s.n(n),i=s(79615),a=s(27755),l=s(22790),r=s(78667),d=s(63583),c=s.n(d);const p="yDfZA";var u=s(2629);const h=e=>{let{color:t=c().paletteGray65,forceUseAirplane:s=!1,disabled:n,wrapperClassName:d,...h}=e;const{_t:m,features:g}=(0,r.bp)(),v=n?c().paletteGray40:t,b=g.shareButtonSwap&&!s?(0,u.jsx)(l.Z,{size:{width:24,height:24},colors:{primary:v}}):(0,u.jsx)(a.Z,{size:{width:21,height:21},colors:{primary:v}});return(0,u.jsx)(i.Z,{...h,disabled:n,label:m("Share"),wrapperClassName:o()(d,{[p]:!!n}),children:b})}},72835:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s(79615),o=s(33951),i=s(78667);const a="PArFh",l="HQqNA";var r=s(2629);const d=function(e){let{onClick:t,withLabel:s=!0,size:d}=e;const{_c:c}=(0,i.bp)(),p=c("Tip is a verb labeling a button that start the process of giving a tip to a blog","Tip"),u=d?{size:d}:{};return(0,r.jsxs)(n.Z,{className:a,label:p,onClick:t,"data-testid":"tippingButton",children:[(0,r.jsx)(o.Z,{...u}),s&&(0,r.jsx)("span",{className:l,"data-testid":"tipLabel",children:p})]})}},827:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s(54382),o=s(5700);const i="If3QZ";var a=s(2629);const l=function(e){let{attribution:t}=e;if((0,o.yw)(t)){const{url:e,blog:{name:s}}=t;return(0,a.jsx)("div",{className:i,"data-attribution":"true",children:(0,a.jsx)("a",{href:e,target:"_blank",rel:"noopener",children:(0,a.jsx)(n.ZP,{params:{blogName:s},components:{strong:(0,a.jsx)("strong",{})},children:"GIF by [strong][blogName][/strong]"})})})}return null}},72341:(e,t,s)=>{"use strict";s.d(t,{ZP:()=>U,XK:()=>_});var n=s(5754),o=s.n(n),i=s(43619),a=s(5700),l=s(68859),r=s(50209),d=s.n(r),c=s(95004),p=s(10490),u=s(96977),h=s(83054),m=s(25190),g=s(59215),v=s(63583),b=s.n(v),x=s(96467),f=s.n(x);const C={nativePlayer:"VpTnv",progress:"iFok_",withImage:"GR0kA",seeking:"bgpDC",wrapper:"vP7cO",playPause:"zwgHD",trackInfo:"ZVJh0",trackTitle:"Lshd2",trackArtist:"LKThX",trackAlbum:"OKWej",albumImage:"Zz9Fz"};var y=s(2629);class w extends c.Component{constructor(){super(...arguments),d()(this,"state",{isPlaying:!1,seekingBarWidth:0,isDragging:!1}),d()(this,"onTimeUpdate",(()=>{if(!this.progress||!this.audioEl)return;const e=this.progress.clientWidth,t=this.audioEl.duration,s=this.audioEl.currentTime,n=Math.round(s/t*e);this.setState({seekingBarWidth:n})})),d()(this,"onEnded",(()=>{this.setState({isPlaying:!1,seekingBarWidth:0}),this.audioEl&&(this.audioEl.currentTime=0)})),d()(this,"handlePlayButtonClick",(()=>this.setState((e=>({isPlaying:!e.isPlaying}))))),d()(this,"onTouchStart",(e=>{this.state.isPlaying&&this.touchHandler(e)})),d()(this,"onTouchEnd",(()=>{this.handleTouchEndMouseUp()})),d()(this,"onProgressClick",(e=>{this.mouseHandler(e)})),d()(this,"onMouseMove",(e=>{this.state.isDragging&&this.mouseHandler(e)})),d()(this,"onMouseDown",(()=>{this.setState({isDragging:!0,isPlaying:!1})})),d()(this,"onMouseUp",(()=>{this.handleTouchEndMouseUp()})),d()(this,"handleTouchEndMouseUp",(()=>{this.setState({isDragging:!1,isPlaying:!0})})),d()(this,"touchHandler",(e=>{const t=e.changedTouches[0].clientX,s=e.currentTarget;this.updateSeekBarPositionWithEvent(t,s)})),d()(this,"mouseHandler",(e=>{const t=e.clientX,s=e.currentTarget;this.updateSeekBarPositionWithEvent(t,s)})),d()(this,"updateSeekBarPositionWithEvent",((e,t)=>{var s;if(!this.audioEl||!this.progress)return;const n=e-((null===(s=t.firstElementChild)||void 0===s?void 0:s.getBoundingClientRect().left)||0),o=this.audioEl.duration,i=this.progress.clientWidth,a=o/i*n,l=Math.round(a/o*i);l<=i&&this.setState({seekingBarWidth:l}),this.audioEl.currentTime=a})),d()(this,"playAudio",(()=>{var e;null===(e=this.audioEl)||void 0===e||e.play()})),d()(this,"stopAudio",(()=>{var e;null===(e=this.audioEl)||void 0===e||e.pause()}))}componentDidUpdate(e,t){var s,n;null===(s=(n=this.props.autoDockContext).setComponentToAutoDock)||void 0===s||s.call(n,this.state.isPlaying),t.isPlaying!==this.state.isPlaying&&(this.state.isPlaying?this.playAudio():this.stopAudio()),e.isDocked&&!this.props.isDocked&&this.setState({isPlaying:!1})}render(){const{_t:e}=this.props.appContext,t=`${C.progress} ${this.props.poster?C.withImage:""}`,s={onTouchStart:this.onTouchStart,onTouchMove:this.touchHandler,onTouchEnd:this.onTouchEnd},n={onClick:this.onProgressClick,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp};return(0,y.jsxs)("div",{className:C.nativePlayer,children:[(0,y.jsx)(m.ZP,{children:o=>{var i,a;let{isMobile:l}=o;const r=l?s:n;return(0,y.jsx)("div",{...r,className:t,ref:e=>this.progress=e,role:"slider","aria-label":e("Audio Player"),"aria-valuemin":0,"aria-valuemax":null===(i=this.audioEl)||void 0===i?void 0:i.duration,"aria-valuenow":null===(a=this.audioEl)||void 0===a?void 0:a.currentTime,children:(0,y.jsx)("div",{className:C.seeking,ref:e=>this.seeking=e,style:{width:`${this.state.seekingBarWidth}px`}})})}}),(0,y.jsxs)("div",{className:C.wrapper,children:[(0,y.jsx)("div",{className:C.playPause,onClick:this.handlePlayButtonClick,role:"button","aria-label":this.state.isPlaying?e("Pause"):e("Play"),children:this.state.isPlaying?(0,y.jsx)(p.Z,{colors:{primary:b().paletteWhite}}):(0,y.jsx)(u.Z,{cropped:!0,colors:{primary:b().paletteWhite},size:{width:24,height:24}})}),(0,y.jsxs)("div",{className:C.trackInfo,children:[this.props.trackInfo.title&&(0,y.jsx)("div",{className:C.trackTitle,children:this.props.trackInfo.title}),this.props.trackInfo.artist&&(0,y.jsx)("div",{className:C.trackArtist,children:this.props.trackInfo.artist}),this.props.trackInfo.album&&(0,y.jsx)("div",{className:C.trackAlbum,children:this.props.trackInfo.album})]}),(0,y.jsx)("audio",{preload:"auto",style:C,ref:e=>this.audioEl=e,onTimeUpdate:this.onTimeUpdate,onEnded:this.onEnded,title:this.props.trackInfo.title,crossOrigin:"anonymous",children:(0,y.jsx)("source",{className:"audio-source",src:this.props.src})}),this.props.poster?(0,y.jsx)("div",{className:C.albumImage,children:(0,y.jsx)(h.Z,{imageResponse:this.props.poster,sizes:`${f().audioPostAlbumCoverWidth}px`})}):null]})]})}}const j=(0,g.X9)(w,{appContext:!0,autoDockContext:!0}),k="BIsI3",S="OHDdK",I="KilfT",N="SDYOz",P="zZeJN",T="t69by",Z="Z6JVM",A="no7Dd",E="sl8DM",M=function(e){var t;let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return void 0!==e.media&&"tumblr"===e.provider&&(s||(0,l.Z)(null===(t=e.media)||void 0===t?void 0:t.url))},L=e=>e.provider===a.nY.Spotify,O=e=>{var t,s;return L(e)&&!!(null!==(t=e.url)&&void 0!==t&&t.includes("/episode/")||null!==(s=e.url)&&void 0!==s&&s.includes("/show/"))},R=e=>e.provider===a.nY.Soundcloud,D=e=>e.provider===a.nY.Bandcamp,F=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!M(e,t)&&!!e.embedUrl&&(L(e)||D(e)||R(e))},B=(e,t,s,n)=>{var a;const{title:l,artist:r,album:d,poster:c,url:p}=e,u={title:l,artist:r,album:d};if(M(e,n))return((e,t,s,n)=>(0,y.jsx)(j,{poster:s,trackInfo:t,src:e.url,isDocked:n}))(e.media,u,c,s);if(F(e,n))return((e,t,s)=>(0,y.jsx)(i.Z,{wrapperClassName:o()(k,t),children:(0,y.jsx)("iframe",{title:s,className:A,src:e,frameBorder:"0"})}))(e.embedUrl,t,l);const h=p||(null===(a=e.media)||void 0===a?void 0:a.url);return h?(0,y.jsx)("a",{className:E,href:h,target:"_blank",rel:"noopener noreferrer",children:h}):null},_=e=>!M(e)&&!L(e)&&!F(e),U=e=>{let{block:t,isDocked:s,showsMediaCompact:n=!1,isEditing:i=!1}=e;const a=o()({[I]:!!s||n,[S]:L(t),[N]:O(t),[P]:F(t)&&R(t),[T]:F(t)&&D(t)});return(0,y.jsx)("div",{className:o()(Z,a),children:B(t,a,s,i)})}},43462:(e,t,s)=>{"use strict";s.d(t,{i:()=>nt,Z:()=>ot});var n=s(20583),o=s(5754),i=s.n(o),a=s(95004),l=s(98384),r=s(48451),d=s(77129),c=s(62412),p=s(827),u=s(54382),h=s(43523),m=s(43684),g=s(5700),v=s(31679),b=s(78667),x=s(43166),f=s(59215);function C(e){try{const t=new URL(e);return"https:"===t.protocol||"http:"===t.protocol}catch(e){return!1}}var y=s(68346),w=s(55855),j=s(22527),k=s(96488),S=s(63583),I=s.n(S),N=s(96467);const P="DdFPj",T="jWulj",Z="seYEy",A="Dt_Mi",E="od3k_",M="CdvbL",L="POhPp",O="NDQyX",R="Pr7R3",D="eqBap",F="tGxQL",B="x3zpc",_="k8FXT";var U=s(2629);const V=(e,t)=>{if(1===e)return t;const s=t.match(/[0-9]+/g);if(!s)return t;const n=s[0],o=parseInt(n,10),i=Math.round(o*e*100)/100;return t.replace(n,`${i}`)},z=(0,f.X9)((function(e){let{block:t,displayAtOriginalSize:s=!0,postContext:n}=e;const{media:o,attribution:f,colors:S,altText:z,caption:H,imageScale:W=1,isBlurredImages:q,clickthrough:$}=t,G=n!==x.Nw,X=G?n.post.actions:void 0,{mobilePostWidth:Q,desktopPostWidth:J}=n.presentationStyle,{logEvent:Y,_t:K,features:ee}=(0,b.bp)(),{adPlacementConfiguration:te,hydraConfigInstanceId:se}=(0,v.b)();let ne;if(Q){const e=V(W,Q);ne=[`(max-width: ${N.phoneResponsiveMaxBreakpoint}px)`,e].join(" ")}const oe=[ne,V(W,J)].filter((e=>!!e)).join(", "),ie=G?{"data-login-wall-type":"blogView","data-login-wall-blog-name":n.post.blogName,"data-login-wall-post-id":n.post.id,"data-login-wall-post-slug":n.post.slug,"data-login-wall-redirect":"/dashboard"}:{},[ae,le]=(0,a.useState)(!1),re=()=>{if(z&&z!==K("Image")&&"image"!==z)return(0,U.jsx)(c.ZP,{hasArrow:!0,isChromeless:!0,arrowWrapperClassName:L,popoverWrapperClassName:E,component:(0,U.jsxs)("div",{className:M,children:[(0,U.jsx)("h2",{children:(0,U.jsx)(u.ZP,{children:"Image Description"})}),null==z?void 0:z.split("\n").map(((e,t)=>(0,U.jsxs)("span",{children:[e,(0,U.jsx)("br",{})]},t)))]}),position:m.I2.BottomStart,isOpen:ae,toggle:null,skipClickToOpen:!0,skipClickToClose:!0,closeForAllExternalClicks:!0,isFlipEnabled:!1,useFlex:!0,targetStyles:{marginLeft:"20px",width:"40px"},positionBasedOffsetModifiers:{[m.I2.Bottom]:{left:-20,top:0}},strategy:"fixed",children:(0,U.jsx)("a",{className:A,onClick:e=>{e.preventDefault(),e.stopPropagation(),le(!ae)},onKeyDown:e=>{["Enter"," "].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),le(!ae)),ae&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),le(!1))},role:"button",tabIndex:0,children:"ALT"})})};let de=(0,U.jsxs)("figure",{className:P,...ie,onBlur:async e=>{await(0,k.Z)(e)||le(!1)},children:[(0,U.jsx)(r.pC,{imageResponse:o,colors:S,altText:z,sizes:oe,isBlurredImages:q}),re()]});const ce=e=>{var t;Y({eventName:e,eventDetails:{placement_id:null==n||null===(t=n.post)||void 0===t?void 0:t.placementId,...(0,w.U)({adPlacementConfiguration:te,hydraConfigInstanceId:se,timelineObject:null==n?void 0:n.post})}})},pe=()=>{ce(h.J.ClickThrough),ce(h.J.Photo),ce(h.J.PhotoClickThrough)},ue=()=>{ce(h.J.WrittenUrlClickThrough)},he=(0,j.d)(X),me=(null==$?void 0:$.webUrl)||ee.tspDirectClickThrough&&(null==he?void 0:he.tspSkipLightbox)&&(null==he?void 0:he.urls.web);let ge=me?(0,U.jsx)("a",{className:P,href:me,target:"_blank",rel:"noopener",...!(null!=$&&$.webUrl)&&{onClick:pe},children:de}):(0,U.jsx)(d.Z,{className:Z,imageResponse:o,altText:z,caption:H,children:de});const ve=new y.Z(o),be=ve.getLargestImage(),xe=n.presentationStyle.showsSmallImagesAtOriginalWidth??!0;let fe;if(!(0,g.yw)(f)&&be&&xe&&s&&be.width<N.smallImagePostBreakpoint&&be.height<2*N.smallImagePostBreakpoint&&(fe=be.width,de=(0,U.jsxs)("figure",{className:i()(P,T),style:{width:fe},children:[(0,U.jsx)(r.pC,{imageResponse:ve.getImagesArrayWithoutCroppedImage(),colors:S,altText:z,sizes:`${fe}px`,isBlurredImages:q}),re()]}),ge=me?(0,U.jsx)("a",{className:P,href:me,target:"_blank",rel:"noopener",...!(null!=$&&$.webUrl)&&{onClick:pe},children:de}):de),f&&f.url&&C(f.url)){if((0,g.yw)(f))return(0,U.jsxs)("div",{className:O,children:[ge,(0,U.jsx)(p.Z,{attribution:f})]});const{url:e}=f;if((0,g.Jr)(f)){const{displayText:t}=f;return(0,U.jsxs)("div",{className:R,children:[ge,(0,U.jsxs)("a",{"aria-label":K("Attribution"),href:e,target:"_blank",rel:"noopener",style:{width:fe},className:i()(D,{[_]:!!fe}),onClick:ue,children:[(0,U.jsx)("div",{className:F,children:t}),(0,U.jsx)("div",{className:B,children:(0,U.jsx)(l.iL,{size:{width:14,height:14},colors:{primary:I().paletteGray40}})})]})]})}const{urlRedirect:t}=f,s=t||e,n=s&&C(s)?s:"",o=new URL(e||"").hostname;return(0,U.jsxs)("div",{className:R,children:[ge,(0,U.jsxs)("a",{href:n,target:"_blank",rel:"noopener",style:{width:fe},className:i()(D,{[_]:!!fe}),onClick:ue,children:[(0,U.jsx)("div",{className:F,children:o}),(0,U.jsx)("div",{className:B,children:(0,U.jsx)(l.iL,{size:{width:14,height:14},colors:{primary:I().paletteGray40}})})]})]})}return ge}),{postContext:!0});var H=s(62109);const W="zR66v",q=function(e){let{block:t}=e;const{url:s,displayUrl:n,title:o,description:i,author:a,poster:l,siteName:r}=t;return(0,U.jsx)("div",{className:W,children:(0,U.jsx)(H.Z,{urls:{displayUrl:n,redirectUrl:s},info:{title:o,description:i,author:a,poster:l,siteName:r}})})};var $=s(76319),G=s(73683),X=s(97013),Q=s(93003),J=s(62239),Y=s(92023),K=s(52153),ee=s(93099),te=s(12885),se=s(5984);const ne="aU80z",oe="nW3UY",ie="hTKrt",ae="IfJLc",le="FjdIX",re="ZaZiD",de="cUWEe",ce="pKFYc",pe=function(e){let{block:t}=e;const{features:{paywallConsumption:s},isPeeprShowing:n}=(0,b.bp)(),{post:{id:o,rebloggedFromId:a}}=(0,x.uu)(),{title:l,text:r,blog:d,subtype:c}=t;if(!d)return null;const{subscriptionPlan:p,name:u,isPaywallOn:h,paywallAccess:m}=d,{titleFont:v,titleFontWeight:f,linkColor:C,backgroundColor:y}=d.theme||{},w=(0,se.YK)(y||I().blogBackgroundColor);if(!s)return null;if(c===g.br.Divider)return m===K.bv.Creator?(0,U.jsx)(J.Z,{}):null;if(c===g.br.Disabled&&m!==K.bv.Disabled)return null;if(!(m===K.bv.Disabled||p&&h))return null;const j=c===g.br.Cta,k=j?(0,$.Z)({mixedString:r.replace(/%s/,"{{blogName /}}"),components:{blogName:(0,U.jsx)("strong",{children:u})}}):(0,$.Z)({mixedString:r.replace(/%s/,"{{blogName /}}"),components:{blogName:(0,U.jsx)(G.rU,{to:(0,ee.Z)(Y.u2,{peeprBlogname:u}),children:u})}});return(0,U.jsxs)("div",{className:i()(ne,{[oe]:n,[ie]:void 0!==a}),style:(0,te.ZP)(d),children:[(0,U.jsxs)("div",{className:ae,children:[j&&(0,U.jsx)(X.Z,{colors:{primary:C},size:{width:36,height:36}}),(0,U.jsx)("span",{className:le,style:{fontFamily:`'${v}'`,fontWeight:"bold"===f?"bold":"normal"},children:l})]}),(0,U.jsx)("div",{className:re,style:{color:w},children:k}),j&&(0,U.jsx)("div",{className:de,children:(0,U.jsx)(Q.Z,{className:ce,blog:d,postId:o,plan:p,useBlogColors:!0,context:K.Xh.Post})})]})};var ue=s(17709),he=s(79615),me=s(37236);const ge="oXROo",ve="iLvsm",be="GhhyY",xe="Lu7CU",fe="VVJno",Ce="D63Wc",ye="N2ajm",we="Fs5NP",je="MROL0",ke="ACLdV",Se="SqYOv",Ie=e=>{let{answer:t,currentUserAvatar:s,isFinal:n,isTopResult:o,onSelect:a,selected:l,percentage:r,view:d}=e;const c=i()(be,{[xe]:"results"===d});if("results"===d){const e=i()(Ce,{[ye]:!n,[we]:n&&o});return(0,U.jsxs)("div",{className:c,children:[(0,U.jsx)("div",{className:e,style:{width:`${r}%`}}),(0,U.jsx)("span",{className:fe,children:t.answerText}),l&&s&&(0,U.jsx)("span",{className:je,children:(0,U.jsx)(ue.Z,{dimension:22,imageResponse:s,avatarShape:me.o.Square,showBlogCard:!1,isLink:!1})}),(0,U.jsx)("span",{className:ke,children:`${r}%`})]})}return(0,U.jsx)(he.Z,{wrapperClassName:c,className:fe,label:t.answerText,onClick:()=>a(t),disabled:"loading"===d,children:t.answerText})},Ne=31536e3,Pe=2592e3,Te=86400,Ze=3600,Ae=60,Ee=e=>!!e.answers&&e.answers.length>=2,Me=e=>{let{closeAfter:t,closeStatus:s}=e;return s===g.L8.CLOSE_AFTER&&(new Date).getTime()/1e3>(t||Number.MAX_SAFE_INTEGER)},Le=(e,t,s)=>{let{_cn:n}=s;const o=e-t;return o>=Ne?n("Number of years","%1$s year","%1$s years",Math.round(o/Ne)):o>=Pe?n("Number of months","%1$s month","%1$s months",Math.round(o/Pe)):o>=Te?n("Number of days","%1$s day","%1$s days",Math.round(o/Te)):o>=Ze?n("Number of hours","%1$s hour","%1$s hours",Math.round(o/Ze)):o>=Ae?n("Number of minutes","%1$s minute","%1$s minutes",Math.round(o/Ae)):n("Number of seconds","%1$s second","%1$s seconds",o)},Oe=e=>{var t,s;let{block:n}=e;const[o,i]=(0,a.useState)("loading"),[l,r]=(0,a.useState)({}),[d,c]=(0,a.useState)([]),[p,u]=(0,a.useState)(void 0),h=(0,b.bp)(),{_c:m,_cn:v}=h;(0,a.useEffect)((()=>{var e;Ee(n)&&null!==(e=h.features)&&void 0!==e&&e.redpopPollEditor&&(h.apiFetch(`/v2/polls/${n.clientId}/results`).then((e=>{let{response:t}=e;r((null==t?void 0:t.results)||{}),c((null==t?void 0:t.userVotes)||[]),i(Me(n.settings||{})||null!=t&&t.userVotes&&(null==t?void 0:t.userVotes.length)>0?"results":"vote")})).catch((()=>i("vote"))),h.getUserInfo().then((e=>{u(e.blogs[0].avatar)})))}),[]);const x=e=>{r({...l,[e.clientId]:(l[e.clientId]||0)+1}),c([e.clientId]),i("results"),h.apiFetch(`/v2/polls/${n.clientId}`,{method:"POST",body:{selected:[e.clientId]}}).catch((()=>{r({...l}),Me(n.settings||{})||i("vote")}))},f=(0,a.useMemo)((()=>n.answers&&"results"===o?[...n.answers].sort(((e,t)=>l[t.clientId]-l[e.clientId])):n.answers||[]),[n.answers,o,l]),C=Object.values(l).reduce(((e,t)=>e+t),0),y=Me(n.settings||{});let w=v("Number of votes","%1$s vote","%1$s votes",C);var j;(null===(t=n.settings)||void 0===t?void 0:t.closeStatus)===g.L8.CLOSE_AFTER&&(w=y?v("Describes the final result for a poll","Final result from %1$s vote","Final result from %1$s votes",C):w+" • "+m("Indicated how much time is left before a poll closes","Poll ends in %1$s",[Le((null===(j=n.settings)||void 0===j?void 0:j.closeAfter)||Number.MAX_SAFE_INTEGER,Math.round((new Date).getTime()/1e3),h)]));return Ee(n)&&null!==(s=h.features)&&void 0!==s&&s.redpopPollEditor?(0,U.jsxs)("div",{className:ge,children:[(0,U.jsx)("div",{className:ve,children:n.question}),f.map(((e,t)=>(0,U.jsx)(Ie,{answer:e,currentUserAvatar:p,onSelect:x,selected:d.indexOf(e.clientId)>=0,percentage:C&&l[e.clientId]?Math.round(100*l[e.clientId]/C):0,isFinal:y,isTopResult:0===t,view:o},`answer-${e.clientId}`))),(0,U.jsx)("div",{className:Se,children:w})]}):null};var Re=s(50209),De=s.n(Re),Fe=s(13586),Be=s(2474),_e=s(65),Ue=s(47339),Ve=s(71969);const ze="LbyNj",He="WwHLs",We="bklUO",qe="WPVvO";class $e extends a.Component{constructor(){var e;super(...arguments),e=this,De()(this,"state",{shouldAutoDock:!1,alwaysAutoDock:!1,mediaSize:{width:0,height:0}}),De()(this,"reparentableMediaManager",new Ue.R),De()(this,"setMediaWrapper",(e=>this.mediaWrapper=e)),De()(this,"updateMediaSize",(()=>{if(this.mediaWrapper&&!this.currentPostIsDocked()){const e=this.mediaWrapper.offsetWidth,t=this.mediaWrapper.offsetHeight;e===this.state.mediaSize.width&&t===this.state.mediaSize.height||this.setState({mediaSize:{width:e,height:t}})}})),De()(this,"currentPostIsDocked",(()=>{var e;return this.mediaIsDockable()&&!!this.props.dockableContext.reparentableMediaManager&&this.reparentableMediaManager.id===(null===(e=this.props.dockableContext.reparentableMediaManager)||void 0===e?void 0:e.id)})),De()(this,"dockMedia",(e=>{this.updateMediaSize(),this.props.dockableContext.dock({isAutoDock:e,dockedTimelineObject:this.getTimelineObject(),reparentableMediaManager:this.reparentableMediaManager,canAutoDock:this.state.alwaysAutoDock}),this.reparentableMediaManager.isReparented=!0})),De()(this,"getTimelineObject",(()=>({...this.props.postContext.post,content:[],trail:[]}))),De()(this,"undockMedia",(()=>{this.props.dockableContext.undock()})),De()(this,"setComponentToAutoDock",(function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.mediaIsDockable()&&e.state.shouldAutoDock!==t&&e.setState({shouldAutoDock:t,alwaysAutoDock:s})})),De()(this,"autoDock",(e=>{this.mediaIsDockable()&&this.state.shouldAutoDock&&!e&&this.dockMedia(!0)})),De()(this,"mediaIsDockable",(()=>this.props.postContext.presentationStyle.showsDockMediaButton)),De()(this,"onClickDock",(()=>{this.dockMedia(!1)}))}componentDidMount(){this.reparentableMediaManager.id=this.props.dockableContext.getId()}componentWillUnmount(){const{undock:e}=this.props.dockableContext;this.currentPostIsDocked()&&e()}render(){const{media:e,appContext:{_c:t}}=this.props,s=this.mediaIsDockable(),n=this.currentPostIsDocked(),o=t('Button label. "Dock" as in for videos that get put in the sidebar and are always visible when you scroll',"Dock post in sidebar"),i=s&&!n&&(0,U.jsx)(he.Z,{label:o,title:o,wrapperClassName:He,onClick:this.onClickDock,children:(0,U.jsx)(Be.vK,{size:{width:15,height:15},colors:{primary:I().paletteWhite}})}),a=t('Button label. "Dock" as in for videos that get put in the sidebar and are always visible when you scroll',"Undock post in sidebar");return(0,U.jsx)(Ve.Z.Provider,{value:{setComponentToAutoDock:this.setComponentToAutoDock},children:(0,U.jsx)(Fe.df,{onChange:this.autoDock,threshold:.5,children:(0,U.jsxs)("div",{ref:this.setMediaWrapper,className:ze,children:[this.reparentableMediaManager.render(e.component,this.forceUpdate.bind(this),{...e.props,isDocked:n}),(0,U.jsx)(_e.$,{shouldRenderContent:!n,reparentableContent:this.reparentableMediaManager}),n?(()=>s&&(0,U.jsxs)(he.Z,{label:a,title:a,wrapperClassName:We,className:qe,onClick:this.undockMedia,wrapperStyle:{paddingBottom:`calc(${this.state.mediaSize.height/this.state.mediaSize.width*100}% - 4px)`},children:[(0,U.jsx)(Be._C,{colors:{primary:I().paletteBlack},size:{width:30,height:30}}),t("Undock a video that is in the sidebar.","Put it back")]}))():i]})})})}}const Ge=(0,f.X9)($e,{appContext:!0,postContext:!0,dockableContext:!0});var Xe=s(72341);const Qe=(0,f.X9)((function(e){let{block:t,postContext:{presentationStyle:{showsMediaCompact:s}}}=e;return(0,Xe.XK)(t)?(0,U.jsx)(Xe.ZP,{block:t,showsMediaCompact:s}):(0,U.jsx)(Ge,{media:{props:{block:t,showsMediaCompact:s},component:Xe.ZP}})}),{postContext:!0});var Je=s(80057);const Ye=()=>{const e=(0,a.useRef)(null),{onVideoResize:t}=(0,Je.jY)();return(0,a.useEffect)((()=>{const s=e.current;if(t&&s){const e=new ResizeObserver((e=>{const{offsetTop:s,offsetHeight:n}=e[0].target;t(s,s+n)}));return e.observe(s),()=>{e.unobserve(s),e.disconnect()}}}),[]),e};var Ke=s(92895),et=s(58259);const tt=e=>{let{block:t,isEditing:s}=e;const n=Ye(),o=(0,Ke.SV)(t)||!(0,Ke.c7)(t,s)&&!(0,Ke.P2)(t,s)?(0,U.jsx)(et.ZP,{block:t}):(0,U.jsx)(Ge,{media:{props:{block:t},component:et.ZP}});return(0,U.jsx)("div",{ref:n,children:o})},st="RihjV";function nt(e,t){return`${e.type} ${t}`}const ot=function e(t){let{block:s,displayAtOriginalSize:o}=t;if((0,g.dz)(s))return(0,U.jsx)(n.ZP,{block:s});if((0,g.cd)(s)){const t=s.elements.map(((t,s)=>{const n=nt(t,s);return(0,U.jsx)(e,{block:t,blockIndex:s},n)}));switch(s.type){case g.kH.OrderedList:return(0,U.jsx)("ol",{className:st,children:t});case g.kH.UnorderedList:return(0,U.jsx)("ul",{className:st,children:t});default:return(0,U.jsx)("div",{})}}return(0,g.RD)(s)?(0,U.jsx)(z,{block:s,displayAtOriginalSize:o}):(0,g._P)(s)?(0,U.jsx)(Qe,{block:s}):(0,g.R0)(s)?(0,U.jsx)(q,{block:s}):(0,g.gD)(s)?(0,U.jsx)(tt,{block:s}):(0,g.LX)(s)?(0,U.jsx)(pe,{block:s}):(0,g.bT)(s)?(0,U.jsx)(Oe,{block:s}):null}},62109:(e,t,s)=>{"use strict";s.d(t,{Z:()=>P});var n=s(83054),o=s(31679),i=s(78667),a=s(43166),l=s(58546),r=s(43747),d=s(28821),c=s(55855),p=s(96467);const u="gXnIr",h="gaUuO",m="Nu6LP",g="Sv170",v="prqGC",b="AO6cP",x="POcHT",f="pqMQN",C="NMiaP",y="PUcxv",w="o9hq8",j="rKhPR",k="nsUJI",S="OCxEI",I="OVGbY";var N=s(2629);const P=e=>{var t;let{urls:s,info:P}=e;const{logEvent:T}=(0,i.bp)(),Z=(0,a.uu)(),{hydraConfigInstanceId:A,adPlacementConfiguration:E}=(0,o.b)(),{redirectUrl:M,displayUrl:L}=s,O=Z!==a.Nw?null==Z||null===(t=Z.post)||void 0===t?void 0:t.placementId:void 0,R=Z!==a.Nw?(0,c.U)({adPlacementConfiguration:E,hydraConfigInstanceId:A,timelineObject:Z.post}):{},D=(0,l.Q)(P)?function(e){return(0,N.jsx)("a",{className:m,href:e,target:"_blank",rel:"noopener",children:e})}(M):function(e,t,s,o,i,a,d){const c=o??(d&&(0,r.Z)(d)?new URL(d).host:null),u=!!s||!!c||!!i,m=!!t||!(0,l.y)(a),P=!!c||!!i,T=!u&&!m,Z=[g];u||Z.push(C),a&&Z.push(x);const A=[`(max-width: ${p.phoneResponsiveMaxBreakpoint}px) 100vw`,p.postWidth-2*p.linkCardHorizontalMargin+"px"].join(", "),E=m||T?(0,N.jsxs)("div",{className:Z.join(" "),children:[a&&(0,N.jsx)(n.Z,{imageResponse:a,sizes:A,className:f}),(0,N.jsx)("div",{className:v,children:(0,N.jsx)("span",{className:b,children:T?d||e:t})})]}):null,M=[y];m||M.push(w),a&&M.push(j);const L=P?(0,N.jsxs)("div",{className:S,children:[c,c&&i&&(0,N.jsx)("span",{className:I,children:"|"}),i]}):null,O=u?(0,N.jsxs)("div",{className:M.join(" "),children:[s&&(0,N.jsxs)("div",{className:k,children:[" ",s," "]}),L]}):null;return(0,N.jsxs)("a",{className:h,target:"_blank",href:e,children:[E,O]})}(M,null==P?void 0:P.title,null==P?void 0:P.description,null==P?void 0:P.siteName,null==P?void 0:P.author,null==P?void 0:P.poster,L);return(0,N.jsx)("div",{className:u,onClick:O?()=>{(0,d.B)(T,O,R)}:void 0,role:"link",children:D})}},58259:(e,t,s)=>{"use strict";s.d(t,{ZP:()=>U});var n=s(5754),o=s.n(n),i=s(43619),a=s(96977),l=s(37560),r=s(95004),d=s(43523),c=s(78667),p=s(60042),u=s(2629);const h=(0,r.createContext)(null);h.displayName="YouTubeIframeContext";const m=e=>{let{children:t,initialSeekTime:s}=e;const[n,o]=(0,r.useState)(s);return(0,u.jsx)(h.Provider,{value:{seekTime:n,setSeekTime:o},children:t})};let g,v,b;!function(e){e.StateChanged="stateChanged",e.CurrentTimeChanged="currentTimeChanged"}(g||(g={})),function(e){e.Initializing="initializing",e.Ready="ready",e.Buffering="buffering",e.Unstarted="unstarted",e.Playing="playing",e.AutoPlaying="autoPlaying",e.Paused="paused",e.Ended="ended"}(v||(v={})),function(e){e.Play="play",e.Seek="seek",e.Mute="mute",e.GetCurrentTime="getCurrentTime"}(b||(b={}));const x=e=>{let{src:t,videoState:s,onVideoStateChange:n,onVideoCurrentTimeChange:o}=e;const i=t.split("#").pop(),[a,l]=(0,r.useState)();(0,r.useEffect)((()=>{if(i){const{handler:e,getChannelInfo:t}=p.ag.listen(i,{[g.StateChanged]:e=>{if(e===v.Ready){const{source:s,origin:o,namespace:i}=t(),a=p.bG.bind(null,{source:s,target:o,namespace:i});l((()=>a)),n(e,a)}else n(e)},[g.CurrentTimeChanged]:o});return()=>p.ag.unlisten(e)}}),[t,i,n,o]),(e=>{let{videoState:t,sendMessageToPlayer:s}=e;(0,r.useEffect)((()=>{let e;const n=()=>{t===v.Playing&&s&&(s(b.GetCurrentTime),e=setTimeout(n,1e3))};return e=setTimeout(n,1e3),()=>clearTimeout(e)}),[t,s])})({videoState:s,sendMessageToPlayer:a})},f=()=>{const{logEvent:e}=(0,c.bp)(),t={[v.Playing]:d.J.VideoPlay,[v.AutoPlaying]:d.J.VideoAutoPlay,[v.Paused]:d.J.VideoStop,[v.Ended]:d.J.VideoEnd};return s=>{const n=t[s];n&&e({eventName:n,eventDetails:{vendor:"youtube",player_type:"youtube"}})}},C=(0,r.forwardRef)(((e,t)=>{const{src:s,isDocked:n,onStateChange:o}=e,[i,a]=(0,r.useState)(v.Initializing),{seekTime:d,setSeekTime:c}=(()=>{const e=(0,r.useContext)(h);if(!e)throw new Error("<YouTubeIframe> needs <YouTubeIframeProvider> in order to keep track of the current playback position (to resume playback when docked)");return e})(),p=f(),m=(0,r.useCallback)(((e,t)=>{if(n&&e===v.Playing&&[v.Buffering,v.Unstarted].includes(i))return;const s=n&&e===v.Ready&&d;s&&(null==t||t(b.Seek,{to:d}),null==t||t(b.Play));const l=s?v.AutoPlaying:e;a(l),o&&o(l),p(l)}),[d,n,i]);return x({src:s,videoState:i,onVideoStateChange:m,onVideoCurrentTimeChange:c}),(0,u.jsx)(l.Z,{ref:t,...e,allow:n?"autoplay":void 0})}));var y=s(48451),w=s(10381),j=s(22979),k=s(92677),S=s(43166),I=s(63583),N=s.n(I),P=s(96467),T=s.n(P),Z=s(92895),A=s(41169);const E="ypwxx",M="Cf37_",L="ONC_J",O="X93pX",R="l7zyP",D="gGIs6",F=e=>{let{url:t,poster:s,provider:n}=e;const{_c:o}=(0,c.bp)();return(0,u.jsxs)("div",{className:R,children:[s&&(0,u.jsx)(y.wZ,{imageResponse:s,altText:n?o("Accessibility title of a thumbnail for a video on an external site. The placeholder is the name of the external site.","Thumbnail of a video on %1$s",[n]):o("Accessibility title of a thumbnail for a video on an unknown external site","Thumbnail of a video on an external site")}),(0,u.jsx)("div",{className:D,children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noopener",children:[(0,u.jsx)(a.Z,{cropped:!0,colors:{primary:N().paletteWhite},size:{width:24,height:24}}),n?o("Title of a link to open a video on an external site. The placeholder is the name of the external site.","Watch on %1$s",[n]):null]})})]})},B=e=>{var t;let{block:{media:s,poster:n,filmstrip:o},isDocked:i}=e;const a=(0,S.uu)(),{features:{tspvAutoDock:l}}=(0,c.bp)(),r=a!==S.Nw&&(0,j.uz)(null==a?void 0:a.post);return(0,u.jsx)(A.Z,{media:s,useViewabilityTracker:a!==S.Nw,timelineObject:a!==S.Nw?null==a?void 0:a.post:void 0,poster:n,filmstrip:o,isDocked:i,alwaysAutoDock:l&&r,showsDockMediaButton:a!==S.Nw?null==a||null===(t=a.presentationStyle)||void 0===t?void 0:t.showsDockMediaButton:void 0})},_=e=>{let{provider:t,embedIframe:s,isDocked:n}=e;return(0,u.jsx)(w.U$,{children:e=>{let{width:a}=e;const r=s.height/s.width,d=t===k.G6.Youtube,c=Math.min(T().postWidth,a),p=d?{maxWidth:c,height:r*c}:{},h={src:s.url,title:t,allowFullScreen:!0,className:o()(M,{[L]:!d}),style:p};return d?(0,u.jsx)(m,{children:(0,u.jsx)(i.Z,{children:(0,u.jsx)(C,{...h,isDocked:n})})}):(0,u.jsx)(i.Z,{wrapperStyle:{paddingBottom:s.height/s.width*100+"%"},children:(0,u.jsx)(l.Z,{...h})})}})},U=function(e){let{block:t,isDocked:s,isEditing:n}=e;const{poster:i,provider:a,url:l}=t,r=(0,Z.c7)(t,n)?(0,u.jsx)(B,{block:t,isDocked:s}):(0,Z.P2)(t,n)?(0,u.jsx)(_,{provider:t.provider,embedIframe:t.embedIframe,isDocked:s}):null;if(r){const e=a===k.G6.Youtube,s=!e&&(0,Z.P2)(t)?{paddingBottom:t.embedIframe.height/t.embedIframe.width*100+"%"}:void 0;return(0,u.jsx)("div",{className:o()(E,{[O]:(0,Z.P2)(t)&&!e}),style:s,children:r})}return(0,u.jsx)(F,{url:l,poster:i,provider:a})}},41169:(e,t,s)=>{"use strict";s.d(t,{Z:()=>Pe});var n=s(50209),o=s.n(n),i=s(5754),a=s.n(i),l=s(83707),r=s(95004),d=s(13586),c=s(60612);var p=s(79615),u=s(36343);const h=(0,u.q)("replay");h.defaultProps={size:{width:40,height:40}};const m=h;var g=s(19403);let v,b,x,f,C;!function(e){e.Mute="video_mute",e.Unmute="video_unmute",e.Play="video_play",e.Autoplay="video_auto_play",e.Pause="video_pause",e.Autopause="video_auto_stop",e.Loop="video_loop",e.Scrub="video_scrub_end",e.Fullscreen="video_fullscreen",e.ExitFullscreen="video_exitfullscreen"}(v||(v={})),function(e){e.Start="video_start"}(b||(b={})),function(e){e.Quartile25="video_quartile_25",e.Quartile50="video_quartile_50",e.Quartile75="video_quartile_75",e.Quartile100="video_quartile_100"}(x||(x={})),function(e){e.View1Second="video_view_1_second",e.View2Seconds="video_view_2_second",e.View3Seconds="video_view_3_second",e.View10Seconds="video_view_10_second"}(f||(f={})),function(e){e.PositionChange="position_change",e.Reset="reset"}(C||(C={}));const y={[x.Quartile25]:.25,[x.Quartile50]:.5,[x.Quartile75]:.75,[x.Quartile100]:.98},w={[f.View1Second]:1,[f.View2Seconds]:2,[f.View3Seconds]:3,[f.View10Seconds]:10};var j=s(22979),k=s(59215);const S={a:0,c:1,p:50};const I=class{constructor(e,t){o()(this,"beacons",[]),o()(this,"lastMetReqTime",0),o()(this,"totalTimeMeetingReqs",0),this.ruleKey=e,this.reqAudioOn=!!t.a,this.reqContinuous=!!t.c,this.reqDuration=t.d,this.reqPercentInView=t.p||0,this.isDurationCheckpoint=t.isDurationCheckpoint}reset(){this.totalTimeMeetingReqs=0}setBeacons(e){this.beacons=e}fireBeacons(){this.hasFiredBeacons||(this.beacons.forEach((e=>e())),this.isDurationCheckpoint||(this.hasFiredBeacons=!0))}checkRule(e){if(!this.audioCheck(e)||!this.inViewCheck(e))return this.reqContinuous&&(this.lastMetReqTime=null),!1;const t=e.getTimePosition();null===this.lastMetReqTime?this.totalTimeMeetingReqs=0:this.totalTimeMeetingReqs+=t-this.lastMetReqTime;const s=this.durationCheck(t);return this.lastMetReqTime=t,s}audioCheck(e){return!(this.reqAudioOn&&e.isMuted())}inViewCheck(e){return!(this.reqPercentInView>0&&!e.isInView())}durationCheck(e){if(!this.reqDuration)return!0;if(this.reqContinuous)return this.totalTimeMeetingReqs>=this.reqDuration;const t=e===this.reqDuration,s=this.lastMetReqTime===this.reqDuration,n=t&&!s,o=e>this.reqDuration,i=Number(this.lastMetReqTime)<this.reqDuration,a=e-Number(this.lastMetReqTime)<1;return n||o&&i&&a}};const N=class{constructor(e,t){if(o()(this,"setRulesFromDuration",(e=>{let t=Object.keys(w).map((e=>{const t=new I(e,{...S,d:w[e]});return t.beacons=[()=>this.beaconDefinition(e)],t}));Number.isNaN(e)||(t=t.concat(Object.keys(y).map((t=>{const s=new I(t,{d:y[t]*e,isDurationCheckpoint:!0});return s.beacons=[()=>this.beaconDefinition(t)],s})))),this.rules=t})),!e)throw new Error("RuleEngine cannot be instantiated without beaconDefinition! Check the placement id of the viewability tracker.");this.beaconDefinition=e,this.setRulesFromDuration(t)}updateMaxDuration(e){this.setRulesFromDuration(e)}checkRules(e){this.rules.forEach((t=>t.checkRule(e)&&t.fireBeacons()))}resetContinuousRules(){this.resetRules((e=>!!e.reqContinuous))}resetAudioOnContinuousRules(){this.resetRules((e=>!!e.reqContinuous&&e.reqAudioOn))}resetRules(e){this.rules.forEach((t=>e(t)&&t.reset()))}};const P=class{constructor(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};o()(this,"isAutoplay",(()=>this.videoEl.autoplay)),o()(this,"isMuted",(()=>this.videoEl.muted)),o()(this,"getTimePosition",(()=>this.videoEl.currentTime)),o()(this,"getMaxDuration",(()=>Number.isNaN(this.videoEl.duration)?null:this.videoEl.duration)),o()(this,"handleMute",(()=>this.stateChangeFn(v.Mute))),o()(this,"handleUnmute",(()=>this.stateChangeFn(v.Unmute))),o()(this,"handleLoop",(()=>this.stateChangeFn(v.Loop))),o()(this,"handleScrub",(()=>this.stateChangeFn(v.Scrub))),o()(this,"handleFullscreen",(()=>this.stateChangeFn(v.Fullscreen))),o()(this,"handleExitFullscreen",(()=>this.stateChangeFn(v.ExitFullscreen))),o()(this,"handlePause",(()=>this.stateChangeFn(this.isAutoplay()?v.Autopause:v.Pause))),o()(this,"handlePlay",(()=>this.stateChangeFn(this.isAutoplay()?v.Autoplay:v.Play))),o()(this,"handleTimeUpdate",(()=>this.stateChangeFn(C.PositionChange))),this.videoEl=e,this.stateChangeFn=t,this.isInView=s,this.options=n,this.lastKnownIsMuted=this.videoEl.muted,this.addEventListeners()}addEventListeners(){this.videoEl.addEventListener("timeupdate",(()=>this.handleTimeUpdate())),this.videoEl.addEventListener("play",(()=>this.handlePlay())),this.videoEl.addEventListener("pause",(()=>this.handlePause())),this.videoEl.addEventListener("ended",(()=>{this.nextSeekedIsLoop=!0,this.options.doesVideoLoop&&this.handleLoop()})),this.videoEl.addEventListener("seeked",(()=>{this.nextSeekedIsLoop&&0===Math.floor(this.videoEl.currentTime)?this.nextSeekedIsLoop=!1:this.handleScrub()})),["fullscreenchange","webkitfullscreenchange"].forEach((e=>{var t;null===(t=this.videoEl.parentNode)||void 0===t||t.addEventListener(e,(()=>{document.fullscreenElement?this.handleFullscreen():this.handleExitFullscreen()}))})),this.videoEl.addEventListener("webkitbeginfullscreen",(()=>{this.handleFullscreen()})),this.videoEl.addEventListener("webkitendfullscreen",(()=>{this.handleExitFullscreen()})),this.videoEl.addEventListener("volumechange",(()=>{const e=!this.lastKnownIsMuted&&this.isMuted(),t=this.lastKnownIsMuted&&!this.isMuted();this.lastKnownIsMuted=this.isMuted(),e?this.handleMute():t&&this.handleUnmute()}))}};class T extends r.Component{constructor(){super(...arguments),o()(this,"lastEventTime",0),o()(this,"totalPlayTime",0),o()(this,"totalUniquePlayedSeconds",new Set),o()(this,"provideEventDetails",g.L),o()(this,"updateTotalPlayTime",(()=>{const e=this.videoContext.getTimePosition(),t=this.videoContext.getMaxDuration();t&&this.totalUniquePlayedSeconds.size<Math.ceil(t)&&this.totalUniquePlayedSeconds.add(Math.floor(e));const s=e-this.lastEventTime;this.lastEventTime=e,s>0&&s<1&&(this.totalPlayTime+=s)})),o()(this,"sendAnalyticsEvent",((e,t)=>{const{videoRef:s,timelineObject:n}=this.props,{tabId:o}=this.props.dashboardContext;if(!s)return;if(null==n||!n.placementId)return;const{currentTime:i,duration:a}=s,l={eventName:e,eventDetails:{...this.provideEventDetails(n,!0),is_ad:(0,j.uz)(n)||(0,j.A6)(n)||(0,j.N0)(n),placement_id:n.placementId,video:{current_position:Math.floor(i),total_length:Math.floor(a),total_play_length:this.totalPlayTime,total_unique_play_length:this.totalUniquePlayedSeconds.size},tab:o}};this.props.appContext.logEvent(l,{sendPayloadImmediately:t})})),o()(this,"sendUnloadEvent",(()=>{var e;!this.props.videoRef||null!==(e=this.props.videoRef)&&void 0!==e&&e.paused||this.sendAnalyticsEvent(v.Autopause,!0)})),o()(this,"updateRulesEngineDuration",(()=>{this.props.videoRef&&this.rulesEngine.updateMaxDuration(this.props.videoRef.duration)}))}componentDidUpdate(e){!e.videoRef&&this.props.videoRef&&this.setVideoContextAndRulesEngine(this.props.videoRef)}componentDidMount(){this.props.videoRef&&this.setVideoContextAndRulesEngine(this.props.videoRef)}componentWillUnmount(){var e;null===(e=this.props.videoRef)||void 0===e||e.removeEventListener("loadedmetadata",this.updateRulesEngineDuration),window.removeEventListener("beforeunload",this.sendUnloadEvent)}render(){return null}stateChanged(e){var t;switch(e){case v.Mute:case v.Unmute:case v.Loop:case v.Scrub:case v.Fullscreen:case v.ExitFullscreen:this.fireBeacon(e);break;case v.Play:case v.Autoplay:this.hasStarted||(this.hasStarted=!0,this.fireBeacon(b.Start)),this.fireBeacon(e);break;case v.Pause:case v.Autopause:this.rulesEngine.resetContinuousRules(),this.fireBeacon(e);break;case C.Reset:this.rulesEngine.resetRules((()=>!0));break;case C.PositionChange:null!==(t=this.props.videoRef)&&void 0!==t&&t.paused||this.updateTotalPlayTime(),this.rulesEngine.checkRules(this.videoContext);break;default:this.rulesEngine.checkRules(this.videoContext)}}fireBeacon(e){this.sendAnalyticsEvent(e)}setVideoContextAndRulesEngine(e){const{isInView:t,videoContextOptions:s}=this.props;this.videoContext=new P(e,(e=>this.stateChanged(e)),t,s),this.rulesEngine=new N(this.sendAnalyticsEvent,e.duration),e.addEventListener("loadedmetadata",this.updateRulesEngineDuration),window.addEventListener("beforeunload",this.sendUnloadEvent)}}const Z=(0,k.X9)(T,{appContext:!0,adContext:!0,dashboardContext:!0});var A=s(10381),E=s(92677);var M=s(68346),L=s(63583),O=s.n(L),R=s(96467),D=s.n(R),F=s(28863),B=s(83302);const _=(0,u.q)("hd");_.defaultProps={size:{width:24,height:24}};const U=_;var V=s(10490);const z=(0,u.q)("sound-off");z.defaultProps={size:{width:24,height:24}};const H=z,W=(0,u.q)("sound-on");W.defaultProps={size:{width:24,height:24}};const q=W,$=(0,u.q)("video-play");$.defaultProps={size:{width:24,height:24}};const G=$;var X=s(78667);const Q="V3aM5",J="NUgGE",Y="ES7KG",K="NqMAD",ee="kmLdA",te="qW8gI",se="g82Fd",ne="oaGjt",oe="YBpn6",ie="m4j3o",ae="FdHaH",le="IUn0z",re="cP4TA";var de=s(2629);const ce=(0,r.forwardRef)(((e,t)=>{let{filmstrip:s,onClickToggleFullScreen:n,onClickPlay:o,onClickPause:i,onClickVolume:l,onClickHd:r,isHdAvailable:d,isFullScreen:c,isHd:u,isMuted:h,isPlaying:m,isInitialOverlay:g,time:v,handlePosition:b,handleHoverPosition:x,onMouseMoveSeekbarWrapper:f,onMouseLeaveSeekbarWrapper:C,onMouseDownSeekbarWrapper:y,onMouseUpSeekbarWrapper:w,onClickSeekHandleHover:j,buffered:k,seekHover:S,frameTime:I,thumbnailStyles:N,useLimitedControls:P,soundDisabled:T,showMuteControlOnly:Z}=e;const{_c:A}=(0,X.bp)(),E=P&&{height:40,width:40},M=!T&&(0,de.jsx)(p.Z,{className:re,onClick:l,label:A("Video controls","Mute sound"),"aria-pressed":h,children:h?(0,de.jsx)(H,{size:E}):(0,de.jsx)(q,{size:E})}),L={display:g?"none":void 0};return P||Z?(0,de.jsx)("div",{className:a()(Q,J),style:L,children:M}):(0,de.jsxs)("div",{className:Q,style:L,children:[m?(0,de.jsx)(p.Z,{className:re,onClick:i,label:A("Video controls","Pause"),children:(0,de.jsx)(V.Z,{})}):(0,de.jsx)(p.Z,{className:re,onClick:o,label:A("Video controls","Play"),children:(0,de.jsx)(G,{})}),(0,de.jsx)("div",{className:Y,onMouseMove:f,onMouseLeave:C,onMouseDown:y,onMouseUp:w,role:"progressbar",children:(0,de.jsxs)("div",{className:K,ref:t,children:[(0,de.jsx)("div",{className:te,style:{width:`${k}%`}}),(0,de.jsx)("div",{className:ee,style:{width:b}}),(0,de.jsx)("div",{className:a()(se,{[oe]:S}),style:{left:b}}),(0,de.jsx)("div",{className:a()(ne,{[oe]:S}),style:S?{visibility:"visible",left:`${x}px`}:void 0,onClick:j,role:"button",children:s&&(0,de.jsx)("div",{className:ie,style:N,children:(0,de.jsx)("div",{className:ae,children:I})})})]})}),(0,de.jsxs)("div",{className:le,children:[" ",v||"--:--"," "]}),d&&(0,de.jsx)(p.Z,{className:re,onClick:r,label:A("Video controls","Toggle high definition"),children:(0,de.jsx)(U,{colors:{primary:u?O().paletteWhite:O().transparentWhite65}})}),(0,de.jsx)(p.Z,{className:re,onClick:n,label:A("Video controls","Toggle full screen"),children:c?(0,de.jsx)(F.Z,{"data-testid":"collapse-icon",size:{width:22,height:22}}):(0,de.jsx)(B.Z,{"data-testid":"fullscreen-icon",size:{width:22,height:22}})}),M]})}));var pe=s(96977),ue=s(13434);const he="kEaLk",me="C4lo4",ge="EfjkQ",ve="eB3NB",be=e=>{let{isPlaying:t,showPoof:s,isLoading:n,isInitialOverlay:o,onAnimationEndPoof:i}=e;return(0,de.jsxs)("div",{className:a()(he,{[ve]:t}),children:[o&&(0,de.jsx)(pe.Z,{cropped:!0,size:{width:24,height:24}}),s&&(0,de.jsx)("div",{className:ge,onAnimationEnd:i,children:t?(0,de.jsx)(pe.Z,{cropped:!0,size:{width:24,height:24}}):(0,de.jsx)(V.Z,{size:{width:24,height:24}})}),n&&(0,de.jsx)("div",{className:me,children:(0,de.jsx)(ue.Z,{small:!0})})]})},xe="gDuxW",fe="yz4vl",Ce="oce3Y",ye="RYYxJ",we="iTJ8p",je="ykHbW",ke="sm7Xn",Se="qILrx";let Ie;!function(e){e[e.AdStopped=0]="AdStopped",e[e.AdVideoStart=1]="AdVideoStart",e[e.AdVideoFirstQuartile=2]="AdVideoFirstQuartile",e[e.AdVideoMidpoint=3]="AdVideoMidpoint",e[e.AdVideoThirdQuartile=4]="AdVideoThirdQuartile",e[e.AdVideoComplete=5]="AdVideoComplete",e[e.AdPaused=6]="AdPaused",e[e.AdPlaying=7]="AdPlaying",e[e.AdVolumeChange=8]="AdVolumeChange"}(Ie||(Ie={}));class Ne extends r.Component{constructor(){super(...arguments),o()(this,"state",{playing:!1,autoplay:!1,isMuted:!!this.props.isMuted,showControls:!0,time:"",isHd:!1,isHdAvailable:!1,seekHover:!1,handleHoverPosition:0,handlePosition:"0%",showHdIcon:!1,loading:!1,showPoof:!1,isInitialOverlay:!0,buffered:0,frameTime:"",thumbnailCount:10,filmstripOffset:0,hasPausedSource:null,isSeeking:!1,isFullScreen:!!this.props.isFullScreen,videoEl:null,isVideoIntersecting:!1,hasVideoIntersected:!1,hasClickedVideoOrMuteControl:!1,showMuteControlOnly:!0,moatQuartileEventsStatus:{AdVideoFirstQuartileIsDispatched:!1,AdVideoMidpointIsDispatched:!1,AdVideoThirdQuartileIsDispatched:!1}}),o()(this,"fscreen",l.Z),o()(this,"seekBar",(0,r.createRef)()),o()(this,"videoContainerRef",(0,r.createRef)()),o()(this,"getVideoElementProps",(e=>{const{media:t,poster:s,isVideoSponsoredDay:n,appContext:{_t:o},minHeight:i=250,videoElementProps:a={}}=this.props,{playing:l,autoplay:r,isMuted:d,isFullScreen:c}=this.state;return{muted:d,autoPlay:r,style:{minHeight:t.height?Math.min(t.height,i):i},role:"button",crossOrigin:"anonymous",playsInline:!0,ref:this.setVideoEl,onEnded:this.onEnded,onTouchEnd:this.onTouchEnd,poster:s&&new M.Z(s).getOriginalSourceClosestToWidth(Math.min(e,D().postWidth)).url,...this.shouldShowCustomControls()?{role:"button","aria-label":o(l?"Pause":"Play"),onClick:this.onVideoClick,onLoadedData:this.getVideoDurationInMinSec,onWaiting:this.onVideoWaiting,onCanPlayThrough:this.hideLoading,onPlaying:this.hideLoading,onSeeking:this.hideLoading,onSeeked:this.hideLoading,onVolumeChange:c?this.onVolumeChangeFullScreen:void 0,onTimeUpdate:this.onTimeUpdateVideo,onProgress:this.onProgressVideo}:{controls:!n,controlsList:"nodownload"},...a}})),o()(this,"renderVideoControls",(()=>{const{filmstrip:e,soundDisabled:t,isVideoSponsoredDay:s,appContext:{_t:n}}=this.props,{isHd:o,time:i,playing:l,isMuted:r,isInitialOverlay:d,isHdAvailable:u,isFullScreen:h,handlePosition:g,handleHoverPosition:v,buffered:b,seekHover:x,frameTime:f,isVideoFinished:C,videoEl:y,showMuteControlOnly:w}=this.state;return(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(ce,{onClickToggleFullScreen:this.onClickToggleFullScreen,onClickPlay:this.onClickPlay,onClickPause:this.onClickPause,onClickVolume:this.onClickVolume,onClickHd:this.onClickHd,isFullScreen:h,isHdAvailable:u,isHd:o,isMuted:r,isPlaying:l,time:i,isInitialOverlay:d,handlePosition:g,handleHoverPosition:v,buffered:b,seekHover:x,frameTime:f,onMouseMoveSeekbarWrapper:this.onMouseMoveSeekbarWrapper,onMouseLeaveSeekbarWrapper:this.onMouseLeaveSeekbarWrapper,onMouseDownSeekbarWrapper:this.onMouseDownSeekbarWrapper,onMouseUpSeekbarWrapper:this.onMouseUpSeekbarWrapper,onClickSeekHandleHover:this.onClickSeekHandleHover,filmstrip:e,thumbnailStyles:this.getThumbnailStyles(),useLimitedControls:s||void 0,soundDisabled:t,showMuteControlOnly:w,ref:this.seekBar}),s&&(0,de.jsx)(c.ZP,{in:C&&(null==y?void 0:y.duration)===(null==y?void 0:y.currentTime),timeout:200,mountOnEnter:!0,unmountOnExit:!0,children:e=>(0,de.jsx)("div",{className:a()(je,{[ke]:[c.d0,c.Ix,c.Wj].includes(e)}),style:{transition:"opacity 200ms"},children:(0,de.jsx)(p.Z,{label:n("Replay video"),wrapperClassName:Se,onClick:this.onReplayVideoClick,children:(0,de.jsx)(m,{size:{height:65,width:65},colors:{primary:O().white}})})})})]})})),o()(this,"shouldShowCustomControls",(()=>this.props.isVideoSponsoredDay||!("undefined"!=typeof matchMedia&&matchMedia("(hover: none)").matches))),o()(this,"setVideoEl",(e=>this.setState({videoEl:e}))),o()(this,"playVideo",(()=>{var e;return null===(e=this.state.videoEl)||void 0===e?void 0:e.play().catch((()=>this.setState({playing:!1})))})),o()(this,"pauseVideo",(()=>{var e;return null===(e=this.state.videoEl)||void 0===e?void 0:e.pause()})),o()(this,"onClickPause",(()=>this.onUXTriggerPause(E.Fj.User,!1))),o()(this,"onClickPlay",(()=>this.onUXTriggerPlay(!1))),o()(this,"onUXTriggerPause",((e,t)=>this.setState({hasPausedSource:e,autoplay:t,playing:!1}))),o()(this,"onUXTriggerPlay",(e=>this.setState({autoplay:e,playing:!0,hasPausedSource:null}))),o()(this,"onClickVolume",(e=>{e.preventDefault(),e.stopPropagation(),this.setState((e=>{let{isMuted:t,videoEl:s}=e;return t&&s&&!s.volume&&(s.volume=1),{isMuted:!t,hasClickedVideoOrMuteControl:!0}}))})),o()(this,"onVolumeChangeFullScreen",(e=>this.setState({isMuted:e.currentTarget.muted||!e.currentTarget.volume}))),o()(this,"onMouseEnterVideo",(()=>this.setState({showControls:!0,showMuteControlOnly:!1}))),o()(this,"onMouseLeaveVideo",(()=>this.setState((e=>({showControls:!e.hasClickedVideoOrMuteControl,showMuteControlOnly:!e.hasClickedVideoOrMuteControl}))))),o()(this,"onAnimationEndPoof",(()=>this.setState({showPoof:!1}))),o()(this,"onEnded",(()=>{this.setState({isVideoFinished:!0}),this.props.disableAutolooping||this.resetVideoPosition(!0)})),o()(this,"onTouchEnd",(()=>this.setState({autoplay:!1}))),o()(this,"onClickHd",(()=>this.setState((e=>({isHd:!e.isHd}))))),o()(this,"onVideoClick",(()=>{if(!this.props.isVideoSponsoredDay){if(this.props.timelineObject&&(0,j.xT)(this.props.timelineObject)){var e;const t=null===(e=this.props.timelineObject.actions)||void 0===e?void 0:e[0];if(null!=t&&t.tspSkipLightbox&&null!=t&&t.urls.web)return void window.open(null==t?void 0:t.urls.web,"_blank","noreferrer,noopener")}this.setState((e=>({playing:!e.playing,autoplay:!1,showPoof:!0,isInitialOverlay:!1,hasPausedSource:e.playing?E.Fj.User:null,hasClickedVideoOrMuteControl:!0})))}})),o()(this,"onVideoWaiting",(()=>this.setState({loading:!0}))),o()(this,"hideLoading",(()=>this.setState({loading:!1}))),o()(this,"getVideoDurationInMinSec",(()=>this.state.videoEl&&this.setState({time:this.formatVideoTime(this.state.videoEl.duration)}))),o()(this,"formatVideoTime",(e=>{const t=Math.floor(e/60),s=Math.floor(e%60);return`${t}:${s<10?`0${s}`:s}`})),o()(this,"isVideoInView",(()=>this.state.isVideoIntersecting)),o()(this,"setPlaybackPosition",(e=>{const{videoEl:t}=this.state,s=((null==t?void 0:t.duration)||0)*e;this.setState((e=>({handlePosition:`${e.handleHoverPosition}px`}))),t&&(t.currentTime=s)})),o()(this,"onMouseMoveSeekbarWrapper",(e=>{var t,s;this.setState({seekHover:!0});const{isSeeking:n,videoEl:o,thumbnailCount:i}=this.state,a=(null===(t=e.currentTarget.firstElementChild)||void 0===t?void 0:t.getBoundingClientRect().width)||0,l=Math.abs(Math.round(e.clientX-((null===(s=e.currentTarget.firstElementChild)||void 0===s?void 0:s.getBoundingClientRect().left)||0)));if(l<0||l>a)return;const r=l/a,d=100*r,c=Math.floor(r*((null==o?void 0:o.duration)||0)),p=100/(i-1),u=Math.floor(d/i)*p;this.setState({handleHoverPosition:l,filmstripOffset:u}),this.updateFrameTime(c),n&&this.setPlaybackPosition(r)})),o()(this,"updateFrameTime",(e=>this.setState({frameTime:this.formatVideoTime(e)}))),o()(this,"onMouseDownSeekbarWrapper",(()=>this.setState({isSeeking:!0}))),o()(this,"onMouseUpSeekbarWrapper",(()=>this.setState({isSeeking:!1}))),o()(this,"onMouseLeaveSeekbarWrapper",(()=>this.setState({seekHover:!1,isSeeking:!1}))),o()(this,"onClickSeekHandleHover",(e=>{var t,s;const n=e.clientX-((null===(t=e.currentTarget.parentElement)||void 0===t?void 0:t.getBoundingClientRect().left)||0),o=null===(s=this.seekBar.current)||void 0===s?void 0:s.getBoundingClientRect().width;if(o){const e=n/o;this.setPlaybackPosition(e)}})),o()(this,"getThumbnailStyles",(()=>{const{filmstrip:e}=this.props,{thumbnailCount:t,filmstripOffset:s}=this.state;if(!e)return{};const{height:n,width:o,url:i}=e,a=.35*o/t,l=.35*n;return{top:-(l+10),left:-a/2+5,width:`${a}px`,height:`${l}px`,backgroundImage:`url(${i})`,backgroundSize:`${a*t}px ${l}px`,backgroundPosition:`${s}% 0%`}})),o()(this,"onTimeUpdateVideo",(()=>{const{showControls:e,videoEl:t}=this.state;if(!e||!t)return;const s=t.duration,n=t.currentTime,o=n/s*100;this.setState({handlePosition:`${o}%`,time:this.formatVideoTime(s-n)})})),o()(this,"onProgressVideo",(()=>{const{videoEl:e}=this.state;if(!e)return;const t=e.duration,s=e.buffered,n=e.currentTime;if(t>0)for(let e=0;e<s.length;e+=1)if(s.start(s.length-1-e)<=n){const n=s.end(s.length-1-e);this.setState({buffered:n/t*100});break}})),o()(this,"onClickToggleFullScreen",(()=>{var e;if(!this.state.isFullScreen&&null!==(e=this.videoContainerRef)&&void 0!==e&&e.current){var t;if(this.props.onFullScreenChange)return void this.props.onFullScreenChange(!0);this.setViewportResizeRender("disable"),this.fscreen.requestFullscreen(null===(t=this.videoContainerRef)||void 0===t?void 0:t.current),this.setState({isFullScreen:!0},(()=>{this.fscreen.addEventListener("fullscreenchange",this.onFullScreenExit)}))}else{if(this.props.onFullScreenChange)return void this.props.onFullScreenChange(!1);this.fscreen.exitFullscreen()}})),o()(this,"onFullScreenExit",(()=>{this.fscreen.fullscreenElement||this.setState({isFullScreen:!1},(()=>{this.setViewportResizeRender("enable"),this.fscreen.removeEventListener("fullscreenchange",this.onFullScreenExit)}))})),o()(this,"onReplayVideoClick",(e=>{null==e||e.stopPropagation(),null==e||e.preventDefault(),this.resetVideoPosition(!1)})),o()(this,"resetVideoPosition",(e=>this.setState({autoplay:e,handlePosition:"0%",isVideoFinished:!1,playing:!0},(()=>{this.state.videoEl&&(this.state.videoEl.currentTime=0,this.playVideo())})))),o()(this,"getMediaType",(()=>{const{media:e}=this.props;return e.type===E.w3.Mov?void 0:e.type})),o()(this,"handleIntersectionChange",(e=>{this.setState((t=>{let{playing:s,hasPausedSource:n,isVideoFinished:o,autoplay:i,hasVideoIntersected:a}=t;const l=a||e,r=this.shouldAutoDock(l)?s:e&&!n&&!o;return{playing:r,autoplay:s!==r||i,isInitialOverlay:!1,isVideoIntersecting:e,hasVideoIntersected:l}}))})),o()(this,"onVisibilityChange",(()=>{const{playing:e,hasPausedSource:t}=this.state;"visible"===document.visibilityState?e||t!==E.Fj.DocumentVisibility||this.onUXTriggerPlay(!0):e&&this.onUXTriggerPause(E.Fj.DocumentVisibility,!0)}))}shouldAutoDock(e){const{playing:t,isMuted:s}=this.state,{showsDockMediaButton:n,alwaysAutoDock:o,dockableContext:{isMediaDocked:i}}=this.props;return!!n&&t&&(!s||!!o&&e&&!i)}dispatchMoatVideoEvent(e){var t,s,n;(0,j.nJ)(null===(t=this.props)||void 0===t?void 0:t.timelineObject)&&(null===(s=this.moatApiReferenceInstance)||void 0===s||null===(n=s.dispatchEvent)||void 0===n||n.call(s,{type:Ie[e],adVolume:this.state.isMuted?0:1}))}initMoatApiReference(){var e,t,s;const n=null===(e=this.props)||void 0===e?void 0:e.timelineObject;if(!((0,j.nJ)(n)||null!==(t=this.state)&&void 0!==t&&t.videoEl))return;const o={level1:(null==n?void 0:n.advertiserId)||"",level2:(null==n?void 0:n.campaignId)||"",level3:(null==n?void 0:n.adGroupId)||"",level4:(null==n?void 0:n.creativeId)||""};this.moatApiReferenceInstance=function(e,t,s,n,o,i){var a,l,r=document.createElement("script"),d=[],c={vidIntType:"3",vidIntVersion:"1.0",adData:{ids:t,duration:s,url:o},dispatchEvent:function(e){c.sendEvent?(d&&(d.push(e),e=d,d=!1),c.sendEvent(e)):d&&d.push(e)},clientCallback:i};t="_moatApi"+Math.floor(1e8*Math.random());try{l=(a=e.ownerDocument).defaultView||a.parentWindow}catch(e){a=document,l=window}return l[t]=c,r.type="text/javascript",e&&e.insertBefore(r,e.childNodes[0]||null),r.src="https://z.moatads.com/"+n+"/moatvideo.js#"+t,c}(this.videoContainerRef.current,o,null===(s=this.state.videoEl)||void 0===s?void 0:s.duration,"tumblrjsvideo916683822435")}componentDidMount(){window.addEventListener("visibilitychange",this.onVisibilityChange),this.numGlassContextOnMount=this.props.numGlassOpenContext.numGlassOpen,setTimeout((()=>{this.numGlassContextOnMount=this.props.numGlassOpenContext.numGlassOpen}),0),this.initMoatApiReference()}componentWillUnmount(){window.removeEventListener("visibilitychange",this.onVisibilityChange)}componentDidUpdate(e,t){var s,n;const{isFullScreen:o,isMuted:i,playing:a,hasPausedSource:l,hasVideoIntersected:r}=this.state,{isDocked:d,numGlassOpenContext:{numGlassOpen:c},alwaysAutoDock:p}=this.props;e.isMuted!==this.props.isMuted&&this.props.isMuted!==i&&this.setState({isMuted:!i}),e.isFullScreen!==this.props.isFullScreen&&this.props.isFullScreen!==o&&this.setState({isFullScreen:!o}),this.props.playing!==e.playing&&a!==this.props.playing&&this.onVideoClick(),null===(s=(n=this.props.autoDockContext).setComponentToAutoDock)||void 0===s||s.call(n,this.shouldAutoDock(r),p),a&&this.numGlassContextOnMount<c?this.onUXTriggerPause(E.Fj.Glass,!0):!a&&l===E.Fj.Glass&&this.numGlassContextOnMount>=c&&this.onUXTriggerPlay(!0),t.playing!==a&&(a?(this.playVideo(),this.dispatchMoatVideoEvent(Ie.AdVideoStart)):this.pauseVideo()),this.state.playing&&("100%"===this.state.handlePosition&&this.dispatchMoatVideoEvent(Ie.AdVideoComplete),parseFloat(this.state.handlePosition)>=25&&!this.state.moatQuartileEventsStatus.AdVideoFirstQuartileIsDispatched&&(this.dispatchMoatVideoEvent(Ie.AdVideoFirstQuartile),this.setState((e=>({moatQuartileEventsStatus:{...e.moatQuartileEventsStatus,AdVideoFirstQuartileIsDispatched:!0}})))),parseFloat(this.state.handlePosition)>=50&&!this.state.moatQuartileEventsStatus.AdVideoMidpointIsDispatched&&(this.dispatchMoatVideoEvent(Ie.AdVideoMidpoint),this.setState((e=>({moatQuartileEventsStatus:{...e.moatQuartileEventsStatus,AdVideoMidpointIsDispatched:!0}})))),parseFloat(this.state.handlePosition)>=75&&!this.state.moatQuartileEventsStatus.AdVideoThirdQuartileIsDispatched&&(this.dispatchMoatVideoEvent(Ie.AdVideoThirdQuartile),this.setState((e=>({moatQuartileEventsStatus:{...e.moatQuartileEventsStatus,AdVideoThirdQuartileIsDispatched:!0}})))),"0%"===this.state.handlePosition&&"100%"===t.handlePosition&&(this.dispatchMoatVideoEvent(Ie.AdVideoStart),this.setState({moatQuartileEventsStatus:{AdVideoFirstQuartileIsDispatched:!1,AdVideoMidpointIsDispatched:!1,AdVideoThirdQuartileIsDispatched:!1}}))),e.isDocked&&!d&&this.onClickPause()}render(){const{media:e,isDocked:t,hasNoMaxUndockedHeight:s,isVideoSponsoredDay:n,playerStyle:o,timelineObject:i,useViewabilityTracker:l,appContext:{_t:r}}=this.props,{playing:c,showPoof:p,loading:u,isInitialOverlay:h,showControls:m,videoEl:g,isFullScreen:v}=this.state;return(0,de.jsx)(A.ZP,{children:b=>{let{width:x,setViewportResizeRender:f}=b;const C=a()(xe,{[Ce]:s,[we]:t,[ye]:v});return this.setViewportResizeRender=f,(0,de.jsxs)(d.df,{onChange:this.handleIntersectionChange,threshold:.5,className:C,role:"application","aria-label":r("Video Player"),style:o,children:[(0,de.jsxs)("div",{ref:this.videoContainerRef,onMouseEnter:this.onMouseEnterVideo,onMouseLeave:this.onMouseLeaveVideo,className:fe,children:[(0,de.jsx)("video",{...this.getVideoElementProps(x),children:(0,de.jsx)("source",{src:e.url,type:this.getMediaType()})}),this.shouldShowCustomControls()&&(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(be,{isPlaying:c,showPoof:p,isLoading:u,isInitialOverlay:h,onAnimationEndPoof:this.onAnimationEndPoof}),(n||m)&&this.renderVideoControls()]})]}),l&&i&&(0,de.jsx)(Z,{videoRef:g,isInView:this.isVideoInView,timelineObject:i,videoContextOptions:{doesVideoLoop:!this.props.disableAutolooping,trackPauseAsAutoStop:n}})]})}})}}o()(Ne,"defaultProps",{isMuted:!0,useViewabilityTracker:!0});const Pe=(0,k.X9)(Ne,{appContext:!0,numGlassOpenContext:!0,dockableContext:!0,autoDockContext:!0})},25694:(e,t,s)=>{"use strict";s.d(t,{Z:()=>f});var n=s(5754),o=s.n(n),i=s(95004),a=s(79615),l=s(39934),r=s(13434),d=s(89351),c=s(54382),p=s(43684),u=s(81846),h=s(78667),m=s(91949),g=s(63583),v=s.n(g),b=s(1181),x=s(2629);function f(e){let{categories:t,isYourOwnBlog:s,hasCommunityLabel:n,reportViolation:g,reportViolationStatus:f}=e;const{_c:C}=(0,h.bp)(),y=(0,i.useMemo)((()=>{const e=C("Separator of list of content warnings",", "),s=Object.entries(t).filter((e=>{let[,t]=e;return(0,m.CS)(t)})).map((e=>{let[t]=e;return(0,m.id)(t,C).label.toLocaleLowerCase()})).join(e);return(0,u.k)(s)}),[C,t]),w=C("Menu item to suggest a community label to a post","Suggest a Content Warning"),j=C("Menu item to alert that the community label was already suggested","Community Label suggested"),k=(0,x.jsx)(c.ZP,{comment:"Shown next to 'Suggest a Community Label' button",children:"Missing label?"}),S=(0,x.jsx)(a.Z,{label:w,onClick:g,children:(0,x.jsx)(d.Z,{content:k,position:p.I2.Top,children:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:b.Z.missingLabel,children:k}),(0,x.jsx)(l.Z,{})]})})}),I=(0,x.jsx)("div",{className:b.Z.loader,children:(0,x.jsx)(r.Z,{small:!0,color:v().paletteGray65})}),N=(0,x.jsx)(a.Z,{label:j,disabled:!0,title:j,children:j}),P=(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:o()(b.Z.communityLabelHeader),children:[(0,x.jsx)(c.ZP,{comment:"Community Label in post menu for labelled post",children:"Community Label: Mature"}),!s&&("idle"===f||"failure"===f)&&(0,x.jsx)("span",{children:S})||"pending"===f&&I]}),(0,x.jsxs)("div",{className:o()(b.Z.communityLabelDetail),children:[0!==y.length&&y,!s&&"success"===f&&N]})]});return(0,x.jsx)("div",{className:o()(b.Z.communityLabel),"data-testid":"community-label-menu-item",children:n?P:(0,x.jsxs)("span",{className:o()(b.Z.communityLabelHeader),children:[" ",(0,x.jsx)(c.ZP,{comment:"Content warning in post menu for unlabelled post",children:"Community Label: Everyone"}),!s&&S]})})}},14542:(e,t,s)=>{"use strict";s.d(t,{Z:()=>eo});var n=s(50209),o=s.n(n),i=s(5754),a=s.n(i),l=s(29774),r=s(95004),d=s(17709),c=s(56305),p=s(63334),u=s(36343);const h=(0,u.q)("calendar");h.defaultProps={size:{width:18,height:18}};const m=h,g=(0,u.q)("clock");g.defaultProps={size:{width:18,height:18}};const v=g;var b=s(26216),x=s(83644),f=s(43523),C=s(31679),y=s(78667),w=s(43166),j=s(55855),k=s(63583),S=s.n(k);const I="SpkZj",N="RqsHX",P="dvqFF";var T=s(2629);const Z=function(e){let{ctaText:t,backgroundColor:s=S().paletteAccent,borderColor:n=S().paletteAccent,color:o=S().paletteWhite,clickUrl:i,placementId:l}=e;const{logEvent:r,features:d}=(0,y.bp)(),{post:c}=(0,w.uu)(),{hydraConfigInstanceId:p,adPlacementConfiguration:u}=(0,C.b)(),h=d.tspCtaButtonUnderline?N:I;return(0,T.jsx)("a",{className:a()(h,P),style:{backgroundColor:s,color:o,borderColor:n},href:i,rel:"nofollow noreferrer noopener",target:"_blank",onClick:()=>{r({eventName:f.J.CTAButton,eventDetails:{placement_id:l,...(0,j.U)({hydraConfigInstanceId:p,adPlacementConfiguration:u,timelineObject:c}),cta_button_style:d.tspCtaButtonUnderline?"underline":"none"}}),r({eventName:f.J.Click,eventDetails:{placement_id:l,...(0,j.U)({hydraConfigInstanceId:p,adPlacementConfiguration:u,timelineObject:c})}})},children:t||x.J.LearnMore})};var A=s(235),E=s(25190),M=s(90621),L=s(59215),O=s(79615),R=s(2474);const D=e=>{let{onClick:t}=e;const{_t:s}=(0,y.bp)();return(0,T.jsx)(O.Z,{label:s("Move down"),onClick:t,children:(0,T.jsx)(R.br,{size:{width:21,height:21},colors:{primary:S().paletteGray65}})})};var F=s(57921);const B=e=>{let{onClick:t}=e;const{_t:s}=(0,y.bp)();return(0,T.jsx)(O.Z,{label:s("Move to bottom"),onClick:t,children:(0,T.jsx)(F.E,{size:{width:21,height:21},colors:{primary:S().paletteGray65}})})},_=e=>{let{onClick:t}=e;const{_t:s}=(0,y.bp)();return(0,T.jsx)(O.Z,{label:s("Move to top"),onClick:t,children:(0,T.jsx)(F.I,{size:{width:21,height:21},colors:{primary:S().paletteGray65}})})},U=e=>{let{onClick:t}=e;const{_t:s}=(0,y.bp)();return(0,T.jsx)(O.Z,{label:s("Move up"),onClick:t,children:(0,T.jsx)(R.Ii,{size:{width:21,height:21},colors:{primary:S().paletteGray65}})})},V="squP2",z="gc3fY",H="fDUq4";class W extends r.Component{constructor(){super(...arguments),o()(this,"allPosts",[]),o()(this,"queuedPosts",[]),o()(this,"moveUp",(()=>{const{id:e}=this.props,t=this.queuedPosts.findIndex((t=>e===t))-1,s=this.allPosts.findIndex((e=>this.queuedPosts[t]===e));return this.queueReorder(this.allPosts[s-1]||0,t)})),o()(this,"moveDown",(()=>{const{id:e}=this.props,t=this.queuedPosts.findIndex((t=>e===t))+1,s=this.allPosts.findIndex((e=>this.queuedPosts[t]===e));return this.queueReorder(this.allPosts[s-1],t)})),o()(this,"moveToTop",(()=>this.queueReorder(0,0))),o()(this,"moveToBottom",(()=>this.queueReorder(this.allPosts[this.allPosts.length-1],this.queuedPosts.length-1))),o()(this,"queueReorder",((e,t)=>{const{id:s,blogName:n,timelineContext:o,appContext:{apiFetch:i}}=this.props;return(0,M.wW)(i,{blogName:n,id:s,insertAfter:e}).fetch((()=>null==o?void 0:o.onQueueReorder(s,t)))}))}render(){return(0,T.jsx)(E.ZP,{children:e=>{let{isMobile:t}=e;return(0,T.jsx)("div",{className:a()(V,this.props.className),children:this.getControls(t)})}})}getControls(e){const{id:t}=this.props;return(0,T.jsx)(A.Jj.Consumer,{children:s=>{let{allPosts:n,queuedPosts:o}=s;this.allPosts=n,this.queuedPosts=o;const i=this.queuedPosts.length,a=this.queuedPosts.findIndex((e=>t===e)),l=[];return e&&a>0&&l.push((0,T.jsx)("div",{className:z,children:(0,T.jsx)(U,{onClick:this.moveUp})},"moveUp")),e&&a!==i-1&&l.push((0,T.jsx)("div",{className:z,children:(0,T.jsx)(D,{onClick:this.moveDown})},"moveDown")),a>0&&l.push((0,T.jsx)("div",{className:z,children:(0,T.jsx)(_,{onClick:this.moveToTop})},"moveToTop")),e&&a!==i-1&&l.push((0,T.jsx)("div",{className:z,children:(0,T.jsx)(B,{onClick:this.moveToBottom})},"moveToBottom")),l.length>0?(0,T.jsx)("div",{className:H,children:l}):null}})}}const q=(0,L.X9)(W,{appContext:!0,timelineContext:!0});var $=s(59514),G=s(30420);const X=(0,u.q)("like-circle");X.defaultProps={size:{width:22,height:22},className:"Ij1AD"};const Q=X,J=(0,u.q)("reblog-circle");J.defaultProps={size:{width:22,height:22},className:"I2mEo"};const Y=J,K=(0,u.q)("reply-circle");K.defaultProps={size:{width:22,height:22},className:"O07_X"};const ee=K;var te=s(77434),se=s(50049);const ne=(0,u.q)("camera-flip");ne.defaultProps={size:{width:23,height:20}};const oe=ne,ie=(0,u.q)("extinguisher");ie.defaultProps={size:{width:13,height:18}};const ae=ie,le=(0,u.q)("ignite");le.defaultProps={size:{width:23,height:20}};const re=le,de="hgLUH",ce="cuF6B",pe=e=>{let{label:t,onClick:s,disabled:n=!1}=e;return(0,T.jsxs)(O.Z,{wrapperClassName:de,label:t,onClick:s,disabled:n,children:[(0,T.jsx)(ae,{}),(0,T.jsx)("div",{className:ce,children:t})]})};var ue=s(54382),he=s(67023);const me=e=>{let{classname:t,percent:s}=e;return(0,T.jsx)("div",{className:t,style:{width:`${s>100?100:s}%`}})},ge="s4g_h",ve="yXNX0",be="pMpfW",xe="HQcQr",fe="hrv3x",Ce="VgtfT",ye="rBSgB",we=()=>{const{_t:e}=(0,y.bp)();return e("Started:")},je=()=>{const{_t:e}=(0,y.bp)();return e("Estimated Progress:")},ke=e=>{const{_getLocaleDateString:t}=(0,y.bp)();return t(new Date(1e3*e),he.Cx.WeekDayDateAndTime)},Se=e=>{let{startingDate:t,impressionGoal:s,impressionCount:n}=e;return(0,T.jsxs)("div",{className:be,children:[(0,T.jsxs)("div",{className:xe,children:[(0,T.jsx)("label",{className:ge,children:we()}),(0,T.jsx)("label",{className:ve,children:`${ke(t)}`})]}),0!==n&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:xe,children:[(0,T.jsx)("label",{className:ge,children:je()}),(0,T.jsx)("label",{id:"impressionCount",className:ve,children:(0,T.jsx)(ue.ZP,{params:{impressionCount:n,impressionGoal:s},components:{highlight:(0,T.jsx)("span",{className:ye})},children:"[highlight][impressionCount][/highlight] / [impressionGoal] impressions"})})]}),(0,T.jsx)("div",{className:Ce,children:(0,T.jsx)(me,{classname:fe,percent:n/s*100})})]})]})};var Ie=s(13434),Ne=s(29521),Pe=s(81584),Te=s(67657),Ze=s(87674),Ae=s(73078),Ee=s(8705),Me=s(5136),Le=s(98384),Oe=s(62412),Re=s(43684),De=s(39895),Fe=s(20814);const Be=function(e){const{_t:t,_c:s,apiFetch:n}=(0,y.bp)(),{productSelected:o,productsChanged:i,audienceOptionSelected:a}=e,l=()=>(0,T.jsx)("img",{className:Fe.Z.blazed,src:Ee,alt:s("Alternate text for a special tumblr t logo","Tumblr t logo with fires around")}),[d,c]=(0,r.useState)([]),[p,u]=(0,r.useState)([]),[h,m]=(0,r.useState)(!0),[g,v]=(0,r.useState)(0),[b,x]=(0,r.useState)(void 0),[f,C]=(0,r.useState)(null),[w,j]=(0,r.useState)(!1),k=(0,r.useCallback)((async()=>{(0,Pe.ZP)(n).igniteProducts().fetch().then((e=>{const{response:{products:t,audienceOptions:s}}=e;if(!t||!t.length)throw c([]),i([]),u([]),new Error("No products found");const n=t.map((e=>({value:e.slug,children:(0,T.jsxs)("span",{className:Fe.Z.radioInnerContainer,children:[(0,T.jsx)("span",{className:Fe.Z.price,children:(0,T.jsx)("b",{children:e.price})}),(0,T.jsx)("span",{className:Fe.Z.description,children:e.description})]})})));c(n),i(n),o(n[0]);const l=s.map((e=>({key:e.key,description:e.description})));u(l),a(l[0]),x(0),m(!1)})).catch((()=>{C("No products found"),m(!1)}))}),[n,o,i,a]);return(0,r.useEffect)((()=>{k()}),[]),h?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("p",{className:Fe.Z.icon,children:(0,T.jsx)(l,{})}),(0,T.jsx)("p",{className:Fe.Z.title,children:s("Blaze is the brand name here - sponsor a post","Tumblr Blaze")}),(0,T.jsx)("p",{className:Fe.Z.loadingText,children:"Loading products..."}),(0,T.jsx)(Ie.Z,{centerOrientation:Ie.Q.Horizontal,color:"white"})]}):d&&d.length?(0,T.jsxs)("div",{className:Fe.Z.container,children:[(0,T.jsx)("p",{className:Fe.Z.icon,children:(0,T.jsx)(l,{})}),(0,T.jsx)("p",{className:Fe.Z.title,children:s("Blaze is the brand name here - sponsor a post","Tumblr Blaze")}),(0,T.jsx)("p",{className:Fe.Z.subtitle,children:(0,T.jsx)("b",{children:t("Set your post ablaze. Sponsor it to put it in front of more people across Tumblr!")})}),(0,T.jsx)(De.Z,{className:Fe.Z.igniteProductionOptions,groupLabel:t("Pricing"),name:"productSlug",options:d,selectedOptionIndex:g,onChange:e=>{v(e),o(d[e])}}),p.length>0&&void 0!==b&&p[b].description?(0,T.jsx)("div",{className:Fe.Z.popoverContainer,children:(0,T.jsx)(Oe.ZP,{component:(0,T.jsxs)("div",{children:[(0,T.jsx)(Me.Z,{isWrappingButton:!0,isDisabled:!0,className:Fe.Z.dropdownBtnContainer,children:(0,T.jsx)(O.Z,{children:(0,T.jsx)(ue.ZP,{children:"Audience"})})}),p.map(((e,t)=>(0,T.jsx)(Me.Z,{isWrappingButton:!0,className:Fe.Z.dropdownBtnContainer,children:(0,T.jsx)(O.Z,{label:e.description,onClick:()=>{(e=>{x(e),a(p[e])})(t)},children:e.description})},t)))]}),width:"calc(100% - 48px)",maxWidth:464,height:"auto",usePortals:!0,position:Re.I2.BottomStart,targetWrapperDisplayBlock:!0,isOpen:w,toggle:()=>j((e=>!e)),children:(0,T.jsxs)(O.Z,{className:Fe.Z.targeting,wrapperClassName:Fe.Z.audienceButton,label:t("Audience"),children:[(0,T.jsxs)("span",{children:[(0,T.jsx)("span",{className:Fe.Z.targetingText,children:s("Label for audience Blaze campaigns (modal)","Audience")}),(0,T.jsx)("span",{className:Fe.Z.targetingLabel,children:p[b].description})]}),(0,T.jsx)("span",{className:Fe.Z.audienceCaret,children:w?(0,T.jsx)(Le.mV,{size:{width:12,height:12},colors:{primary:"#000000"}}):(0,T.jsx)(Le.$S,{size:{width:12,height:12},colors:{primary:"#000000"}})})]})})}):(0,T.jsxs)("div",{className:Fe.Z.targeting,children:[(0,T.jsx)("div",{className:Fe.Z.targetingText,children:s("Label for targeting Blaze campaigns (modal)","Targeting")}),(0,T.jsx)("div",{className:Fe.Z.targetingLabel,children:s("Option for targeting Blaze campaigns","@anyone")})]})]}):(0,T.jsx)(se.Z,{theme:"error",wrapperClassName:Fe.Z.alert,message:f})};const _e=function(e){const{_c:t,_t:s,apiFetch:n}=(0,y.bp)(),{post:{id:o,blogName:i,blog:{uuid:l},igniteStatus:d,igniteTransaction:c,igniteReport:p}}=(0,w.uu)(),u=o.toString(),h=(null==c?void 0:c.transactionUuid)||"",m=(null==c?void 0:c.impressionGoal)||0,g=(null==p?void 0:p.impressions)||0,{toggle:v,isOpen:b}=e,[x,f]=(0,r.useState)(!1),[C,j]=(0,r.useState)(!1),[S,I]=(0,r.useState)(null),[N,P]=(0,r.useState)([]),[Z,A]=(0,r.useState)(null),[E,M]=(0,r.useState)(null),[L,R]=(0,r.useState)(!1);if(!b)return null;const D=t("Playful confirmation that the user wants to proceed","🔥 Blaze it"),F=t("Blaze is the brand name here - sponsor a post","Tumblr Blaze"),B=t("Blaze is the brand name - post is awaiting moderation","Blaze campaign pending!"),_=t("The post has been sponsored and is hot / trending","This post is on fire – in a good way!"),U=t("A post is being sponsored for X views, where Blaze is the name of the product","You’ve set this post ablaze. It may take up to 24 hours for your post to be moderated and queued up for delivery. We’ll send you an email when that happens!"),V=t("A follow up that shows how well their sponsored post did","We’ll send a full report when your campaign is complete. Here's how it is going:"),z=t("The user wants to cancel a blazed post and needs to confirm","Extinguish your Blaze campaign"),H=t("The post blaze was successfully cancelled","Post successfully extinguished"),W=async()=>{if(j(!0),S&&S.value)try{let e;e=Z&&Z.key?Z.key:"anyone";const t=await $(S.value,e);window.location.assign(t)}catch{M("There was a problem redirecting to checkout"),j(!1),(0,Te.AU)(u)}else M("Please select a product before proceeding"),j(!1)},q=()=>{f(!1),v()},$=async(e,t)=>{const s=`${window.location.protocol}//${window.location.host}/blog/view/${i}/${u}`;return(0,Pe.ZP)(n).ignitePost(u,l,e,s,t).fetch().then((e=>{const{response:{url:t,transactionUuid:s}}=e;if(!t)throw new Error("Cannot redirect to checkout");return(0,Te.NV)(u,{transactionUuid:s}),t}))},G=()=>(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("p",{className:Fe.Z.loadingText,children:s("Redirecting to payment...")}),(0,T.jsx)(Ie.Z,{color:k.paletteGray40,centerOrientation:Ie.Q.Horizontal,small:!0})]}),X=()=>{d===Ne.g.approved?J():Q(),R(!0)},Q=()=>(0,Pe.ZP)(n).igniteCancelPendingBlaze(u,l,h).fetch(),J=()=>(0,Pe.ZP)(n).igniteExtinguishPost(u,l,h).fetch(),Y=()=>(0,T.jsx)(Ze.Z,{headerIcon:(0,T.jsx)(ae,{}),title:L?H:z,onClose:q,compact:!0,children:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(se.Z,{theme:"info",wrapperClassName:Fe.Z.alert,title:"",message:L?d==Ne.g.approved?t("A follow up indicating the post blaze has been successfully stopped","It may take a little bit for your post to be fully removed from promotion across Tumblr."):t("A follow up indicating the pending post blaze has been successfully cancelled","Your post will be removed from the moderation queue in a few moments."):d==Ne.g.approved?(0,T.jsx)("label",{children:(0,T.jsx)(ue.ZP,{params:{impressionCount:g,impressionGoal:m},children:"You can extinguish the remaining campaign and we’ll stop sharing your post across Tumblr. So far it’s been shown to [impressionCount] out of [impressionGoal] impressions. All sales are final and this will not refund your purchase. Would you like to extinguish your Blaze campaign?"})}):(0,T.jsx)("label",{children:(0,T.jsx)(ue.ZP,{children:"Your post will be removed from the Blaze moderation queue and a full refund of your payment will be issued."})}),icon:(0,T.jsx)("div",{})}),(0,T.jsxs)("div",{className:Fe.Z.igniteButtons,children:[L?(0,T.jsx)(O.Z,{onClick:v,label:s("Done"),wrapperClassName:Fe.Z.igniteSuccessButton,children:s("Done")}):(0,T.jsx)(O.Z,{onClick:X,label:d==Ne.g.pending?s("Yes, cancel my Blaze campaign"):s("Yes, extinguish my Blaze campaign"),wrapperClassName:Fe.Z.extinguishConfirmButton,children:d==Ne.g.pending?s("Yes, cancel my Blaze campaign"):s("Yes, extinguish my Blaze campaign")}),L?(0,T.jsx)("div",{}):(0,T.jsx)(O.Z,{onClick:q,label:s("No, continue campaign"),wrapperClassName:Fe.Z.extinguishCancelButton,children:s("No, continue campaign")})]})]})}),K=[];let ee,te;d?(K.push({text:s("Done"),onClick:W,buttonStyle:Ae.X.Confirm}),K.push({text:s("Extinguish"),onClick:W,buttonStyle:Ae.X.Confirm})):N&&N.length&&K.push({text:D,onClick:W,buttonStyle:Ae.X.Confirm});let ne=F,ie=!1;return d!==Ne.g.approved&&d!==Ne.g.pending&&(ee="blaze",te=Ze.L.Rounded,ne=" ",ie=!0),x?(0,T.jsx)(Y,{}):(0,T.jsx)(Ze.Z,{title:ne,onClose:v,compact:!0,theme:te,modalWrapperClass:ee,children:C?(0,T.jsx)(G,{}):(0,T.jsxs)(T.Fragment,{children:[E&&(0,T.jsx)(se.Z,{theme:"error",wrapperClassName:Fe.Z.alert,message:E}),d===Ne.g.pending?(0,T.jsx)(se.Z,{theme:"warning",wrapperClassName:Fe.Z.alert,title:B,message:U,icon:(0,T.jsx)(oe,{})}):d===Ne.g.approved?(0,T.jsx)(se.Z,{theme:"success",wrapperClassName:Fe.Z.alert,title:_,message:V,icon:(0,T.jsx)(re,{}),children:(0,T.jsx)(Se,{startingDate:(null==c?void 0:c.startTimestamp)??0,impressionGoal:(null==c?void 0:c.impressionGoal)??0,impressionCount:(null==p?void 0:p.impressions)??0})}):(0,T.jsx)(Be,{productSelected:I,productsChanged:P,audienceOptionSelected:A}),(0,T.jsxs)("div",{className:a()(Fe.Z.modalFooter,{[Fe.Z.hasCustomBg]:ie}),children:[(0,T.jsxs)("div",{className:Fe.Z.infoText,children:[(0,T.jsx)("a",{href:"https://www.tumblr.com/support",target:"_blank",children:s("Help")}),"  •  ",(0,T.jsx)("a",{href:"https://tumblr.zendesk.com/hc/en-us/articles/5298854249367",target:"_blank",children:s("FAQs")})]}),(0,T.jsxs)("div",{className:Fe.Z.igniteButtons,children:[d?(0,T.jsx)(O.Z,{onClick:v,label:s("Done"),wrapperClassName:Fe.Z.igniteSuccessButton,children:s("Done")}):N&&N.length&&(0,T.jsx)(O.Z,{onClick:W,label:D,wrapperClassName:Fe.Z.igniteSuccessButton,children:D}),d?(0,T.jsx)(pe,{label:t("CTA label - for stopping a campaign from running.","Extinguish Campaign"),onClick:()=>{f(!0)},disabled:!1}):void 0]})]})]})})};const Ue=function(e){const{toggleProductPopover:t,productPopoverIsOpen:s}=e;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(_e,{isOpen:s,toggle:t}),s&&(0,T.jsx)(te.Z,{})]})};var Ve=s(80293);const ze=(0,Ve.Z)((()=>Promise.all([s.e(4051),s.e(744),s.e(9853)]).then(s.bind(s,15653))),"AsyncPostActivityNeue");var He=s(49515),We=s(82145),qe=s(60857),$e=s(81022),Ge=s(48430),Xe=s(40565),Qe=s(48451),Je=s(5700);const Ye="24",Ke="AImO6",et="MT3mF",tt="tpZ8V",st="kEusV",nt="Qne7x",ot="AXdIl",it="KvHCB",at="tkkxL",lt="WW8zi",rt="jlJk9",dt="ELEQL",ct="gzn4G",pt="oozSP",ut=e=>{let{type:t,label:s,icon:n}=e;return(0,T.jsx)("div",{className:ct,"data-media-type":t,"aria-label":s,children:n})},ht=e=>{const{className:t,note:{blog:{avatar:s,name:n,theme:{avatarShape:o}},postId:i,reblogParentBlogName:l,type:r},note:p,onClickViewAll:u}=e,{_c:h}=(0,y.bp)(),m=(e=>{let{content:t}=e;return(0,Je.FI)(t,Je.kH.Text)?t.filter(Je.dz).map((e=>e.text)).join(" "):""})(p),g=((e,t)=>{let{content:s,blog:{isAdult:n}}=e;const o=s.find(Je.RD);return o?(0,T.jsx)("div",{"aria-label":t("Label for an image","Image"),children:(0,T.jsx)(Qe.Sw,{imageResponse:o.media,isSquare:!0,pixelated:n})}):(0,Je.FI)(s,Je.kH.Video)?(0,T.jsx)(ut,{type:Je.kH.Video,label:t("Label for a video block","Video"),icon:(0,T.jsx)(Xe.Z,{colors:{primary:k.paletteNavy}})}):(0,Je.FI)(s,Je.kH.Audio)?(0,T.jsx)(ut,{type:Je.kH.Audio,label:t("Label for an audio block","Audio"),icon:(0,T.jsx)($e.Z,{colors:{primary:k.paletteNavy}})}):(0,Je.FI)(s,Je.kH.Link)?(0,T.jsx)(ut,{type:Je.kH.Link,label:t("Label for a link block","Link"),icon:(0,T.jsx)(Ge.Z,{colors:{primary:k.paletteNavy}})}):null})(p,h);return(0,T.jsx)("div",{"aria-label":h("A small preview of notes for a post","Notes preview"),className:a()(Ke,t),children:(0,T.jsxs)("div",{className:et,children:[(0,T.jsx)("div",{className:tt,children:(0,T.jsx)(d.Z,{avatarShape:o,imageResponse:s,name:n,dimension:+Ye,badge:He.Z.ofType(r)})}),(0,T.jsxs)("div",{className:st,children:[(0,T.jsxs)("div",{className:nt,children:[(0,T.jsx)(c.Z,{className:ot,blogName:n,postId:i,krakenEventName:f.J.PostActivityNoteClickBlogName,krakenEventDetails:{type:r},ellipsisOverflow:!0,children:n}),l&&(0,T.jsx)("div",{className:it,children:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:at,children:(0,T.jsx)(We.Z,{size:{width:14,height:14},isCompact:!0})}),(0,T.jsx)(c.Z,{blogName:l,href:(0,qe.Z)(l),showBlogCard:!1,children:l})]})})]}),(m||g)&&(0,T.jsxs)("div",{className:lt,children:[m&&(0,T.jsx)("div",{className:rt,children:m}),g&&(0,T.jsx)("div",{className:dt,children:g})]}),(0,T.jsx)("button",{className:pt,onClick:u,children:h("A link to all notes for a post","View all notes")})]})]})})};var mt=s(28798);const gt=(0,Ve.Z)((()=>s.e(2474).then(s.bind(s,10583))),"AsyncSendAPost");var vt=s(73683),bt=s(65214),xt=s(6259),ft=s(74446);const Ct=e=>{let{editablePost:{blog:{name:t},id:s}}=e;const{onRemoveTimelineObject:n}=(0,ft.i)(),{_c:o}=(0,y.bp)(),{addOnCloseModalRouteHandler:i}=(0,xt._)(),a=(0,r.useRef)(null),l=o("clicking the button will allow the user to reply.","Answer"),d=(0,r.useCallback)((e=>{var t;e&&(null==n||n({id:s})),null===(t=a.current)||void 0===t||t.call(a)}),[n,s]),c=(0,r.useCallback)((()=>{a.current=i((e=>{let{isModalSuccess:t}=e;return d(!!t)}))}),[]);return(0,T.jsx)(vt.rU,{to:(0,bt.yj)({blogName:t,postId:s.toString()}),children:(0,T.jsx)(O.Z,{label:l,onClick:c,children:l})})},yt=(0,u.q)("delete");yt.defaultProps={size:{width:24,height:24}};const wt=yt,jt=e=>{let{id:t,disabled:s=!1,onClick:n}=e;const{_t:o}=(0,y.bp)();return t?(0,T.jsx)(O.Z,{label:o("Delete"),disabled:s,onClick:n,children:(0,T.jsx)(wt,{size:{width:21,height:21},colors:{primary:s?S().paletteGray40:S().paletteGray65}})}):null};var kt=s(10736),St=s(60499);const It="cnNot",Nt="y56NR",Pt=e=>{let{color:t=S().paletteGray65,label:s="",onClick:n,disabled:o=!1,filled:i=!1,withLabel:a=!0}=e;return(0,T.jsxs)(O.Z,{className:It,label:s,onClick:n,disabled:o,children:[(0,T.jsx)(St.Z,{filled:i,emptyIconColors:{primary:t}}),a&&(0,T.jsx)("span",{className:Nt,children:(0,T.jsx)(ue.ZP,{children:"Blaze"})})]})};var Tt=s(86179),Zt=s(7390),At=s(45451),Et=s(18046),Mt=s(77),Lt=s(22470),Ot=s(93613),Rt=s(43906),Dt=s(66591);const Ft=(0,u.q)("broken-heart-left");Ft.defaultProps={size:{width:24,height:24}};const Bt=Ft,_t=(0,u.q)("broken-heart-right");_t.defaultProps={size:{width:16,height:24}};const Ut=_t,Vt="WXF6Z",zt="y_8_Y",Ht="WQE_S",Wt="zTFrW",qt="C281d";class $t extends r.Component{constructor(){super(...arguments),o()(this,"state",{isAnimating:!1}),o()(this,"animate",(()=>{this.setState((()=>({isAnimating:!0}))),window.setTimeout((()=>{this.setState({isAnimating:!1})}),750)}))}componentDidUpdate(e){e.liked!==this.props.liked&&this.animate()}render(){const{liked:e}=this.props,{isAnimating:t}=this.state;return t?e?(0,T.jsx)("div",{className:a()(Vt,zt),children:(0,T.jsx)(Zt.Z,{filled:!0,size:{height:51,width:57}})}):(0,T.jsxs)("div",{className:a()(Vt,Ht),children:[(0,T.jsx)("div",{className:qt,children:(0,T.jsx)(Bt,{size:{height:54,width:54}})}),(0,T.jsx)("div",{className:Wt,children:(0,T.jsx)(Ut,{size:{height:54,width:36}})})]}):null}}const Gt="ztpfZ",Xt="B1Z5w",Qt="YCZ8P",Jt=e=>{let{color:t=S().paletteGray65,postIndex:s=0}=e;const{_c:n,logEvent:o,isLoggedIn:i,apiFetch:l}=(0,y.bp)(),{onLike:r,onInjectTimelineObjects:d,displayMode:c}=(0,ft.i)(),{post:{canLike:p,earnedId:u,id:h,liked:m,placementId:g,reblogKey:v,blogName:b},getIsLongPost:x}=(0,w.uu)(),{toggleToast:C}=(0,Ot.V)(),{tabId:j}=(0,Mt.iv)(),{pathname:k}=(0,Tt.TH)(),{shouldShowLikeTip:I,postLiked:N}=(0,Rt.g)(),{addRelatedPosts:P,relatedPosts:Z}=(0,Lt.m)(),A=I(s),E=i&&!p;return(0,T.jsx)(At.Z,{isOpen:A,content:n("Text that is shown as a tooltip to nudge the user to like a post.","Psst... liking a post you’re into makes your recommendations better 👀"),popoverProps:{useFlex:!0,targetStyles:{height:"100%"}},onFirstShow:()=>{o({page:"TourGuideLikeTooltip",eventName:f.J.Shown})},onDismiss:()=>{o({page:"TourGuideLikeTooltip",eventName:f.J.Dismissed})},children:(0,T.jsxs)(O.Z,{className:a()(Xt,{[Gt]:m,[Qt]:E}),label:m?n("Like button: Unlike label","Unlike"):n("Like button: Like label","Like"),onClick:async()=>{(0,Pe.ZP)(l).likePost({id:h,liked:m,reblogKey:v,blogName:b,placementId:g,earnedId:u,logEvent:o,onLike:r,isLongPost:null==x?void 0:x(),tabId:j,context:(0,bt.qz)(k),displayMode:c,tooltipShown:A}).fetch().then((e=>{var t,s;if(null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(s=t.timeline)&&void 0!==s&&s.elements){var i,a,l,r,c;const t=null==e||null===(i=e.response)||void 0===i||null===(a=i.timeline)||void 0===a?void 0:a.elements,s=t[t.length-1],p=null===(l=s.elements)||void 0===l||null===(r=l[0])||void 0===r||null===(c=r.objectData)||void 0===c?void 0:c.injectInline;if(!p){const e=t[1].highlightText;t[1].text=n("Text that is shown to explain more posts","More posts by %1$s",[e]),d(h,t)}if(void 0===Z[h]&&p){const e=t.map((e=>({...e,parentPostId:h})));d(h,e),P(h,e),o({eventName:f.J.RecommendationModuleImpression,eventDetails:{module_type:"3x1 chiclet",name:s.eventData.name,type:s.eventData.type,serve_id:s.serveId,tab:j}})}}})).catch((e=>{e instanceof Dt.Z&&C(e.message,"error")})),m||N()},disabled:E,...!i&&{"data-login-wall-type":"like","data-login-wall-id":h,"data-login-wall-reblog-key":v,"data-login-wall-blog-name":b,"data-login-wall-placement-id":g,"data-login-wall-earned-id":u,"data-login-wall-redirect":(0,bt.wT)({exploreMode:Et.Ru.Trending})},children:[(0,T.jsx)(Zt.Z,{filled:m,size:{width:23,height:21},emptyIconColors:{primary:E?S().paletteGray40:t}}),(0,T.jsx)($t,{liked:m})]})})},Yt="UUr5c";class Kt extends r.Component{constructor(){super(...arguments),o()(this,"state",{dialogIsShowing:!1}),o()(this,"apiHelper",(0,Pe.ZP)(this.props.appContext.apiFetch)),o()(this,"confirmPublish",(()=>this.setState({dialogIsShowing:!0}))),o()(this,"cancelConfirmation",(()=>this.setState({dialogIsShowing:!1}))),o()(this,"publishPost",(()=>{const{timelineContext:e,postContext:{post:{blog:{uuid:t},id:s}}}=this.props;return t&&this.apiHelper.quickPublishPost(t,s).fetch((()=>{var t;this.cancelConfirmation(),null==e||null===(t=e.onRemoveTimelineObject)||void 0===t||t.call(e,{id:s})}))}))}render(){const{appContext:{_c:e,features:{postFooterSecondRedesign:t}},postContext:{post:{state:s}}}=this.props,{dialogIsShowing:n}=this.state;if(s===Je.hA.Published||s===Je.hA.Private)return null;const o=e("Action button to publish a post, should be verb here","Post");return(0,T.jsxs)(r.Fragment,{children:[(0,T.jsx)(O.Z,{label:o,onClick:this.confirmPublish,className:t?Yt:void 0,children:o}),n&&this.renderDialog()]})}renderDialog(){const{_t:e}=this.props.appContext;return(0,T.jsx)($.Z,{onGlassClick:this.cancelConfirmation,children:(0,T.jsx)(Ae.Z,{title:e("Publish this post now?"),buttons:[{text:e("Cancel"),onClick:this.cancelConfirmation,buttonStyle:Ae.X.Neutral},{text:e("OK"),onClick:this.publishPost,buttonStyle:Ae.X.Confirm}]})})}}const es=(0,L.X9)(Kt,{appContext:!0,postContext:!0,timelineContext:!0}),ts=e=>{let{size:{width:t,height:s},fill:n}=e;return(0,T.jsxs)("svg",{width:t,height:s,fill:"none",viewBox:"0 0 24 24",children:[(0,T.jsx)("path",{fill:n,fillRule:"evenodd",d:"M12 21a9 9 0 100-18 9 9 0 000 18zm0 2c6.075 0 11-4.925 11-11S18.075 1 12 1 1 5.925 1 12s4.925 11 11 11z",clipRule:"evenodd"}),(0,T.jsx)("path",{fill:n,fillRule:"evenodd",d:"M12 5a1 1 0 00-1 1v6a1 1 0 001 1h5a1 1 0 100-2h-4V6a1 1 0 00-1-1z",clipRule:"evenodd"})]})};ts.defaultProps={size:{width:24,height:24},fill:k.paletteBlack};const ss=ts;class ns extends r.Component{constructor(){super(...arguments),o()(this,"state",{dialogIsShowing:!1}),o()(this,"confirmQueue",(()=>this.setState({dialogIsShowing:!0}))),o()(this,"cancelConfirmation",(()=>this.setState({dialogIsShowing:!1}))),o()(this,"queuePost",(()=>{const{timelineContext:e,postContext:{post:{blog:{uuid:t},id:s}},appContext:{apiFetch:n}}=this.props;return t&&(0,M.V6)(n,{blogUuid:t,postId:s}).fetch((()=>{var t;this.cancelConfirmation(),null==e||null===(t=e.onRemoveTimelineObject)||void 0===t||t.call(e,{id:s})}))}))}render(){const{appContext:{_c:e,features:{postFooterSecondRedesign:t}},postContext:{post:{state:s}}}=this.props,{dialogIsShowing:n}=this.state;if(s!==Je.hA.Draft&&s!==Je.hA.Submission)return null;const o=e("Action button to queue a post, should be verb here","Queue");return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(O.Z,{label:o,onClick:this.confirmQueue,children:t?(0,T.jsx)(ss,{fill:k.paletteGray65}):o}),n&&this.renderDialog()]})}renderDialog(){const{_t:e}=this.props.appContext;return(0,T.jsx)($.Z,{onGlassClick:this.cancelConfirmation,children:(0,T.jsx)(Ae.Z,{title:e("Queue this post for publishing?"),buttons:[{text:e("Cancel"),onClick:this.cancelConfirmation,buttonStyle:Ae.X.Neutral},{text:e("OK"),onClick:this.queuePost,buttonStyle:Ae.X.Confirm}]})})}}const os=(0,L.X9)(ns,{appContext:!0,postContext:!0,timelineContext:!0});var is=s(92816),as=s(8156),ls=s(68582);const rs=e=>{let{reblogKey:t,reblogBlogName:s,reblogPostId:n,routeQueryProps:o,mode:i="reblog",...a}=e;const{isLoggedIn:l}=(0,y.bp)(),r=()=>{const e=(0,as.Z)(o),a={reblogKey:t,blogName:s,postId:n.toString()};return"reblog"===i?(0,bt.oh)(a,e):(0,bt.eJ)(a,e)};if(!l){const e=(0,bt.wT)({exploreMode:Et.Ru.Trending});return(0,T.jsx)(is.Z,{...a,className:ls.Z.loggedOutLink,"data-login-wall-type":"reblog","data-login-wall-reblog-path":r(),"data-login-wall-destination":e,"data-login-wall-redirect":e})}return(0,T.jsx)(is.Z,{...a,getPath:r,isAlreadyOnPostFormPath:bt.LX})};var ds=s(75408),cs=s(18042),ps=s(37236);const us="o6JAm",hs="LpPf2",ms="ALkTz",gs="chDxw",vs=e=>{let{onClickSelectedBlog:t,blogs:s,onMouseLeave:n,onMouseEnter:o,avatarTitle:i}=e;const[l,c]=(0,r.useState)(!1),{_c:p}=(0,y.bp)(),u=(0,r.useCallback)(((e,s)=>{t(s,e,{bubbleIndex:3}),c(!1)}),[t]);if(1===s.length)return null;const h=s.length>4,m=h?s.slice(0,3):s;return(0,T.jsxs)("div",{"aria-label":p("A list of blogs","Blogs"),className:a()(us,{[gs]:l}),onMouseLeave:n,onMouseEnter:o,children:[m.map(((e,s)=>(0,T.jsx)(O.Z,{wrapperClassName:hs,onClick:n=>t(n,e,{bubbleIndex:s}),title:null==i?void 0:i(e.name),children:(0,T.jsx)(d.Z,{imageResponse:e.avatar,avatarShape:ps.o.Circle,dimension:50})},s))),h&&(0,T.jsx)("div",{className:hs,children:(0,T.jsx)(ds.Z,{blogs:s.slice(3),selectedBlog:s[0],onClickSelectedBlog:u,onToggle:c,children:e=>(0,T.jsx)(O.Z,{wrapperClassName:ms,onClick:e,children:(0,T.jsx)(cs.b,{colors:{primary:k.paletteNavy}})})})})]})};var bs=s(89351),xs=s(22979),fs=s(81095),Cs=s(8737),ys=s(82560);const ws="n8L1c";class js extends r.Component{constructor(){super(...arguments),o()(this,"state",{isAnimating:!1}),o()(this,"animate",(()=>{this.setState({isAnimating:!0},(()=>setTimeout((()=>this.setState({isAnimating:!1})),800)))}))}render(){return this.props.children?this.state.isAnimating&&(0,T.jsx)("div",{className:ws,children:(0,r.cloneElement)(this.props.children,{fill:this.props.fill})}):null}}o()(js,"defaultProps",{fill:S().paletteGreen,children:null});const ks="Od7LS";let Ss;!function(e){e[e.Reblogged=0]="Reblogged",e[e.Queued=1]="Queued"}(Ss||(Ss={}));const Is=e=>{let{color:t=S().paletteGray65,disabled:s,className:n,mode:o="reblog",postIndex:i=0}=e;const{apiFetch:l,_t:d,_c:c,features:{redpopFastReblog:p},features:u,logEvent:h,labsSettings:{fastQueue:m}}=(0,y.bp)(),{post:{id:g,reblogKey:v,placementId:b,placementId:x,earnedId:C,earnedId:j,blogName:k,shouldShowTip:I},post:N,getIsLongPost:P}=(0,w.uu)(),{tabId:Z}=(0,Mt.iv)(),{addOnCloseModalRouteHandler:M}=(0,xt._)(),{toggleToast:L}=(0,Ot.V)(),{isMobile:O}=(0,E.v$)(),{canFastReblog:R,canFastQueue:D,fastRebloggedPosts:F,setDefaultFastBlog:B,getBlogs:_}=(0,A.q5)(),{onReblogged:U,onInjectTimelineObjects:V}=(0,ft.i)(),{shouldShowReblogTip:z,reblogTipShown:H}=(0,Rt.g)(),W=z(i),[q,$]=r.useState(!1),[G,X]=r.useState(void 0),Q=r.useRef(null),J=r.useRef(null),Y=r.useRef((0,Pe.ZP)(l)),K=r.useRef(!1),ee=r.useRef(!1),te=r.useRef();r.useEffect((()=>()=>{var e;return null===(e=te.current)||void 0===e?void 0:e.call(te)}),[]);const se=_(),ne="reblog"===o&&R,oe=("queue"===o||!m)&&D,ie=!s&&(ne||oe);let ae=K.current||ee.current;ie||(ee.current=!1,ae=!1);const le=G===Ss.Reblogged,re=G===Ss.Queued,de=le?S().paletteGreen:S().palettePurple,ce=le||F.includes(g)?S().paletteGreen:G===Ss.Queued?S().palettePurple:s?S().paletteGray40:ne?S().paletteBlue:oe?S().palettePink:t,pe="reblog"===o?(0,T.jsx)(We.Z,{size:{width:21,height:21},colors:{primary:ce}}):(0,T.jsx)(ss,{fill:ce});if(!g||!v)return(0,T.jsxs)(T.Fragment,{children:[pe,(0,T.jsx)(js,{ref:J,fill:de})]});const he=(e,t)=>ge(Je.hA.Published,e,t),me=(e,t)=>ge(Je.hA.Queue,e,t),ge=(e,t,s)=>(W&&H(),null==t||t.preventDefault(),Y.current.postAPost({selectedBlogName:s,placementId:x,logEvent:h,isLongPost:null==P?void 0:P(),post:{...N,date:void 0,tags:void 0,content:[],layout:[],state:e,parentTumblelogUuid:N.blog.uuid,parentPostId:g,id:""},reblogType:e===Je.hA.Published?fs.k.Fast:void 0}).fetch((t=>{var s,n,o;if(null===(s=J.current)||void 0===s||s.animate(),null!=t&&null!==(n=t.response)&&void 0!==n&&null!==(o=n.timeline)&&void 0!==o&&o.elements){var i,a;const e=null==t||null===(i=t.response)||void 0===i||null===(a=i.timeline)||void 0===a?void 0:a.elements;V(g,e)}return N&&X(e===Je.hA.Published?Ss.Reblogged:Ss.Queued)}))),ve=e=>{var t;let{isModalSuccess:s,response:n}=e;var o,i;if((null===(t=te.current)||void 0===t||t.call(te),(0,Cs.Ly)(),s)&&(xe&&h({eventName:f.J.ClientReblog,eventDetails:{placement_id:b,earned_id:C,has_tip:!!I,tab:Z}}),void 0===G&&X(Ss.Reblogged),null==U||U(g),null!=n&&null!==(o=n.response)&&void 0!==o&&null!==(i=o.timeline)&&void 0!==i&&i.elements)){var a,l;const e=null==n||null===(a=n.response)||void 0===a||null===(l=a.timeline)||void 0===l?void 0:l.elements;V(g,e)}},be=(e,t,s)=>{ee.current=!1,K.current=!1,$(!q),B(t);(ne?he:me)(e,t.name).then((()=>{h({eventDetails:{...s,tab:Z},eventName:ne?f.J.FastReblog:f.J.FastQueue}),L(ne?(0,T.jsx)(ue.ZP,{params:{blogName:t.name},children:"Reblogged to [blogName]"}):(0,T.jsx)(ue.ZP,{params:{blogName:t.name},children:"Queued to [blogName]"})),ne&&(null==U||U(g))})).catch((()=>{L(d("Oops! Something went wrong."),"error")}))},xe=(0,ys.Z)({isMobile:O,features:u,editablePost:N,isReblog:!0}),fe={onMouseEnter:()=>{K.current=!0,ie&&$(!q)},onMouseLeave:()=>K.current=!1},Ce=d(ne?"Quick Reblog":oe?"Quick Queue":"reblog"===o?"Reblog":"Queue");let ye={};if((0,xs.uz)(N)&&!j){const{advertiserId:e,campaignId:t,creativeId:s,adGroupId:n,adId:o}=N;ye={...ye,[xs.PC.AdvertiserId]:e,[xs.PC.CampaignId]:t,[xs.PC.CreativeId]:s,[xs.PC.AdGroupId]:n,[xs.PC.AdId]:o}}return(0,T.jsxs)(T.Fragment,{children:[p&&ie&&ae&&(0,T.jsx)(vs,{onMouseEnter:()=>ee.current=!0,onClickSelectedBlog:be,onMouseLeave:e=>{var t;null!==(t=Q.current)&&void 0!==t&&t.contains(e.relatedTarget)||(K.current=!1,ee.current=!1,$(!q))},avatarTitle:e=>d(ne?"Reblog to %1$s":"Queue to %1$s",[e]),blogs:se}),on((0,T.jsx)(At.Z,{isOpen:z(i)&&"reblog"===o,content:c("Text that is shown as a tooltip to nudge the user to reblog a post.","Tap for a little clue...  🔎"),popoverProps:{useFlex:!0,targetStyles:{height:"100%"}},onFirstShow:()=>{h({page:"TourGuideReblogTooltip",eventName:f.J.Shown})},onDismiss:()=>{h({page:"TourGuideReblogTooltip",eventName:f.J.Dismissed})},children:(0,T.jsx)(rs,{mode:o,disabled:s,label:Ce,reblogBlogName:k,reblogPostId:g,forwardedRef:Q,reblogKey:v,routeQueryProps:ye,disableNavigation:ie,className:a()(n,{[ks]:s}),onClick:e=>{ie?(e=>{be(e,se[0])})(e):(e=>{(0,Cs.r9)(g,x,null==P?void 0:P(),Z),null!=e&&e.ctrlKey||null!=e&&e.metaKey||(te.current=M(ve),W&&H())})(e),h({eventName:f.J.ReblogIconClick,eventDetails:{tooltipShown:!!W}})},...fe,children:pe})}),{position:Re.I2.Top,content:d(le?"Reblogged":re?"Queued":"reblog"===o?"Reblog":"Queue"),...le&&{color:bs.v.GREEN}}),(0,T.jsx)(js,{ref:J,fill:de,children:"reblog"===o?(0,T.jsx)(We.Z,{size:{height:21,width:21}}):(0,T.jsx)(ss,{size:{height:21,width:21}})})]})};var Ns=s(17635);const Ps="tc6fQ";const Ts=function(e){let{color:t=S().paletteGray65,onClick:s,disabled:n}=e;const{_t:o}=(0,y.bp)(),i=n?S().paletteGray40:t;return(0,T.jsx)(O.Z,{label:o("Reply"),onClick:s,disabled:n,className:n&&Ps,children:(0,T.jsx)(Ns.Z,{size:{width:21,height:21},emptyIconColors:{primary:i}})})};var Zs=s(53379),As=s(72835),Es=s(22591),Ms=s(55351),Ls=s(68280),Os=s(50899),Rs=s(68087),Ds=s(399),Fs=s(24228),Bs=s(96467),_s=s(5984),Us=s(39277),Vs=s(51535),zs=s(20041),Hs=s(95867);const Ws=e=>{let{canDoThingsFast:t}=e;const[s,n]=(0,r.useState)(!1),o=(0,r.useRef)(null),i=(0,r.useRef)(!1),a=(0,r.useRef)(!1);let l=i.current||a.current;t||(a.current=!1,l=!1);return{showBubbles:l,onBubbleMouseEnter:()=>{a.current=!0},onBubbleMouseLeave:e=>{var t;null!==(t=o.current)&&void 0!==t&&t.contains(e.relatedTarget)||(i.current=!1,a.current=!1,n(!s))},onBubbleMouseClick:()=>{a.current=!1,i.current=!1,n(!s)},onAnchorMouseEnter:()=>{i.current=!0,t&&n(!s)},onAnchorMouseLeave:()=>{i.current=!1}}};var qs=s(5553),$s=s(22183);const Gs={root:"v2JIl",menu:"EvymM",title:"qcYGf",option:"Gdn85",blogOption:"asnZc",blogOptionMeta:"yX3XS",blogOptionTitle:"pT6VO",titleAvatar:"nT5UJ",optionIcon:"cP0pN",titleLabel:"QgXdE",optionLabel:"kt8zB",blogOptionName:"iGLok",optionShortcut:"OPqLY",listItem:"M9Ov7",listItemInner:"crS1E",popoverWrapper:"bjnZi",chevron:"YqkCK",blogSelectorOpen:"n1exf",disabled:"CGCzZ"},Xs=e=>{let{disabled:t=!1,iconColor:s=S().paletteGray65,onClick:n,postIndex:o=0,postState:i,onBubbleClick:l}=e;const{_c:r,logEvent:d}=(0,y.bp)(),{shouldShowReblogTip:c}=(0,Rt.g)(),p=c(o),{canFastReblog:u,canFastQueue:h,canFastQuote:m}=(0,A.q5)(),g=u?"reblog":h?"queue":m?"comment":void 0,v=(e=>{let{activeHotkey:t,disabled:s,postState:n}=e;if(t)switch(t){case"reblog":return"reblog-hotkey-active";case"queue":return"queue-hotkey-active";case"comment":return"comment-hotkey-active"}if(s)return"disabled";switch(n){case Je.hA.Published:return"published";case Je.hA.Queue:return"queued"}return"default"})({postState:i,activeHotkey:g,disabled:t}),{label:b,color:x}=(e=>{let{_c:t,buttonState:s,iconColor:n}=e,o=t("Tooltip for the reblog button","Reblog"),i=n,a=(0,T.jsx)(We.Z,{size:{height:21,width:21},colors:{primary:i}});switch(s){case"published":o=t("Tooltip when the post has been reblogged","Reblogged"),i=S().paletteGreen;break;case"queued":o=t("Tooltip when the post has been queued","Queued"),i=S().palettePurple;break;case"disabled":i=S().paletteGray40;break;case"reblog-hotkey-active":i=S().paletteBlue;break;case"queue-hotkey-active":i=S().palettePink,a=(0,T.jsx)(ss,{size:{height:24,width:24},fill:i});break;case"comment-hotkey-active":i=S().paletteOrange,a=(0,T.jsx)($s.Z,{size:{height:21,width:21},colors:{primary:i}})}return{label:o,color:i,icon:a}})({buttonState:v,iconColor:s,_c:r}),C=!t&&(u||h||m),w=(0,qs.Z)(),{showBubbles:j,onBubbleMouseEnter:k,onBubbleMouseLeave:I,onBubbleMouseClick:N,onAnchorMouseEnter:P,onAnchorMouseLeave:Z}=Ws({canDoThingsFast:C});return(0,T.jsxs)(T.Fragment,{children:[C&&j&&(0,T.jsx)(vs,{onMouseEnter:k,onMouseLeave:I,onClickSelectedBlog:(e,t)=>{N(),g&&l(t,g)},avatarTitle:e=>{let t="";switch(g){case"reblog":t=r("Tooltip for reblogging to a particular blog","Reblog to %1$s",[e]);break;case"comment":t=r("Tooltip for reblogging with a comment to a particular blog","Reblog with comment to %1$s",[e]);break;case"queue":t=r("Tooltip for queuing a reblog to a particular blog","Queue to %1$s",[e])}return t},blogs:w||[]}),on((0,T.jsx)(At.Z,{isOpen:p,content:r("Text that is shown as a tooltip to nudge the user to reblog a post.","Tap for a little clue...  🔎"),popoverProps:{useFlex:!0,targetStyles:{height:"100%"}},onFirstShow:()=>{d({page:"TourGuideReblogTooltip",eventName:f.J.Shown})},onDismiss:()=>{d({page:"TourGuideReblogTooltip",eventName:f.J.Dismissed})},children:(0,T.jsx)("button",{"aria-label":b,onClick:()=>{n(),d({eventName:f.J.ReblogIconClick,eventDetails:{tooltipShown:!!p}})},disabled:t,className:a()({[Gs.disabled]:t}),onMouseEnter:P,onMouseLeave:Z,children:(0,T.jsx)(We.Z,{size:{height:21,width:21},colors:{primary:x}})})}),{position:Re.I2.Top,content:b,...i===Je.hA.Published&&{color:bs.v.GREEN}})]})};var Qs=s(68144),Js=s(11389);const Ys=(e,t)=>e?e.map((e=>({value:e,label:e.name,title:e.title,selected:e.name===(null==t?void 0:t.name)}))):[],Ks=e=>[{value:"reblog",label:e("A menu option to immediately reblog this post, without opening the post editor","Reblog now"),icon:(0,T.jsx)(We.Z,{size:{height:21,width:21},colors:{primary:S().paletteGray65}}),shortcut:"E"},{value:"comment",label:e("A menu option to reblog this post by opening the post editor","Reblog"),icon:(0,T.jsx)($s.Z,{size:{height:21,width:21},colors:{primary:S().paletteGray65}}),shortcut:"Q"},{value:"queue",label:e("A menu option to immediately add this post to your queue, without opening the post editor","Add to queue"),icon:(0,T.jsx)(ss,{size:{height:21,width:21},fill:S().paletteGray65}),shortcut:"W"}],en=e=>{var t;let{activeSelector:s="reblog-selector",selectedBlog:n,onChangeActiveSelector:o,onChangeSelectedBlog:i,onClose:l,onSelectReblogAction:c}=e;const{_c:p}=(0,y.bp)(),u=(0,qs.Z)(),h=Ys(u,n),m=Ks(p),g=(0,r.useRef)(),[v,b]=(0,r.useState)(0);(0,r.useEffect)((()=>{var e;const t=(null==g||null===(e=g.current)||void 0===e?void 0:e.scrollWidth)||0;t>v&&b(t)}),[s,v]);const x=h.map((e=>{var t;let{value:s,label:n,title:o}=e;return{content:(0,T.jsxs)("div",{className:a()(Gs.option,Gs.blogOption),children:[(0,T.jsx)("div",{className:Gs.iconOption,children:(0,T.jsx)(d.Z,{imageResponse:s.avatar,avatarShape:null===(t=s.theme)||void 0===t?void 0:t.avatarShape,name:s.name,url:s.url,dimension:Bs.postFooterReblogMenuOptionAvatarWidth,showBlogCard:!1})}),(0,T.jsxs)("div",{className:Gs.blogOptionMeta,children:[(0,T.jsx)("div",{className:a()(Gs.optionLabel,Gs.blogOptionName),children:n}),o&&(0,T.jsx)("div",{className:Gs.blogOptionTitle,children:o})]})]}),value:s,label:n}})),f=m.map((e=>{let{value:t,label:s,icon:n,shortcut:o}=e;return{content:(0,T.jsxs)("div",{className:Gs.option,children:[(0,T.jsx)("div",{className:Gs.optionIcon,children:n}),(0,T.jsx)("div",{className:Gs.optionLabel,children:s}),(0,T.jsx)(Ms.Z,{children:(0,T.jsx)("div",{className:Gs.optionShortcut,children:(0,T.jsx)(ue.ZP,{comment:"Help text for keyboard shortcuts which involve pressing a key (Q, W, or E) and hovering with the mouse eg. Q + Hover, W + Hover, E + Hover",params:{shortcut:o},components:{span:(0,T.jsx)("span",{})},children:"[span][shortcut][/span] + [span]Hover[/span]"})})})]}),value:t,label:s}})),C=(e,t)=>{null==t||t.nativeEvent.stopImmediatePropagation(),i(e),o("reblog-selector")};let w;switch(s){case"blog-selector":w={options:x,onChange:C};break;case"reblog-selector":w={options:f,onChange:c}}const j=(0,T.jsxs)("div",{onClick:()=>{o("reblog-selector"===s?"blog-selector":"reblog-selector")},className:Gs.title,style:{width:v-Bs.postFooterReblogMenuTitleAvatarWidth-Bs.postFooterReblogMenuTitlePadding-Bs.postFooterReblogMenuItemMargin},role:"presentation",children:[(0,T.jsx)("div",{className:Gs.titleAvatar,children:(0,T.jsx)(d.Z,{imageResponse:null==n?void 0:n.avatar,avatarShape:null==n||null===(t=n.theme)||void 0===t?void 0:t.avatarShape,name:null==n?void 0:n.name,url:null==n?void 0:n.url,dimension:Bs.postFooterReblogMenuTitleAvatarWidth,showBlogCard:!1})}),(0,T.jsx)("div",{className:Gs.titleLabel,children:null==n?void 0:n.name}),(0,T.jsx)(Qs.sn,{size:{width:14,height:14},colors:{primary:S().paletteGray65},className:Gs.chevron})]});return(0,T.jsx)("div",{className:Gs.menu,style:{width:v},children:(0,T.jsx)(Js.Z,{...w,titleEl:j,isOpen:!0,popoverWrapperClassName:Gs.popoverWrapper,chromelessPopover:!0,onClickGlass:l,listItemClassName:Gs.listItem,listItemInnerClassName:Gs.listItemInner,popoverRef:g})})},tn=()=>{const{apiFetch:e,logEvent:t,_c:s}=(0,y.bp)(),{toggleToast:n}=(0,Ot.V)();return async(o,i,a)=>{try{return await(0,Pe.ZP)(e).postAPost({selectedBlogName:i.name,placementId:o.placementId,logEvent:t,post:{...o,id:"",date:void 0,tags:void 0,content:[],layout:[],state:a,parentTumblelogUuid:o.blog.uuid,parentPostId:o.id},reblogType:a===Je.hA.Published?fs.k.Fast:void 0}).fetch(),n(a===Je.hA.Published?(0,T.jsx)(ue.ZP,{comment:"Message displayed after a post is successfully reblogged",params:{blogName:i.name},children:"Reblogged to [blogName]"}):(0,T.jsx)(ue.ZP,{comment:"Message displayed after a post is successfully queued",params:{blogName:i.name},children:"Queued to [blogName]"})),!0}catch(e){return n(s("Error message displayed when a post cannot be reblogged","Oops! Something went wrong."),"error"),!1}}},sn=e=>{let{color:t,disabled:s,postIndex:n,selector:o="reblog-selector"}=e;const{logEvent:i}=(0,y.bp)(),[l,d]=(0,r.useState)(!1),[c,p]=(0,r.useState)(o),[u,h]=(0,r.useState)(),{post:m}=(0,w.b8)(),{selectedBlog:g,onChangeSelectedBlog:v}=(0,Hs.ZP)(),b=tn(),x=(0,Vs.Z)(m.id,m.blogName,"completeOnUnmount"),C=()=>{l||(d(!0),i({eventName:f.J.ReblogPopoverOpen}))},j=()=>{l&&(d(!1),p("reblog-selector"),i({eventName:f.J.ReblogPopoverClose}))},k=async(e,t,s)=>{let n;switch(j(),s){case"reblog":n=await b(e,t,Je.hA.Published),n&&(h(Je.hA.Published),i({eventName:f.J.ReblogPopoverReblogClick}));break;case"queue":n=await b(e,t,Je.hA.Queue),n&&(h(Je.hA.Queue),i({eventName:f.J.ReblogPopoverQueueClick}));break;case"comment":x(),i({eventName:f.J.ReblogPopoverReblogWithCommentClick})}},S=(0,zs.Z)({outsideEvents:["click","scroll"],onOutsideEvent:j});return(0,T.jsxs)("div",{ref:S,className:a()(Gs.root,{[Gs.blogSelectorOpen]:"blog-selector"===c}),children:[(0,T.jsx)(Xs,{disabled:s,iconColor:t,onClick:()=>{l?j():C()},postIndex:n,postState:u,onBubbleClick:(e,t)=>{v(e),k(m,e,t)}}),l&&(0,T.jsx)(en,{selectedBlog:g,onChangeSelectedBlog:v,activeSelector:c,onChangeActiveSelector:p,onSelectReblogAction:e=>{g&&k(m,g,e)},onClose:j})]})},nn={footer:"tOKgq",isPaywallShown:"Q5Knh",noteCount:"gstmW",igniteSuccessButton:"XvNsi",noteCountButton:"rlv6m",hide:"YICWt",noteCountButtonInner:"RHkx9",noteCountContainer:"zrO3e",noteCountTypes:"WNEhC",noteCountReply:"Pbawl",noteCountReblog:"C9fUY",noteCountLike:"Cq903",notesCloseButton:"ePsyd",controls:"MCavR",controlIcon:"sfGru",controlsWithDivider:"r3vIz",postActivityWrapper:"yTb5J",postActivityWrapperOpen:"DUvqr",tippingWrapper:"YfPOA",igniteTooltip:"x23xO",postFooterSecondRedesign:"eIaSl",footerRow:"m5KTc",zeroNotes:"VNASy",controlAutoWidth:"Ed7CO",postControl:"t21M4",previewNote:"eBUmE"},on=(e,t)=>(0,T.jsx)(bs.Z,{...t,children:e});class an extends r.Component{constructor(e){var t;super(e),t=this,o()(this,"setNoteCountRef",(e=>this.noteCountEl=e)),o()(this,"noteCountRef",(0,r.createRef)()),o()(this,"noteCountEllipsisCache",new Map),o()(this,"getTopRow",(()=>{const{appContext:{features:{commentingUxRedesign:e,postFooterSecondRedesign:t}},postContext:{post:{shouldShowTip:s}}}=this.props,n=s&&e?this.tippingContent():void 0,o=this.getIgniteButton(),i=this.getUserControlButtons(),{isQueue:l,isDraft:r}=this.getActionsAllowStatus();return t&&!r&&!l&&(n||o||i)?(0,T.jsxs)("div",{className:nn.footerRow,children:[(0,T.jsxs)("div",{className:a()(nn.controls,nn.controlsWithDivider),children:[n,o]}),(0,T.jsx)("div",{className:nn.controls,children:i})]}):void 0})),o()(this,"getBottomRow",(()=>{const{appContext:{isLoggedIn:e,features:{commentingUxRedesign:t,postFooterSecondRedesign:s}},postContext:{post:{shouldShowTip:n}}}=this.props,{showDeleteDialog:o}=this.state,i=this.noteContent(),l=!s&&n&&t&&this.tippingContent(),r=!!i||!!l;return(0,T.jsxs)("div",{className:a()(nn.footerRow,{[nn.zeroNotes]:null===i}),children:[r&&(0,T.jsxs)("div",{ref:this.noteCountRef,className:nn.noteCount,children:[i,l]}),e?this.renderControls():this.renderLoggedOutControls(),o&&this.renderDeleteDialog()]})})),o()(this,"postActivityContent",(()=>{const{timelineContext:{onReplyAdded:e},postContext:{post:{id:t,blog:s,reblogKey:n,replyCount:o,reblogCount:i,likeCount:a,liked:l,shouldShowTip:r},presentationStyle:{expandNotesOnMount:d}}}=this.props,{postActivityTypeToOpen:c,focusReplyOnMount:p,replyText:u}=this.state,{canDoReply:h,canDoReblog:m}=this.getActionsAllowStatus();return"tipping"===c?(0,T.jsx)(Es.Z,{onClose:this.onTipButtonClick,blogname:s.name,postId:t,canDoReply:!!h,replyText:u}):(0,T.jsx)(ze,{id:t,blog:s,reblogKey:n,canReply:h,canReblog:m,replyCount:o,reblogCount:i,likeCount:a,onReplyAdded:e,shouldUpdateLikeNotes:this.shouldUpdateLikeNotes(l),focusReplyOnMount:p,onTipButtonClick:r?this.onTipButtonClick:void 0,expandNotesOnMount:d})})),o()(this,"shouldUpdateLikeNotes",(e=>{const t=e!==this.state.likeChanged;return t&&this.setState({likeChanged:e}),t})),o()(this,"renderLoggedOutControls",(()=>{const{postContext:{presentationStyle:{showsReblogButton:e,showsLikeButton:t},post:{state:s}},postChromeStyles:n}=this.props,o=[],i=this.getAdjustedForegroundColor();return o.push((0,T.jsx)("div",{className:nn.controlIcon,children:this.sendAPostContent()},"send a post")),e&&s!==Je.hA.Private&&o.push((0,T.jsx)("div",{className:nn.controlIcon,children:(0,T.jsx)(Is,{color:i})},"reblog")),t&&o.push((0,T.jsx)("div",{className:nn.controlIcon,children:(0,T.jsx)(Jt,{color:i})},"like")),(0,T.jsx)("div",{className:nn.controls,style:n,children:o})})),o()(this,"getActionsAllowStatus",(()=>{const{postContext:{presentationStyle:{showsEditButton:e,showsReplyButton:t,showsShareButton:s,showsReblogButton:n,showsLikeButton:o,showsDeleteButton:i,showsQueueButton:a,showsPublishButton:l},post:{canSendInMessage:r,canReply:d,canReblog:c,canLike:p,canDelete:u,canEdit:h,queuedState:m,shouldShowTip:g,state:v,blog:b}}}=this.props,x=v===Je.hA.Queued&&m===Je.SH.Queued&&b,f=v===Je.hA.Draft,C=v===Je.hA.Private;return{isQueue:x,isDraft:f,isPrivate:C,canDoReply:d&&t,canDoShare:r&&s,canDoReblog:c&&!b.isPasswordProtected&&!C&&n,canDoLike:p&&o,canDoEdit:h&&e,canDoQueue:c&&!b.isPasswordProtected&&!C&&a,canDoDelete:u&&i,canDoPublish:h&&l,shouldShowTip:g}})),o()(this,"getUserControlButtons",(()=>{const{appContext:{features:{tumblrIgnite:e}},postContext:{post:{id:t,trail:s,shouldOpenInLegacy:n,igniteStatus:o,rebloggedFromId:i,canIgnite:a}},canAnswer:l,isInboxAsk:r,editablePost:d}=this.props,{canDoEdit:c,canDoDelete:p}=this.getActionsAllowStatus(),u=[];return(e&&a&&void 0===i||p)&&u.push((0,T.jsx)("div",{className:nn.controlIcon,children:on((0,T.jsx)(jt,{id:t,disabled:o===Ne.g.approved||o===Ne.g.pending,onClick:this.toggleShowDeleteDialog}),{position:Re.I2.Top,content:this.deleteTooltipMessage(),className:o?nn.igniteTooltip:void 0})},"delete")),(e&&a&&void 0===i||c&&d&&!r&&!l)&&u.push((0,T.jsx)("div",{className:nn.controlIcon,children:on((0,T.jsx)(kt.Z,{editablePost:d??this.props.postContext.post,trail:s,shouldAlwaysOpenInLegacy:n,disabled:!d||o===Ne.g.pending||o===Ne.g.approved}),{position:Re.I2.Top,content:this.editTooltipMessage(),className:o?nn.igniteTooltip:void 0})},"edit")),u.length>0?u:void 0})),o()(this,"getIgniteButton",(function(){let{withLabel:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withLabel:!0};const{appContext:{features:{tumblrIgnite:s}},postContext:{post:{igniteStatus:n,rebloggedFromId:o,canIgnite:i}}}=t.props;let l;return s&&i&&void 0===o&&(l=(0,T.jsx)("div",{className:a()(nn.controlIcon,nn.controlAutoWidth),children:on((0,T.jsx)(Pt,{color:n?S().betamaxOrange:S().paletteGray65,label:t.popoverMessage(),onClick:t.toggleIgniteProductPopover,filled:n===Ne.g.approved,withLabel:e}),{position:Re.I2.Top,content:t.popoverMessage(),className:n?nn.igniteTooltip:void 0})},"ignite")),l})),o()(this,"renderControls",(()=>{const{appContext:{_t:e,_c:t,features:{postFooterSecondRedesign:s,postFooterThirdRedesign:n},labsSettings:{fastQueue:o}},postContext:{presentationStyle:{showsReplyButton:i,showsShareButton:l,showsReblogButton:r,showsQueueButton:d,showsLikeButton:c},post:{id:p,liked:u,state:h,blog:m}},isInInboxTimeline:g,isNarrow:v,isSubmissionDraft:b,isInboxAsk:x,canAnswer:f,postChromeStyles:C,editablePost:y,postIndex:w}=this.props,{isQueue:j,isDraft:k,canDoReply:S,canDoShare:I,canDoReblog:N,canDoLike:P,canDoEdit:Z,canDoQueue:A,canDoPublish:E}=this.getActionsAllowStatus(),M=this.getAdjustedForegroundColor(),L=[];if((I||l)&&L.push((0,T.jsx)("div",{className:nn.controlIcon,children:this.sendAPostContent()},"send a post")),!s){const e=this.getIgniteButton({withLabel:!1});e&&L.push(e)}if((S||i)&&L.push((0,T.jsx)("div",{className:nn.controlIcon,children:on((0,T.jsx)(Ts,{onClick:this.onReplyIconClick,disabled:!S,color:M}),{position:Re.I2.Top,content:e("Reply")})},"reply")),!d||!o||k||b||x||v&&s||L.push((0,T.jsx)("div",{className:nn.controlIcon,children:(0,T.jsx)(Is,{mode:"queue",disabled:!A,color:M,postIndex:w})},"queue-post")),!N&&!r||g||(n?L.push((0,T.jsx)("div",{className:nn.controlIcon,children:(0,T.jsx)(sn,{disabled:!N,color:M,postIndex:w})},"reblog")):L.push((0,T.jsx)("div",{className:nn.controlIcon,children:(0,T.jsx)(Is,{disabled:!N,color:M,postIndex:w})},"reblog"))),(P||c)&&L.push((0,T.jsx)("div",{className:nn.controlIcon,children:on((0,T.jsx)(Jt,{color:M,postIndex:w}),{position:Re.I2.Top,content:e(u?"Liked":"Like"),...u&&{color:bs.v.RED}})},"like")),s&&Z&&j&&L.push((0,T.jsx)(Ms.Z,{children:(0,T.jsx)("div",{className:nn.controlIcon,children:(0,T.jsx)(mt.Z,{})})},"reorder")),s&&Z&&j&&L.push((0,T.jsx)(Ms.Z,{children:(0,T.jsx)(q,{blogName:m.name,id:p.toString()})},"queueControls")),!s||s&&(k||j)){const e=this.getUserControlButtons();e&&L.push(...e)}return y&&f&&L.push((0,T.jsx)("div",{className:a()(nn.controlIcon,nn.controlAutoWidth),children:(0,T.jsx)(Ct,{editablePost:y})},"answer")),A&&(k||b)&&L.push((0,T.jsx)("div",{className:nn.controlIcon,children:on((0,T.jsx)(os,{}),{position:Re.I2.Top,content:t("Tooltip for button to queue a post, should be verb here","Queue")})},"queue")),!s&&Z&&j&&L.push((0,T.jsx)(Ms.Z,{children:(0,T.jsx)(q,{blogName:m.name,id:p.toString()})},"queueControls")),E&&(k||h===Je.hA.Queued||b)&&L.push((0,T.jsx)("div",{className:a()(nn.postControl,nn.controlIcon,nn.controlAutoWidth),children:(0,T.jsx)(es,{})},"post")),!s&&Z&&j&&L.push((0,T.jsx)(Ms.Z,{children:(0,T.jsx)("div",{className:nn.controlIcon,children:(0,T.jsx)(mt.Z,{})})},"reorder")),(0,T.jsx)("div",{className:nn.controls,style:C,children:L})})),o()(this,"editTooltipMessage",(()=>{const{postContext:{post:{igniteStatus:e}}}=this.props,{_t:t}=this.props.appContext;switch(e){case Ne.g.approved:case Ne.g.pending:return t("A post in a Blaze campaign cannot be edited");default:return t("Edit")}})),o()(this,"deleteTooltipMessage",(()=>{const{postContext:{post:{igniteStatus:e}}}=this.props,{_t:t}=this.props.appContext;switch(e){case Ne.g.approved:case Ne.g.pending:return t("A post in a Blaze campaign cannot be deleted");default:return t("Delete")}})),o()(this,"popoverMessage",(()=>{const{postContext:{post:{igniteStatus:e}}}=this.props,{_t:t}=this.props.appContext;switch(e){case Ne.g.pending:return t("Blaze campaign pending! We’ll email you when it’s approved.");case Ne.g.approved:return t("This post is on fire – in a good way! We’ll send you a wrap-up when it’s done.");default:return t("Blaze")}})),o()(this,"toggleShowDeleteDialog",(()=>this.setState((e=>({showDeleteDialog:!e.showDeleteDialog}))))),o()(this,"renderDeleteDialog",(()=>{const{_t:e}=this.props.appContext;return(0,T.jsx)($.Z,{onGlassClick:this.toggleShowDeleteDialog,glassIsClickable:!1,children:(0,T.jsx)(Ae.Z,{title:e("Are you sure you want to delete this post?"),buttons:[{text:e("Cancel"),onClick:this.toggleShowDeleteDialog,buttonStyle:Ae.X.Neutral},{text:e("OK"),onClick:this.deletePost,buttonStyle:Ae.X.Confirm}]})})})),o()(this,"deletePost",(async()=>{const{appContext:{apiFetch:e},timelineContext:{onRemoveTimelineObject:t},postContext:{post:{id:s,blog:{uuid:n}}}}=this.props,o=null==t?void 0:t({id:s});return this.toggleShowDeleteDialog(),e(`/v2/blog/${n}/post/delete`,{method:"POST",body:{id:s}}).catch((()=>null==o?void 0:o()))})),o()(this,"toggleNotesPanel",(()=>{this.setState((e=>("notes"===e.postActivityTypeToOpen||e.notesOpenedFromReply||this.logOpenNotesAnalyticsEvents(),{notesOpenedFromReply:!1})),(()=>{this.togglePostActivity("notes")}))})),o()(this,"toggleNotesPopover",(()=>{this.setState((e=>(e.notesPopoverIsOpen||e.notesOpenedFromReply||this.logOpenNotesAnalyticsEvents(),{focusNotePopoverTextareaOnMount:!1,notesPopoverIsOpen:!e.notesPopoverIsOpen,notesOpenedFromReply:!1})))})),o()(this,"toggleSendAPostPopover",(()=>{const{dashboardContext:{tabId:e}}=this.props;this.setState((e=>({sendAPostPopoverIsOpen:!e.sendAPostPopoverIsOpen}))),this.props.adContext.sendClickADMBeacon(this.props.postContext.post.adm),this.props.appContext.logEvent({eventName:f.J.SendAPostClick,eventDetails:{placement_id:this.props.postContext.post.placementId,tab:e,...(0,j.U)({timelineObject:this.props.postContext.post,adPlacementConfiguration:this.props.adContext.adPlacementConfiguration,hydraConfigInstanceId:this.props.adContext.hydraConfigInstanceId})}})})),o()(this,"logOpenNotesAnalyticsEvents",(()=>{const{adContext:{adPlacementConfiguration:e,hydraConfigInstanceId:t,sendClickADMBeacon:s},appContext:{logEvent:n},postContext:{post:o},dashboardContext:{tabId:i}}=this.props,{adm:a,earnedId:l,placementId:r}=o;s(a),n({eventName:f.J.Notes,eventDetails:{placement_id:r,earned_id:l,tab:i,...(0,j.U)({timelineObject:o,adPlacementConfiguration:e,hydraConfigInstanceId:t})}})})),o()(this,"onPostActivityTransitionEnd",(()=>{const{focusReplyOnMount:e,postActivityIsOpen:t}=this.state;t||(this.setState({postActivityTypeToOpen:null}),e&&this.setState({focusReplyOnMount:!1}))})),o()(this,"onReplyIconClick",(e=>{e.stopPropagation();const{adContext:{adPlacementConfiguration:t,hydraConfigInstanceId:s},appContext:{features:{commentingUxRedesign:n},logEvent:o},isNarrow:i,postContext:{post:a},dashboardContext:{tabId:l}}=this.props,{placementId:r}=a;this.state.notesPopoverIsOpen||"notes"===this.state.postActivityTypeToOpen||o({eventName:f.J.ReplyIconClick,eventDetails:{placement_id:r,tab:l,...(0,j.U)({timelineObject:a,adPlacementConfiguration:t,hydraConfigInstanceId:s})}}),this.setState({notesOpenedFromReply:!0}),i||!n?this.toggleNotesPopover():(this.setState({focusReplyOnMount:!0}),this.toggleNotesPanel())})),o()(this,"toggleNotes",(()=>{const{appContext:{features:{commentingUxRedesign:e}},isNarrow:t}=this.props;t||!e?this.toggleNotesPopover():(this.setState({focusReplyOnMount:!1}),this.toggleNotesPanel())})),o()(this,"toggleIgniteProductPopover",(()=>{this.setState((e=>({ignitePopoverIsOpen:!e.ignitePopoverIsOpen})))})),o()(this,"formatNoteCount",((e,t)=>{const{appContext:{_n:s,_getLocaleNumberString:n,features:{postFooterSecondRedesign:o,postFooterAdaptiveNoteCount:i}}}=this.props;if(i){var a,l;return this.noteCountRef.current&&(null===(a=this.noteCountRef.current)||void 0===a?void 0:a.scrollHeight)>(null===(l=this.noteCountRef.current)||void 0===l?void 0:l.clientHeight)||this.noteCountEllipsisCache.get(t)&&e>=this.noteCountEllipsisCache.get(t)?(this.noteCountEllipsisCache.set(t,e),s("%2$s note","%2$s notes",e,[n(e,he.gO.Short).toLowerCase()])):s("%2$s note","%2$s notes",e,[n(e)])}return s("%2$s note","%2$s notes",e,o?[n(e,he.gO.Short).toLowerCase()]:[n(e)])})),o()(this,"noteContent",(()=>{const{notesPopoverIsOpen:e,postActivityIsOpen:t,postActivityTypeToOpen:s,focusNotePopoverTextareaOnMount:n}=this.state,{appContext:{_c:o,_t:i,_n:l,features:r,isLoggedIn:d},timelineContext:{onReplyAdded:c},postContext:{post:{id:p,blog:u,reblogKey:h,noteCount:m,replyCount:g,reblogCount:v,likeCount:b,liked:x},presentationStyle:{expandNotesOnMount:f}},location:C}=this.props;if(!e&&!t&&(m<=0||!u.uuid))return null;const y=!r.postFooterSecondRedesign&&r.commentingUxRedesign&&g+v+b!==0,w=(0,T.jsx)(O.Z,{onClick:this.toggleNotes,wrapperClassName:a()(nn.noteCountButton,{[nn.hide]:m<=0&&e}),className:nn.noteCountButtonInner,label:i("Notes"),...!d&&!f&&{"data-login-wall-type":"notes","data-login-wall-tag-blog-name":u.name,"data-login-wall-post-id":p},children:t&&"notes"==s?(0,T.jsxs)("div",{className:nn.notesCloseButton,children:[(0,T.jsx)(G.Z,{colors:{primary:S().paletteGray65}}),(0,T.jsx)("span",{children:o("Close the panel showing the notes for a post","Close notes")})]}):(0,T.jsxs)("span",{className:nn.noteCountContainer,ref:this.setNoteCountRef,children:[y&&(0,T.jsxs)("div",{className:nn.noteCountTypes,children:[b>0&&(0,T.jsx)("div",{title:l("%1$s like","%1$s likes",b),className:nn.noteCountLike,children:(0,T.jsx)(Q,{})}),v>0&&(0,T.jsx)("div",{title:l("%1$s reblog","%1$s reblogs",v),className:nn.noteCountReblog,children:(0,T.jsx)(Y,{})}),g>0&&(0,T.jsx)("div",{title:l("%1$s reply","%1$s replies",g),className:nn.noteCountReply,children:(0,T.jsx)(ee,{})})]}),(0,T.jsx)("span",{"data-testid":"noteCountTotal",className:nn.noteCountTotal,children:this.formatNoteCount(m,p)})]})}),{canDoReply:j,canDoReblog:k,shouldShowTip:I}=this.getActionsAllowStatus(),N={focusNotePopoverTextareaOnMount:n,id:p,blog:u,reblogKey:h,canReply:j,canReblog:k,close:this.toggleNotesPopover,replyCount:g,reblogCount:v,likeCount:b,onReplyAdded:c},P=(0,T.jsx)(ze,{...N,popoverLayout:!0,shouldUpdateLikeNotes:this.shouldUpdateLikeNotes(x),totalNoteCount:m,onClose:this.toggleNotesPopover,onTipButtonClick:I?this.onTipButtonClick:void 0});return(0,T.jsx)(E.ZP,{children:t=>{let{isMobile:s}=t;return s?(0,T.jsxs)("div",{children:[w,e&&(0,T.jsx)($.Z,{onGlassClick:this.toggleNotesPopover,topOffset:Bs.mobileHeaderHeight,children:P})]}):(0,T.jsx)(Oe.ZP,{closeForAllExternalClicks:!0,isOpen:e,toggle:this.toggleNotes,position:(0,bt.lc)(C.pathname)?Re.I2.Right:Re.I2.Auto,width:320,height:510,component:P,showOverflowY:!0,usePortals:!0,children:w})}})})),o()(this,"sendAPostContent",(()=>{const{sendAPostPopoverIsOpen:e}=this.state,{appContext:{_t:t,features:{shareButtonSwap:s}},postContext:{post:{blog:n,id:o,slug:i,shortUrl:a,embedUrl:l,placementId:r,earnedId:d,canSendInMessage:c},presentationStyle:{hasCustomPostLink:p}},location:{pathname:u}}=this.props,h=s?{verticalAlign:"middle"}:{},m=this.getAdjustedForegroundColor(),g=(0,Fs.b)(n,o,i),v=p?`${Os.Cw}${u}`:g,b=p?`${Os.Cw}${u}`:a;return(0,T.jsx)(E.ZP,{children:s=>{let{isMobile:a}=s;return a?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Zs.Z,{disabled:!c,onClick:this.toggleSendAPostPopover,color:m}),e&&(0,T.jsx)($.Z,{onGlassClick:this.toggleSendAPostPopover,topOffset:Bs.mobileHeaderHeight,children:(0,T.jsx)(gt,{blog:n,id:o,shortUrl:b,postUrl:v,slug:i,embedUrl:l,isMobile:!0,close:this.toggleSendAPostPopover,placementId:r,earnedId:d,asText:p})})]}):(0,T.jsx)(Oe.ZP,{width:340,height:"auto",isOpen:e,toggle:this.toggleSendAPostPopover,showOverflowY:!0,usePortals:!0,targetStyles:h,position:Re.I2.AutoStart,component:(0,T.jsx)(gt,{blog:n,id:o,shortUrl:b,postUrl:v,slug:i,embedUrl:l,placementId:r,earnedId:d,asText:p}),children:on((0,T.jsx)(Zs.Z,{disabled:!c,onClick:this.toggleSendAPostPopover,color:m}),{content:t("Share"),position:Re.I2.Top})})}})})),o()(this,"getAdjustedForegroundColor",(()=>{const{isPaywallShown:e,postContext:{post:{blog:t}}}=this.props,{backgroundColor:s}=(null==t?void 0:t.theme)||{};return e?(0,_s.YK)(s||S().blogBackgroundColor):void 0})),o()(this,"togglePostActivity",(e=>{const t=window.scrollY;this.setState((t=>({postActivityIsOpen:t.postActivityTypeToOpen!==e||!t.postActivityIsOpen,postActivityTypeToOpen:e})),(()=>{window.scrollTo({top:t})}))})),o()(this,"toggleTipping",(()=>{this.togglePostActivity("tipping")})),o()(this,"toggleTippingPopover",(()=>{this.setState((e=>({tippingPopoverIsOpen:!e.tippingPopoverIsOpen})))})),o()(this,"onTipButtonClick",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{isNarrow:s,appContext:{_c:n,logEvent:o},postContext:{post:{id:i,blog:{isMember:a}}},toastContext:{toggleToast:l}}=t.props;if(a){l((0,Ds.iI)(n),"tumblrbot",`post-${i}`)}else t.setState({replyText:e,notesPopoverIsOpen:!1}),s?t.toggleTippingPopover():t.toggleTipping(),o({eventName:f.J.TipPostTap})})),o()(this,"tippingContent",(()=>{const{appContext:{features:{postFooterSecondRedesign:e}},postContext:{post:{id:t,blog:s}}}=this.props,{tippingPopoverIsOpen:n,replyText:o}=this.state,{canDoReply:i}=this.getActionsAllowStatus();return(0,T.jsx)(Oe.ZP,{width:Rs.OH,height:Rs.u5,closeForAllExternalClicks:!0,position:Re.I2.AutoStart,isOpen:n,toggle:this.onTipButtonClick,showOverflowY:!0,useFlex:e,usePortals:!0,component:(0,T.jsx)(Es.Z,{onClose:this.onTipButtonClick,blogname:s.name,postId:t,canDoReply:!!i,replyText:o}),children:(0,T.jsx)(As.Z,{onClick:this.onTipButtonClick})})}));const{postContext:{post:{noteCount:s},presentationStyle:{expandNotesOnMount:n}}}=this.props,i=!(!s||!n),l=i?"notes":null;this.state={ignitePopoverIsOpen:!1,notesPopoverIsOpen:!1,sendAPostPopoverIsOpen:!1,focusNotePopoverTextareaOnMount:!1,showDeleteDialog:!1,likeChanged:!1,focusReplyOnMount:!1,notesOpenedFromReply:!1,tippingPopoverIsOpen:!1,postActivityIsOpen:i,postActivityTypeToOpen:l,replyText:""},i&&this.logOpenNotesAnalyticsEvents()}render(){const{appContext:{_t:e,features:{commentingUxRedesign:t,tumblrIgnite:s,postFooterSecondRedesign:n}},timelineContext:{onRemoveTimelineObject:o},postContext:{presentationStyle:{showsDeleteButton:i},post:{id:l,canDelete:r,previewNote:d},isNarrow:c}}=this.props,{postActivityIsOpen:p,ignitePopoverIsOpen:u}=this.state;"production"===Ls.Z.Development&&r&&i&&!o&&console.warn(`The post ${l} can be deleted but has no onRemoveTimelineObject handler. This can cause the UI to get out of date with the delete state of the post.`);const h=this.getAdjustedForegroundColor(),m=h?{color:h}:null;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("footer",{role:"contentinfo","aria-label":e("Post Footer"),className:a()(nn.footer,{[nn.postFooterSecondRedesign]:n}),...m&&{style:m},children:[this.getTopRow(),this.getBottomRow(),d&&!p&&(0,T.jsx)(ht,{className:nn.previewNote,note:d,onClickViewAll:this.toggleNotes}),!c&&t&&(0,T.jsx)("div",{className:a()(nn.postActivityWrapper,{[nn.postActivityWrapperOpen]:p}),onTransitionEnd:this.onPostActivityTransitionEnd,children:p&&this.postActivityContent()})]}),s&&(0,T.jsx)(Ue,{productPopoverIsOpen:u,toggleProductPopover:this.toggleIgniteProductPopover})]})}}o()(an,"defaultProps",{trailElementForSelf:void 0,isNarrow:!1});const ln=(0,L.X9)(an,{appContext:!0,adContext:!0,timelineContext:!0,loginContext:!0,postContext:!0,paletteContext:!0,toastContext:!0,dashboardContext:!0}),rn=(0,Us.Z)(ln);var dn=s(98478),cn=s(902),pn=s(51416);const un={flagged:"kZfp1",communityLabelFlag:"H2hul",available:"gPEd0",inReview:"zwjUv",hasError:"WfICw",appealButton:"zQ8dN",bannerPillButton:"TBfTV",pill:"EkBU0",bannerActions:"dJtjN",dismissBannerButton:"ACc3i",dismiss:"Nvxc5",modalBody:"Z8aXP",communityLabelModalContent:"BF3AU",appealComment:"U9tmV",communityLabelModalActions:"X5e5s",primary:"F7dEp",outline:"UHvHp",appealButtons:"YYlrz",modal:"lQ0w7",bannerText:"MQO0V"};class hn extends r.Component{constructor(){super(...arguments),o()(this,"state",{appealState:this.props.initialAppealState??"unavailable",openGlass:!1,hasError:!1,needsAppealComment:!1,appealComment:"",bannerDismissed:!1}),o()(this,"logEvent",(e=>{const{logEvent:t}=this.props.appContext,{blogName:s,postId:n}=this.props;t({eventName:e,eventDetails:{blog_name:s,post_id:n}})})),o()(this,"toggleGlass",(()=>{this.setState((e=>({openGlass:!e.openGlass})))})),o()(this,"onClickDismissGlass",(()=>{this.toggleGlass(),this.setState({hasError:!1,needsAppealComment:!1,appealComment:""}),this.logEvent(f.J.AdultContentAppealCancel)})),o()(this,"onClickSubmitAppeal",(()=>{this.submitAppeal("request_review")})),o()(this,"onClickDismissBanner",(()=>{this.setState({bannerDismissed:!0})})),o()(this,"onChangeAppealComment",(e=>{this.setState({appealComment:e.target.value})})),o()(this,"onClickOpenAppealModal",(()=>{this.toggleGlass()})),o()(this,"submitAppeal",(async e=>{const{blogName:t,postId:s,appContext:{features:{adultContentAppealTextbox:n},apiFetch:o}}=this.props,{appealComment:i}=this.state;try{await o(`/v2/blog/${t}/posts/${s}/community-label/appeal`,{method:"POST",body:{community_label_appeal_action:e,...n&&"request_review"===e&&{community_label_appeal_comment:i}}}),"request_review"===e&&this.setState({appealState:"in_review",openGlass:!1})}catch(e){this.setState({hasError:!0})}}))}render(){const{openGlass:e,appealState:t,appealComment:s}=this.state,{_t:n}=this.props.appContext,o=(0,T.jsx)(Ze.Z,{title:n("Request community label review"),onClose:this.onClickDismissGlass,theme:Ze.L.Rounded,children:(0,T.jsxs)("div",{className:un.communityLabelModalContent,children:[(0,T.jsx)("p",{children:(0,T.jsx)(ue.ZP,{components:{link:(0,T.jsx)("a",{href:"/policy/en/community",title:n("Community Guidelines"),target:"_blank",rel:"noopener noreferrer"})},children:"We have determined that your post contains content that would be better suited with a Community Label. While it does not violate our [link]Community Guidelines[/link], a Community Label has been added to your post so that it is only presented to those who wish to view that material. \n\nIf you think this was done in error, you can Request Review to let us know. Please include a short explanation with your request:"})}),(0,T.jsx)("textarea",{className:un.appealComment,value:s,onChange:this.onChangeAppealComment,placeholder:n("Add a comment...")}),(0,T.jsxs)("div",{className:un.communityLabelModalActions,children:[(0,T.jsx)("div",{className:un.communityLabelModalLink,children:(0,T.jsx)("a",{href:"https://help.tumblr.com/hc/articles/5436241401239",title:"Learn more",target:"_blank",rel:"noopener noreferrer",children:n("Learn More")})}),(0,T.jsxs)("div",{className:un.appealButtons,children:[(0,T.jsx)(O.Z,{"aria-label":n("Dismiss the post review request form"),onClick:this.onClickDismissGlass,children:(0,T.jsx)(pn.Z,{className:a()(un.pill,un.outline,un.large),children:n("Dismiss")})}),(0,T.jsx)(O.Z,{"aria-label":n("Submit a post review request"),onClick:this.onClickSubmitAppeal,disabled:""===this.state.appealComment,children:(0,T.jsx)(pn.Z,{className:a()(un.pill,un.primary,un.large),children:n("Request Review")})})]})]})]})}),i=(0,T.jsx)("a",{href:"https://help.tumblr.com/hc/articles/5436241401239",title:"Learn more",target:"_blank",rel:"noopener noreferrer",children:(0,T.jsx)(cn.Z,{colors:{primary:S().paletteWhite},size:{width:22,height:22}})}),l=(0,T.jsx)(O.Z,{"aria-label":n("Dismiss appeal banner"),onClick:this.onClickDismissBanner,children:(0,T.jsx)(dn.Z,{className:un.dismiss})});return this.state.bannerDismissed?null:this.state.hasError?(0,T.jsxs)("div",{className:a()(un.flagged,un.communityLabelFlag,un.hasError),children:[(0,T.jsx)("span",{className:un.bannerText,children:n("There was an error submitting your request.")}),(0,T.jsx)("span",{className:un.bannerActions,children:l})]}):"in_review"===t?(0,T.jsxs)("div",{className:a()(un.flagged,un.communityLabelFlag,un.inReview),children:[(0,T.jsx)("span",{className:un.bannerText,children:n("Your post is in Community Label review.")}),(0,T.jsx)("span",{className:un.bannerActions,children:i})]}):"available"===t?(0,T.jsxs)("div",{className:a()(un.flagged,un.communityLabelFlag),children:[(0,T.jsx)("span",{className:un.bannerText,children:n("We reviewed your post and determined it needed a Community Label.")}),(0,T.jsxs)("span",{className:un.bannerActions,children:[(0,T.jsx)(O.Z,{"aria-label":n("Request second review of this post"),onClick:this.onClickOpenAppealModal,children:(0,T.jsx)(pn.Z,{className:un.bannerPillButton,children:n("Request Second Review")})}),l,e&&o]})]}):"label_required"===t?(0,T.jsx)("div",{className:a()(un.flagged,un.communityLabelFlag),children:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("span",{className:un.bannerText,children:n("Based on our Community Guidelines, this post requires a Community Label.")}),(0,T.jsxs)("span",{className:un.bannerActions,children:[(0,T.jsx)(O.Z,{"aria-label":n("Dismiss appeal banner"),onClick:this.onClickDismissBanner,children:(0,T.jsx)(pn.Z,{className:un.bannerPillButton,children:n("Dismiss")})}),i]})]})}):null}}const mn=(0,y.HJ)(hn),gn="gQmlg",vn="wB6qM",bn="_qMFx",xn="SEj9V",fn="D7qy6";class Cn extends r.Component{constructor(){super(...arguments),o()(this,"state",{openGlass:!1,inReview:!1,hasError:!1,needsAppealComment:!1,appealComment:""}),o()(this,"logEvent",(e=>{const{logEvent:t}=this.props.appContext,{blogName:s,postId:n}=this.props;t({eventName:e,eventDetails:{blog_name:s,post_id:n}})})),o()(this,"submitAppeal",(()=>{const{blogName:e,postId:t,appContext:{features:{adultContentAppealTextbox:s},apiFetch:n}}=this.props,{appealComment:o}=this.state;return n(`/v2/blog/${e}/posts/${t}/appeal`,{method:"POST",body:{owner_appeal_nsfw:"request_review",...s&&{appeal_comment:o}}}).then((()=>{this.setState({inReview:!0,openGlass:!1})})).catch((()=>{this.setState({hasError:!0})}))})),o()(this,"toggleGlass",(()=>{this.setState((e=>({openGlass:!e.openGlass})))})),o()(this,"onClickNext",(()=>{this.setState({needsAppealComment:!0}),this.logEvent(f.J.AdultContentAppealNext)})),o()(this,"onClickSubmit",(()=>{switch(this.submitAppeal(),this.props.classification){case Je.CN.Explicit:this.logEvent(f.J.AdultContentAppealSubmitExplicit);break;case Je.CN.Sensitive:this.logEvent(f.J.AdultContentAppealSubmitSensitive)}})),o()(this,"onClickDismiss",(()=>{this.toggleGlass(),this.setState({hasError:!1,needsAppealComment:!1,appealComment:""}),this.logEvent(f.J.AdultContentAppealCancel)})),o()(this,"onClickAppealPost",(()=>{switch(this.toggleGlass(),this.props.classification){case Je.CN.Explicit:this.logEvent(f.J.AdultContentAppealOpenExplicit);break;case Je.CN.Sensitive:this.logEvent(f.J.AdultContentAppealOpenSensitive)}})),o()(this,"onChangeAppealComment",(e=>{this.setState({appealComment:e.target.value})}))}render(){const{flaggedType:e,isReblog:t,isNsfw:s,showApprovedAppeals:n,appContext:{features:{adultContentAppealTextbox:o}}}=this.props,{openGlass:i,inReview:l,hasError:r,needsAppealComment:d,appealComment:c}=this.state,{_t:p,wwwBaseUrl:u}=this.props.appContext;if("none"===e)return null;if(!s&&n&&"complete"===e)return(0,T.jsx)("div",{className:a()(gn,bn),children:p("Your appeal was accepted! This post is no longer hidden.")});if(!s)return null;const h={onGlassClick:this.toggleGlass,glassIsClickable:!1},m={text:p(o?"Next":"Appeal"),onClick:o?this.onClickNext:this.onClickSubmit,buttonStyle:o?Ae.X.Confirm:Ae.X.Neutral},g={text:p("Submit Appeal"),onClick:this.onClickSubmit,buttonStyle:Ae.X.Confirm},v={text:p("Dismiss"),onClick:this.onClickDismiss,buttonStyle:Ae.X.Confirm},b={...v,buttonStyle:Ae.X.Neutral},x={text:p("Learn More"),link:`${u}/docs/adultcontentfaq`,buttonStyle:Ae.X.Neutral},f={text:p("Learn More"),link:`${u}/docs/contentappeals`,buttonStyle:Ae.X.Neutral},C=(0,T.jsx)($.Z,{...h,children:(0,T.jsx)(Ae.Z,{body:p("This post was flagged because somewhere in your reblog there might be adult content which is a violation of our Community Guidelines."),buttons:[x,v]})}),y=(0,T.jsx)($.Z,{...h,children:(0,T.jsx)(Ae.Z,{body:p("Your post is in content appeal. Once a decision has been made, we'll send you an email."),buttons:[f,v]})}),w=(0,T.jsx)($.Z,{...h,children:(0,T.jsx)(Ae.Z,{body:p("Unable to appeal the post. Please contact support for further help."),buttons:[x,v]})}),j=(0,T.jsx)($.Z,{...h,children:(0,T.jsx)(Ae.Z,{body:p("This post was flagged because we think it contains adult content which violates our Community Guidelines. It has been hidden from others, but not deleted. If you think this was done in error, tap Appeal and a real, live human will review it."),buttons:[m,x,b]})}),k=(0,T.jsx)($.Z,{...h,children:(0,T.jsx)(Ae.Z,{title:p("Want to tell us more?"),body:p('Use the space below to give us more context regarding your appeal and why you think the post was misclassified.<br/><br/>Adult content is imagery that depicts realistic human genitals or sex acts. For more information and related exceptions, read our <a target="_blank" rel="noopener" href="//tumblr.zendesk.com/hc/en-us/articles/231885248-Adult-Content">Adult Content Policy</a>.'),isBodyHtml:!0,buttons:[g,b],children:(0,T.jsx)("textarea",{className:fn,value:c,onChange:this.onChangeAppealComment,placeholder:p('Write your appeal here. For example you can write:\n\n"This post shows my top surgery recovery\n"This post shows other, non-sexual LGBTQ+ content" (please specify)\n"This is a non-sexual nude drawing I created"\n"My post is about breastfeeding"\n"This post doesn\'t contain any nudity"')})})}),I=(0,T.jsx)($.Z,{...h,children:(0,T.jsx)(Ae.Z,{body:p("This post was flagged because it contains adult content which violates our Community Guidelines. It has not been deleted but is now only viewable to you. This decision cannot be appealed."),buttons:[x,v]})}),N=(0,T.jsx)(O.Z,{label:p("What does this mean?"),onClick:this.toggleGlass,children:(0,T.jsx)(cn.Z,{colors:{primary:S().paletteWhite},size:{width:22,height:22}})});return"in_review"===e||l?(0,T.jsxs)("div",{className:a()(gn,vn),children:[p(t?"This reblog is in content appeal":"Your post is in content appeal"),N,i&&y]}):t?(0,T.jsxs)("div",{className:gn,children:[p("This post was flagged because somewhere in your reblog there might be adult content."),N,i&&C]}):"unavailable"===e?(0,T.jsxs)("div",{className:gn,children:[p("It looks like your post might be in violation of our Community Guidelines and is now hidden."),N,i&&I]}):"complete"===e?(0,T.jsxs)("div",{className:gn,children:[p("Based on our Community Guidelines this post contains adult content and is now only viewable to you."),N,i&&I]}):(0,T.jsxs)("div",{className:gn,children:[p("It looks like your post might be in violation of our Community Guidelines and is now hidden."),(0,T.jsx)("button",{className:xn,"aria-label":p("Appeal this post"),onClick:this.onClickAppealPost,children:p("Appeal")}),i&&(0,T.jsx)(T.Fragment,{children:r?w:d&&o?k:j})]})}}const yn=(0,y.HJ)(Cn);var wn=s(90351),jn=s(34320),kn=s(46819),Sn=s(52153),In=s(72146),Nn=s(73125),Pn=s(12885),Tn=s(19370);const Zn=e=>{var t;const{layout:s,content:n}=e,o=null==s?void 0:s.find((e=>{let{type:t}=e;return t===Je.ms.Ask}));return(null==o||null===(t=o.blocks)||void 0===t?void 0:t.length)<(null==n?void 0:n.length)};var An=s(22527),En=s(91949),Mn=s(97561),Ln=s(58847),On=s(753),Rn=s(45820),Dn=s(161),Fn=s(40657),Bn=s(1181);function _n(e){let{general:t,toggleCallback:s,state:n,permalink:o,date:i,presentation:l}=e;const{_c:r}=(0,y.bp)();if(!n||!t)return null;const d=n===kn.Gl?r("Button to cover post with a community label","Hide post"):r("Button to show post with a community label","Show post");return(0,T.jsxs)("div",{className:a()(Bn.Z.header,Fn.Z.dogEarWrapper),children:[(0,T.jsx)("span",{className:Bn.Z.headerText,children:(0,T.jsx)(ue.ZP,{comment:"Community Label in post header",children:"Community Label: Mature"})}),(0,T.jsx)(O.Z,{className:Bn.Z.headerLink,onClick:()=>{const e=n===kn.Gl?kn.aY:kn.Gl;s(!0,e)},label:d,children:d}),(0,T.jsx)(Dn.Z,{url:o,date:i,presentation:l})]})}var Un=s(58849),Vn=s(56887);function zn(e){var t,s,n,o,i,l;let{general:d=!1,categories:c,state:p,toggleCallback:u,children:h}=e;const{isLoggedIn:m}=(0,y.bp)(),{openLoginWall:g}=(0,Un.h)(),{data:v}=(0,Vn.P)(),b=null!=v&&v.isLoggedIn?v.user:void 0,x=(null==b||null===(t=b.communityLabelCategories)||void 0===t?void 0:t.drugUse)===kn.aY||(null==b||null===(s=b.communityLabelCategories)||void 0===s?void 0:s.drugUse)===kn.fj,f=(null==b||null===(n=b.communityLabelCategories)||void 0===n?void 0:n.sexualThemes)===kn.aY||(null==b||null===(o=b.communityLabelCategories)||void 0===o?void 0:o.sexualThemes)===kn.fj,C=(null==b||null===(i=b.communityLabelCategories)||void 0===i?void 0:i.violence)===kn.aY||(null==b||null===(l=b.communityLabelCategories)||void 0===l?void 0:l.violence)===kn.fj;(0,r.useEffect)((()=>{c.drugUse!==x&&c.sexualThemes!==f&&c.violence!==C||u(!0,kn.aY)}),[]);const w=(0,T.jsxs)("div",{className:Bn.Z.cover,"data-testid":"content-warning-cover",children:[(0,T.jsx)("div",{className:Bn.Z.coverHeader,children:(0,T.jsx)(ue.ZP,{comment:"Community Label in post body",children:"Community Label: Mature"})}),(0,T.jsx)("p",{className:Bn.Z.coverAuthorNotice,children:(0,T.jsx)(Hn,{categories:c})}),(0,T.jsx)(O.Z,{onClick:()=>{m?u(!0,kn.Gl):g()},children:(0,T.jsx)(pn.Z,{className:Bn.Z.coverButton,children:(0,T.jsx)(ue.ZP,{comment:"Button text on community label in post body",children:"Show post"})})})]}),j=d&&(p===kn.aY||p===kn.fj);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:a()(Bn.Z.content,{[Bn.Z.isShowingCover]:j}),children:(0,T.jsx)("span",{children:h})}),j&&w]})}function Hn(e){let{categories:t}=e;const{_c:s}=(0,y.bp)(),n=(0,r.useMemo)((()=>Object.entries(t).filter((e=>{let[,t]=e;return(0,En.CS)(t)})).map((e=>{let[t]=e;return(0,En.id)(t,s).label}))),[t,s]);if(0===n.length)return(0,T.jsx)(T.Fragment,{children:(0,En.id)("general",s).info});if(1===n.length)return(0,T.jsx)(ue.ZP,{params:{label:n[0]},children:"[label]"});if(2===n.length)return(0,T.jsx)(ue.ZP,{params:{firstLabel:n[0],secondLabel:n[1]},children:"[firstLabel], [secondLabel]"});const o=s("Separator of list of community labels",", "),i=n.slice(0,-1).join(o);return(0,T.jsx)(ue.ZP,{params:{initialLabels:i,finalLabel:n[n.length-1]},children:"[initialLabels], [finalLabel]."})}s(25694);const Wn="W0ros",qn="uamX1",$n="q05ND",Gn="NQQC8",Xn=(0,y.HJ)((e=>{let{expand:t,filteredTags:s,filteredContent:n,appContext:{_t:o}}=e;const i=`/settings/account${s&&s.length?"#tagfiltering":"#contentfiltering"}`,a=s&&s.length?s.map((e=>`#${e}`)).join(", "):n.join(", "),l=(0,T.jsx)("a",{className:$n,target:"_blank",href:i,children:a}),r=s&&s.length?o("This post contains filtered tags."):o("This post contains filtered content."),d=o("View post");return(0,T.jsxs)("div",{className:Wn,children:[(0,T.jsx)("p",{className:qn,children:r}),l,(0,T.jsx)(O.Z,{onClick:t,className:Gn,label:d,children:d})]})}));var Qn=s(62129);const Jn={scheduledQueueDate:"SirwX",scheduledQueueDay:"jn3oa",scheduledQueueTime:"E2wfC",scheduledIndicator:"b1E_e",post:"FtjPK",withOutline:"r0etU",stickyContainer:"AD_w7",avatar:"JZ10N",contentWrapper:"VDRZ4",submission:"hYZb4",contentSource:"d_FyU",isPaywallShown:"fX9yp",footerWrapper:"qYXF9",isRenderedInPeepr:"EBcaC",submissionWrapper:"nPaE8",submitter:"IyHrQ",recommendationReasonTopTeaserWrapper:"n_1Sv",recommendationReasonTopTeaserInner:"tI3Pw",recommendationReasonTag:"Lufh9",hiddenNotice:"NwkDL",queueOrderControls:"jhYtw",queueControls:"BfCKm"};class Yn extends r.Component{constructor(){var e;super(...arguments),o()(this,"state",{hasExpandedFromFiltered:!1,showPost:!0,hasCommunityLabel:null===(e=this.props.timelineObject.communityLabels)||void 0===e?void 0:e.hasCommunityLabel}),o()(this,"isLongPost",void 0),o()(this,"setIsLongPost",(e=>{this.isLongPost=e})),o()(this,"getPostContextValue",(0,l.Z)(((e,t)=>({presentationStyle:t,post:{...e,canReply:e.canReply&&t.showsReplyButton,canSendInMessage:e.canSendInMessage&&t.showsShareButton},isNarrow:!!this.props.isNarrow,getIsLongPost:()=>this.isLongPost,setCommunityLabel:e=>this.updateCommunityLabel(e)})))),o()(this,"getSubmissionAttribution",(()=>{const{timelineObject:{postAuthor:e,state:t,anonymousEmail:s,anonymousName:n}}=this.props;return e?(0,T.jsx)("div",{className:Jn.submissionWrapper,children:(0,T.jsx)(c.Z,{className:Jn.submission,blogName:e,href:(0,qe.Z)(e),children:(0,T.jsx)(ue.ZP,{comment:"This text denotes that a post on some blog was submitted to it by some other user",params:{postAuthor:e},components:{span:(0,T.jsx)("span",{className:Jn.submitter})},children:"Submitted by [span][postAuthor][/span]"})})}):t===Je.hA.Submission&&s&&n?(0,T.jsx)("div",{className:Jn.submission,children:(0,T.jsx)(ue.ZP,{params:{anonymousEmail:s,anonymousName:n},components:{span:(0,T.jsx)("span",{className:Jn.submitter})},children:"Submitted by [span][anonymousName] ([anonymousEmail])[/span]"})}):(0,T.jsx)("div",{className:Jn.submission,children:(0,T.jsx)(ue.ZP,{comment:"This text denotes that a post on some blog was submitted to it by some anonymous user",components:{span:(0,T.jsx)("span",{className:Jn.submitter})},children:"Submitted by [span]anonymous[/span]"})})})),o()(this,"renderTags",((e,t,s)=>{const{timelineObject:{recommendationReason:n,tags:o,isPinned:i,paywallAccess:a,isPaywalled:l},appContext:{_t:r}}=this.props,d=i&&{text:r("Pinned Post"),icon:In.c.Pin,color:k.paletteAccent,loggingReason:"",links:{}}||((null==n?void 0:n.icon)!==In.c.Pin?n:void 0);return(0,T.jsx)(Qn.C,{tags:o,isPaywallShown:t,isSupporting:a===Sn.bv.Member&&l,postChromeStyles:s,recommendationReason:d,collapsedHeight:e?Bs.wrappedTagsMobileHeight:Bs.wrappedTagsDesktopHeight})})),o()(this,"appendIsBlurredImages",((e,t)=>e.map((e=>e.type===Je.kH.Image&&t?{...e,isBlurredImages:this.props.timelineObject.isBlurredImages}:e)))),o()(this,"getInboxAttribution",(e=>{const{timelineObject:t}=this.props,{postUrl:s,askingName:n="",askingUrl:o="",askingAvatar:i,postAuthor:a="",postAuthorAvatar:l,blog:r}=t;let d=n,c=o,p=i;const u=(0,Je.lG)(t);u&&(d=a,p=l,c=(0,Nn.Z)(t.postAuthor));return{recipientName:e&&!r.primary?r.name:void 0,isSubmission:u,permalinkUrl:s,blog:{name:d,url:c,avatar:p,uuid:""}}})),o()(this,"getAttribution",((e,t)=>e?this.getInboxAttribution(t):(0,Mn.Z)(this.props.timelineObject))),o()(this,"expandFromFiltered",(()=>this.setState({hasExpandedFromFiltered:!0}))),o()(this,"hidePost",(()=>this.setState({showPost:!1}))),o()(this,"updateCommunityLabel",((e,t)=>this.setState({overrideCW:t,hasCommunityLabel:e})))}render(){const{timelineObject:e,appContext:{autoTruncatingPosts:t,isLoggedIn:s,isPeeprShowing:n,logEvent:o,communityLabelVisibilitySetting:i,features:{paywallConsumption:l,tspUiUpdate:r,recommendationReasonTopTeaser:c,communityLabels:u},_t:h},adContext:{adPlacementConfiguration:m,hydraConfigInstanceId:g},dashboardContext:{tabId:v,tabsHeaderDisplayedHeight:b},isInInboxTimeline:x,isNarrow:C,postIndex:y}=this.props,{actions:k,blog:S,blogName:I,id:N,content:P,layout:A,canReblog:M,date:L,filtered:O,isNsfw:R,ownerAppealNsfw:D,rebloggedFromAdvertiserName:F,rebloggedFromCanBeFollowed:B,rebloggedFromFollowing:_,rebloggedFromId:U,rebloggedFromName:V,rebloggedFromUrl:z,reblogKey:H,trail:W,type:q,canEdit:$,postAuthor:G,postAuthorAvatar:X,isSubmission:Q,askingName:J,sponsoredBadgeUrl:Y,sourceUrl:K,sourceTitle:ee,sourceUrlRaw:te,dismissal:se,state:ne,placementId:oe,adm:ie,isPaywalled:ae,paywallAccess:le,earnedId:re,communityLabels:de,communityLabelAppealState:ce}=e,{hasExpandedFromFiltered:pe,showPost:he,overrideCW:me,hasCommunityLabel:ge}=this.state,ve=(0,En.nT)(de),be=l&&ae&&(le===Sn.bv.NonMember||le===Sn.bv.Disabled);if(q!==Je.SB)return"production"===Ls.Z.Development&&console.warn(`Post with id "${N}" is not blocks type and cannot be rendered`),null;let xe=this.props.presentationStyle;const fe=this.getAttribution(xe.usesInboxAttribution,xe.showsRecipientForInboxAttribution);null!=fe&&fe.blog.advertiserName&&(xe={...xe,showsPosterAvatar:!1});const Ce=V&&z?{blogName:F||V,permalinkUrl:z,postId:U}:void 0,ye=!(void 0!==B)&&S.canBeFollowed,we=(0,An.d)(k),je=!!J,ke=je&&ne===Je.hA.Submission,Se=this.props.timelineObject.isAnonymous&&Q&&x||this.props.timelineObject.isAnonymous&&ke,Ie=$?{...e,sourceUrl:te}:void 0;let Ne;u&&ge&&(Ne=me||(s?i:"warn"));const Pe=null==ve?void 0:ve.categories,Te=(0,T.jsx)(_n,{state:Ne,toggleCallback:this.updateCommunityLabel,categories:Pe,general:ve.active,permalink:null==fe?void 0:fe.permalinkUrl,date:L,presentation:xe}),Ze=(0,T.jsx)(jn.Z,{postState:ne,postAttribution:fe,reblogAttribution:Ce,presentationStyle:xe,showsFollowButton:!xe.usesInboxAttribution&&(B||ye),showsSponsored:!!Y,isFollowingReblogger:_,dismissal:se,date:L,placementId:oe,earnedId:re,isPaywalled:ae,showAsAnonymous:Se,isInboxAsk:ke,editablePost:Ie,...!r&&{ctaButtonOptions:we},afterHideAd:this.hidePost,isBlazeCampaign:this.props.timelineObject.isBlazed??!1,hideDogEar:!!Ne}),Ae=(0,T.jsx)(yn,{flaggedType:D,postId:N,blogName:I,isReblog:void 0!==U,isNsfw:R,showApprovedAppeals:xe.showsApprovedAppealBanner,classification:e.classification}),Ee=Se||!fe.blog.url,Me=xe.showsPosterAvatar&&!xe.showsAvatarInline?(0,T.jsx)("div",{className:Jn.stickyContainer,"data-testid":"sticky-avatar-container",children:(0,T.jsx)("div",{className:Jn.avatar,style:{top:`${Bs.dashboardStickyPosition+(b||0)}px`},children:(0,T.jsx)(d.Z,{isAnonymous:Ee,imageResponse:fe.blog.avatar,dimension:xe.avatarDimension,name:fe.blog.name,url:fe.blog.url,isAdult:fe.blog.isAdult,blog:fe.blog,authorImageResponse:xe.showsAuthorImage?X:void 0,authorName:G,placementId:oe,eventName:f.J.Avatar,eventDetails:(0,j.U)({timelineObject:e,adPlacementConfiguration:m,hydraConfigInstanceId:g})})})}):null;if(O&&!pe)return(0,T.jsx)(w.Mj.Provider,{value:this.getPostContextValue(e,xe),children:(0,T.jsxs)("article",{className:Jn.post,children:[Me,Ze,(0,T.jsx)(Xn,{expand:this.expandFromFiltered,filteredTags:O.tags,filteredContent:O.content})]})});const Le=!!W.length&&!!P.length,Oe={content:P,layout:A,blog:S,post:{id:N,timestamp:null==e?void 0:e.timestamp},isContributedContent:!0},Re=Le?[...W,Oe]:W,De=!(null==we||!we.text||null==we||!we.urls.web),Fe=De&&(0,T.jsx)(Z,{ctaText:null==we?void 0:we.text,clickUrl:null==we?void 0:we.urls.web,color:null==we?void 0:we.textColor,backgroundColor:null==we?void 0:we.backgroundColor,placementId:oe}),Be=(0,T.jsx)(Rn.Z,{trail:Re,parentPlacementId:oe,parentEarnedId:re,contentFooter:Re.length&&Fe}),_e=this.appendIsBlurredImages(P,xe.blursImagesFromUnfollowedBlogs),Ue=!!P.length&&!W.length,Ve=Ue&&xe.showsOnlyFirstMediaBlock&&(0,Tn.x)(_e),ze=Ue&&(0,T.jsx)(On.ZP,{isOriginalPost:!0,postingBlog:S,adm:ie,placementId:oe,blocks:Ve?[Ve]:_e,layouts:Ve?void 0:A}),He=!!Q&&xe.showsSubmissionAttribution&&this.getSubmissionAttribution(),We=!!ee&&!!K&&(0,T.jsx)("div",{className:a()(Jn.contentSource,{[Jn.isPaywallShown]:be}),children:(0,T.jsx)(ue.ZP,{comment:'Content source. The placeholder is a link to the source of the post (like "website.com").',params:{sourceTitle:ee},components:{link:(0,T.jsx)("a",{href:K,target:"_blank",rel:"noopener noreferrer"})},children:"Source: [link][sourceTitle][/link]"})}),qe=M?{content:P,layout:A,blog:S,post:{id:N,reblogKey:H}}:void 0;let $e=(0,T.jsxs)(T.Fragment,{children:[Ae,this.props.children||(0,T.jsxs)(T.Fragment,{children:[Be,ze]})]});if(u&&($e=(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(zn,{state:Ne,toggleCallback:this.updateCommunityLabel,categories:Pe,general:ve.active,children:$e})})),xe.maximumContentHeight){const s=!C&&!t||Ne===kn.aY||Ne===kn.fj;$e=(0,T.jsx)(p.Z,{maxHeight:xe.maximumContentHeight,maxHeightTolerance:xe.maximumContentHeightBufferTolerance,preventTruncation:s,setIsLongPost:C?null:this.setIsLongPost,onCrop:this.props.setIsPostTruncatedForImpressionEvent,onExpand:()=>o({eventName:f.J.ViewPost,eventDetails:{post_id:e.id,tab:v}}),children:$e})}else $e=(0,T.jsx)("div",{className:Jn.contentWrapper,children:$e});const Ge=this.props.paletteContext.name,Xe=be&&S.theme?(0,Pn.ZP)(S):{},Qe=be&&S.theme?(0,Pn.ot)(S,Ge):{},Ye=c&&e.recommendationReason&&e.recommendationReason.icon===In.c.Hashtag?(0,T.jsx)("div",{className:Jn.recommendationReasonTopTeaserWrapper,children:(0,T.jsxs)("div",{className:Jn.recommendationReasonTopTeaserInner,children:[(0,T.jsx)("span",{className:Jn.recommendationReasonPrompt,children:h("Because you follow")}),(0,T.jsx)("span",{className:Jn.recommendationReasonTag,children:(0,T.jsx)(wn.Z,{reason:e.recommendationReason})})]})}):null;return he?(0,T.jsx)(E.ZP,{children:t=>{let{isMobile:s}=t;return(0,T.jsx)(w.Mj.Provider,{value:this.getPostContextValue(e,xe),children:(0,T.jsxs)("article",{className:a()(Jn.post,{[Jn.withOutline]:xe.hasOutline}),children:[ne===Je.hA.Queued?this.renderQueueSchedule(s):Me,Ye,Te,Ze,u&&(0,T.jsx)(mn,{postId:N,blogName:I,initialAppealState:ce}),$e,We,He,!Re.length&&De&&Fe,Ne!==kn.aY&&Ne!==kn.fj&&(0,T.jsxs)("div",{className:a()(Jn.footerWrapper,{[Jn.isPaywallShown]:be,[Jn.isRenderedInPeepr]:n}),style:Xe,children:[!!xe.showsTags&&this.renderTags(s,be,Qe),(0,T.jsx)(rn,{isInInboxTimeline:x,canAnswer:je&&!Zn(e),isInboxAsk:ke,isPaywallShown:be,isSubmissionDraft:Q&&ne===Je.hA.Submission,postChromeStyles:Qe,editablePost:Ie,trailElementForSelf:qe,isNarrow:C,postIndex:y})]})]})})}}):(0,T.jsx)("article",{className:a()({[Jn.withOutline]:xe.hasOutline}),children:(0,T.jsx)("div",{className:Jn.hiddenNotice,children:"Hidden"})})}renderQueueSchedule(e){const{timelineObject:{scheduledPublishTime:t,id:s,blogName:n,queuedState:o,blog:{timezoneOffset:i}}}=this.props,{_getLocaleDateString:a,_t:l}=this.props.appContext;if(!t)return null;const r=new Date;r.setHours(23,59,59,999);const d=r.getTime()+5184e5>1e3*t?he.Cx.WeekdayShort:he.Cx.MonthDayShort;let c,p;if(i){const e=(0,Ln.ZP)(i,t);c=a(e,d),p=a(e,he.Cx.TimeUTC)}else{const e=new Date(1e3*t);c=a(e,d),p=a(e,he.Cx.Time)}const u=o===Je.SH.Scheduled?(0,T.jsx)("span",{className:Jn.scheduledIndicator,title:l("Scheduled Post"),children:(0,T.jsx)(m,{})}):(0,T.jsx)("span",{className:Jn.scheduledIndicator,title:l("Queued Post"),children:(0,T.jsx)(v,{})});return e?(0,T.jsxs)("div",{className:Jn.scheduledQueueDate,children:[(0,T.jsxs)("div",{className:Jn.scheduledQueueDay,children:[u," ",c," ",p]}),o===Je.SH.Queued&&(0,T.jsx)(q,{id:s.toString(),blogName:n})]}):(0,T.jsx)("div",{className:Jn.stickyContainer,children:(0,T.jsxs)("div",{className:Jn.scheduledQueueDate,children:[(0,T.jsx)("div",{className:Jn.scheduledQueueDay,children:c}),(0,T.jsxs)("div",{className:Jn.scheduledQueueTime,children:[p," ",u]})]})})}}const Kn=(0,L.CN)(Yn,{appContext:!0,adContext:!0,paletteContext:!0,dashboardContext:!0}),eo=(0,b.s)(Kn,!1)},49827:(e,t,s)=>{"use strict";s.d(t,{Z:()=>v});var n=s(17709),o=s(56305),i=s(54382),a=s(43166),l=s(65551);const r="XZFs6",d="WIYYp",c="wvu3V",p="pM6pK",u="IxFyd",h="SBa73",m="ZCpAa";var g=s(2629);const v=e=>{let{blog:t,isAsking:s,components:v,post:b}=e;const x=(0,a.I_)(),f=(0,l.m)(),C=b||(null==x?void 0:x.post)||(null==f?void 0:f.editablePost)||null,y=(0,g.jsx)("span",{className:p,children:t?t.name:(0,g.jsx)(i.ZP,{children:"Anonymous"})});let w=s?(0,g.jsx)(i.ZP,{components:{blog:y},children:"[blog/] asked:"}):(0,g.jsx)(i.ZP,{components:{blog:y},children:"[blog/] answered:"});null!=C&&C.isAdFreeGiftAsk&&(w=(0,g.jsx)(i.ZP,{components:{blog:y},children:"[blog/] gifted you Tumblr Ad-Free Browsing!"})),null!=C&&C.isTumblrmartGiftAsk&&(w=(0,g.jsx)(i.ZP,{components:{blog:y},children:"[blog/] gifted you Tumblr Dashboard Crabs!"}));const j=t?(0,g.jsx)(o.Z,{blogName:t.name,href:t.url,blog:t,children:w}):w;return(0,g.jsxs)("div",{className:r,children:[(0,g.jsxs)("div",{className:d,children:[(0,g.jsx)("div",{className:c,children:j}),(0,g.jsx)("div",{className:u,children:v}),(0,g.jsx)("div",{className:h})]}),(0,g.jsx)("div",{className:m,children:(0,g.jsx)(n.Z,{isAnonymous:!t,imageResponse:null==t?void 0:t.avatar,name:null==t?void 0:t.name,url:null==t?void 0:t.url,dimension:40})})]})}},59992:(e,t,s)=>{"use strict";s.d(t,{J0:()=>a,M3:()=>i});var n=s(5700),o=s(68346);function i(e){return function(e){var t;const s=[];return null===(t=e.display)||void 0===t||t.forEach((e=>{e.mode&&e.mode.type!==n.T8.Weighted&&e.mode.type!==n.T8.Carousel?e.blocks.forEach((e=>{s.push({blocks:[e]})})):s.push(e)})),{...e,display:s}}((0,n.Ps)(e)?function(e){const t={...e,display:e.rows.map((e=>({blocks:e})))};return delete t.rows,t}({...e,rows:e.rows}):{...e})}function a(e){const t=new o.Z(e).getLargestImage();return t.height/t.width}},90351:(e,t,s)=>{"use strict";s.d(t,{Z:()=>g});var n=s(5754),o=s.n(n);const i=(0,s(36343).q)("pin");i.defaultProps={size:{width:24,height:24}};const a=i;var l=s(19486),r=s(68280),d=s(72146);const c="VPQeD",p="ESJX7";var u=s(2629);const h={[d.c.Search]:l.Z,[d.c.Pin]:a},m={width:14,height:14},g=e=>{let{reason:t}=e;const{text:s,color:n,links:i,icon:a}=t,l=i.recommendationDestination;if(a===d.c.Hashtag){const e="#"+s;return(0,u.jsx)("a",{href:null==l?void 0:l.href,style:{color:n},className:c,children:e})}const g=a&&h[a];"production"===r.Z.Development&&a&&!g&&console.warn(`No icon found for recommendation reason icon type "${a}"`);const v=g?(0,u.jsx)(g,{size:m,colors:{primary:n}}):null;return(0,u.jsxs)("a",{href:null==l?void 0:l.href,style:{color:n},className:o()(c,{[p]:v}),children:[v,s]})}},62129:(e,t,s)=>{"use strict";s.d(t,{C:()=>A});var n=s(50209),o=s.n(n),i=s(5754),a=s.n(i),l=s(95004),r=s(89006),d=s(90351),c=s(68280),p=s(72146),u=s(59215),h=s(63583),m=s.n(h),g=s(96467),v=s.n(g),b=s(84473);const x="hAFp3",f="mwjNz",C="KSDLH",y="p4wJy",w="AXXSZ",j="nwVPE",k="hyG7F",S="wERE9",I="uXaAK",N="m6pOC";var P=s(2629);let T;!function(e){e[e.Unknown=0]="Unknown",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"}(T||(T={}));class Z extends l.Component{constructor(){super(...arguments),o()(this,"state",{collapsedState:T.Unknown}),o()(this,"wrapper",null),o()(this,"showCollapsedUIIfNeeded",(()=>{const e=this.wrapper&&this.wrapper.clientHeight>this.props.collapsedHeight;this.setState((()=>({collapsedState:e?T.Collapsed:T.Expanded})))})),o()(this,"getTagElements",(()=>{const{tags:e,dashboardContext:{highlightedTags:t}}=this.props,s=[],n=[];return e&&e.forEach((e=>{e.startsWith("_")||(null!=t&&t.includes(e)?n.push((0,P.jsx)(b.Z,{className:a()(C,y),tagName:e},e)):s.push((0,P.jsx)(b.Z,{className:C,tagName:e},e)))})),[...n,...s]})),o()(this,"expandTags",(e=>{e.stopPropagation(),this.setState((()=>({collapsedState:T.Expanded})))}))}componentDidMount(){this.showCollapsedUIIfNeeded()}render(){const{tags:e,collapsedHeight:t,recommendationReason:s,isPaywallShown:n,postChromeStyles:o,isSupporting:i}=this.props,{collapsedState:l}=this.state,{_t:u,features:h}=this.props.appContext;let g,b;switch(l){case T.Unknown:g=!0,b=!1;break;case T.Expanded:g=!1,b=!1;break;case T.Collapsed:g=!0,b=!0}if("production"===c.Z.Development&&t!==v().wrappedTagsDesktopHeight&&t!==v().wrappedTagsMobileHeight&&console.warn("Please use dimensions.wrappedTagsDesktopHeight or dimensions.wrappedTagsMobileHeight as the values for collapsedHeight in this component."),!(e&&e.length||s))return null;const C=h.recommendationReasonTopTeaser&&(null==s?void 0:s.icon)===p.c.Hashtag;let y=null;return s&&!C?y=(0,P.jsx)("span",{className:w,children:(0,P.jsx)(d.Z,{reason:s})}):i&&(y=(0,P.jsx)("span",{className:a()(w,k),children:(0,P.jsx)(r.Z,{color:m().paletteGreen,size:12})})),(0,P.jsx)("div",{className:a()(x,{[I]:g,[S]:n}),style:o,children:(0,P.jsxs)("div",{ref:e=>this.wrapper=e,className:f,children:[y,this.getTagElements(),b&&(0,P.jsxs)("a",{className:j,onClick:this.expandTags,role:"button",children:["… ",(0,P.jsx)("span",{className:N,children:u("See all")})]})]})})}}const A=(0,u.X9)(Z,{appContext:!0,adContext:!0,dashboardContext:!0})},161:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s(95004),o=s(3732),i=s(67023),a=s(78667),l=s(2629);const r=e=>{let{children:t}=e;const[s,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{o(!0)}),[]),(0,l.jsx)(l.Fragment,{children:s?t:null})};var d=s(40657);function c(e){let{url:t,date:s,presentation:c={}}=e;const{_t:p,_c:u,_getRelativeDateString:h}=(0,a.bp)(),m=(0,n.useContext)(o.mk),{hasOutline:g=!1,showsDogEar:v=!0}=c;if(!t||!v)return null;const b={className:d.Z.dogEar,tabIndex:-1};if(m){const e=m.backgroundColor;b.style={borderTopColor:e,borderRightColor:e,...g&&{boxShadow:`2px 0px 0px ${e}, 0px -2px 0px ${e}`}}}return(0,l.jsx)(r,{children:(0,l.jsx)("a",{href:t,role:"button",target:"_blank",className:d.Z.dogEarLink,"aria-label":p("Permalink"),title:s&&u("Hover text showing a timestamp. %1$s is a simplified timestamp","View post - %1$s",[h(s,i.qC.Simple)]),children:(0,l.jsx)("div",{...b})})})}},34320:(e,t,s)=>{"use strict";s.d(t,{Z:()=>B});var n=s(5754),o=s.n(n),i=s(17709),a=s(56305),l=s(57475),r=s(19299),d=s(27252),c=s(82145),p=s(95004),u=s(5136),h=s(43523),m=s(43684),g=s(22979),v=s(78667),b=s(43166),x=s(20775),f=s(21912),C=s(2629);let y;!function(e){e[e.NotInterested=1]="NotInterested",e[e.Offensive=2]="Offensive",e[e.TooOften=3]="TooOften",e[e.AlreadyPurchased=4]="AlreadyPurchased"}(y||(y={}));const w=function(e){const{_t:t,logEvent:s,features:n}=(0,v.bp)(),{showAdFree:o,showHideAd:i,afterHideAd:a}=e,[l,r]=(0,p.useState)(!1),d=(0,b.uu)(),c=null==d?void 0:d.post,w=[],j={[y.NotInterested]:t("I'm not interested in this."),[y.Offensive]:t("It's offensive or inappropriate."),[y.TooOften]:t("I see it too often."),[y.AlreadyPurchased]:t("I already purchased something from this ad.")},k=e=>{const t={eventName:h.J.HideAd,eventDetails:{complaint_reason:e,is_ad:1,creative_id:null==c?void 0:c.creativeId,blog_name:null==c?void 0:c.blogName,campaign_id:null==c?void 0:c.campaignId,serve_id:null==c?void 0:c.serveId,post_id:null==c?void 0:c.id,placement_id:null==c?void 0:c.placementId}};s(t,{sendPayloadImmediately:!0}),null==a||a()};if(l){w.push((0,C.jsx)(u.Z,{isDisabled:!0,children:t("Why are you hiding this ad?")},"hide-ad-reason-title"));for(const[e,t]of Object.entries(j))w.push((0,C.jsx)(u.Z,{onClick:()=>k(parseInt(e,10)),children:t},`hide-ad-reason-${e}`));return(0,C.jsx)(x.ZP,{isOpen:l,blogName:"",width:400,renderItems:()=>w,popoverBoundary:m.gc.ScrollParent,showOverflowY:!0,onPopoverClose:()=>r(!1)},"hide-ad-reason-meatballs-menu")}if(o){const e=(0,g.uz)(c)?"tsp":"stream";w.push((0,C.jsx)(u.Z,{krakenEventName:h.J.AdFreeLinkClick,linkTo:`/settings/ad-free-browsing?source=${e}`,alwaysExternalLink:!0,className:f.Z.meatballItem,children:t("Go Ad-Free")},"ad-free"))}return(()=>{if(n.hidingAds&&i&&(0,g.uz)(c)){const e=null==c?void 0:c.adProviderId;if(e===g.Rd.Smart||e===g.db.IponWeb)return!0}return!1})()&&w.push((0,C.jsx)(u.Z,{onClick:()=>r(!0),className:f.Z.meatballItem,children:t("Hide Ad")},"hide-ad")),(0,C.jsx)(x.ZP,{blogName:"",width:200,renderItems:()=>w,popoverBoundary:m.gc.ScrollParent,showOverflowY:!0},"ad-meatballs-menu")};w.defaultProps={showAdFree:!0,showHideAd:!0};const j=w;var k=s(15321),S=s(26372),I=s(89006),N=s(94631),P=s(54382),T=s(52153),Z=s(5700),A=s(31679),E=s(74446),M=s(55855),L=s(55015),O=s(63583),R=s.n(O),D=s(161),F=s(40657);const B=function(e){var t,s,n,p,u,m,x,f,y,w,O,B;let{postAttribution:_,reblogAttribution:U,showsFollowButton:V,showsSponsored:z,presentationStyle:H={},isAd:W,isInboxAsk:q=!1,showAsAnonymous:$=!1,isFollowingReblogger:G,dismissal:X,date:Q,postState:J,isNonInteractive:Y,placementId:K,earnedId:ee,isPaywalled:te,editablePost:se,afterHideAd:ne,isBlazeCampaign:oe,hideDogEar:ie}=e;const{_t:ae,_c:le,features:{paywallConsumption:re,timestampsEverywhere:de,tspUiUpdate:ce},timestamps:pe}=(0,v.bp)(),ue=(0,b.uu)(),{isNarrow:he=!1}=ue,{hydraConfigInstanceId:me,adPlacementConfiguration:ge}=(0,A.b)(),{displayMode:ve=g.mt.List}=(0,E.i)(),{avatarDimension:be,reblogIconSize:xe,showsAvatarInline:fe,showsEditButton:Ce,showsDeleteButton:ye,showsPosterAvatar:we,showsPostingBlogName:je,stacksReblogAttribution:ke,usesInboxAttribution:Se}=H,Ie=je||z,Ne=we||z,Pe=ue!==b.Nw,Te=Pe&&(null==ue||null===(t=ue.post)||void 0===t?void 0:t.canEdit)&&Ce,Ze=Pe&&(null==ue||null===(s=ue.post)||void 0===s?void 0:s.canDelete)&&ye,Ae=Pe?null==ue||null===(n=ue.post)||void 0===n?void 0:n.trail:void 0,Ee=Pe?(0,M.U)({hydraConfigInstanceId:me,adPlacementConfiguration:ge,timelineObject:null==ue?void 0:ue.post}):{},Me=U&&V&&(0,C.jsx)("div",{className:F.Z.followButton,children:(0,C.jsx)(l.Z,{blogName:U.blogName,blogUrl:U.blogName,following:!!G,isPostHeader:!0,placementId:K,earnedId:ee})}),Le=o()(F.Z.headerContent,{[F.Z.hidesPosterBlogname]:!Ie}),Oe=$?null!=se&&se.anonymousName&&null!=se&&se.anonymousEmail?`${se.anonymousName} <${se.anonymousEmail}>`:ae("Anonymous"):(null==_||null===(p=_.blog)||void 0===p?void 0:p.advertiserName)||(null==_||null===(u=_.blog)||void 0===u?void 0:u.name),Re=U&&_?ae("%1$s reblogged a post from %2$s",[_.blog.name,U.blogName]):Oe?ae("Posted by %1$s",[Oe]):void 0,De=z&&(0,C.jsx)(S.Z,{showSpinner:!(ce||ve===g.mt.Masonry),showSponsoredText:!0,showAdFreeLink:!1,hideOnMobile:!1,isBlazeCampaign:oe});if(W)return(0,C.jsx)("header",{role:"banner",className:F.Z.header,"aria-label":Re,children:(0,C.jsx)("div",{className:Le,children:(0,C.jsx)(S.Z,{showSpinner:!ce,showSponsoredText:!0,showAdFreeLink:!0})})});const Fe=U&&(0,C.jsxs)("div",{className:F.Z.reblogAttribution,children:[(0,C.jsx)(c.Z,{size:xe,isCompact:!0}),(0,C.jsx)("div",{className:F.Z.rebloggedFromName,children:(0,C.jsx)(a.Z,{blogName:U.blogName,postId:U.postId,href:U.permalinkUrl,placementId:K,krakenEventName:h.J.Posts,children:U.blogName})}),Me]}),Be=!$&&null!=_&&_.permalinkUrl&&_.blog.url&&!_.blog.advertiserName?(0,C.jsx)(a.Z,{blogName:_.blog.name,href:_.permalinkUrl,blog:_.blog,placementId:K,krakenEventName:h.J.Posts,krakenEventDetails:Ee,children:Oe}):(0,C.jsx)("span",{children:Oe}),_e=(0,C.jsx)("span",{className:F.Z.innerText});let Ue;if(null!=_&&_.recipientName||null==_||!_.isSubmission)if(null!=_&&_.recipientName){const e=(0,C.jsx)(a.Z,{blogName:_.recipientName,placementId:K,krakenEventName:h.J.Posts,children:_.recipientName});Ue=_.isSubmission?(0,C.jsx)(P.ZP,{comment:"Displayed when a blog has submitted a post to a secondary blog",components:{senderBlogLink:Be,innerElement:_e,recipientBlogLink:e},children:"[senderBlogLink/] [innerElement]submitted to[/innerElement] [recipientBlogLink/]:"}):(0,C.jsx)(P.ZP,{comment:"Displayed when a blog has sent a message to a secondary blog",components:{senderBlogLink:Be,innerElement:_e,recipientBlogLink:e},children:"[senderBlogLink/] [innerElement]said to[/innerElement] [recipientBlogLink/]:"})}else Ue=Be;else Ue=(0,C.jsx)(P.ZP,{comment:"Displayed when a blog has submitted a post to a primary blog",components:{senderBlogLink:Be,innerElement:_e},children:"[senderBlogLink/] [innerElement]submitted[/innerElement]:"});const Ve=J===Z.hA.Private&&(0,C.jsxs)("div",{className:F.Z.private,children:[(0,C.jsx)("div",{className:F.Z.lock,children:(0,C.jsx)(r.Z,{size:xe,colors:{primary:R().paletteGray65}})}),ae("Private")]}),ze=J!==Z.hA.Private&&(Ie||Fe)&&(0,C.jsxs)("div",{className:F.Z.attribution,children:[Ie&&(0,C.jsx)("div",{className:o()(F.Z.postAttribution,{[F.Z.inboxAttribution]:Se}),children:Ue}),Fe]}),He=_&&V&&!Me&&Ie&&(0,C.jsx)(l.Z,{blogName:_.blog.name,blogUrl:_.blog.url,following:!!_.blog.followed,className:F.Z.followButton,isPostHeader:!0,placementId:K,earnedId:ee}),We=de&&pe&&Q&&!z,qe=(0,C.jsxs)("div",{className:F.Z.leftContent,children:[Ve||ze||He?(0,C.jsxs)("div",{className:o()(F.Z.leftContentMain,{[F.Z.leftContentMainStacked]:ke&&!!U}),children:[Ve,ze,He]}):null,(0,C.jsxs)("div",{className:F.Z.leftContentSecondary,children:[We&&(0,C.jsx)(N.Z,{className:F.Z.timestamp,date:Q}),ce&&z&&(0,C.jsx)("div",{className:o()({[F.Z.sponsoredSubHeading]:!he,[F.Z.narrowSponsoredSubHeading]:he}),children:ae("Sponsored")}),oe&&(0,C.jsx)("div",{className:o()(F.Z.sponsoredText,{[F.Z.sponsoredSubHeading]:!he,[F.Z.narrowSponsoredSubHeading]:he}),children:le("Label for blaze campaigns, were Blaze is the product name.","Sponsored with Blaze ")})]})]}),$e=re&&(null==_||null===(m=_.blog)||void 0===m?void 0:m.paywallAccess)&&(null==_||null===(x=_.blog)||void 0===x?void 0:x.paywallAccess)===T.bv.Member&&te&&(0,C.jsx)(I.Z,{color:R().paletteWhite,backgroundColor:R().paletteGreen,size:20}),Ge=re&&(null==_||null===(f=_.blog)||void 0===f?void 0:f.paywallAccess)&&(null==_||null===(y=_.blog)||void 0===y?void 0:y.paywallAccess)!==T.bv.Member&&te&&(0,C.jsx)("span",{className:F.Z.lockIcon,"aria-label":le("Indicates that the post has paywalled content that the user doesn't have access to, as they are not a subscriber.","For supporters"),children:(0,C.jsx)(d.Z,{colors:{primary:R().paletteGray65},size:{width:20,height:20}})}),Xe=!Y&&_&&(0,C.jsxs)("div",{className:F.Z.rightContent,children:[De,De&&(0,C.jsx)(j,{afterHideAd:ne}),!De&&(0,C.jsxs)(C.Fragment,{children:[$e,Ge,(0,C.jsx)("span",{className:F.Z.postMeatballsContainer,children:(0,C.jsx)(k.Z,{dismissal:X,postUrl:_.permalinkUrl,isPostPublishedOrPrivate:!!J&&[Z.hA.Published,Z.hA.Private].includes(J),blogName:_.blog.name,blogUrl:_.blog.url,blogUuid:_.blog.uuid,followed:_.blog.followed,date:Q,placementId:K,renderPin:Ce,currentTumblelog:Pe&&q?null==ue||null===(w=ue.post)||void 0===w?void 0:w.blogName:void 0,canDelete:Ze,canEdit:Te,editablePost:se,trail:Ae,shouldOpenInLegacy:Pe&&(null==ue||null===(O=ue.post)||void 0===O?void 0:O.shouldOpenInLegacy)})})]})]}),Qe=_&&!_.blog.isBloglessAdvertiser&&(Ne&&fe||J===Z.hA.Queued)&&(0,C.jsx)("div",{className:F.Z.avatar,children:(0,C.jsx)(i.Z,{isAnonymous:$,imageResponse:_.blog.avatar,dimension:J===Z.hA.Queued?L.Z.mobile.avatarDimension:be,name:_.blog.name,url:_.blog.url,isAdult:_.blog.isAdult,blog:_.blog,isLink:!Y,showBlogCard:!Y,placementId:K,eventName:h.J.Avatar,eventDetails:Ee})});return(0,C.jsxs)("header",{role:"banner",className:o()(F.Z.header,{[F.Z.isReblog]:!(!ke||!U),[F.Z.dogEarWrapper]:!ie,[F.Z.headerBloglessAdvertiser]:null==_||null===(B=_.blog)||void 0===B?void 0:B.isBloglessAdvertiser}),"aria-label":Re,children:[Qe,(0,C.jsxs)("div",{className:o()(Le,{[F.Z.headerSponsored]:!!De,[F.Z.headerHasInlineAvatar]:!!Qe}),children:[qe,Xe]}),!ie&&(0,C.jsx)(D.Z,{url:null==_?void 0:_.permalinkUrl,date:Q,presentation:H})]})}},45820:(e,t,s)=>{"use strict";s.d(t,{Z:()=>T});var n=s(753),o=s(95004),i=s(17709),a=s(49515),l=s(56305),r=s(57475),d=s(27252),c=s(62412),p=s(72835),u=s(94631),h=s(22591),m=s(52153),g=s(43684),v=s(68087),b=s(78667),x=s(43166),f=s(93613),C=s(399),y=s(63583),w=s.n(y),j=s(96467);const k={reblog:"u2tXn",reblogHeader:"fAAi8",label:"zSfnO",leftContent:"QkCNg",username:"lBFTL",userInfo:"GdjMk",followButton:"a6sXh",attribution:"sqHC2"};var S=s(2629);const I=function(e){var t,s,n,y;let{avatarConfiguration:I,labelConfiguration:N,followButtonConfiguration:P,children:T,parentPlacementId:Z,parentEarnedId:A,isContributedContent:E,shouldShowTip:M,isMember:L}=e;const{_c:O,features:{paywallConsumption:R,timestampsEverywhere:D},timestamps:F}=(0,b.bp)(),{toggleToast:B}=(0,f.V)(),_=(0,x.uu)(),[U,V]=(0,o.useState)(!1),z=D&&F&&!!N.postTimestamp&&!A;let H=null;if(I){const{avatarImageResponse:e,clickthrough:t,showsReblogIcon:s,blogIsAdult:n}=I;let o={imageResponse:e,dimension:z?j.reblogAttributionAvatarWithTimestampSize:j.reblogAttributionAvatarSize,isAdult:n};s&&(o={...o,badge:a.Z.reblog()}),t&&(o={...o,name:t.blogName,url:t.href,blog:N.blog}),H=(0,S.jsx)(i.Z,{...o})}let W=(0,S.jsx)("div",{className:k.attribution,children:(null===(t=N.blog)||void 0===t?void 0:t.advertiserName)||N.text});N.clickthrough&&N.blog&&(W=(0,S.jsx)(l.Z,{blogName:N.blog.name,blog:N.blog,postId:N.postId,href:N.clickthrough,title:N.unselectableReason,children:W}));const q=null!=P&&P.canFollowBlog&&N.blog?(0,S.jsx)(r.Z,{blogName:null===(s=N.blog)||void 0===s?void 0:s.name,blogUrl:null===(n=N.blog)||void 0===n?void 0:n.url,following:!!P.isFollowingReblogger,isReblogHeader:!0,className:k.followButton,placementId:Z,earnedId:A}):null,$=R&&(null===(y=N.blog)||void 0===y?void 0:y.isPaywallOn)&&(null==N?void 0:N.paywallAccess)!==m.bv.Member&&(null==N?void 0:N.isPaywalled)&&(0,S.jsx)("span",{className:k.lockIcon,"aria-label":O("Indicates that the post has paywalled content that the user doesn't have access to, as they are not a subscriber.","For supporters"),children:(0,S.jsx)(d.Z,{colors:{primary:w().paletteGray65},size:{width:20,height:20}})}),G=(0,o.useCallback)((()=>{L?B((0,C.iI)(O),"tumblrbot"):V(!U)}),[U,L,B,O]);return(0,S.jsxs)("div",{className:k.reblog,"data-is-contributed-content":E,children:[(0,S.jsxs)("div",{className:k.reblogHeader,children:[(0,S.jsxs)("div",{className:k.leftContent,children:[H,(0,S.jsxs)("div",{className:k.userInfo,children:[(0,S.jsxs)("div",{className:k.username,children:[(0,S.jsx)("div",{className:k.label,children:W}),q]}),z&&N.postTimestamp&&(0,S.jsx)(u.Z,{className:k.timestamp,date:new Date(1e3*N.postTimestamp).toUTCString()})]})]}),(0,S.jsxs)("div",{className:k.rightContent,children:[$,M&&N.blog&&!$&&(0,S.jsx)(c.ZP,{width:v.OH,height:v.u5,closeForAllExternalClicks:!0,position:g.I2.AutoStart,isOpen:U,toggle:G,usePortals:!0,component:(0,S.jsx)(h.Z,{onClose:G,blogname:N.blog.name,postId:N.postId,canDoReply:!(_===x.Nw||!_.post.canReply)}),children:(0,S.jsx)(p.Z,{onClick:G,size:{width:15,height:15}})})]})]}),(0,S.jsx)("div",{className:k.childrenContainer,children:T})]})};I.defaultProps={labelConfiguration:null};const N=I;var P=s(5700);const T=e=>{let{trail:t,parentPlacementId:s,parentEarnedId:o,disableFollow:i,contentFooter:a}=e;return(0,S.jsx)(S.Fragment,{children:null==t?void 0:t.map(((e,t)=>{let l,r,d,c;if((0,P.eb)(e)){const{canBeFollowed:s,active:n}=e.blog,o=!1!==n;var p;if(r={text:e.blog.name},o)r={...r,blog:e.blog,postId:e.post.id,postTimestamp:null===(p=e.post)||void 0===p?void 0:p.timestamp,clickthrough:`${e.blog.url}post/${e.post.id}/`,isPaywalled:e.post.isPaywalled,paywallAccess:e.post.paywallAccess},l={avatarImageResponse:e.blog.avatar,blogIsAdult:e.blog.isAdult,clickthrough:{href:e.blog.url,title:e.blog.title,blogName:e.blog.name},showsReblogIcon:0!==t};d=i||e.blog.isBloglessAdvertiser?{canFollowBlog:!1}:{canFollowBlog:o&&s,isFollowingReblogger:e.blog.followed},c=e.post.id}else{var u,h,m;l={showsReblogIcon:0!==t,avatarImageResponse:null===(u=e.brokenBlog)||void 0===u?void 0:u.avatar},r={text:null===(h=e.brokenBlog)||void 0===h?void 0:h.name,blog:void 0},c=`${null===(m=e.brokenBlog)||void 0===m?void 0:m.name} ${JSON.stringify(e.content)}`}return(0,S.jsxs)(N,{avatarConfiguration:l,labelConfiguration:r,followButtonConfiguration:d,isContributedContent:e.isContributedContent,parentPlacementId:s,parentEarnedId:o,shouldShowTip:!!(0,P.eb)(e)&&e.post.shouldShowTip,isMember:!!(0,P.eb)(e)&&e.blog.isMember,children:[(0,S.jsx)(n.ZP,{blocks:e.content,layouts:e.layout,postingBlog:(0,P.eb)(e)?e.blog:void 0,isOriginalPost:!1,isEdit:!0}),0===t&&a]},c)}))})}},235:(e,t,s)=>{"use strict";s.d(t,{Jj:()=>a,ZP:()=>l,q5:()=>r});var n=s(95004),o=s(45051);const i=(0,n.createContext)({canFastReblog:!1,canFastQueue:!1,canFastQuote:!1,fastRebloggedPosts:[],setDefaultFastBlog:o.Z,getBlogs:()=>[]}),a=(0,n.createContext)({allPosts:[],queuedPosts:[]}),l=i,r=()=>(0,n.useContext)(i)},94631:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s(5754),o=s.n(n),i=s(67023),a=s(78667),l=s(86225);const r="M_e0U";var d=s(2629);const c=function(e){let{date:t,className:s,dateFormat:n=i.qC.Automatic}=e;const{_c:c,_getRelativeDateString:p,_getLocaleDateString:u,timeZone:h}=(0,a.bp)(),m=u(t,i.Cx.Notes,!0),g=u(t,i.Cx.Time,!0),v=(0,l.Z)(t).toISOString();return(0,d.jsx)("time",{className:o()(r,s),dateTime:v,title:c('Tooltip text that shows when this post was posted. First variable is the date ("Aug 26, 2021"), second variable is the time ("5:20 PM").',"Posted %1$s - %2$s",[m,g]),suppressHydrationWarning:!0,children:p(t,n,void 0,h)})}},22591:(e,t,s)=>{"use strict";s.d(t,{Z:()=>y});var n=s(95004),o=s(65214),i=s(43523),a=s(81584),l=s(78667),r=s(58849);const d=(0,s(80293).Z)((()=>Promise.all([s.e(744),s.e(5791),s.e(5717)]).then(s.bind(s,20492))),"AsyncTippingForm"),c=s.p+"src/assets/images/tipping/tip-jar-8d1544a0.gif",p=s.p+"src/assets/images/tipping/tip-jar@2x-56354e2e.gif";var u=s(54382);const h="kuEoR",m="mnMy1",g="ZyCBz",v="NG3pi",b="VA2AA",x="GRXS0";var f=s(2629);const C=e=>{let{onAcceptTerms:t}=e;const{_c:s}=(0,l.bp)();return(0,f.jsxs)("div",{className:h,children:[(0,f.jsx)("img",{srcSet:`${p} 400w, ${c} 200w`,sizes:"(min-resolution: 1.3) 400w, 200w",src:c,alt:"",className:m}),(0,f.jsx)("h2",{className:g,children:s("Heading for tip jar feature description. Tip has two meanings here: a monetary reward and a peice of advice","Here's a tip")}),(0,f.jsx)("span",{className:v,children:(0,f.jsx)(u.ZP,{components:{span:(0,f.jsx)("span",{role:"img","aria-label":s("label for heart emoji","love")})},children:"Now you can send tips to the blogs you [span]❤️[/span] on Tumblr."})}),(0,f.jsx)("span",{className:b,children:(0,f.jsx)(u.ZP,{components:{termsLink:(0,f.jsx)("a",{href:"https://www.tumblr.com/policy/en/terms-of-service"}),privacyLink:(0,f.jsx)("a",{href:"https://www.tumblr.com/privacy"})},children:"By tapping “Start tipping now” below I agree to [termsLink]Tumblr’s Terms of Service[/termsLink], that I’m 18 years or older, and have read the [privacyLink]Privacy Policy[/privacyLink]."})}),(0,f.jsx)("button",{className:x,onClick:t,children:s("Button text that initiates the process of sending a tip to user","Start tipping now")})]})},y=e=>{let{blogname:t,canDoReply:s,onClose:c,postId:p,replyText:u=""}=e;const{apiFetch:h,getUserInfo:m,logEvent:g,isLoggedIn:v}=(0,l.bp)(),{openLoginWall:b}=(0,r.h)(),[x,y]=(0,n.useState)(!0),[w,j]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{m().then((function(e){var t;y(e.acceptedTippingTos||!1),j(null===(t=e.blogs)||void 0===t?void 0:t[0].avatar)}))}),[m,y,h]);const k=(0,n.useCallback)((()=>{if(g({eventName:i.J.StartTippingTap}),!v){const e=p?(0,o.Rd)({blogName:t,postId:p.toString()}):(0,o.vw)({blogName:t});return b({redirect:e})}return(0,a.ZP)(h).acceptTippingTerms().fetch().then((()=>y(!0)))}),[y,h,g,t,v,b,p]);return(0,f.jsx)("div",{children:x?(0,f.jsx)(d,{avatar:w,blogname:t,canDoReply:s,onClose:c,postId:p,replyText:u}):(0,f.jsx)(C,{onAcceptTerms:k})})}},89351:(e,t,s)=>{"use strict";s.d(t,{v:()=>c,Z:()=>p});var n=s(5754),o=s.n(n),i=s(9557),a=s(25190),l=s(43684);const r={tooltip:"EZHUS",green:"pmD2_",red:"pMONo"};var d=s(2629);const c={BLACK:"black",GREEN:"green",RED:"red"},p=e=>{let{children:t,content:s,tooltipOffsetModifiers:n={},position:p=l.I2.Right,color:u=c.BLACK,className:h,disable:m=!1,popoverProps:g}=e;const{isMobile:v}=(0,a.v$)();return v||m?t:(0,d.jsx)(i.Z,{hasArrow:!0,isChromeless:!0,arrowWrapperClassName:r[u],component:(0,d.jsx)("div",{className:o()(r.tooltip,r[u],h),children:s}),position:p,positionBasedOffsetModifiers:n,type:l.Oj.Hover,...g,children:t})}},45451:(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var n=s(95004),o=s(13586),i=s(62412),a=s(43684);const l="vgL3J",r="oMP8i";var d=s(2629);const c={[a.I2.Right]:{left:6,top:-2},[a.I2.Left]:{left:-6,top:-2},[a.I2.Top]:{left:4,top:10},[a.I2.Bottom]:{left:4,top:8}},p=e=>{let{children:t,content:s,tooltipOffsetModifiers:p={},position:u=a.I2.Bottom,popoverProps:h,isOpen:m,onFirstShow:g,onDismiss:v}=e;const[b,x]=(0,n.useState)(m),[f,C]=(0,o.YD)(),[y,w]=(0,n.useState)(!1);(0,n.useEffect)((()=>{x(m)}),[m,x]),(0,n.useEffect)((()=>{C&&!y&&(w(!0),null==g||g())}),[C,y,w,g]);return(0,d.jsx)(i.ZP,{hasArrow:!0,isChromeless:!0,arrowWrapperClassName:r,component:(0,d.jsx)("div",{ref:f,className:l,onClick:()=>{x(!1),null==v||v()},role:"button",children:s}),position:u,positionBasedOffsetModifiers:{...c,...p},isOpen:b,toggle:null,skipClickToOpen:!0,skipClickToClose:!0,closeForAllExternalClicks:!0,isFlipEnabled:!1,...h,children:t})}},5553:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(51641),o=s(78667);const i=()=>{const{getUserInfo:e,isLoggedIn:t}=(0,o.bp)(),{isLoading:s,isError:i,data:a}=(0,n.useQuery)("user-info",(()=>e()));return!t||s||i||!a?null:a.blogs}},64560:(e,t,s)=>{"use strict";let n;s.d(t,{U:()=>n}),function(e){e.Action="action",e.Web="web",e.API="api"}(n||(n={}))},29521:(e,t,s)=>{"use strict";let n;s.d(t,{g:()=>n}),function(e){e.created="Created",e.pending="Pending",e.approved="Approved",e.rejected="Rejected",e.waitingReport="WaitingReport",e.completed="Completed"}(n||(n={}))},19403:(e,t,s)=>{"use strict";s.d(t,{L:()=>l});var n=s(22979),o=s(88451),i=s(24078),a=s(51400);function l(e,t){const s=e,{hydraConfigInstanceId:l,adPlacementConfiguration:r}=this.props.adContext,d=null==r?void 0:r.signature,c=e.objectType===n.TE.Post&&!(void 0===e.adm||null===e.adm),p=e.objectType===n.TE.Announcement&&e,u=p?(0,a.w)(p).bannerId:null,h=e.adInstanceCreationTime?Date.now()-e.adInstanceCreationTime:null,{adProviderId:m,adProviderPlacementId:g,adProviderForeignPlacementId:v,adProviderInstanceId:b,adRequestId:x,fillId:f,supplyRequestId:C,supplyProviderId:y,streamSessionId:w,streamGlobalPosition:j,supplyOpportunityInstanceId:k,mediationCandidateId:S,adInstanceId:I,price:N,advertiserId:P,campaignId:T,adGroupId:Z,adId:A,creativeId:E,earnedId:M}=s,L=(0,i.c)({hydraConfigInstanceId:l,hydraSignature:d,adProviderId:m,adProviderPlacementId:g,adProviderForeignPlacementId:v,adProviderInstanceId:b,adRequestId:x,fillId:f,supplyRequestId:C,supplyProviderId:y,streamSessionId:w,streamGlobalPosition:j,supplyOpportunityInstanceId:k,mediationCandidateId:S,adInstanceId:I,price:N,isTumblrSponsoredPost:c,adInstanceAge:h,advertiserId:P,campaignId:T,adGroupId:Z,adId:A,banner_id:u,creativeId:E,earnedId:M},((e,t)=>null!=t));return t?(0,o.v)(L):L}},17901:(e,t,s)=>{"use strict";let n,o;s.d(t,{L:()=>o,w:()=>n}),function(e){e.Ask="ask",e.Blaze="blaze",e.Reblog="reblog",e.ReblogWithComment="reblog_with_comment",e.ReblogWithContentComment="reblog_with_content_comment",e.Like="like",e.Reply="reply",e.Posted="posted",e.Follower="follower",e.UserMention="user_mention",e.NoteMention="note_mention",e.Attribution="post_attribution",e.Tip="tip"}(n||(n={})),function(e){e.Conversation="conversation",e.Rollup="rollup",e.Replies="replies",e.Reblogs="reblogs_only",e.ReblogsWithTags="reblogs_with_tags",e.ReblogsWithComments="reblogs_with_comments",e.ReblogsWithContentComments="reblogs_with_content_comments",e.Likes="likes",e.ReblogGraph="reblog_graph"}(o||(o={}))},72146:(e,t,s)=>{"use strict";let n;s.d(t,{c:()=>n}),function(e){e.Search="search",e.Pin="pin",e.Hashtag="hashtag"}(n||(n={}))},68087:(e,t,s)=>{"use strict";s.d(t,{Jd:()=>n,OH:()=>o,u5:()=>i});const n="com.tumblr.tip.custom",o=360,i=510},92677:(e,t,s)=>{"use strict";let n,o,i;function a(e){return!!e&&!!e.type&&!!e.type&&Object.values(o).includes(e.type)}s.d(t,{Fj:()=>i,G6:()=>n,v_:()=>a,w3:()=>o}),function(e){e.Youtube="youtube",e.Tumblr="tumblr",e.Flickr="flickr",e.Instagram="instagram"}(n||(n={})),function(e){e.Mov="video/quicktime",e.Mp4="video/mp4",e.AppleM4v="video/x-m4v"}(o||(o={})),function(e){e.User="User",e.Glass="Glass",e.DocumentVisibility="DocumentVisibility"}(i||(i={}))},90621:(e,t,s)=>{"use strict";s.d(t,{CG:()=>r,L2:()=>p,NV:()=>c,Po:()=>a,V6:()=>d,rK:()=>u,wW:()=>l,yR:()=>h});var n=s(5700),o=s(1308),i=s(60023);const a=(e,t)=>{let{blogName:s}=t;return new i.x(e,`/v2/blog/${s}/posts/queue`,{method:"GET",queryParams:{...(0,o.xr)(["timezoneOffset"]),reblog_info:!0}})},l=(e,t)=>{let{blogName:s,id:n,insertAfter:o}=t;return new i.x(e,`/v2/blog/${s}/posts/queue/reorder`,{method:"POST",body:{post_id:n,insert_after:o}})},r=(e,t)=>{let{blogName:s}=t;return new i.x(e,`/v2/blog/${s}/posts/queue/shuffle`,{method:"POST"})},d=(e,t)=>{let{blogUuid:s,postId:o}=t;return new i.x(e,`/v2/blog/${s}/post/edit`,{method:"POST",body:{id:o,state:n.hA.Queue}})},c=(e,t)=>{let{blogName:s}=t;return new i.x(e,`/v2/blog/${s}/posts/queue/settings`)},p=(e,t)=>{let{blogName:s,postFrequency:n,startHour:o,endHour:a}=t;return new i.x(e,`/v2/blog/${s}/posts/queue/settings`,{method:"POST",body:{post_frequency:n,start_hour:o,end_hour:a}})},u=(e,t)=>{let{blogName:s}=t;return new i.x(e,`/v2/blog/${s}/posts/queueplus/settings`)},h=(e,t)=>{let{blogName:s,interval:n,perInterval:o,startTime:a,endTime:l}=t;return new i.x(e,`/v2/blog/${s}/posts/queueplus/settings`,{method:"POST",body:{interval:n,per_interval:o,start_time:a,end_time:l}})}},81095:(e,t,s)=>{"use strict";let n,o;s.d(t,{b:()=>n,k:()=>o}),function(e){e.SPAM="spam",e.UNBLUR="unblur"}(n||(n={})),function(e){e.Fast="fast"}(o||(o={}))},34056:(e,t,s)=>{"use strict";function n(e){return new Promise(((t,s)=>{setTimeout((async()=>{try{return await navigator.clipboard.writeText(e),t()}catch(e){s()}}))}))}s.d(t,{Z:()=>n})},87517:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s(88451);function o(e,t,s){const{href:o,method:i,bodyParams:a}=e;return()=>t(o,{method:i,body:(0,n.v)(a)}).then(s)}},51400:(e,t,s)=>{"use strict";s.d(t,{w:()=>n});const n=e=>{const{resources:t}=e;return t[0]}},19370:(e,t,s)=>{"use strict";s.d(t,{x:()=>o});var n=s(5700);const o=e=>{const t=e.find((e=>(0,n.RD)(e)));return t||e.find((e=>(0,n.gD)(e)))}},20041:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(95004),o=s(62412);const i=e=>{let{outsideEvents:t,onOutsideEvent:s}=e;const i=(0,n.useRef)(null),a=(0,n.useContext)(o.TL),l=(0,n.useCallback)((e=>{var t;let{target:n}=e;!(null!==(t=i.current)&&void 0!==t&&t.contains(n))&&s()}),[s,i]);return(0,n.useEffect)((()=>{const e=a();return t.forEach((t=>{null==e||e.addEventListener(t,l,!1)})),()=>{t.forEach((t=>{null==e||e.removeEventListener(t,l,!1)}))}}),[a,t,l]),i}},95867:(e,t,s)=>{"use strict";s.d(t,{ZP:()=>d,jx:()=>l,n5:()=>r});var n=s(95004),o=s(5553),i=s(44561);const a="lastSelectedBlog",l=e=>{let t;try{t=JSON.parse(localStorage.getItem(a)||"null")}catch(e){}return null==e?void 0:e.find((e=>{var s;return e.uuid===(null===(s=t)||void 0===s?void 0:s.uuid)}))},r=e=>{localStorage.setItem(a,JSON.stringify(e))},d=()=>{const[e,t]=(0,n.useState)(),s=(0,o.Z)();(0,n.useEffect)((()=>{const e=l(s||[]),n=(0,i.Z)(s||[]);t(e||n)}),[s]);return{selectedBlog:e,onChangeSelectedBlog:e=>{t(e),r(e)}}}},67657:(e,t,s)=>{"use strict";s.d(t,{AU:()=>l,NV:()=>a,uG:()=>i});const n="igniteData",o=()=>{const e=localStorage.getItem(n);return e?JSON.parse(e):null},i=(e,t)=>{var s;const n=o();return(null==n||null===(s=n[e])||void 0===s?void 0:s[t])??null},a=(e,t)=>{const s=o();localStorage.setItem(n,JSON.stringify({...s,[e]:t}))},l=e=>{const t=o();t&&(delete t[e],Object.keys(t).length?localStorage.setItem(n,JSON.stringify(t)):localStorage.removeItem(n))}},68859:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=e=>{if(!e)return!1;let t;try{t=new URL(e)}catch(e){return!1}const s=t.hostname;return"safe.txmblr.com"===s||/(?:^tumblr|\.tumblr)\.(?:com|net)$/.test(s)}},43747:(e,t,s)=>{"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return!1;const s="%[0-9a-fA-F]{2}",n=t?"(http|https):\\/\\/":"((http|https):\\/\\/)?",o=`([a-zA-Z0-9$\\-_.+!*"(),;:&=]|${s})+@`,i="(25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])",a=`(${i}(\\.${i}){3})`,l="a-zA-Z0-9\\-\\_\\~",r="\\u00C0-\\u9FFF",d=`([${l}${r}]+\\.)+([a-zA-Z]{2,})`,c="[0-9]+",p=`(${a}|localhost|${d})(:${c})?`,u=`${l}${r}.:\\[\\]@!$&'()*+,;=`,h=`([${u}]|${s})*`,m=`${h}(\\/${h})*`,g=`\\?([${u}/?]|${s})*`,v=`\\#([${u}/?]|${s})*`,b=new RegExp(`^${n}(${o})?${p}(\\/?(${m})?(${g})?(${v})?)?$`);return!0===b.test(e)}s.d(t,{Z:()=>n})},60042:(e,t,s)=>{"use strict";s.d(t,{ag:()=>a,bG:()=>l,oL:()=>i});var n=s(94576),o=s(68859);function i(e,t){let s;const i=n=>{const i=function(e){const{origin:t,source:s,data:n}=e;if(!(n&&t&&s))return null;if(!(0,o.Z)(t))return null;let i;try{i=JSON.parse(n)}catch{return null}if(!i.method)return null;const a=i.method.match(/^([^:]+):(.+)$/);if(!a)return null;const l=a[1],r=a[2],d=i.args[0];return{origin:t,namespace:l,name:r,source:s,cid:i.cid,data:d}}(n);if(i&&i.namespace===e)return"_syn"===i.name?(s={namespace:e,source:i.source,origin:i.origin},void function(e,t,s,n){const o=JSON.stringify({method:`${s}:_method_callback_responder`,args:[n]});e.postMessage(o,t)}(i.source,i.origin,e,{response:"ack",cid_response:i.cid})):void(t[i.name]&&t[i.name](i.data))};return n.ZP.on("message",i),{handler:i,getChannelInfo:()=>s}}const a={listen:i,unlisten:function(e){n.ZP.off("message",e)}};function l(e,t,s){let{source:n,target:o,namespace:i}=e;const a=JSON.stringify({method:`${i}:${t}`,args:[s]});n.postMessage(a,o)}},22527:(e,t,s)=>{"use strict";s.d(t,{d:()=>o});var n=s(5700);const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.find((e=>e.type===n.Gf.Cta))}},24228:(e,t,s)=>{"use strict";s.d(t,{b:()=>i});var n=s(92023),o=s(50899);const i=(e,t,s)=>{const i=(0,n.T8)(e,{postId:t.toString(),postSlug:s});return`${o.Cw}${i}?source=share`}},97561:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=e=>{let{postUrl:t,blog:s}=e;return{blog:s,permalinkUrl:t}}},94562:(e,t,s)=>{"use strict";s.d(t,{h:()=>o});var n=s(22979);const o=e=>{let{editablePost:t,isReblog:s,isReblogWithPaywall:o,isInbox:i,isAsk:a,isPrefilledPost:l}=e;return!!(s&&t&&(0,n.WN)(t))||(!!o||(!!a||(!!(null!=t&&t.isAdFreeGiftAsk||null!=t&&t.isTumblrmartGiftAsk)||(!!i||!!l))))}},16273:(e,t,s)=>{"use strict";function n(e,t){const s=Math.ceil(t-e),n=s<0?-1:1;return Array(Math.abs(s)).fill(0).map(((t,s)=>e+s*n))}s.d(t,{Z:()=>n})},82560:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s(94562);const o=e=>{let{isMobile:t,features:{redpopDesktopEditorBeta:s,redpopPostFormMobileCreate:o,redpopPostFormReblog:i},editablePost:a,isReblog:l,isReblogWithPaywall:r,isInbox:d,isAsk:c,isPrefilledPost:p}=e;if((0,n.h)({editablePost:a,isReblog:l,isReblogWithPaywall:r,isAsk:c,isInbox:d,isPrefilledPost:p}))return!1;if(null!=a&&a.shouldOpenInLegacy)return!0;if(l)return!(!t&&i||!t&&s||t);if(a)return!(!t&&s||t);return!(!t&&s||t&&o)}},92895:(e,t,s)=>{"use strict";s.d(t,{P2:()=>l,SV:()=>a,c7:()=>i});var n=s(92677),o=s(68859);const i=function(e){var t;let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=void 0!==e.media,i=n&&(s||(0,o.Z)(null===(t=e.media)||void 0===t?void 0:t.url));return i},a=e=>(null==e?void 0:e.provider)===n.G6.Instagram,l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!i(e,t)&&void 0!==e.embedIframe&&void 0!==e.provider}},4840:(e,t,s)=>{"use strict";e.exports=s.p+"src/assets/icons/ignite-icon-80c800c6.svg"},8705:(e,t,s)=>{"use strict";e.exports=s.p+"src/assets/icons/t-blazed-22d35ec7.svg"},7856:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},50920:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},38642:e=>{function t(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},42307:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},45182:e=>{function t(s){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},30157:(e,t,s)=>{var n=s(87856);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},41463:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},63268:(e,t,s)=>{var n=s(16544).default;function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(o=function(e){return e?s:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var s=o(t);if(s&&s.has(e))return s.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var r=a?Object.getOwnPropertyDescriptor(e,l):null;r&&(r.get||r.set)?Object.defineProperty(i,l,r):i[l]=e[l]}return i.default=e,s&&s.set(e,i),i},e.exports.__esModule=!0,e.exports.default=e.exports},54589:(e,t,s)=>{var n=s(3917);e.exports=function(e,t){if(null==e)return{};var s,o,i=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)s=a[o],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},3917:e=>{e.exports=function(e,t){if(null==e)return{};var s,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(o[s]=e[s]);return o},e.exports.__esModule=!0,e.exports.default=e.exports},88249:(e,t,s)=>{var n=s(16544).default,o=s(7856);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.__esModule=!0,e.exports.default=e.exports},87856:e=>{function t(s,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(s,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},16544:e=>{function t(s){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}}]);