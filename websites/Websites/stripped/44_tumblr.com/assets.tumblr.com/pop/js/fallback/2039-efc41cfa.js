"use strict";(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[2039],{33264:(e,t,s)=>{s.d(t,{Z:()=>n});const n={blogRowFollowButton:"kk3cQ"}},15690:(e,t,s)=>{s.d(t,{Z:()=>p});var n=s(33970),i=s.n(n),a=s(95004),o=s(3069),r=s(78667);const l="mrvd7",d="SYe4j";var c=s(2629);function p(e){var t,s=(0,r.bp)()._t,n=e.blog,p=e.onClick,u=n.name,m=n.url,h=(0,a.useState)(null!==(t=e.selected)&&void 0!==t?t:!!n.followed),v=i()(h,2),g=v[0],b=v[1];(0,a.useEffect)((()=>{void 0!==e.selected&&b(!!e.selected)}),[e.selected]);return n.canBeFollowed?(0,c.jsx)(o.Z,{following:!!g,blogName:u,blogUrl:m,className:l,wrapperClassName:d,isPeeprHeader:!1,onFollow:(e,t)=>{b(t),null==p||p(e,t)},isBlogCarousel:!0,children:e=>s(e?"Following":"Follow")}):null}},171:(e,t,s)=>{s.d(t,{ZP:()=>_});var n=s(54138),i=s.n(n),a=s(33970),o=s.n(a),r=s(95004),l=s(51641),d=s(36485),c=s(92183),p=s(78667);const u="RO9wQ";var m=s(2629),h="word-ads-pubmine-script",v={[c.E.RIGHT_RAIL]:101,[c.E.DASHBOARD]:101,[c.E.EXPLORE]:202,[c.E.COMMUNITY_HUB]:203,[c.E.PEEPR_RIGHT_RAIL]:204,[c.E.BLOG_PAGE]:1,[c.E.POST_PERMALINK]:1,[c.E.RECOMMENDED]:1,[c.E.TAKEOVER]:1,[c.E.LOGGED_OUT_LANDING]:1},g={[c.E.RIGHT_RAIL]:101,[c.E.DASHBOARD]:101,[c.E.EXPLORE]:102,[c.E.COMMUNITY_HUB]:103,[c.E.PEEPR_RIGHT_RAIL]:104,[c.E.BLOG_PAGE]:1,[c.E.POST_PERMALINK]:1,[c.E.RECOMMENDED]:1,[c.E.TAKEOVER]:1,[c.E.LOGGED_OUT_LANDING]:1};const b=e=>{var t=e.supplyProviderId,s=void 0===t?c.E.RIGHT_RAIL:t,n=(0,p.bp)(),i=n.tumblrIponwebUserId,a=n.cspNonce,o=n.wwwBaseUrl,l=n._t,b=n.isLoggedIn,x=(e=>"ata-dynamic-1_"+e)(s),f=window,j=()=>{"undefined"!=typeof __tcfapi&&__tcfapi("ping",2,((e,t)=>{if(t&&e.gdprApplies)return __tcfapi("showUi",2,(()=>null));window.location.replace((0,d.Z)("".concat(o,"/privacy"),{redirect:window.location.href}))}))};return(0,r.useEffect)((()=>{var e,t,n;f.__ATA_PP={pt:b?g[s]:v[s],ht:1,tn:"tumblr",amp:!1,ad:{label:{text:l("Advertisements")},reportAd:{text:l("Report this ad")},privacySettings:{text:l("Privacy"),onClick:j}},siteid:174375630,id_hash:i},null!==(e=f.__ATA)&&void 0!==e&&e.pageParams&&(f.__ATA.pageParams.pt=f.__ATA_PP.pt),f.__ATA||(f.__ATA={cmd:[],criteo:{cmd:[]}}),null===(t=f.__ATA)||void 0===t||t.cmd.push((()=>{var e,t;null===(e=f.__ATA)||void 0===e||null===(t=e.initDynamicSlot)||void 0===t||t.call(e,{id:x,location:110,formFactor:"002"})})),document.getElementById(h)||((n=document.createElement("script")).src="https://c0.pubmine.com/2.20.01613588427137/head.js",n.id=h,n.nonce=a,document.body.appendChild(n))}),[]),(0,m.jsx)("div",{id:x,className:u})};var x=s(27096),f="smart-ads-script",j="https://www15.smartadserver.com",C=112148,w=1485677,y=1485682,I=1494033;const _=e=>{var t=e.supplyProviderId,s=void 0===t?c.E.RIGHT_RAIL:t,n=e.FallbackAdComponent,a=void 0===n?b:n,d=e.fallbackAdProps;d||(d={supplyProviderId:s});var u=(0,x.Z)(),h=(0,p.bp)(),v=h.cspNonce,g=h.isLoggedIn,_=h.tumblrIponwebUserId,N=h.getUserInfo,A=(0,r.useState)("initializing"),T=o()(A,2),k=T[0],S=T[1],O=(0,l.useQuery)("user-info",(()=>N()),{refetchOnWindowFocus:!1}),P=O.isLoading,E=O.data,R={[c.E.RIGHT_RAIL]:{pageId:w,formatId:C},[c.E.PEEPR_RIGHT_RAIL]:{pageId:g?y:I,formatId:C}},Z=R[s]?R[s]:R[c.E.RIGHT_RAIL],B=((e,t)=>"sas_".concat(t,"_").concat(e))(s,Z.formatId),D=()=>{var e,t,s,n=window;null===(e=n.sas)||void 0===e||e.events.off("noad",F,B),null===(t=n.sas)||void 0===t||t.events.off("error",L,B),null===(s=n.sas)||void 0===s||s.clean(B)},M=e=>{var t,s=window;e.origin===j&&e.data&&("sasRefresh"===e.data.action&&(null===(t=s.sas)||void 0===t||t.refresh()))},F=()=>{u.current&&S("noad")},L=()=>{u.current&&S("error")},H=()=>{if(!g||!P){var e={};e.nonce=v,g&&(_&&(e.user=_),null!=E&&E.bornYear&&(e.age=(new Date).getFullYear()-(null==E?void 0:E.bornYear)));var t,s,n,i,a=window;if((e=>{var t,s;return null===(t=window)||void 0===t||null===(s=t.sas)||void 0===s?void 0:s.events.history("call").map((e=>{var t;return null==e||null===(t=e.data)||void 0===t?void 0:t.ad.formats[0].tagId})).includes(e)})(B))null===(t=a.sas)||void 0===t||t.events.on("noad",F,B),null===(s=a.sas)||void 0===s||s.events.on("error",L,B),null===(n=a.sas)||void 0===n||n.refresh();else null===(i=a.sas)||void 0===i||i.cmd.push((function(){var t,s,n,i;null===(t=a.sas)||void 0===t||t.call("onecall",{siteId:471751,pageId:Z.pageId,formats:[{id:Z.formatId,tagId:B}],target:Object.entries(e).map((e=>e.join("="))).join(";")}),null===(s=a.sas)||void 0===s||s.events.on("noad",F,B),null===(n=a.sas)||void 0===n||n.events.on("error",L,B),null===(i=a.sas)||void 0===i||i.render(B)}))}};return(0,r.useEffect)((()=>{var e,t,s;return document.getElementById(f)||(t=window,(s=document.createElement("script")).src="https://ced.sascdn.com/tag/3905/smart.js",s.async=!0,s.nonce=v,s.id=f,document.body.appendChild(s),t.sas||(t.sas={cmd:[],call:()=>null,setup:()=>null,render:()=>null,refresh:()=>{},clean:()=>{},events:{history:()=>[{}],on:()=>{},off:()=>{}}}),null===(e=t.sas)||void 0===e||e.cmd.push((function(){var e;null===(e=t.sas)||void 0===e||e.setup({networkid:3905,domain:j,async:!0})})),window.addEventListener("message",M)),D}),[]),(0,r.useEffect)((()=>(H(),D)),[P,E]),"noad"===k||"error"===k?(0,m.jsx)(a,i()({},d)):(0,m.jsx)("div",{id:B,"data-testid":B})}},73702:(e,t,s)=>{s.d(t,{ZP:()=>W});var n=s(54138),i=s.n(n),a=s(50209),o=s.n(a),r=s(5754),l=s.n(r),d=s(95004),c=s(60612),p=s(73792),u=s(79615),m=s(57475),h=s(77095),v=s(78667),g=s(63583),b=s.n(g),x=s(33264);const f="iOplf",j="dxDX3";var C=s(2629);class w extends d.Component{render(){var e=this.props,t=e.rowTheme,s=e.avatar,n=e.avatarShape,a=e.blogName,o=e.blogTitle,r=e.blogUrl,l=e.onFollow,d=e.onClose,c=e.isFollowed,v=e.appContext._t,g=void 0!==l&&!c&&(0,C.jsx)(m.Z,{following:!!c,blogName:a,blogUrl:r,onFollow:l,className:x.Z.blogRowFollowButton}),w=(0,C.jsx)(u.Z,{wrapperClassName:j,onClick:d,label:v("Dismiss Recommendation"),children:(0,C.jsx)(h.Z,{colors:{primary:b().paletteTransparentWhite13},size:{width:10,height:10}})}),y={avatar:s,avatarShape:n,blogName:a,blogTitle:o,blogUrl:r};return(0,C.jsx)("div",{className:f,children:(0,C.jsx)(p.ZP,i()(i()({},y),{},{isMobile:!1,floatingButton:g,closeButton:w,theme:t||p.CK.Dark,openBlogCard:p.T6.Body}))})}}const y=(0,v.HJ)(w);var I=s(13434),_=s(81584),N=s(86033),A=s(78093),T=s.n(A);const k="B4rcz",S="PwJi6",O="kqme1",P="_fk31",E="Kxfe3",R="vN7wd",Z="ou8zw",B="E4V_b",D="W9GZw";var M="".concat(T().postSlideOutDurationInMs,"ms ease-out");function F(e,t,s){return t.length>0&&e>Math.max(...t)&&"exiting"===s?{transform:"translateY(-".concat(59*t.length,"px)"),transition:"transform ".concat(M)}:{}}class L extends d.Component{constructor(){super(...arguments),o()(this,"state",i()({indexesToRemove:[],animationType:"none"},this.props.getInitialContent())),o()(this,"apiHelper",(0,_.ZP)(this.props.appContext.apiFetch)),o()(this,"fetchInProgress",null),o()(this,"renderRows",(e=>{var t=this.props.rowTheme,s=this.state,n=s.blogs,i=s.indexesToRemove;return n.slice(0,this.getNumberOfBlogsToShow()).map(((s,n)=>{var a,o;return(0,C.jsx)("li",{className:O,children:(0,C.jsx)("div",{className:l()(P,{[E]:this.isBlogInAnimationState(n,"dismiss-blog"),[R]:this.isBlogInAnimationState(n,"follow-blog"),[Z]:this.isBlogInAnimationState(n,"none")}),style:F(n,i,e),children:(0,C.jsx)(y,{blogName:s.name,blogTitle:null!==(a=s.title)&&void 0!==a?a:"",blogUrl:s.url,avatar:null!==(o=s.avatar)&&void 0!==o?o:[],isFollowed:s.followed,onFollow:s.canBeFollowed?this.animateFollowBlog.bind(this,n):void 0,onClose:this.animateDismissBlog.bind(this,n),rowTheme:t})})},"".concat(s.name,"-").concat(n))}))})),o()(this,"rowRemovalComplete",(()=>this.setState({animationType:"none"}))),o()(this,"getNumberOfBlogsToShow",(()=>this.props.numberOfBlogsToShow+this.state.indexesToRemove.length)),o()(this,"isBlogInAnimationState",((e,t)=>this.state.indexesToRemove.includes(e)&&this.state.animationType===t)),o()(this,"fetchBlogs",(()=>{var e=this.state.nextLink,t=this.props.appContext.apiFetch;e&&(this.cancelInProgressFetchIfNecessary(),this.fetchInProgress=(0,N.Z)(t(e.href)),this.fetchInProgress.then((e=>{var t=this.state.blogs,s=(0,this.props.getContentFromResponse)(e),n=s.nextLink,i=s.blogs;this.setState({nextLink:n,blogs:t.concat(i)})})))})),o()(this,"logBlogDismissal",((e,t,s)=>Promise.all(t.map((t=>this.apiHelper.logBlogDismissal(e[t].url).fetch()))).then((()=>null!=s?s:this.fetchBlogs())))),o()(this,"removeRowAndAnimateSlideUp",(()=>{var e=this.state,t=e.blogs,s=e.animationType,n=e.indexesToRemove,i=t.filter(((e,t)=>!n.includes(t)));this.setState({indexesToRemove:[],blogs:i});var a=i.length<=5;"dismiss-blog"!==s?a&&this.fetchBlogs():this.logBlogDismissal(t,n,a)})),o()(this,"animateDismissBlog",(e=>this.setState({indexesToRemove:[e],animationType:"dismiss-blog"}))),o()(this,"animateFollowBlog",(e=>this.setState({indexesToRemove:[e],animationType:"follow-blog"}))),o()(this,"animateDismissAllBlogs",(()=>this.setState({indexesToRemove:[...Array(this.props.numberOfBlogsToShow).keys()],animationType:"dismiss-blog"}))),o()(this,"cancelInProgressFetchIfNecessary",(()=>{var e;return null===(e=this.fetchInProgress)||void 0===e?void 0:e.cancel()}))}componentDidMount(){this.fetchBlogs()}componentDidUpdate(e){e.recommendedTag!==this.props.recommendedTag?this.setState(this.props.getInitialContent(),(()=>this.fetchBlogs())):e.title!==this.props.title&&this.setState(this.props.getInitialContent())}componentWillUnmount(){this.cancelInProgressFetchIfNecessary()}render(){var e=this.props,t=e.title,s=e.numberOfBlogsToShow,n=e.dismissAllLabel,i=e.isInDashboardStyle,a=e.appContext._t,o=this.state,r=o.blogs,l=o.nextLink,d=o.animationType;return r.length?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("ul",{className:S,"aria-label":t,style:{height:59*s},children:(0,C.jsx)(c.ZP,{in:"none"!==d,timeout:T().postSlideOutDurationInMs,onEntered:this.rowRemovalComplete,onExited:this.removeRowAndAnimateSlideUp,children:this.renderRows})}),n&&(0,C.jsx)("div",{className:D,children:(0,C.jsx)(u.Z,{label:n,onClick:this.animateDismissAllBlogs,children:n})})]}):l?(0,C.jsx)("div",{className:k,children:(0,C.jsx)(I.Z,{small:!0})}):i?(0,C.jsx)("span",{className:B,children:a("No blogs available.")}):null}}o()(L,"defaultProps",{numberOfBlogsToShow:4,title:""});var H=(0,v.HJ)(L);class U extends d.Component{render(){return(0,C.jsx)(H,i()({},this.props))}}o()(U,"defaultProps",L.defaultProps);const W=U},17941:(e,t,s)=>{s.d(t,{Z:()=>I});var n=s(54138),i=s.n(n),a=s(33970),o=s.n(a),r=s(5754),l=s.n(r),d=s(95004),c=s(86179),p=s(79615),u=s(65214),m=s(42580),h=s(64633),v=s(20943),g=s(78667),b=s(80328),x=s(89465);const f="sNQra",j="WdYx4",C="tnoMg",w="D2Wgl";var y=s(2629);const I=e=>{var t=e.tag,s=e.className,n=e.pageName,a=e.isFollowed,r=e.extraStyles,I=(0,g.bp)(),_=I._t,N=I.apiFetch,A=I.isLoggedIn,T=(0,c.TH)().pathname,k=(0,d.useState)(A&&a),S=o()(k,2),O=S[0],P=S[1];(0,d.useEffect)((()=>{A&&void 0===a?(0,v.IR)(N,t).fetch((e=>{var t=e.response.following;return P(!!t)})):P(A&&a)}),[A,t,a]);var E=(0,x.k)(T,h.Vu.TagFollowButton),R=(0,b.Z)(E),Z=(0,d.useCallback)((()=>(0,v.Wr)(N,t,n).fetch((()=>P(!0)))),[t]),B=(0,d.useCallback)((()=>(0,v.to)(N,t,n).fetch((()=>P(!1)))),[t]),D=_("Follow");return A&&void 0===O?null:O?(0,y.jsx)(p.Z,{wrapperClassName:l()(f,s),className:C,onClick:B,label:_("Unfollow this tag"),style:r,children:_("Unfollow")}):(0,y.jsx)(p.Z,i()(i()({wrapperClassName:l()(f,s),className:j,onClick:A?Z:void 0,label:_("Follow this tag"),style:r},!A&&{"data-login-wall-type":"followTag","data-login-wall-tag-label":t,"data-login-wall-page":n,"data-login-wall-redirect":(0,u.fO)(t)}),{},{children:A?(0,y.jsx)("span",{className:w,children:D}):(0,y.jsx)("a",{className:w,href:(0,u.gZ)({formToShow:m.c.Register},{redirect_to:T,source:R}),children:D})}))}},51197:(e,t,s)=>{s.d(t,{Z:()=>c});var n=s(19486),i=s(51416),a=s(84473),o=s(43523),r=s(78667);const l={pillTag:"HSIaV",pillTagInner:"jo4rU",pillIcon:"ZsnTE"};var d=s(2629);const c=function(e){var t=e.timelineObject,s=(0,r.bp)().logEvent;return(0,d.jsx)("div",{className:l.tagRibbon,children:t.resources.map((e=>{var t=e.name,r=e.link;return(0,d.jsx)(i.Z,{className:l.pillTag,isThin:!0,children:(0,d.jsxs)(a.Z,{tagName:t,className:l.pillTagInner,toOverride:null==r?void 0:r.href,onClick:()=>{return e=t,void s({eventName:o.J.TagRibbonTagTap,eventDetails:{tag:e}});var e},children:[(0,d.jsx)("div",{className:l.pillIcon,children:(0,d.jsx)(n.Z,{})}),t]})},t)}))},t.id)}},82651:(e,t,s)=>{s.d(t,{ZP:()=>gi,l9:()=>mi});var n=s(54138),i=s.n(n),a=s(50209),o=s.n(a),r=s(5754),l=s.n(r),d=s(29774),c=s(95004),p=s(17941),u=s(84473),m=s(54382),h=s(43523),v=s(78667),g=s(63583),b=s.n(g);const x="ScibS",f="ve9db",j="uQnmG",C="zGQaS",w="iqdyd",y="LGuOI";var I=s(2629);const _=function(e){var t,s,n=e.timelineObject,i=(0,v.bp)().logEvent,a=n.newPostsCount,o=n.newPostsCountInt,r=null!==(t=n.followersCount)&&void 0!==t?t:"0",l=null!==(s=n.followersCountInt)&&void 0!==s?s:0,d=!!n.showFollowersCount,c=!!n.showNewPostsCount;return(0,I.jsxs)("div",{className:x,children:[(0,I.jsx)(u.Z,{className:f,tagName:n.hubName,onClick:()=>{i({eventName:h.J.HeaderTapped,eventDetails:{tag:n.hubName}})},children:(0,I.jsxs)("div",{className:j,style:{backgroundImage:"linear-gradient(".concat(g.transparentBlack7,", ").concat(g.transparentBlack65,'), url("').concat(n.headerImage,'")')},children:[(0,I.jsxs)("div",{className:C,children:["#",n.hubName]}),(0,I.jsxs)("div",{className:w,children:[d&&(0,I.jsxs)(m.M2,{comment:"The number of followers this topic has. Placeholder is the count of followers",exemptNumberKeyFromParamCheck:!0,components:{b:(0,I.jsx)("b",{})},params:{followersCount:r},number:l,children:[(0,I.jsx)(m.CJ,{children:"[followersCount] follower"}),(0,I.jsx)(m.CN,{children:"[b][followersCount][/b] followers"})]}),d&&c&&" / ",c&&(0,I.jsxs)(m.M2,{comment:"The number of posts this topic has had recently. Placeholder is the count of posts",exemptNumberKeyFromParamCheck:!0,components:{b:(0,I.jsx)("b",{})},params:{newPostsCount:a},number:o,children:[(0,I.jsx)(m.CJ,{children:"[newPostsCount] recent post"}),(0,I.jsx)(m.CN,{children:"[b][newPostsCount][/b] recent posts"})]})]})]})}),(0,I.jsx)(p.Z,{tag:n.hubName,isFollowed:n.isFollowed,pageName:"search",className:y})]},n.hubName)};var N=s(33970),A=s.n(N),T=s(26216),k="moatContainer";const S=(0,T.s)((e=>{var t=e.timelineObject,s=t.adGroupId,n=t.advertiserId,i=t.campaignId,a=t.creativeId,o=e.setInViewCallback,r=!(s&&n&&i&&a),l=(0,v.bp)().features.useMoat,d=(0,c.useRef)(null);return(0,c.useEffect)((()=>{if(l){var e=d.current,t=((e,t)=>{var s=[["moatClientLevel1",e.advertiserId||""],["moatClientLevel2",e.campaignId||""],["moatClientLevel3",e.adGroupId||""],["moatClientLevel4",e.creativeId||""]].map((e=>{var t=A()(e,2),s=t[0],n=t[1];return"".concat(s,"=").concat(encodeURIComponent(n))})).join("&"),n="https://z.moatads.com/".concat(t,"/moatad.js#").concat(s),i="MOAT-".concat(t,"?").concat(s.replace(/&/g,"&amp;")),a=document.createElement("script");a.src=n,a.async=!0;var o=document.createElement("noscript");return o.className=i,{moatScript:a,moatNoscript:o}})({adGroupId:s,advertiserId:n,campaignId:i,creativeId:a},"tumblrdisplay725780052135"),r=t.moatScript,c=t.moatNoscript;null==o||o((()=>{null==e||e.appendChild(r),null==e||e.appendChild(c)}))}}),[s,n,i,a,o,l]),l&&!r?(0,I.jsx)("div",{className:"moatScriptsContainer",ref:d}):null}),!0);var O="google-ads-script",P=["fluid"];const E=e=>{var t=(0,v.bp)(),s=t.cspNonce,n=t.logEvent,i=e.slotId,a=e=>{n({eventName:h.J.GoogleAdFilled,eventDetails:{slotId:i,event:e}})};return(0,c.useEffect)((()=>{var t;document.getElementById(O)||((t=document.createElement("script")).src="https://securepubads.g.doubleclick.net/tag/js/gpt.js",t.async=!0,t.nonce=s,t.id=O,document.head.appendChild(t)),(t=>{var s,n=window;n.googletag||(n.googletag={},n.googletag.cmd=[]),null===(s=n.googletag)||void 0===s||s.cmd.push((()=>{var s,i,o,r,l,d;null===(s=n.googletag)||void 0===s||null===(i=s.defineSlot("/22749103964/ca-pub-3245570501173456-tag",P,t))||void 0===i||i.setForceSafeFrame(!0).addService(null===(o=n.googletag)||void 0===o?void 0:o.pubads()),null===(r=n.googletag)||void 0===r||r.enableServices(),null===(l=n.googletag)||void 0===l||l.pubads().addEventListener("slotRenderEnded",(s=>{var n,i;s.slot.getSlotElementId()==t&&(s.isEmpty?null===(n=e.onEmpty)||void 0===n||n.call(e):(a(s),null===(i=e.onFilled)||void 0===i||i.call(e)))})),null===(d=n.googletag)||void 0===d||d.display(t)}))})(i)}),[i]),(0,I.jsx)("div",{id:i,"data-testid":i})};var R,Z,B,D,M,F,L,H=s(48451),U=s(34320),W=s(70019),z=s(43166),q=s(59215);!function(e){e.MediationCandidateConsideration="mediation_candidate_consideration",e.SupplyOpportunityMissed="supply_opportunity_missed",e.SupplyOpportunityFilled="supply_opportunity_filled",e.MediationOpportunityMissed="mediation_opportunity_missed",e.AdDropped="ad_dropped"}(R||(R={})),function(e){e.BackfillNotNeeded="backfill_not_needed",e.WaterfallNotUsed="waterfall_not_used"}(Z||(Z={})),function(e){e.ForeignImpression="foreign_impression",e.Impression="impression"}(B||(B={})),function(e){e.AdRequest="ad_request"}(D||(D={})),function(e){e.IponWebSyncInit="iponweb_sync_init",e.IponWebSyncInitError="iponweb_sync_init_error"}(M||(M={})),function(e){e.NoAd="noAd",e.AdServed="adAvailable",e.AdError="adError",e.TeadsImpression="impression"}(F||(F={})),function(e){e.AdFilled="AdFilled",e.NoAd="NoAd",e.AdError="AdError"}(L||(L={}));var G=s(92183),V=(e,t,s,n,i)=>{var a=s.supplyRequestId,o=s.supplyOpportunityInstanceId,r=s.adProviderId,l=s.isTumblrSponsoredPost,d=s.sponsoredBadgeUrl,c=s.adProviderForeignPlacementId,p=s.adProviderPlacementId,u=s.adProviderInstanceId,m=s.mediationCandidateId,h=s.streamSessionId,v=s.streamGlobalPosition,g=s.placementId,b=s.price,x=s.creativeId,f=s.adId,j=s.adRequestId,C=s.adInstanceId,w=s.adInstanceCreatedTimestamp,y=(new Date).getTime()-w;e({eventName:R.SupplyOpportunityFilled,eventDetails:{price:b,supply_opportunity_instance_id:o,supply_provider_id:G.E.DASHBOARD,supply_request_id:a,ad_provider_id:r,is_tumblr_sponsored_post:l||d?1:0,ad_provider_placement_id:p,ad_provider_foreign_placement_id:c,ad_provider_instance_id:u,mediation_candidate_id:m,stream_session_id:h,stream_global_position:v,placement_id:g,fill_id:i||s.fillId,hydra_config_instance_id:n,hydra_signature:null==t?void 0:t.signature,creative_id:x,ad_id:f,ad_instance_age:y,ad_request_id:j,ad_instance_id:C}})},J=s(55015);const K="uOyjG",Y="kJSyc",Q="CH8uH";class X extends c.Component{constructor(){super(...arguments),o()(this,"state",{}),o()(this,"getPostContextValue",(0,d.Z)((e=>({post:e,presentationStyle:J.Z.iponweb})))),o()(this,"onClick",(()=>{var e=this.props.timelineObject,t=e.adm,s=e.placementId,n=this.props.appContext.logEvent,i=this.props.adContext.sendClickADMBeacon;n({eventName:h.J.Click,eventDetails:{placement_id:s}}),i(t)}))}componentDidMount(){var e=this.props,t=e.adContext,s=t.adPlacementConfiguration,n=t.hydraConfigInstanceId,i=e.appContext.logEvent,a=e.timelineObject;this.generateIOWModel(),V(i,s,a,n)}render(){var e,t,s=this.state.iponWebResponse;if(!(s&&null!=s&&s.sponsorName&&null!=s&&s.avatar&&null!=s&&s.title))return null;var n="string"!=typeof this.props.timelineObject.adm?null===(e=this.props.timelineObject.adm)||void 0===e?void 0:e.native:void 0,i=this.props.appContext._t,a={url:s.avatar.url,width:s.avatar.w,height:s.avatar.h,hasOriginalDimensions:!0},o={blog:{name:i("Sponsored by %1$s",[s.sponsorName]),url:"",avatar:[a],isAdult:!1},permalinkUrl:""},r=(0,I.jsx)(U.Z,{postAttribution:o,presentationStyle:J.Z.iponweb,showsFollowButton:!1,showsSponsored:!1,isFollowingReblogger:!1,isNonInteractive:!0}),l=s.sponsorName&&s.img?(0,I.jsx)(H.Sw,{imageResponse:[{url:s.img.url,width:s.img.w,height:s.img.h,hasOriginalDimensions:!0}]}):null,d=s.cta?(0,I.jsx)("div",{className:Q,children:(0,I.jsx)("p",{children:s.cta})}):null;return(0,I.jsx)(z.Mj.Provider,{value:this.getPostContextValue(this.props.timelineObject),children:(0,I.jsxs)("a",{className:K,href:null==n||null===(t=n.link)||void 0===t?void 0:t.url,onClick:this.onClick,role:"button",target:"_blank",rel:"noopener",children:[r,(0,I.jsxs)("div",{className:Y,children:[(0,I.jsx)("h2",{children:s.title}),(0,I.jsx)("p",{children:s.description})]}),l,d]})})}generateIOWModel(){var e,t,s="string"!=typeof this.props.timelineObject.adm&&(null===(e=this.props.timelineObject.adm)||void 0===e||null===(t=e.native)||void 0===t?void 0:t.assets)||[];this.setState({iponWebResponse:s.reduce(((e,t)=>{if(t.title&&(e.title=t.title.text),t.img)switch(t.img.type){case W.f.Icon:e.avatar=t.img;break;case W.f.Main:e.img=t.img}if(t.data)switch(t.data.type){case W.BM.Sponsored:e.sponsorName=t.data.value;break;case W.BM.Description:e.description=t.data.value;break;case W.BM.AdditionalDesc:e.additionalDescription=t.data.value;break;case W.BM.CTAText:e.cta=t.data.value}return e}),{})})}}var $=(0,q.X9)(X,{appContext:!0,adContext:!0});const ee=(0,T.s)($);var te=s(17276),se=s.n(te),ne=s(99077),ie=s.n(ne);const ae=s.p+"src/assets/monetization/html/iab-safeframe/sf-843dd697.html";var oe,re={"exp-ovr":1,"exp-push":0,bg:0,pin:0,"read-cookie":0,"write-cookie":0};!function(e){e.GeometryUpdated="geom-update"}(oe||(oe={}));var le=s(57905);class de extends le.Z{constructor(e){super("Could not load the Safeframe Library with error: ".concat(e),"SafeframeLoadError")}}var ce=s(96467),pe=s.n(ce),ue=s(94576);function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe().postWidth;return Math.min(e,ue.ZP.getInfo().innerWidth)}var he=()=>{var e,t;return void 0!==(null===(e=window.$sf)||void 0===e||null===(t=e.host)||void 0===t?void 0:t.boot)},ve=(e,t,s)=>{var n,i=be(e),a=(null==s?void 0:s.self)&&ge(s.self),o=i&&xe(i);return!!(t===oe.GeometryUpdated&&i&&a&&"true"===(null===(n=i.parentElement)||void 0===n?void 0:n.dataset.isResizable)&&o)&&(fe(i,a),fe(o,a),!0)},ge=e=>{if(!e||!e.w||!e.h)return null;var t=me(pe().postWidth),s=t/e.w;return 1===s?null:{w:t,h:Math.ceil(e.h*s)}},be=e=>document.getElementById("sf_pos_rel_el_".concat(e)),xe=e=>e.querySelector("iframe"),fe=(e,t)=>{e.style.width="".concat(t.w,"px"),e.style.height="".concat(t.h,"px")},je=function(){var e=ie()(se()().mark((function e(){return se()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.$sf){e.next=9;break}return e.next=4,s.e(4526).then(s.t.bind(s,79740,23));case 4:return e.next=6,s.e(7266).then(s.t.bind(s,20999,23));case 6:return e.next=8,s.e(7828).then(s.t.bind(s,99924,23));case 8:new window.$sf.host.Config({renderFile:ae,positions:{},onPosMsg:ve});case 9:return e.next=11,new Promise(((e,t)=>{var s=0,n=()=>he()?e():s>=10?t("Exceeded max attempts to check for the Safeframe API."):(s+=1,void setTimeout(n,1e3));n()}));case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(0),new de(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();class Ce extends c.Component{constructor(){super(...arguments),o()(this,"createHtmlField",(()=>{var e=this.props,t=e.frameUrl,s=e.conf,n=e.html,i=JSON.stringify(s);if(t)return'\n        {\n          "id" : "'.concat(s.id,'",\n          "html" : "<script src=\\"').concat(t,'\\"><\/script>",\n          "conf" : ').concat(i,"\n        }\n        ");if(n){var a=JSON.stringify(n);return'\n        {\n          "id" : "'.concat(s.id,'",\n          "html" : ').concat(a,',\n          "conf" : ').concat(i,"\n        }\n        ")}return""}))}componentDidUpdate(e){this.props.html===e.html&&this.props.frameUrl===e.frameUrl||(this.generateSafeframeData(),he()&&(window.$sf.host.nuke(this.props.conf.id),window.$sf.host.boot()))}componentDidMount(){var e=this;return ie()(se()().mark((function t(){var s;return se()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.generateSafeframeData(),Ce.HAS_BEEN_INITIALIZED){t.next=9;break}return s=Node.prototype.removeChild,Node.prototype.removeChild=function(e){return e.parentNode!==this?(e.remove&&e.remove(),e):s.call(this,e)},t.next=6,je();case 6:Ce.HAS_BEEN_INITIALIZED=!0,t.next=10;break;case 9:he()&&window.$sf.host.boot();case 10:case"end":return t.stop()}}),t)})))()}componentWillUnmount(){this.props.conf.id&&he()&&window.$sf.host.nuke(this.props.conf.id)}render(){return(0,I.jsx)("div",{id:this.props.conf.id})}generateSafeframeData(){var e=this.props,t=e.adRequestContext.currentAdRequests,s=e.conf.id,n=document.createElement("script");if(n.className="sf_data",n.type="text/x-safeframe",n.innerHTML=this.createHtmlField(),s){var i=t[s];i&&i.setStartTime()}document.body.appendChild(n)}}o()(Ce,"HAS_BEEN_INITIALIZED",!1);const we=(0,q.X9)(Ce,{adRequestContext:!0});const ye=class{constructor(e,t){if("object"==typeof e)if(this.id=e.id,this.dest=e.dest||t,this.bg=e.bg||"transparent",this.tgt=e.tgt||"_top",this.css=e.css,this.w="string"==typeof e.w?String(e.w):Number(e.w)||0,this.h=Number(e.h)||0,this.z=Number(e.z)||0,this.supports=e.supports||re,this.w&&this.h)this.size="string"==typeof this.w?"":"".concat(this.w,"x").concat(this.h);else{var s=e.size;if(s){var n=s.split(/x/gi);this.w=Number(n[0])||0,this.h=Number(n[1])||0,this.size=s}else this.size=""}else this.id=e,this.dest=t}};var Ie,_e=s(14542),Ne=s(22979),Ae=e=>!!e.streamGlobalPosition||e.supplyProviderId===G.E.DASHBOARD;!function(e){e.GOOGLE_NATIVE_DASHBOARD="googleNativeDashboardHydraSource",e.TEADS_DASHBOARD_SUBSEQUENT="teadsDashboard",e.TEADS_DASHBOARD_TOP="teadsDashboardTop",e.TEADS_TEST_DASHBOARD="teadsTestHydraSource",e.TEADS_DEFAULT="teadsHydraSource",e.FLURRY_DEFAULT="flurryHydraSource",e.ONE_MOBILE_DEFAULT="oneMobileHydraSource"}(Ie||(Ie={}));var Te=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G.E.DASHBOARD,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=null==t?void 0:t.placements;if(!a)return"";switch(e){case Ne.db.Google:return a[Ie.GOOGLE_NATIVE_DASHBOARD].adPlacementId;case Ne.db.Teads:return i.teadsTestPlacement?a[Ie.TEADS_TEST_DASHBOARD].adPlacementId:s===G.E.DASHBOARD?void 0!==n&&n<=3?a[Ie.TEADS_DASHBOARD_TOP].adPlacementId:a[Ie.TEADS_DASHBOARD_SUBSEQUENT].adPlacementId:a[Ie.TEADS_DEFAULT].adPlacementId;case Ne.db.Flurry:return a[Ie.FLURRY_DEFAULT].adPlacementId;case Ne.db.OneMobile:return a[Ie.ONE_MOBILE_DEFAULT].adPlacementId;default:return""}},ke=(e,t)=>{var s,n=t;window.native=window.native||[],null===(s=window.native)||void 0===s||s.push({passbackHandler:()=>{window.top&&window.top.postMessage&&window.top.postMessage('{"flurryMsg": {"noAd": "'.concat(e,'"}}'),"*")},successHandler:()=>{window.top&&window.top.postMessage&&window.top.postMessage('{"flurryMsg": {"adAvailable": "'.concat(e,'"}}'),"*")},errorHandler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t.error,n=void 0===s?"Unknown Flurry Error":s;window.top&&window.top.postMessage&&window.top.postMessage('{"flurryMsg": {"adError": "'.concat(e,'", "errorMsg": "').concat(n,'"}}'),"*")},code:n}),window.apiKey="XQN3HX9KDMPKQNDS5DJK",window.publisherUrl="https://www.tumblr.com/"},Se=function(e,t){var s,n,i,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=null===(s=(n=window).getSuid)||void 0===s?void 0:s.call(n),l={dcn:"8a969588016f6ff76855f7d814460018",pos:t,secure:"1"};r&&(l["u(id)"]=r),o&&(l.us_privacy=o),e&&(l["p(supplyId)"]=e),null===(i=(a=window).admaxAd)||void 0===i||i.call(a,l),setTimeout((()=>{var t=document.querySelector('div[id^="ad"]');if(t){var s,n=Array.from(t.childNodes).find((e=>8===e.nodeType));"No Ads"===(null==n||null===(s=n.textContent)||void 0===s?void 0:s.trim())&&window.top.postMessage('{"oneMobileMsg": {"noAd": "'.concat(e,'"}}'),"*")}else window.top.postMessage('{"oneMobileMsg": {"noAd": "'.concat(e,'"}}'),"*")}),7e3)};const Oe="Qrht9",Pe="TGnTP";var Ee={[Ne.db.Google]:.5926,[Ne.db.Teads]:.5926,[Ne.db.Flurry]:.6852,[Ne.db.OneMobile]:250/300},Re={[Ne.db.Google]:pe().postWidth,[Ne.db.Teads]:pe().postWidth,[Ne.db.Flurry]:pe().postWidth,[Ne.db.OneMobile]:pe().sidebarAdWidth};class Ze extends c.Component{constructor(){super(...arguments),o()(this,"safeFrameScriptMapping",{[Ne.db.Google]:()=>"",[Ne.db.Teads]:e=>'<script src="//a.teads.tv/page/'.concat(e,"/tag?supply_id=").concat(this.props.supplyOpportunityInstanceId,'"><\/script>'),[Ne.db.OneMobile]:e=>{var t,s;return'<script src="'.concat("https://web.ssp.yahoo.com/js/admax/admax_api_https.js",'"><\/script>\n    <script>\n    const supplyOpportunityInstanceId = "').concat(this.props.supplyOpportunityInstanceId,'"\n    const placementId = "').concat(e,'"\n    const ccpaPrivacyConsentString = "').concat((null===(t=this.props.adContext)||void 0===t||null===(s=t.privacy)||void 0===s?void 0:s.ccpaPrivacyString)||"",'"\n    const init = ').concat(Se,"\n    init(supplyOpportunityInstanceId, placementId, ccpaPrivacyConsentString)\n    <\/script>")},[Ne.db.Flurry]:e=>'<script type="text/javascript">\n    (function() {\n      const supplyOpportunityInstanceId = "'.concat(this.props.supplyOpportunityInstanceId,'"\n      const placementId = "').concat(e,'"\n      const init = ').concat(ke,';\n      init(supplyOpportunityInstanceId, placementId)\n    })();\n    <\/script>\n    <script async src="').concat("https://s.yimg.com/dy/ads/".concat("native.js"),'"><\/script>')})}componentWillUnmount(){var e,t=this.props.ad;if((0,Ne.MA)(t)&&t.clientSideAdType===Ne.db.Teads)null===(e=window.teads)||void 0===e||e.cleanup()}render(){var e=this.props,t=e.ad,s=e.presentationStyle,n=e.streamPosition,i=e.supplyOpportunityInstanceId,a=e.onEmpty,o=e.onFilled,r=e.onError;if(!t)return null;var d=this.generateSafeFrameConfig();if((0,Ne.MA)(t)||t.adProviderId===Ne.Rd.TripleliftBanner||(0,Ne.ou)(t)){var c=(0,I.jsx)(we,{conf:d,html:this.generateHTMLFromAd(t)},d.id);if((0,Ne.MA)(t)&&t.clientSideAdType==Ne.db.Google){var p="google_ad_".concat(i,"_").concat(n);c=(0,I.jsx)(E,{slotId:p,onEmpty:a,onFilled:o,onError:r})}return(0,I.jsxs)("div",{style:{width:d.w},"data-is-resizable":(0,Ne.MA)(t)&&!(0,Ne.uY)(t),className:l()(k,{[Oe]:Ae(t)}),children:[(0,I.jsx)(S,{timelineObject:t}),c]})}return(0,Ne.uz)(t)&&s?(0,I.jsx)(_e.Z,{presentationStyle:s,timelineObject:t}):(0,Ne.lR)(t)?(0,I.jsx)("div",{className:Pe,children:(0,I.jsx)(ee,{timelineObject:t})}):null}generateHTMLFromAd(e){var t=this.props,s=t.appContext.features,n=t.adContext.adPlacementConfiguration,i=t.location,a=void 0===i?G.E.DASHBOARD:i,o=t.streamPosition;if((0,Ne.MA)(e)&&e.clientSideAdType in this.safeFrameScriptMapping){var r=Te(e.clientSideAdType,n,a,o,s);return this.safeFrameScriptMapping[e.clientSideAdType](r)}return e&&this.isAdmAd(e)&&"string"==typeof e.adm?null==e?void 0:e.adm:""}generateSafeFrameConfig(){var e,t=this.props,s=t.supplyOpportunityInstanceId,n=t.ad;return e=n&&this.isAdmAd(n)?{w:(null==n?void 0:n.width)||"100%",h:(null==n?void 0:n.height)||"auto"}:{w:me(Re[n.clientSideAdType]||pe().postWidth),h:(0,Ne.MA)(n)&&Ee[n.clientSideAdType]?Math.ceil(Ee[n.clientSideAdType]*me(Re[n.clientSideAdType])):0},new ye(i()({id:((null==n?void 0:n.supplyOpportunityInstanceId)||s)+((null==n?void 0:n.id)||n.adInstanceId),dest:((null==n?void 0:n.supplyOpportunityInstanceId)||s)+((null==n?void 0:n.id)||n.adInstanceId),supports:{"exp-push":1}},e))}isAdmAd(e){return!!(0,Ne.ou)(e)||!(!(0,Ne.lR)(e)||e.adProviderId!==Ne.Rd.TripleliftBanner)}}const Be=(0,q.X9)(Ze,{appContext:!0,adContext:!0});var De,Me=s(26255),Fe=s(171);!function(e){e.NO_FILL="no_fill",e.OTHER="other"}(De||(De={}));var Le={[Ne.db.Google]:"googleNativeDashboardHydraSource",[Ne.db.Teads]:"teadsHydraSource",[Ne.db.Flurry]:"flurryHydraSource",[Ne.db.OneMobile]:"oneMobileHydraSource",[Ne.db.IponWeb]:"iponwebMrecHydraSource",[Ne.db.Post]:"",[Ne.Rd.TripleliftBanner]:"",[Ne.Rd.Smart]:"smartHydraSource"};class He extends c.Component{constructor(){super(...arguments),o()(this,"state",{currentIndex:0,currentClientSideAdType:void 0,served:!1}),o()(this,"adTypeInitMapping",{[Ne.db.Google]:()=>{},[Ne.db.Teads]:e=>{try{var t=this.props,s=t.timelineObject.supplyOpportunityInstanceId,n=t.appContext,i=n.logEvent,a=n.features.teadsLivePlacementNoCollapse,o=this.state.currentAd,r=JSON.parse(e.data);if(!s||!r.tumblrMsg)return;switch(s){case r.tumblrMsg[F.NoAd]:return void(a||this.handleNoAdResponse(Ne.db.Teads));case r.tumblrMsg[F.AdServed]:return void this.handleSuccessfulAdResponse();case r.tumblrMsg[F.TeadsImpression]:i(this.generateAnalyticsEvent({eventName:B.ForeignImpression,ad:o}))}}catch(e){return}},[Ne.db.OneMobile]:e=>{try{var t=JSON.parse(e.data),s=this.props.timelineObject.supplyOpportunityInstanceId;if(!s)return;if(s===t.oneMobileMsg[F.NoAd])this.handleNoAdResponse(Ne.db.OneMobile)}catch(e){return}},[Ne.db.Flurry]:e=>{try{var t=JSON.parse(e.data),s=this.props.timelineObject.supplyOpportunityInstanceId;if(!s)return;switch(s){case t.flurryMsg[F.NoAd]:return void this.handleNoAdResponse(Ne.db.Flurry);case t.flurryMsg[F.AdServed]:return void this.handleSuccessfulAdResponse();case t.flurryMsg[F.AdError]:return void this.handleNoAdResponse(Ne.db.Flurry,t.flurryMsg.errorMsg)}}catch(e){return}}}),o()(this,"fallbackAdMapping",{[G.E.RIGHT_RAIL]:()=>this.props.appContext.features.wordAdsWebAdSource?{Component:Fe.ZP,props:{supplyProviderId:this.props.supplyProviderId}}:null,[G.E.EXPLORE]:()=>this.props.appContext.features.wordAdsWebAdSource?{Component:Fe.ZP,props:{supplyProviderId:this.props.supplyProviderId}}:null,[G.E.COMMUNITY_HUB]:()=>this.props.appContext.features.wordAdsWebAdSource?{Component:Fe.ZP,props:{supplyProviderId:this.props.supplyProviderId}}:null}),o()(this,"getAdToRender",(0,d.Z)(((e,t,s)=>{var n=t||s;return(null==n?void 0:n.id)===(null==e?void 0:e.id)?i()(i()({},n),e):n}))),o()(this,"onBeforeUnload",(()=>{var e,t=this.props,s=t.appContext.logEvent,n=t.timelineObject;if(this.detachAdEventHandlers(this.state.currentAd),0===this.state.currentIndex&&!this.state.currentAd&&((0,Ne.uz)(n)||null!=n&&null!==(e=n.resources)&&void 0!==e&&e.backfill)){var i,a=(0,Ne.uz)(n)?n:null===(i=n.resources)||void 0===i?void 0:i.backfill;s(this.generateAnalyticsEvent({eventName:R.AdDropped,ad:a,dropReason:Z.WaterfallNotUsed}),{sendPayloadImmediately:!0})}})),o()(this,"handleSuccessfulAdResponse",(()=>{var e,t,s=this.state,n=s.currentAd,i=s.currentIndex,a=this.props,o=a.appContext.logEvent,r=a.adContext,l=r.adPlacementConfiguration,d=r.hydraConfigInstanceId,c=a.setProvideEventDetails,p=a.setImpressionsEnabled,u=a.timelineObject;!(0,Ne.uz)(u)&&u.resources?(e=u.resources.clientSideAds,t=u.resources.backfill):(e=[],t=u);var m=e.length,h=this.getCurrentAdRequest();if(h&&(h.setEndTime(),h.generateAdInstance()),(0,Ne.uz)(u)||(o(this.generateAnalyticsEvent({eventName:D.AdRequest,ad:n,adRequestStatus:L.AdFilled})),c((()=>this.generateAnalyticsEvent({eventName:B.Impression,ad:n}).eventDetails)),p(!0),o(this.generateAnalyticsEvent({eventName:R.SupplyOpportunityFilled,ad:n}))),(0,Ne.uz)(n)){var v=this.state.fillId||(0,Me.Z)();V(o,l,n,d,v),this.setState({fillId:v,served:!0})}else this.setState({served:!0});i<=m&&t&&!(0,Ne.uz)(u)&&o(this.generateAnalyticsEvent({eventName:R.AdDropped,ad:t,dropReason:Z.BackfillNotNeeded}))})),o()(this,"handleNoAdResponse",((e,t)=>{var s=this.props.appContext.logEvent,n=this.state,a=n.currentClientSideAdType,o=n.currentAd,r=this.getCurrentAdRequest();null==r||r.setEndTime(),null==r||r.setErrorDetails(t?{error_type:De.OTHER,provider_error_message:t}:{error_type:De.NO_FILL}),s(this.generateAnalyticsEvent(i()({eventName:D.AdRequest,ad:o},t?{adRequestStatus:L.AdError}:{adRequestStatus:L.NoAd}))),a===e&&this.getNextAd()})),o()(this,"generateAnalyticsEvent",(e=>{var t=this.props,s=t.isInstream,n=t.timelineObject,a=t.supplyProviderId,o=t.rootSupplyOpportunityId,r=t.refresh,l=t.adContext,d=l.adPlacementConfiguration,c=l.hydraConfigInstanceId,p=l.adProviderInstanceIdMap,u=t.appContext.features,m=t.dashboardContext.tabId,h=n.streamGlobalPosition,v=e.eventName,g=e.ad,b=e.adRequestStatus,x=e.dropReason,f=void 0===x?Z.BackfillNotNeeded:x,j=i()({tab:m,refresh:r,root_supply_opportunity_instance_id:o},d&&{hydra_signature:d.signature,hydra_config_instance_id:c}),C=this.getCurrentAdRequest(),w=a||G.E.DASHBOARD;switch(Object.values(D).includes(v)||(j.supply_opportunity_instance_id=n.supplyOpportunityInstanceId,j.supply_provider_id=w,s&&(j.stream_session_id=n.streamSessionId,j.stream_global_position=h)),v){case R.MediationOpportunityMissed:j.supply_request_id=null==n?void 0:n.supplyRequestId;break;case R.AdDropped:((0,Ne.N0)(g)||(0,Ne.uz)(g)||(0,Ne.ou)(g))&&(j.ad_provider_id=g.adProviderId,j.ad_provider_placement_id=g.adProviderPlacementId,j.ad_provider_foreign_placement_id=g.adProviderForeignPlacementId,j.ad_provider_instance_id=g.adProviderInstanceId,j.ad_request_id=g.adRequestId,j.supply_opportunity_instance_id=n.supplyOpportunityInstanceId,j.mediation_candidate_id=g.mediationCandidateId,j.ad_instance_id=g.adInstanceId,j.ad_instance_age=this.getAdInstanceAge(g),j.supply_request_id=n.supplyRequestId,j.supply_provider_id=n.supplyProviderId,j.drop_reason=f,j.is_tumblr_sponsored_post=g.isTumblrSponsoredPost?1:0,j.placement_id=g.placementId);break;case B.ForeignImpression:case R.MediationCandidateConsideration:if((0,Ne.MA)(g)||(0,Ne.ou)(g)){if(j.ad_provider_id=(0,Ne.ou)(g)?g.adProviderId:g.clientSideAdType,j.is_tumblr_sponsored_post=0,(0,Ne.MA)(g)){var y=Le[j.ad_provider_id];d&&y&&(j.ad_provider_placement_id=y,j.ad_provider_foreign_placement_id=Te(g.clientSideAdType,d,w,h,u),j.ad_provider_instance_id=p[y])}g.placementId&&(j.placement_id=g.placementId)}(0,Ne.uz)(g)&&(j.ad_provider_id=g.adProviderId,j.is_tumblr_sponsored_post=1,j.ad_provider_placement_id=g.adProviderPlacementId,j.ad_provider_foreign_placement_id=g.adProviderForeignPlacementId,j.ad_provider_instance_id=g.adProviderInstanceId),j.mediation_candidate_id=null==g?void 0:g.mediationCandidateId,j.supply_request_id=n.supplyRequestId,j.supply_provider_id=w;break;case R.SupplyOpportunityFilled:if((0,Ne.MA)(g)||(0,Ne.ou)(g)){if(g.placementId&&(j.placement_id=g.placementId),j.ad_provider_id=(0,Ne.ou)(g)?g.adProviderId:g.clientSideAdType,j.is_tumblr_sponsored_post=0,(0,Ne.MA)(g)){var I=Le[j.ad_provider_id];d&&(j.ad_provider_placement_id=I,j.ad_provider_foreign_placement_id=Te(g.clientSideAdType,d,w,h,u),j.ad_provider_instance_id=p[I])}j.ad_request_id=null==C?void 0:C.adRequestId,j.mediation_candidate_id=g.mediationCandidateId,null!=C&&C.adInstances&&C.adInstances[0]&&(j.ad_instance_id=C.adInstances[0].ad_instance_id,j.ad_instance_age=this.getAdInstanceAge(g)),j.supply_request_id=n.supplyRequestId,j.supply_provider_id=w,g.placementId&&(j.placement_id=g.placementId)}var _=(0,Me.Z)();j.fill_id=_,this.setState({fillId:_});break;case B.Impression:if((0,Ne.MA)(g)||(0,Ne.ou)(g)){if(j.ad_provider_id=(0,Ne.ou)(g)?g.adProviderId:g.clientSideAdType,j.is_tumblr_sponsored_post=0,(0,Ne.MA)(g)){var N=Le[j.ad_provider_id];d&&(j.ad_provider_foreign_placement_id=Te(g.clientSideAdType,d,w,h,u),j.ad_provider_placement_id=N,j.ad_provider_instance_id=p[N])}j.mediation_candidate_id=g.mediationCandidateId,null!=C&&C.adInstances[0]&&(j.ad_instance_id=C.adInstances[0].ad_instance_id,j.ad_instance_age=this.getAdInstanceAge(g)),j.supply_request_id=n.supplyRequestId,j.supply_provider_id=n.supplyProviderId}if(this.state.fillId)j.fill_id=this.state.fillId;else{var A=(0,Me.Z)();j.fill_id=A,this.setState({fillId:A})}j.ad_request_id=null==C?void 0:C.adRequestId;break;case D.AdRequest:if((0,Ne.MA)(g)||(0,Ne.ou)(g)){if(j.ad_provider_id=(0,Ne.ou)(g)?g.adProviderId:g.clientSideAdType,(0,Ne.MA)(g)){var T=Le[j.ad_provider_id];d&&(j.ad_provider_foreign_placement_id=Te(g.clientSideAdType,d,w,h,u),j.ad_provider_placement_id=T,j.ad_provider_instance_id=p[T])}j.ad_instances=null==C?void 0:C.adInstances}j.ad_request_is_success=b===L.AdError?0:1,j.ad_request_id=null==C?void 0:C.adRequestId,j.ads_returned=b===L.AdFilled?1:0,j.ad_request_latency=C&&C.requestEndTime-C.requestStartTime,j.ads_requested=1,b===L.AdError&&(j.ad_request_error_detail=null==C?void 0:C.errorDetails)}return{eventName:v,eventDetails:j}}))}componentDidMount(){window.addEventListener("beforeunload",this.onBeforeUnload),this.determineAdFetch()}componentWillUnmount(){window.removeEventListener("beforeunload",this.onBeforeUnload),this.onBeforeUnload()}componentDidUpdate(e){var t=this.props.appContext.features.rightRailFallback;this.props.timelineObject.supplyOpportunityInstanceId!==e.timelineObject.supplyOpportunityInstanceId&&this.setState((e=>i()({currentIndex:0},t&&{previousAd:e.currentAd||e.previousAd})),(()=>this.determineAdFetch()))}render(){var e=this.props,t=e.children,s=e.supplyProviderId,n=void 0===s?G.E.DASHBOARD:s,i=e.timelineObject,a=i.streamGlobalPosition,o=i.supplyOpportunityInstanceId,r=this.state,l=r.currentClientSideAdType,d=r.currentAd,c=r.served,p=this.getAdToRender(i,d),u=this.getFallBackAd();return(p||u)&&(null==t?void 0:t({supplyOpportunityInstanceId:o,location:n,streamPosition:n===G.E.DASHBOARD?a:void 0,ad:p,fallbackAd:u||{},adServed:c,onFilled:this.handleSuccessfulAdResponse,onEmpty:()=>{this.handleNoAdResponse(l)},onError:()=>{this.handleNoAdResponse(l)}}))}getNextAd(){var e,t,s=this.state,n=s.currentAd,i=s.currentIndex,a=this.props,o=a.timelineObject,r=a.appContext.logEvent,l=(0,Ne.uz)(o)?[o]:(null===(e=o.resources)||void 0===e?void 0:e.clientSideAds)||[],d=(0,Ne.ou)(o)?o:null===(t=o.resources)||void 0===t?void 0:t.backfill,c=l.length;this.detachAdEventHandlers(n);var p=i===c?d:i<c?l[i]:void 0;r(this.generateAnalyticsEvent(p?{eventName:R.MediationCandidateConsideration,ad:p}:0!==l.length||d?{eventName:R.MediationOpportunityMissed}:{eventName:R.SupplyOpportunityMissed}));var u={currentIndex:i+1,currentClientSideAdType:p?p.clientSideAdType||Ne.db.Post:void 0,currentAd:p||void 0};!p||(0,Ne.MA)(p)&&this.adTypeInitMapping[p.clientSideAdType]||(u.served=!0),this.setState(u,(()=>{(0,Ne.uz)(p)&&this.handleSuccessfulAdResponse()})),(0,Ne.uz)(p)||(this.initializeAdEventHandlers(p),this.initializeAdRequest(p))}getFallBackAd(){var e,t,s=this.props,n=s.supplyProviderId;return(0,s.isApproachingView)()&&n&&n in this.fallbackAdMapping?null===(e=(t=this.fallbackAdMapping)[n])||void 0===e?void 0:e.call(t):null}initializeAdRequest(e){var t=this.props,s=t.adRequestContext,n=s.generateNewAdRequest,i=s.clearAdRequest,a=t.timelineObject.supplyOpportunityInstanceId;e?n(a,(0,Ne.ou)(e)?this.handleSuccessfulAdResponse:void 0):i(a)}initializeAdEventHandlers(e){if((0,Ne.MA)(e)){var t=this.adTypeInitMapping[e.clientSideAdType];t&&window.addEventListener("message",t)}}determineAdFetch(){var e=this.props,t=e.isApproachingView,s=e.setApproachingViewCallback;t()?this.getNextAd():s((()=>this.getNextAd()))}detachAdEventHandlers(e){if((0,Ne.MA)(e)){var t=this.adTypeInitMapping[e.clientSideAdType];t&&window.removeEventListener("message",t)}}getCurrentAdRequest(){var e=this.props,t=e.timelineObject.supplyOpportunityInstanceId;return e.adRequestContext.currentAdRequests[t]}getAdInstanceAge(e){var t;return(0,Ne.MA)(e)?null===(t=this.getCurrentAdRequest())||void 0===t?void 0:t.getAdInstanceAge():(0,Ne.N0)(e)||(0,Ne.ou)(e)?(new Date).getTime()-e.adInstanceCreatedTimestamp:void 0}}var Ue=(0,q.X9)(He,{appContext:!0,adContext:!0,adRequestContext:!0,dashboardContext:!0});const We=(0,T.s)(Ue,!0);var ze=s(86179),qe=s(65214),Ge=s(42580),Ve=s(64633),Je=s(20943),Ke=s(80328);const Ye={tagInfoRow:"u8J1W",tagLink:"MgGEG",tagImage:"ZqH9E",tagDescription:"wVZAK",tagName:"hIUaH",postsCount:"M523y",tagFloatingButton:"hc4QI"};const Qe=(0,v.HJ)((function(e){var t,s,n=e.timelineObject,i=e.appContext,a=i.apiFetch,o=i.isLoggedIn,r=i._t,l=(0,v.bp)().logEvent,d=(0,ze.TH)().pathname,p=(0,c.useState)(void 0),g=A()(p,2),b=g[0],x=g[1],f=null!=b?b:n.isFollowed,j=n.newPostsCount,C=n.newPostsCountInt,w=null!==(t=n.followersCount)&&void 0!==t?t:"0",y=null!==(s=n.followersCountInt)&&void 0!==s?s:0,_=!!n.showFollowersCount,N=!!n.showNewPostsCount,T=null;return N?T=(0,I.jsxs)(m.M2,{comment:"The number of posts this topic has had recently. Placeholder is the count of posts",exemptNumberKeyFromParamCheck:!0,components:{b:(0,I.jsx)("b",{})},params:{newPostsCount:j},number:C,children:[(0,I.jsx)(m.CJ,{children:"[newPostsCount] recent post"}),(0,I.jsx)(m.CN,{children:"[b][newPostsCount][/b] recent posts"})]}):_&&(T=(0,I.jsxs)(m.M2,{comment:"The number of followers this topic has. Placeholder is the count of followers",exemptNumberKeyFromParamCheck:!0,components:{b:(0,I.jsx)("b",{})},params:{followersCount:w},number:y,children:[(0,I.jsx)(m.CJ,{children:"[followersCount] follower"}),(0,I.jsx)(m.CN,{children:"[b][followersCount][/b] followers"})]})),(0,I.jsxs)("div",{className:Ye.tagInfoRow,children:[(0,I.jsxs)(u.Z,{className:Ye.tagLink,tagName:n.hubName,onClick:()=>{l({eventName:h.J.SearchResultsTagElementTap,eventDetails:{tag:n.hubName}})},children:[(0,I.jsx)("div",{className:Ye.tagImage,children:(0,I.jsx)(H.pC,{imageResponse:[{url:n.image,width:pe().desktopPostAvatarSize,height:pe().desktopPostAvatarSize}],isSquare:!0,altText:n.hubName,sizes:"".concat(pe().desktopPostAvatarSize,"px")})}),(0,I.jsxs)("div",{className:Ye.tagDescription,children:[(0,I.jsxs)("div",{className:Ye.tagName,children:["#",n.hubName]}),(0,I.jsx)("div",{className:Ye.postsCount,children:T})]})]}),(0,I.jsx)("div",{className:Ye.tagFloatingButton,children:(0,I.jsx)("a",{className:Ye.tagFollowButton,onClick:e=>{o&&(null==e||e.preventDefault(),f?(0,Je.to)(a,n.hubName,"search").fetch().then((()=>x(!1))):(0,Je.Wr)(a,n.hubName,"search").fetch().then((()=>x(!0))))},href:(0,qe.gZ)({formToShow:Ge.c.Register},{redirect_to:d,source:(0,Ke.Z)(Ve.yy.HubsRelatedTagsFollowButton)}),children:r(f?"Unfollow":"Follow")})})]},n.id)}));var Xe=s(51197),$e=s(79615),et=s(64560),tt=s(87517),st=s(51400),nt=s(45051);const it="Te4Pg",at="RUFdS",ot="YEJRy",rt="GVCZ4",lt="CFBrV",dt="bdzlZ";class ct extends c.Component{constructor(){super(...arguments),o()(this,"renderOption",((e,t,s,n)=>{var a=e.text,o=e.displayType,r=e.link,d=r.type,c=r.href,p={className:l()(rt,{[lt]:o===Ne.pI.Selected,[dt]:o===Ne.pI.Discreet}),key:a,label:a},u={};s&&t&&(u.backgroundColor=o===Ne.pI.Selected?n:t,u.color=o===Ne.pI.Selected?t:n);var m=null,h=()=>{this.onActionClick(d,e)};switch(d){case et.U.Web:m=(0,I.jsx)("a",i()(i()({},p),{},{href:c,target:"_blank",rel:"noopener",onClick:h,style:u,children:a}));break;case et.U.Action:m=(0,I.jsx)($e.Z,i()(i()({},p),{},{style:u,onClick:h,children:a}))}return m})),o()(this,"getDismissOnClick",(e=>e.onTap===Ne.sq.Dismiss?this.dismiss:nt.Z)),o()(this,"dismiss",(e=>{var t=this.props,s=t.timelineObject,n=t.timelineContext.onRemoveTimelineObject,i=t.toastContext.toggleToast;null==n||n({id:s.id}),null!=e&&e.response&&(null==i||i(e.response.message))})),o()(this,"onActionClick",((e,t)=>{var s=(0,st.w)(this.props.timelineObject),n=this.props.appContext.apiFetch;switch(this.logOptionEvent(t.onTap===Ne.sq.Dismiss,t.text,null==s?void 0:s.bannerId),e){case et.U.Web:this.getDismissOnClick(t)();break;case et.U.Action:var i=(0,tt.Z)(t.link,n,this.getDismissOnClick(t));i&&i()}})),o()(this,"logOptionEvent",((e,t,s)=>{this.props.appContext.logEvent({eventName:h.J.BannerActionClick,eventDetails:{is_dismiss:e,action_label:t,banner_id:s}})}))}render(){var e=this.props.timelineObject,t=(0,st.w)(e);if(!t)return null;var s=t.title,n={};return t.backgroundColor&&t.textColor&&(n.backgroundColor=t.backgroundColor,n.color=t.textColor),(0,I.jsxs)("div",{className:it,style:n,children:[(0,I.jsx)("h3",{className:at,children:s}),this.renderOptions()]})}renderOptions(){var e=this.props.timelineObject,t=(0,st.w)(e),s=t.options,n=t.buttonColor,i=t.backgroundColor,a=t.textColor;return s&&0!==s.length?(0,I.jsx)("div",{className:ot,children:s.map((e=>this.renderOption(e,n,i,a)))}):null}}var pt=(0,q.X9)(ct,{appContext:!0,toastContext:!0,timelineContext:!0});const ut=(0,T.s)(pt);var mt=s(98384);const ht={answerTimeBanner:"tDrb8",leftContent:"r46S_",image:"EhYXO"};const vt=(0,T.s)((e=>{var t,s=e.timelineObject,n=s.text,i=s.iconUrl,a=s.links,o=s.placementId,r=e.appContext.logEvent,l=(0,c.useCallback)((()=>{r({eventName:h.J.Click,eventDetails:{placement_id:o}})}),[r,o]),d=i?[{url:i,height:64,width:64}]:null;return(0,I.jsxs)("a",{className:ht.answerTimeBanner,href:null===(t=a.destination)||void 0===t?void 0:t.href,target:"_blank",rel:"noopener",onClick:l,children:[(0,I.jsxs)("div",{className:ht.leftContent,children:[d&&(0,I.jsx)("figure",{className:ht.image,children:(0,I.jsx)(H.pC,{sizes:"25px",imageResponse:d,isSquare:!0})}),(0,I.jsx)("div",{className:ht.description,children:n})]}),(0,I.jsx)("div",{className:ht.caret,children:(0,I.jsx)(mt.iL,{colors:{primary:b().paletteTransparentWhite65},size:{height:13,width:13}})})]})}));var gt=s(73792),bt=s(57475),xt=s(33264);const ft="wtNDp",jt="r6SOU";const Ct=e=>{var t=e.className,s=e.rowTheme,n=e.avatar,a=e.avatarShape,o=e.blogName,r=e.blogTitle,d=e.blogUrl,c=e.onFollow,p=e.isFollowed,u=(0,I.jsx)(bt.Z,{following:!!p,blogName:o,blogUrl:d,onFollow:c,className:l()(xt.Z.blogRowFollowButton,jt),showUnfollowText:!0}),m={avatar:n,avatarShape:a,blogName:o,blogTitle:r,blogUrl:d};return(0,I.jsx)("div",{className:l()(ft,t),children:(0,I.jsx)(gt.ZP,i()(i()({},m),{},{floatingButton:u,theme:s||gt.CK.Dark,openBlogCard:gt.T6.Body,isMobile:!1}))})},wt="l6TJ6";const yt=(0,v.HJ)((function(e){var t,s=e.timelineObject,n=e.appContext.isLoggedIn,i=(0,c.useState)(void 0),a=A()(i,2),o=a[0],r=a[1],l=s.resources[0];if(!l)return null;var d=null!=o?o:l.followed;return(0,I.jsx)(Ct,{className:wt,avatar:l.avatar,avatarShape:null===(t=l.theme)||void 0===t?void 0:t.avatarShape,blogName:l.name,blogTitle:l.title,blogUrl:l.url,isFollowed:d,onFollow:()=>{n&&r(!d)}},s.id)}));const It=(0,v.HJ)((function(e){var t,s=e.timelineObject,n=e.appContext.isLoggedIn,i=(0,c.useState)(void 0),a=A()(i,2),o=a[0],r=a[1],l=s.resources[0];if(!l)return null;var d=null!=o?o:l.followed;return(0,I.jsx)(Ct,{avatar:l.avatar,avatarShape:null===(t=l.theme)||void 0===t?void 0:t.avatarShape,blogName:l.name,blogTitle:l.title,blogUrl:l.url,isFollowed:d,onFollow:()=>{n&&r(!d)},rowTheme:gt.CK.BlogTheme},s.id)}));var _t=s(30420);const Nt={ctaCard:"YPDbZ",ctaContent:"vUbJS",withImage:"Qb2yW",text:"oPeFl",textPositionTop:"c49bG",textPositionBottom:"u0WK9",button:"KQzUb",ctaAction:"ZGCkJ"};const At=e=>{var t,s,n,i=e.ctaCard,a=e.onActionClick,o=e.isDoingAction,r=void 0!==o&&o,d=!(null===(t=i.image)||void 0===t||!t.response),c=(null===(s=i.image)||void 0===s?void 0:s.textPosition)||Ne.Bk.Middle;return(0,I.jsxs)("div",{className:Nt.ctaCard,children:[(0,I.jsxs)("div",{className:l()(Nt.ctaContent,{[Nt.withImage]:d,[Nt.textPositionTop]:c===Ne.Bk.Top,[Nt.textPositionMiddle]:c===Ne.Bk.Middle,[Nt.textPositionBottom]:c===Ne.Bk.Bottom}),children:[(null===(n=i.image)||void 0===n?void 0:n.response)&&(0,I.jsx)(H.Sw,{imageResponse:i.image.response,altText:i.text,sizes:""}),(0,I.jsx)("p",{className:Nt.text,children:i.text})]}),(0,I.jsx)($e.Z,{disabled:r,className:Nt.ctaAction,onClick:a,wrapperClassName:Nt.button,children:i.buttonText})]})};var Tt=s(74446);const kt="AYRVj",St="jCB92",Ot="FYQEO",Pt="HIc07";const Et=e=>{var t=e.timelineObject,s=t.campaignName,n=t.dismissal,a=t.elements,o=t.id,r=(0,c.useState)(!1),d=A()(r,2),p=d[0],u=d[1],m=(0,c.useState)(0),b=A()(m,2),x=b[0],f=b[1],j=(0,v.bp)(),C=j._t,w=j.logEvent,y=j.apiFetch,_=(0,Tt.i)().onRemoveTimelineObject,N=()=>a[x],T=e=>{w({eventName:h.J.TimeLineCTAClick,eventDetails:{is_dismissal:e,campaign_name:s,card_index:x}})},k=()=>_({id:o}),S=()=>{var e=N().action;if(T(!1),e)if(e.type===et.U.Web){var t=n.options[0];O(t.link,P)}else O(e,E);else E()},O=(e,t)=>{u(!0),(0,tt.Z)(e,y,t)()},P=()=>{var e=N().action.href;e&&window.location.assign(e)},E=()=>{a.length===x+1?k():(u(!1),f(x+1))};return(0,I.jsxs)("div",{className:kt,children:[a.map(((e,t)=>(0,I.jsx)("div",{className:l()(St,{[Ot]:t===x}),children:(0,I.jsx)(At,{isDoingAction:p,ctaCard:e,onActionClick:S})},t))),(0,I.jsx)($e.Z,{disabled:p,className:Pt,onClick:()=>{var e=((e,t)=>{var s=i()(i()({},e.bodyParams),{},{cardIndex:t.toString()});return i()(i()({},e),{},{bodyParams:s})})(n.options[0].link,x);T(!0),O(e,k)},label:C("Close"),children:(0,I.jsx)(_t.Z,{colors:{primary:g.paletteTransparentWhite13}})})]})};var Rt=s(13911);const Zt=s.p+"src/assets/images/tour-guide/heart border 1-4729e853.svg",Bt=s.p+"src/assets/images/tour-guide/heart border 2-75fd75aa.svg",Dt=s.p+"src/assets/images/tour-guide/reblog border 1-c1d9d794.svg",Mt=s.p+"src/assets/images/tour-guide/reblog border 2-c93a5638.svg";var Ft=s(34570),Lt=s(56305);const Ht={celebration:"t3dLo",heading:"D1IY6",body:"y7aw1",button:"ZKWeK"};const Ut=e=>{var t,s,n=e.timelineObject,i=n.celebrationType,a=n.title,o=n.body,r=n.button,l=(0,v.bp)().logEvent;switch(i){case"first_like":t=Zt,s=Bt;break;case"first_reblog":t=Dt,s=Mt}return(0,I.jsxs)("div",{className:Ht.celebration,children:[t&&(0,I.jsx)("img",{className:Ht.topImage,alt:"",src:t}),(0,I.jsx)("h1",{className:Ht.heading,children:(0,I.jsx)(Ft.Z,{text:a})}),(0,I.jsx)("p",{className:Ht.body,children:o}),r&&(0,I.jsx)(Lt.Z,{onClick:()=>{l({eventName:h.J.CelebrationCTAClicked,eventDetails:{celebrationType:i}})},href:r.links.tap.href,className:Ht.button,showBlogCard:!1,children:r.label}),s&&(0,I.jsx)("img",{className:Ht.bottomImage,alt:"",src:s})]})};var Wt=s(20583);const zt="r64Rl",qt="ndiCy",Gt="h6feK";const Vt=e=>{var t=e.timelineObject,s=t.lineColor,n=t.labelContentBlock,i={borderColor:s};return(0,I.jsxs)("div",{className:zt,children:[(0,I.jsx)("div",{className:Gt,style:i}),(0,I.jsx)("div",{className:qt,children:(0,Wt.Q7)(n.text,n.formatting)}),(0,I.jsx)("div",{className:Gt,style:i})]})};var Jt=s(5700);const Kt="XJ7bf",Yt="f3f_v";const Qt=e=>{var t=e.location,s=void 0===t?G.E.DASHBOARD:t,n=e.ad,i=e.adServed,a=e.supplyOpportunityInstanceId,o=e.streamPosition,r=e.presentationStyle,d=e.onFilled,c=e.onEmpty,p=e.onError;return(0,I.jsxs)("div",{className:l()(Kt,{[Yt]:!i}),children:[n&&!(0,Ne.uz)(n)&&(0,I.jsx)(U.Z,{postState:Jt.hA.Published,showsFollowButton:!1,showsSponsored:!0,isAd:!0,isFollowingReblogger:!1}),(0,I.jsx)(Be,{location:s,streamPosition:o,ad:n,supplyOpportunityInstanceId:a,presentationStyle:r,onFilled:d,onEmpty:c,onError:p})]})};var Xt=s(1445);const $t="hMigf",es="gFol4",ts="R5Hde",ss="zm_kH",ns="vVKEw";const is=e=>{var t=e.timelineObject,s=t.columnCount,n=t.position,i=t.elements,a=t.parentPostId,o=e.onClick;return(0,I.jsx)("div",{className:l()($t,{[es]:"group_top"===n,[ss]:"group_middle"===n,[ts]:"group_bottom"===n}),style:{gridTemplateColumns:"repeat(".concat(s,", 1fr)")},children:i.map((e=>(0,I.jsx)(Xt.Z,{onClick:o,chiclet:e,className:ns,parentPostId:a},e.id)))})};var as=s(1142),os=s(38113),rs=s(43074),ls=s(21148),ds=s(90655),cs=s(26963),ps=s(68715);const us="pafF1";const ms=()=>{var e=(0,v.bp)().logEvent,t=(0,ze.TH)(),s=(0,ze.UO)(),n=(0,cs.b)(t.search),a=(0,ls.Ud)({params:s,path:t.pathname},n,rs.kq),o=(0,ps.w)(i()(i()({},rs.kq),{},{searchTerm:a.searchTerm,selectedTime:ds.Ak.AllTime}),rs.kq);return(0,I.jsx)(os.Z,{to:o,className:us,onClick:()=>{e({eventName:h.J.SearchResultsClearFiltersCtaTap})},children:(0,I.jsx)(m.ZP,{comment:"Action to reset the filters on the search page",children:"Clear filters"})})};var hs=s(4870),vs=s(17709),gs=s(18042),bs=s(9557),xs=s(37236),fs=s(67023),js=s(43684),Cs=s(88926),ws=s(5136),ys=s(92023),Is=s(53);const _s="yH8FA",Ns="D8y52";const As=e=>{var t=e.subscriberInfo,s=t.planOwner,n=t.blogName,i=(0,v.bp)(),a=i._c,o=i.features.newBlogViewRoutes,r=(0,Is.h)().openConversationWindow;return(0,I.jsxs)("div",{className:_s,children:[(0,I.jsx)(ws.Z,{linkTo:(0,ys.SS)({peeprBlogname:n},o),keepDropdownOpenAfterClick:!1,className:Ns,children:a("Menu item to view the blog","View Blog")},"View blog"),(0,I.jsx)(ws.Z,{onClick:()=>{r({selectedBlogName:s,otherParticipantName:n})},keepDropdownOpenAfterClick:!0,className:Ns,children:a("Menu item to message blog","Message")},"Message")]})},Ts="j99wS",ks="bN_1q",Ss="elCGV",Os="xWYkn",Ps="d5xXI",Es="uF5P9",Rs="tGth_",Zs="EWLNr";var Bs=(e,t)=>{var s=e.price,n=e.currencyCode,i=e.periodAbbreviation,a=(0,Cs.T4)(s,n,t);return"".concat(a,"/").concat(i)},Ds=(e,t)=>{var s=e.startTime;return t(new Date(1e3*s),fs.Cx.Notes)};const Ms=e=>{var t=e.subscriberInfo,s=e.subscriberInfo,n=s.avatar,i=s.blogName,a=s.subscription,o=(0,v.bp)(),r=o._getLocaleDateString,l=o._getPriceInCurrency;return(0,I.jsxs)("div",{className:Ts,children:[(0,I.jsxs)("div",{className:ks,children:[(0,I.jsx)(vs.Z,{className:Ss,avatarShape:xs.o.Square,imageResponse:n,dimension:ce.radarAvatarSize,name:i,showBlogCard:!0}),(0,I.jsx)(Lt.Z,{blogName:i,showBlogCard:!0,children:(0,I.jsx)("span",{className:Os,children:i})})]}),(0,I.jsx)("span",{className:Ps,children:Ds(a,r)}),(0,I.jsx)("span",{className:Es,children:Bs(a,l)}),(0,I.jsx)("div",{className:Rs,children:(0,I.jsx)(bs.Z,{type:js.Oj.Click,render:()=>(0,I.jsx)(As,{subscriberInfo:t}),position:js.I2.BottomEnd,width:"216px",height:"auto",isChromeless:!0,children:(0,I.jsx)($e.Z,{wrapperClassName:Zs,children:(0,I.jsx)(gs.b,{colors:{primary:b().paletteGray65}})})})})]})},Fs="HdJYO",Ls="fdt9t",Hs="mncDp",Us="B73mx",Ws="Z8zJd",zs="FzIve",qs="g8mTb",Gs="kmBcT";var Vs=e=>{switch(e.status){case hs.Ti.Cancelled:return(0,I.jsx)(m.ZP,{children:"Cancelled"});case hs.Ti.OnHold:return(0,I.jsx)(m.ZP,{children:"On-Hold"});default:return(0,I.jsx)(m.ZP,{children:"Expired"})}};const Js=e=>{var t=e.subscriberInfo,s=e.subscriberInfo,n=s.avatar,i=s.blogName,a=s.subscription,o=a.status;return(0,I.jsxs)("div",{className:Fs,children:[(0,I.jsxs)("div",{className:Ls,children:[(0,I.jsx)(vs.Z,{className:Hs,avatarShape:xs.o.Square,imageResponse:n,dimension:ce.radarAvatarSize,name:i,showBlogCard:!0}),(0,I.jsx)(Lt.Z,{blogName:i,showBlogCard:!0,children:(0,I.jsx)("span",{className:Us,children:i})})]}),(0,I.jsx)("span",{className:Ws,children:(0,Cs.o$)(a,"endTime")}),(0,I.jsx)("span",{className:zs,children:(0,I.jsx)(Vs,{status:o})}),(0,I.jsx)("div",{className:qs,children:(0,I.jsx)(bs.Z,{type:js.Oj.Click,render:()=>(0,I.jsx)(As,{subscriberInfo:t}),position:js.I2.BottomEnd,width:"216px",height:"auto",isChromeless:!0,children:(0,I.jsx)($e.Z,{wrapperClassName:Gs,children:(0,I.jsx)(gs.b,{colors:{primary:b().paletteGray65}})})})})]})};const Ks=e=>{var t=e.timelineObject,s=t.subscription.status;return s===hs.Ti.Active||s===hs.Ti.Pending||s===hs.Ti.PendingCancel?(0,I.jsx)(Ms,{subscriberInfo:t}):(0,I.jsx)(Js,{subscriberInfo:t})};var Ys=s(50049),Qs=s(59514),Xs=s(6790),$s=s(73078),en=s(51416);const tn="UPJCY",sn="RKpvd",nn="yi1kb",an="_IvWq",on="dnt9O";const rn=e=>{var t=e.onDismiss,s=e.onCancelClick,n=e.memberPerks,i=e.blogName,a=e.subscription,o=(0,v.bp)()._t,r=(0,Cs.o$)(a,"nextBillingTime");return(0,I.jsxs)(Qs.Z,{centerContent:!0,onGlassClick:t,children:[(0,I.jsx)(Xs.ZP,{disable:Xs.z9}),(0,I.jsx)($s.Z,{className:tn,title:o("Now wait just a minute"),body:(0,I.jsxs)("div",{children:[o("Are you sure you want to stop supporting %1$s? You'll miss out on exclusive content plus...",[i]),(0,I.jsx)("div",{className:sn,children:null==n?void 0:n.map(((e,t)=>(0,I.jsx)("span",{className:nn,children:(0,I.jsx)(en.Z,{className:an,children:e})},t)))})]}),buttons:[{text:o("Nevermind"),onClick:t,buttonStyle:$s.X.Confirm},{text:o("Cancel subscription"),onClick:s,buttonStyle:$s.X.Cancel}],footer:(0,I.jsx)("div",{className:on,children:o("Your subscription will still be active until the end of your current billing period. Cancellation will be effective on %1$s.",[r])})})]})};var ln=s(81584),dn=s(93613),cn=s(44561),pn=s(37607);const un={items:"wFg_m",item:"tOYA1",button:"uV7We",toggle:"LyzRP",cancelButton:"iiHzj"};const mn=e=>{var t=e.blogName,s=e.subscription,n=(0,v.bp)(),i=n._c,a=n._t,o=n.apiFetch,r=n.getUserInfo,l=n.wwwBaseUrl,d=s.canCancel,p=s.canRepurchase,u=s.isManagedByTumblrpay,h=s.memberPerks,g=(0,Is.h)().openConversationWindow,x=(0,dn.V)().toggleToast,f=(0,c.useState)(!1),j=A()(f,2),C=j[0],w=j[1],y=(0,c.useState)(!1),_=A()(y,2),N=_[0],T=_[1],k=function(){var e=ie()(se()().mark((function e(){var s,n;return se()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:s=e.sent,n=(0,cn.Z)(s.blogs),g({selectedBlogName:null==n?void 0:n.name,otherParticipantName:t});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=()=>{T(!0),(0,pn.Z)(o,t,hs.zF.Month,window.location.host).fetch((e=>{var t=e.response;window.location.assign(t.url)})).catch((()=>{T(!1),x(a("Something went wrong. Please try again."),"error")}))},O=(0,c.useCallback)((()=>{(0,ln.ZP)(o).unsubscribeToBlogMembership(t).fetch((()=>{w(!1),window.location.reload()})).catch((()=>{w(!1),x(a("Something went wrong. Please try again."),"error")}))}),[t,a,x,o]),P=()=>w(!C);return(0,I.jsxs)("div",{className:un.popover,children:[(0,I.jsx)(bs.Z,{width:250,height:"auto",usePortals:!0,position:js.I2.BottomEnd,component:(0,I.jsxs)("div",{className:un.items,children:[(0,I.jsx)(ws.Z,{className:un.item,linkTo:(0,qe.nh)({blogName:t}),children:(0,I.jsx)(m.ZP,{comment:"Button linking to the user's creator profile",children:"View Profile"})}),(0,I.jsx)(ws.Z,{className:un.item,isWrappingButton:!0,children:(0,I.jsx)($e.Z,{wrapperClassName:"".concat(un.button," ").concat(un.messageButton),onClick:k,children:(0,I.jsx)(m.ZP,{comment:"Opens a messaging window to start a conversation with blog owner",children:"Message"})})}),(0,I.jsx)(ws.Z,{className:un.item,linkTo:"".concat(l,"/support"),alwaysExternalLink:!0,children:(0,I.jsx)(m.ZP,{children:"Contact support"})}),d&&u&&(0,I.jsx)(ws.Z,{className:un.item,isWrappingButton:!0,children:(0,I.jsx)($e.Z,{wrapperClassName:"".concat(un.button," ").concat(un.cancelButton),onClick:P,children:(0,I.jsx)(m.ZP,{children:"Cancel subscription"})})}),p&&u&&(0,I.jsx)(ws.Z,{className:un.item,isWrappingButton:!0,isDisabled:N,children:(0,I.jsx)($e.Z,{wrapperClassName:"".concat(un.button),onClick:S,children:(0,I.jsx)(m.ZP,{children:"Renew subscription"})})})]}),children:(0,I.jsx)($e.Z,{wrapperClassName:un.toggle,label:i("Opens a menu containing a list of actions to perform on a subscription","Subscription actions"),children:(0,I.jsx)(gs.b,{colors:{primary:b().paletteGray65}})})}),C&&(0,I.jsx)("div",{className:un.cancellationContainer,children:(0,I.jsx)(rn,{memberPerks:h,subscription:s,onDismiss:P,onCancelClick:O,blogName:t})})]})},hn="lwm3X",vn="YK1By",gn="Ndj6c",bn="Ju3ao",xn="yQEkv",fn="Tk6kK",jn="CgUNj",Cn="KCnB5",wn="bs37e",yn="WIcuN";const In=e=>{var t=e.subscriptionInfo,s=t.avatar,n=t.blogName,i=t.subscription,a=i.status,o=(0,v.bp)()._t,r=(0,Cs.VU)(i),d=(0,Cs.o$)(i,"endTime"),c=(0,Cs.o$)(i,"nextBillingTime");return(0,I.jsxs)("div",{className:hn,children:[(0,I.jsxs)("div",{className:vn,children:[(0,I.jsx)(vs.Z,{className:gn,avatarShape:xs.o.Square,imageResponse:s,dimension:ce.subscriptionAvatarSize}),(0,I.jsx)("span",{className:bn,children:n})]}),a!==hs.Ti.PendingCancel&&(0,I.jsx)("span",{className:l()(fn,xn),children:r}),(0,I.jsx)("span",{className:l()(xn,{[Cn]:a!==hs.Ti.PendingCancel,[jn]:a===hs.Ti.PendingCancel}),children:a===hs.Ti.PendingCancel?(0,I.jsx)(m.ZP,{comment:"cancellation effective date",params:{date:d},children:"Cancellation effective [date]"}):c}),(0,I.jsx)("div",{className:wn,children:(0,I.jsx)(mn,{subscription:i,blogName:n})}),a===hs.Ti.PendingCancel&&(0,I.jsx)(Ys.Z,{wrapperClassName:yn,theme:"info",title:o("Your Post+ subscription has been cancelled"),message:(0,I.jsx)(m.ZP,{comment:"Cancellation message",params:{blogname:n,date:d},components:{bold:(0,I.jsx)("strong",{})},children:"This subscription will still be active until the end of your current billing period. Enjoy exclusive +Posts and perks from [blogname] until [bold][date][/bold]."})})]})},_n="MMaPu",Nn="E8t7S",An="vkWQP",Tn="PYsHz",kn="JplSy",Sn="GdfMv",On="bKR7d";const Pn=e=>{var t,s=e.subscriptionInfo,n=s.avatar,i=s.blogName,a=s.subscription,o=a.status,r=(0,Cs.o$)(a,"endTime");switch(o){case hs.Ti.Cancelled:t=(0,I.jsx)(m.ZP,{comment:"cancelled on date",params:{date:r},children:"Cancelled [date]"});break;case hs.Ti.OnHold:t=(0,I.jsx)(m.ZP,{comment:"on-hold effective date",params:{date:r},children:"On-Hold since [date]"});break;default:t=(0,I.jsx)(m.ZP,{comment:"expired on date",params:{date:r},children:"Expired [date]"})}return(0,I.jsxs)("div",{className:_n,children:[(0,I.jsxs)("div",{className:Nn,children:[(0,I.jsx)(vs.Z,{className:An,avatarShape:xs.o.Square,imageResponse:n,dimension:ce.subscriptionAvatarSize}),(0,I.jsx)("span",{className:Tn,children:i})]}),(0,I.jsx)("span",{className:kn,children:t}),(0,I.jsx)("div",{className:On,children:(0,I.jsx)(mn,{subscription:a,blogName:i})}),o===hs.Ti.OnHold&&(0,I.jsx)(Ys.Z,{wrapperClassName:Sn,theme:"info",message:(0,I.jsx)(m.ZP,{children:"This subscription is on hold due to a payment issue. Please check your payment information."})})]})};const En=e=>{var t=e.timelineObject,s=t.subscription.status;return s===hs.Ti.Active||s===hs.Ti.Pending||s===hs.Ti.PendingCancel?(0,I.jsx)(In,{subscriptionInfo:t}):(0,I.jsx)(Pn,{subscriptionInfo:t})};var Rn,Zn=s(83054),Bn=s(26372),Dn=s(41169),Mn=s(83644),Fn=s(19403);!function(e){e.Image="image",e.Video="video"}(Rn||(Rn={}));var Ln=s(19635),Hn=s.n(Ln);const Un="njwip",Wn="fSAfy",zn="Z4Uny",qn="Cewkz",Gn="xACoA",Vn="H4DuS",Jn="erLM8",Kn="RPM5v",Yn="nVX2y";var Qn=["ad.doubleclick.net","creatives.sascdn.com"];class Xn extends c.Component{constructor(){super(...arguments),o()(this,"provideEventDetails",Fn.L),o()(this,"getVideoCrossOrigin",(e=>{var t=e?new URL(e).hostname:"";if(!(Qn.indexOf(t)>-1))return"anonymous"})),o()(this,"renderVideoTakeover",(e=>{var t=this.props.timelineObject,s=t.text,n=t.sponsoredDayVideoDisableAutoLooping,i=t.sponsoredDayVideoDisableSound,a=e.height,o=e.width,r=e.url,d={height:a,width:o,url:r};return(0,I.jsxs)(I.Fragment,{children:[this.renderCTALinkContent((0,I.jsx)("div",{className:qn,style:{paddingBottom:"".concat(a/o*100,"%")},children:(0,I.jsx)("div",{className:l()(Gn,k),children:(0,I.jsx)(Dn.Z,{media:d,minHeight:a/o*100,hasNoMaxUndockedHeight:!0,isVideoSponsoredDay:!0,disableAutolooping:n,soundDisabled:i,useViewabilityTracker:!0,timelineObject:t,playerStyle:{borderRadius:Hn().borderRadiusForSmallElements},videoElementProps:{crossOrigin:this.getVideoCrossOrigin(r)}})})}),this.logClickOnBanner(h.J.VideoClickThrough)),this.renderCTALinkContent((0,I.jsx)("div",{className:Jn,children:s}),this.logClickOnButton,Vn),this.renderSponsoredIndicator()]})})),o()(this,"renderImageTakeover",(e=>{var t=this.props.timelineObject.text,s=!t||0===t.trim().length,n=(0,I.jsxs)(I.Fragment,{children:[(0,Ne.nJ)(this.props.timelineObject)&&(0,I.jsx)(S,{timelineObject:this.props.timelineObject}),(0,I.jsx)(Zn.Z,{imageResponse:e,sizes:"(max-width: ".concat(pe().phoneResponsiveMaxBreakpoint,"px) 100vw, ").concat(pe().postWidth,"px"),className:Yn})]});return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:l()(Un,k),style:{paddingBottom:"40%"},children:[this.renderCTALinkContent(n,this.logClickOnBanner(h.J.PhotoClickThrough),zn),this.renderSponsoredIndicator()]}),!s&&this.renderCTALinkContent((0,I.jsx)("div",{className:Jn,children:t}),this.logClickOnButton,Vn)]})})),o()(this,"renderCTALinkContent",((e,t,s)=>{var n=this.props.timelineObject,a=n.sponsoredDayClickthrough,o=n.blog,r={children:e,onClick:t,className:s};return a&&o?(0,I.jsx)(Lt.Z,i()({blogName:o.name,blog:o,showBlogCard:!1},r)):(0,I.jsx)("a",i()({href:this.getDestinationLink(),target:"_blank",rel:"noopener"},r))})),o()(this,"renderSponsoredIndicator",(()=>{var e=this.props.timelineObject,t=e.displayType,s=e.sponsoredBadgeUrl;return t===Mn.y.Sponsored&&(0,I.jsx)("div",{className:Kn,children:(0,I.jsx)(Bn.Z,{link:s,color:b().white,showAdFreeLink:!1})})})),o()(this,"logClickOnBanner",(e=>()=>{this.logClick(h.J.Click),this.logClick(e)})),o()(this,"logClickOnButton",(()=>{this.logClick(h.J.Click),this.logClick(h.J.CTAButton)})),o()(this,"logClick",(e=>{var t=this.props,s=t.timelineObject;(0,t.appContext.logEvent)({eventName:e,eventDetails:i()({placement_id:s.placementId},this.provideEventDetails(s,!0))})})),o()(this,"getDestinationLink",(()=>{var e,t;return null===(e=this.props.timelineObject.links)||void 0===e||null===(t=e.destination)||void 0===t?void 0:t.href}))}render(){var e=this.props.timelineObject.assets;if(!e||!this.getDestinationLink())return null;var t=e.reduce(((e,t)=>{switch(t.type){case Rn.Video:e.videoAsset=t;break;case Rn.Image:e.imageAssets.push(t)}return e}),{imageAssets:[]}),s=t.videoAsset,n=t.imageAssets;return s||n.length>0?(0,I.jsx)("div",{className:Wn,children:s?this.renderVideoTakeover(s):!!n.length&&this.renderImageTakeover(n)}):null}}var $n=(0,q.X9)(Xn,{appContext:!0,adContext:!0});const ei=(0,T.s)($n);var ti=s(90891);const si="mkkHd";const ni=e=>{var t=e.timelineObject.button,s=(0,v.bp)().apiFetch,n={};switch(t.links.tap.type){case et.U.Web:n.href=t.links.tap.href,n.className=si;break;case et.U.Action:n.onClick=(0,tt.Z)(t.links.tap,s),n.wrapperClassName=si}return(0,I.jsx)(ti.Z,i()(i()({isRounded:!0},n),{},{children:t.label}))};var ii=s(2541);const ai="HphhS",oi="_TztT";const ri=e=>{var t=e.timelineObject,s=t.text,n=t.highlightText,i=t.links,a=t.alignment,o=[s];if(n){var r=new RegExp("(".concat((0,ii.h)(n),")"),"gi");o=s.split(r).reduce(((e,t,s)=>{if(!t)return e;var i=t.toLowerCase()===n.toLowerCase()?(0,I.jsx)("span",{"data-testid":"highlight-".concat(s),children:t},s):t;return e.push(i),e}),[])}var d=l()(ai,{[oi]:"center"===a});return null!=i&&i.tap?(0,I.jsx)(Lt.Z,{href:i.tap.href,showBlogCard:!1,className:d,children:o}):(0,I.jsx)("div",{className:d,children:o})};var li=s(25190),di=s(68280),ci=s(58388),pi=s(94522),ui=s(93678),mi=()=>3,hi=(0,d.Z)((e=>({maximumContentHeight:.8*e,maximumContentHeightBufferTolerance:1.2*e})));class vi extends c.Component{constructor(){super(...arguments),o()(this,"state",{hasErrored:!1}),o()(this,"assignRef",(e=>this.ref=e)),o()(this,"getPresentationStyle",((e,t)=>{var s=this.props,n=s.presentationStyle,a=s.displayMode;return n||(a===Ne.mt.Masonry?J.Z.masonry:t?i()(i()({},e===ci.ZP.Desktop?J.Z.desktop:J.Z.mobile),this.getTruncationStyle()):e===ci.ZP.Desktop?J.Z.desktop:J.Z.mobile)})),o()(this,"toggleExpanded",(()=>{this.props.toggleExpandedInGrid&&this.props.toggleExpandedInGrid(this.props.timelineObject,mi())})),o()(this,"getTruncationStyle",(()=>{var e=this.props.clientInnerHeight;return e?hi(e):{}})),o()(this,"handleGridViewClick",(e=>{e.preventDefault(),this.toggleExpanded()}))}shouldComponentUpdate(e,t){return!(0,pi.X)(e,this.props)||t.hasErrored!==this.state.hasErrored}componentDidCatch(e){this.setState({hasErrored:!0});var t=this.props.timelineObject,s=t.id,n=t.objectType,i="[TimelineObject error: object type ".concat(n," with ID ").concat(s,"] ").concat(e.message);window.dispatchEvent(new ErrorEvent("error",{error:e,message:i}))}render(){if(this.state.hasErrored)return null;var e=this.props,t=e.timelineObject,s=e.displayMode;if((0,Ne.xT)(t)&&t.isNsfw&&!t.blog.isMember)return null;switch(s){case Ne.mt.Grid:return this.renderInGrid();case Ne.mt.List:default:return this.renderInList()}}renderInList(e){var t=this.props,s=t.timelineObject,n=t.className;if(s.isExpandedInGrid&&!e)return null;var i=(0,Ne.xT)(s)||(0,Ne.ET)(s)?l()(ui.Z.listTimelineObject,{[ui.Z.sortDragDropTarget]:s.queuedState===Jt.SH.Queued,[ui.Z.animateOut]:s.animateOut,[ui.Z.masonryTimelineObject]:this.props.displayMode===Ne.mt.Masonry}):(0,Ne.g5)(s)?l()(ui.Z.listTimelineObject,{[ui.Z.animateOut]:s.animateOut}):(0,Ne.Ry)(s)?l()(ui.Z.listTimelineObject,ui.Z.paywallTimelineObject):ui.Z.listTimelineObject,a=this.renderObjectInList();return a&&(0,I.jsx)("div",{ref:this.assignRef,className:l()(i,n),tabIndex:-1,"data-id":(0,Ne.xT)(s)?s.id:void 0,children:(0,I.jsx)("div",{className:ui.Z.listTimelineObjectInner,tabIndex:-1,children:a})})}renderObjectInList(){var e=this.props,t=e.timelineObject,s=e.displayMode,n=e.isInboxTimeline,i=e.index,a=e.appContext,o=a.features,r=a.logEvent,d=e.relatedPostsContext.addInteractedRelatedPost;return t.displayType===Mn.y.Sponsored&&(t.adInstanceCreationTime=Date.now()),(0,Ne.xT)(t)&&!(0,Ne.uz)(t)?(0,I.jsx)(li.ZP,{children:e=>{var a=e.device;return(0,I.jsx)(_e.Z,{isInInboxTimeline:n,presentationStyle:this.getPresentationStyle(a,!0),timelineObject:t,isNarrow:s===Ne.mt.Masonry,postIndex:null!=i?i:0})}}):(0,Ne.ET)(t)?(0,I.jsx)(Rt.Z,{timelineObject:t,displayMode:s}):(0,Ne.iZ)(t)?(0,I.jsx)(Vt,{timelineObject:t}):(0,Ne.uN)(t)?(0,I.jsx)(ri,{timelineObject:t}):(0,Ne.pN)(t)?(0,I.jsx)(ei,{timelineObject:t}):(0,Ne.g5)(t)?(0,I.jsx)(ut,{timelineObject:t}):(0,Ne.kZ)(t)?(0,I.jsx)(Et,{timelineObject:t}):(0,Ne.LW)(t)?(0,I.jsx)(Ks,{timelineObject:t}):(0,Ne.$n)(t)?(0,I.jsx)(En,{timelineObject:t}):((0,Ne.A6)(t)||(0,Ne.uz)(t))&&o.redpopMoneyballAds?(0,I.jsx)(li.ZP,{children:e=>{var s=e.device;return(0,I.jsxs)(I.Fragment,{children:[(0,Ne.uz)(t)&&t.admMediaType!==Ne.kO.TspVideo&&(0,I.jsx)(S,{timelineObject:t}),(0,I.jsx)(We,{isInstream:!0,timelineObject:t,supplyProviderId:G.E.DASHBOARD,children:e=>{var n=e.ad,i=e.adServed,a=e.supplyOpportunityInstanceId,o=e.location,r=e.streamPosition,d=e.onFilled,c=e.onEmpty,p=e.onError;return(0,I.jsx)("div",{className:l()(ui.Z.listTimelineObject,k),children:(0,I.jsx)(Qt,{ad:n,adServed:i,supplyOpportunityInstanceId:a,location:o,streamPosition:r,presentationStyle:this.getPresentationStyle(s,(0,Ne.uz)(t)&&!!t.isBlazed),onFilled:d,onEmpty:c,onError:p})})}})]})}}):(0,Ne.FP)(t)?(0,I.jsx)(vt,{timelineObject:t}):(0,Ne.lR)(t)?(0,I.jsx)(Be,{ad:t,supplyOpportunityInstanceId:t.supplyOpportunityInstanceId}):(0,Ne.nB)(t)?(0,I.jsx)(yt,{timelineObject:t}):(0,Ne.C7)(t)?(0,I.jsx)(It,{timelineObject:t}):(0,Ne.wQ)(t)?(0,I.jsx)(Qe,{timelineObject:t}):(0,Ne.dp)(t)?(0,I.jsx)(_,{timelineObject:t}):(0,Ne.CA)(t)?(0,I.jsx)(Xe.Z,{timelineObject:t}):(0,Ne.RE)(t)?(0,I.jsx)(ms,{}):(0,Ne.cz)(t)?(0,I.jsx)(is,{timelineObject:t,onClick:e=>{var t=e.postId,s=e.parentPostId,n=e.serveId;r({eventName:h.J.PreviewChicletRowChicletTap,eventDetails:{serve_id:n}}),d(t,s,n)}}):(0,Ne.y3)(t)?(0,I.jsx)(Ut,{timelineObject:t}):(0,Ne.Ih)(t)?(0,I.jsx)(ni,{timelineObject:t}):("production"===di.Z.Development&&console.warn('Unsupported timeline object type "'.concat(t.objectType,'" with ID ').concat(t.id)),null)}renderInGrid(){var e=this.props,t=e.timelineObject,s=e.gridChildren,n=e.hoverContent,i=e.appContext._c,a="calc(".concat(100/mi(),"% - 2px)");return(0,Ne.xT)(t)?t.isExpandedInGrid?(0,I.jsx)("div",{className:ui.Z.expandedGridObjectContainer,children:this.renderInList(!0)}):(0,I.jsxs)("div",{className:ui.Z.gridTimelineObject,ref:this.assignRef,style:{width:a},children:[(0,I.jsx)("button",{className:ui.Z.gridObjectExpandCover,"aria-label":i("Button that shows the full post content when clicked, shown on posts that are very long","Expand"),onClick:this.toggleExpanded,children:(0,I.jsx)("div",{className:ui.Z.gridObjectExpandCoverInner,tabIndex:-1,children:(0,I.jsx)("div",{className:l()(ui.Z.expandedCover,{[ui.Z.expandedCoverIsExpanded]:t.hasExpandedVersionBelowIt})})})}),(0,I.jsx)(as.Z,{tabIndex:-1,timelineObject:t,className:ui.Z.postInGrid,onClick:this.handleGridViewClick,children:s,hoverContent:n,forceHover:t.hasExpandedVersionBelowIt})]}):null}}o()(vi,"defaultProps",{displayMode:Ne.mt.List});const gi=(0,q.CN)(vi,{appContext:!0,relatedPostsContext:!0})},26622:(e,t,s)=>{s.d(t,{Z:()=>X});var n=s(54138),i=s.n(n),a=s(50209),o=s.n(a),r=s(5754),l=s.n(r),d=s(95004),c=s(36485),p=s(26173),u=s(73792),m=s(90855),h=s(52948),v=s(29158),g=s(13434),b=s(26705),x=s(17709),f=s(56305),j=s(25493),C=s(15690),w=s(1142),y=s(64796),I=s(37236),_=s(43523),N=s(12885),A=s(50869),T=s(96467),k=s.n(T);const S="_X19c",O="txEJf",P="_5p5FC",E="xuN5Q",R="ZtkzZ",Z="K0Rj5",B="w6XLs",D="BQhXD",M="nEems";var F=s(2629),L=e=>{var t=e.find((e=>{var t=e.type,s=e.trail,n=e.content;return(0,w.o)({type:t,trail:s,content:n,prioritizeImageBlocks:!0}).type===y.Z}));return t||null};const H=e=>{var t=e.blog,s=e.posts,n=t.theme,i=void 0===n?{}:n,a=t.secondsSinceLastActivity,o=void 0===a?999999:a,r=t.avatar,d=i.avatarShape,c=void 0===d?I.o.Circle:d;if(!s)return null;var p=L(s);return p?(0,F.jsxs)("div",{className:S,style:(0,N.ZP)(t),children:[(0,F.jsxs)("div",{className:O,children:[(0,F.jsx)("div",{className:l()(P,B,c===I.o.Circle?Z:R),children:(0,F.jsx)(f.Z,{blogName:t.name,href:t.url,target:"_blank",rel:"noopener",showBlogCard:!0,blog:t,krakenEventName:_.J.BlogUrlClick,children:(0,F.jsx)(x.Z,{avatarShape:c,imageResponse:r,dimension:T.miniBlogCardAvatarSize,isOnline:(0,A.k)(o),bigStatusIndicator:!0})})}),(0,F.jsx)("div",{className:E,children:(0,F.jsx)(j.ZP,{blog:t,isBlogCardHeader:!0,hideFollowButton:!0,hideHeaderImage:!0})})]}),(0,F.jsx)("div",{className:D,children:(0,F.jsx)(w.Z,{timelineObject:p,prioritizeImageBlocks:!0,openInPeepr:!0,blurImageBackground:!0})}),(0,F.jsx)("div",{className:M,children:(0,F.jsx)(C.Z,{blog:t})})]}):null};var U=s(73702),W=s(10381),z=s(8293),q=s(63665),G=s(22979),V=s(81584),J=s(1308),K=s(78667);const Y={desktopContainer:"B15CE",blogCarousel:"H14Pr",title:"uJiXu",collapseSpacingInMobile:"GmRO3",blogCardWrapper:"I6Y3s",postCardWrapper:"pqNoe"};class Q extends d.Component{constructor(){super(...arguments),o()(this,"renderVertical",(()=>(0,F.jsxs)("div",{className:Y.desktopContainer,children:[this.renderTitle(),(0,F.jsx)(U.ZP,{title:this.getTitle(),rowTheme:this.props.rowTheme||u.CK.Dark,getInitialContent:this.getInitialBlogsContent,getContentFromResponse:this.getContentFromResponse,dismissAllLabel:this.props.appContext._t("Show more blogs")})]}))),o()(this,"renderHorizontal",(()=>{var e=k().timelineMasonryPostWidth+k().timelineMasonryPostSpacing;return(0,F.jsx)(W.U$,{children:t=>{var s=t.width;return(0,F.jsxs)(F.Fragment,{children:[this.renderTitle(),(0,F.jsx)(m.Z,{className:Y.blogCarousel,visibleWidth:s,itemWidth:e,children:(0,F.jsx)(v.Z.Consumer,{children:this.renderHorizontalCarouselContent})})]})}})})),o()(this,"renderHorizontalCarouselContent",(e=>{var t,s,n=e.scrollContainerRef;return(0,F.jsx)(b.ZP,{getInitialPage:this.getInitialContent,getObjectsFromResponse:this.getBlogsFromResponse,getNextLink:this.getBlogsNextLink,direction:q.cU.Right,scrollContainer:n.current,loader:(0,F.jsx)("div",{className:Y.blogCarouselLoader,children:(0,F.jsx)(g.Z,{centerOrientation:g.Q.HorizontalAndVertical})}),children:null!==(t=this.props.appContext)&&void 0!==t&&null!==(s=t.features)&&void 0!==s&&s.postCentricBlogCarousel?this.renderHorizontalPaginatorChildrenPostCentric:this.renderHorizontalPaginatorChildren})})),o()(this,"renderHorizontalPaginatorChildrenPostCentric",(e=>{var t=e.objects;return(0,F.jsx)(F.Fragment,{children:t.map(((e,t)=>L(e.posts)?(0,F.jsx)(h.Z,{index:t,children:(0,F.jsx)("div",{className:Y.postCardWrapper,children:(0,F.jsx)(H,{blog:(0,z.WA)(e),posts:e.posts})})},"".concat(e.name,"-").concat(t)):null))})})),o()(this,"renderHorizontalPaginatorChildren",(e=>{var t=e.objects;return(0,F.jsx)(F.Fragment,{children:t.map(((e,t)=>(0,F.jsx)(h.Z,{index:t,children:(0,F.jsx)("div",{className:Y.blogCardWrapper,children:(0,F.jsx)(p.Z,{blogName:e.name,blog:(0,z.WA)(e),posts:e.posts,isBlogCarousel:!0})})},"".concat(e.name,"-").concat(t))))})})),o()(this,"renderTitle",(()=>{var e=this.getTitle();return e&&(0,F.jsx)("div",{className:l()(Y.title,{[Y.collapseSpacingInMobile]:this.props.collapseSpacingInMobile}),children:e})})),o()(this,"getTitle",(()=>{var e,t;return(null===(e=this.props.timelineObject)||void 0===e||null===(t=e.display)||void 0===t?void 0:t.title)||""})),o()(this,"getInitialContent",(()=>{var e=this.props.timelineObject.elements;return{objects:this.transformCarouselElementsToBlogs(e),nextLink:this.getBlogsNextLink({response:{timeline:this.props.timelineObject}})}})),o()(this,"getInitialBlogsContent",(()=>{var e=this.props.timelineObject.elements;return{blogs:this.transformCarouselElementsToBlogs(e),nextLink:this.getBlogsNextLink({response:{timeline:this.props.timelineObject}})}})),o()(this,"getContentFromResponse",(e=>({blogs:this.getBlogsFromResponse(e),nextLink:this.getBlogsNextLink(e)}))),o()(this,"getBlogsNextLink",(e=>{var t,s,n=null===(t=e.response.timeline)||void 0===t||null===(s=t.links)||void 0===s?void 0:s.next;return null!=n&&n.href?i()(i()({},n),{},{href:(0,c.Z)(null==n?void 0:n.href,(0,J.n9)(V.$b))}):n})),o()(this,"getBlogsFromResponse",(e=>{var t,s=e.response;return this.transformCarouselElementsToBlogs(null===(t=s.timeline)||void 0===t?void 0:t.elements)})),o()(this,"transformCarouselElementsToBlogs",(e=>e.reduce(((e,t)=>{var s=t.resources,n=t.display;if(s){var a=e=>e;null!=n&&n.reason&&(a=e=>i()(i()({},e),{},{recommendationReason:n.reason})),e.push(...s.map(a))}return e}),[])))}render(){return this.props.displayMode===G.mt.List?this.renderHorizontal():this.renderVertical()}}o()(Q,"defaultProps",{collapseSpacingInMobile:!0});const X=(0,K.HJ)(Q)},13911:(e,t,s)=>{s.d(t,{Z:()=>G});var n=s(54138),i=s.n(n),a=s(50209),o=s.n(a),r=s(95004),l=s(68280),d=s(22979),c=s(78667),p=s(96467),u=s(26622),m=s(46675),h=s(33970),v=s.n(h),g=s(90855),b=s(52948),x=s(29158),f=s(96977),j=s(38113),C=s(13434),w=s(26705),y=s(10381),I=s(65214),_=s(43523),N=s(63665),A=s(66498),T=s(14544),k=s(63583),S=s.n(k),O=s(78380);const P="BYDbJ",E="w3kAG",R="SEBxd",Z="GRKki",B="VV6Pq",D="aPzgz",M="D6mkH";var F=s(2629);class L extends r.Component{constructor(){super(...arguments),o()(this,"getInitialContent",(()=>{var e=this.props.timelineObject,t=e.elements,s=e.links;return{objects:t,nextLink:null==s?void 0:s.next}})),o()(this,"getVideoHubsFromResponse",(e=>e.response.timeline.elements)),o()(this,"getNextLink",(e=>{var t,s,n=e.response;return null==n||null===(t=n.timeline)||void 0===t||null===(s=t.links)||void 0===s?void 0:s.next}))}render(){var e=this.props.itemWidth;return(0,F.jsx)(y.U$,{children:t=>{var s=t.width;return(0,F.jsx)(g.Z,{visibleWidth:s,className:P,itemWidth:e,children:(0,F.jsx)(x.Z.Consumer,{children:e=>{var t=e.scrollContainerRef;return(0,F.jsx)(w.ZP,{getObjectsFromResponse:this.getVideoHubsFromResponse,getInitialPage:this.getInitialContent,direction:N.cU.Right,getNextLink:this.getNextLink,scrollContainer:t.current,loader:(0,F.jsx)("div",{className:E,children:(0,F.jsx)(C.Z,{centerOrientation:C.Q.HorizontalAndVertical})}),children:e=>e.objects.map(((e,t)=>(0,F.jsx)(W,{index:t,videoHub:e},e.hubName)))})}})})}})}}var H={[A.Z.cybernetic]:S().paletteAccent,[A.Z.vampire]:S().paletteTransparentWhite65,[A.Z.pumpkin]:S().paletteWhiteOnDark,[A.Z.snowBright]:S().paletteWhiteOnDark,[A.Z.pride]:S().paletteWhiteOnDark},U=function(e){var t,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null===(t=e.links)||void 0===t?void 0:t.tap.href,i=s?(0,O.so)(e.hubName):void 0;if(!i&&n){var a=new URL(n);return{pathname:a.pathname,search:a.search}}var o=null==i?void 0:i.blogName,r=void 0!==(null==i?void 0:i.id)?null==i?void 0:i.id.toString():void 0;return{pathname:(0,I.hc)({hubName:e.hubName,blogName:o,postId:r})}};function W(e){var t,s,n,i,a=e.index,o=e.videoHub,l=(0,T.M)(),d=H[l.name]||o.borderColor,p=(0,r.useState)(null!==(t=null===(s=o.media[0])||void 0===s?void 0:s.url)&&void 0!==t?t:null===(n=o.media[0])||void 0===n||null===(i=n.poster)||void 0===i?void 0:i.url),u=v()(p,2),m=u[0],h=u[1],g=(0,r.useState)(U(o,!1)),x=v()(g,2),C=x[0],w=x[1],y=(0,c.bp)().logEvent,I=()=>{h((e=>{var t;return null!==(t=(e=>{var t,s=null===(t=(0,O.so)(e))||void 0===t?void 0:t.content;if(s){var n,i=s.find(O.Lo);if(i)return null==i||null===(n=i.poster)||void 0===n?void 0:n[0].url;var a,o,r,l,d=s.find(O.Lb);return null!==(a=null==d||null===(o=d.media)||void 0===o?void 0:o[0].url)&&void 0!==a?a:null==d||null===(r=d.media)||void 0===r||null===(l=r[0].poster)||void 0===l?void 0:l.url}})(o.hubName))&&void 0!==t?t:e})),w(U(o))};return(0,r.useEffect)((()=>{var e=e=>{e.key==="video_hub_".concat(o.hubName,"_last_post_viewed")&&I()};return window.addEventListener("storage",e),I(),()=>window.removeEventListener("storage",e)}),[]),(0,F.jsx)(b.Z,{index:a,shouldUpdate:!0,children:(0,F.jsx)("div",{className:R,children:(0,F.jsx)(j.Z,{to:C,onClick:()=>y({eventName:_.J.VideoHubCardTapped,eventDetails:{tag:o.hubName}}),children:(0,F.jsxs)("div",{"data-testid":"".concat(o.hubName,"_bg_carousel_item"),className:Z,style:{backgroundImage:"linear-gradient(360deg, ".concat(k.transparentBlack85,' 0%, transparent 50%), url("').concat(m,'")'),borderColor:d,filter:"drop-shadow(1px 1px 0px ".concat(d,") drop-shadow(2px 2px 0px ").concat(d,")")},children:[(0,F.jsx)("div",{className:M,children:(0,F.jsx)(f.Z,{size:{width:70,height:70}})}),(0,F.jsx)("div",{className:B,children:o.title}),(0,F.jsx)("div",{className:D,children:o.subtitle||(o.tags||[]).map((e=>"#".concat(e))).join(" ")})]})})})})}const z=L;class q extends r.Component{constructor(){super(...arguments),o()(this,"logWarningInConsole",(()=>{var e=this.props.timelineObject;return e&&"production"===l.Z.Development&&(0===e.elements.length?console.warn("Unsupported unknown carousel timeline object type with ID ".concat(e.id)):console.warn('Unsupported carousel timeline object type "'.concat(e.elements[0].objectType,'" with ID ').concat(e.id))),null}))}render(){var e=this.props.timelineObject;return(0,d.eO)(e)?(0,F.jsx)(u.Z,i()(i()({},this.props),{},{timelineObject:e})):(0,d.$w)(e)?(0,F.jsx)(m.Z,i()(i()({},this.props),{},{timelineObject:e,itemWidth:p.tagChicletCarouselItemWith+p.carouselItemSpacing,loaderClass:"carouselLoaderChiclet"})):(0,d.H0)(e)?(0,F.jsx)(m.Z,i()(i()({},this.props),{},{timelineObject:e,itemWidth:p.tagCardCarouselItemWidth+p.carouselItemSpacing,loaderClass:"carouselLoaderTagCard"})):(0,d.h5)(e)?(0,F.jsx)(z,i()(i()({},this.props),{},{timelineObject:e,itemWidth:p.videoHubCardCarouselItemWidth+p.carouselItemSpacing})):(this.logWarningInConsole(),null)}}const G=(0,c.HJ)(q)},46675:(e,t,s)=>{s.d(t,{Z:()=>de});var n=s(54138),i=s.n(n),a=s(33970),o=s.n(a),r=s(50209),l=s.n(r),d=s(95004),c=s(90855),p=s(52948),u=s(29158),m=s(13434),h=s(26705),v=s(48451),g=s(17941),b=s(84473),x=s(43523),f=s(59215),j=s(96467),C=s.n(j),w=s(5984);const y="quD2R",I="jOrvN",_="XtlxR",N="pAmwO",A="FvvEQ";var T=s(2629);class k extends d.Component{constructor(){super(...arguments),l()(this,"renderChicletContent",((e,t)=>{var s=e.objectData.backgroundImage,n=this.props,i=n.tagName,a=n.appContext._c;return s?(0,T.jsx)("div",{className:N,children:(0,T.jsx)(v.Sw,{imageResponse:[{url:s,width:C().tagCardImageWidth,height:C().tagCardImageWidth*C().tagCardImageSizeRatio}],isSquare:!1,altText:a("Alt text for a tag's image. Placeholder is the untranslated tag text.","#%1$s",[i]),sizes:"".concat(2*C().tagCardImageWidth,"px")})},t):null})),l()(this,"logUserClickedOnTagCard",(()=>{var e=this.props.dashboardContext.tabId;this.props.appContext.logEvent({eventName:x.J.ClickedOnTagCard,eventDetails:{tag:this.props.tagName,tab:e}})}))}render(){var e=this.props,t=e.tagName,s=e.posts,n=e.backgroundColor,i=e.borderColor,a=(0,w.ps)(n);return(0,T.jsxs)("div",{className:y,style:{backgroundColor:n,borderColor:i},children:[(0,T.jsxs)(b.Z,{tagName:t,onClick:this.logUserClickedOnTagCard,children:[(0,T.jsx)("div",{className:I,style:{color:a},children:(0,T.jsxs)("span",{children:["#",t]})}),(0,T.jsx)("div",{className:_,children:s.slice(0,2).map(this.renderChicletContent)})]}),(0,T.jsx)(g.Z,{tag:t,isFollowed:!1,pageName:"tagged",className:A,extraStyles:{backgroundColor:a,color:n}})]})}}const S=(0,f.X9)(k,{appContext:!0,dashboardContext:!0});var O=s(10381),P=s(63665),E=s(22979);const R=s.p+"src/assets/videos/carousel/aged_postref-e4cac741.mp4",Z=s.p+"src/assets/videos/carousel/aged_postref-2a1f0006.webm",B=s.p+"src/assets/videos/carousel/changes-91c7a7b0.mp4",D=s.p+"src/assets/videos/carousel/changes-4a0ea398.webm",M=s.p+"src/assets/videos/carousel/explore-9b9aad4a.mp4",F=s.p+"src/assets/videos/carousel/explore-15f47fc4.webm",L=s.p+"src/assets/videos/carousel/for_you-66f88213.mp4",H=s.p+"src/assets/videos/carousel/for_you-c1a9c8bd.webm",U=s.p+"src/assets/videos/carousel/merch-d1e81be9.mp4",W=s.p+"src/assets/videos/carousel/merch-ab8b2df8.webm",z=s.p+"src/assets/videos/carousel/staff_picks-011b4f2c.mp4",q=s.p+"src/assets/videos/carousel/staff_picks-a6a2f284.webm",G=s.p+"src/assets/videos/carousel/tagged-19a5b2a2.mp4",V=s.p+"src/assets/videos/carousel/tagged-eeb34763.webm",J=s.p+"src/assets/videos/carousel/trending-07dcb725.mp4",K=s.p+"src/assets/videos/carousel/trending-9f04dba5.webm";var Y="https://assets.tumblr.com/images/carousel",Q={["".concat(Y,"/aged_postref.gif")]:{mp4:R,webm:Z},["".concat(Y,"/changes.gif")]:{mp4:B,webm:D},["".concat(Y,"/explore.gif")]:{mp4:M,webm:F},["".concat(Y,"/for_you.gif")]:{mp4:L,webm:H},["".concat(Y,"/merch.gif")]:{mp4:U,webm:W},["".concat(Y,"/staff_picks.gif")]:{mp4:z,webm:q},["".concat(Y,"/tagged.gif")]:{mp4:G,webm:V},["".concat(Y,"/trending.gif")]:{mp4:J,webm:K}};var X=s(45051);const $="Oii0L",ee="NWfPW",te="aJgDC",se="TQmoN",ne="T4ddP",ie="NZ8ux",ae="LnVVz";class oe extends d.Component{constructor(){super(...arguments),l()(this,"getInitialContent",(()=>{var e=this.props.timelineObject,t=e.elements,s=e.links;return{objects:t,nextLink:null==s?void 0:s.next}})),l()(this,"getTagsFromResponse",(e=>e.response.timeline.elements)),l()(this,"getNextLink",(e=>{var t,s,n=e.response;return null==n||null===(t=n.timeline)||void 0===t||null===(s=t.links)||void 0===s?void 0:s.next}))}render(){return(0,T.jsx)(O.U$,{children:e=>{var t=e.width;return(0,T.jsx)(c.Z,{visibleWidth:t,className:$,itemWidth:this.props.itemWidth,children:(0,T.jsx)(u.Z.Consumer,{children:e=>{var t=e.scrollContainerRef;return(0,T.jsx)(h.ZP,{getObjectsFromResponse:this.getTagsFromResponse,getInitialPage:this.getInitialContent,direction:P.cU.Right,getNextLink:this.getNextLink,scrollContainer:t.current,loader:(0,T.jsx)("div",{className:this.props.loaderClass,children:(0,T.jsx)(m.Z,{centerOrientation:m.Q.HorizontalAndVertical})}),children:e=>e.objects.map(((e,t)=>{switch(e.objectType){case E.RP.FollowedTag:return(0,T.jsx)(re,{index:t,tag:e,onClick:X.Z},e.tagName);case E.RP.Tag:return(0,T.jsx)(le,{index:t,tag:e},t)}}))})}})})}})}}function re(e){var t,s,n=e.index,i=e.tag,a=e.onClick,r=function(e){var t=new URL(e,"https://invalid.tld/");t.search="";var s=t.href;return Q[s]||void 0}(i.backgroundImage),l=(0,d.useState)(!1),c=o()(l,2),u=c[0],m=c[1];return(0,T.jsx)(p.Z,{index:n,shouldUpdate:!0,children:(0,T.jsx)("div",{className:ie,children:(0,T.jsx)(b.Z,{tagName:i.tagName,className:ee,onClick:a,toOverride:null===(t=i.links)||void 0===t||null===(s=t.tap)||void 0===s?void 0:s.href,children:(0,T.jsxs)("div",{className:te,"data-testid":"chiclet-wrapper",style:i.backgroundImage&&!r?{backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("'.concat(i.backgroundImage,'")'),backgroundSize:"cover",backgroundPosition:"center"}:i.backgroundColor&&!r?{backgroundColor:i.backgroundColor}:void 0,children:[r&&(0,T.jsxs)("video",{className:se,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,crossOrigin:"anonymous",onLoadedMetadata:()=>m(!0),style:u?{display:"block"}:{},children:[(0,T.jsx)("source",{src:r.webm,type:"video/webm"}),(0,T.jsx)("source",{src:r.mp4,type:"video/mp4"})]}),r&&(0,T.jsx)("div",{className:ne}),(0,T.jsx)("span",{children:i.tagName})]})})})},i.tagName)}function le(e){var t=e.index,s=e.tag;return(0,T.jsx)("div",{className:ae,children:(0,T.jsx)(p.Z,{index:t,children:(0,T.jsx)(S,i()({},s))})})}const de=oe},21148:(e,t,s)=>{s.d(t,{BD:()=>u,Ud:()=>m});var n=s(54138),i=s.n(n),a=s(5700),o=s(90655),r=s(44655),l=s(86033),d=s(12871),c={post:{skipComponent:"related_tags,blog_search",limit:20},blog:{limit:20},tag:{limit:20}},p=(e,t,s)=>(0,l.Z)((0,r.o)(e,i()({searchKeyword:s.searchTerm,requestMode:s.searchMode,postType:s.selectedPostType,days:s.selectedTime,timelineType:t},c[t])).fetch()),u=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["blog","post","tag"],n=s.map((s=>p(e,s,t)));return(0,l.Z)(Promise.all(n).then((e=>s.reduce(((t,s,n)=>(t[s]=e[n],t)),{}))),(()=>{n.forEach((e=>e.cancel()))}))};function m(e,t,s){var n=e.params,i=e.path,r=n.selectedPostType,l=n.searchTerm,c=i.split("/"),p=o.fh.find((e=>c.includes(e))),u=(0,d.y)(l),m=t||{},h=m.v,v=m.t,g=Number(v);return{searchTerm:u,selectedTime:g<36e3&&g>=0?g:s.selectedTime,activeTimeline:Object.values(o.D1).includes(h)?h:s.activeTimeline,searchMode:null!=p?p:s.searchMode,selectedPostType:(0,a.IP)(r)?r:void 0}}},2541:(e,t,s)=>{s.d(t,{h:()=>a});var n=/[\\^$.*+?()[\]{}|]/g,i=RegExp(n.source);function a(e){return e&&i.test(e)?e.replace(n,"\\$&"):e}},37607:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(81584);function i(e,t,s,i){return(0,n.ZP)(e).generateCheckoutUrl(t,{period:s,host:i})}},68715:(e,t,s)=>{s.d(t,{w:()=>d});var n=s(54138),i=s.n(n),a=s(65214),o=s(5700),r=s(93099),l=s(64038);function d(e,t){var s=e.searchTerm,n=e.searchMode,d=e.selectedPostType,c=e.selectedTime,p=e.activeTimeline,u=t.searchMode,m=t.selectedPostType,h=t.selectedTime,v=t.activeTimeline,g=i()(i()({searchTerm:s},n!==u&&{searchMode:n}),d!==m&&(0,o.IP)(d)&&{selectedPostType:d}),b=(0,r.Z)((0,l.Z)(a.o_.searchWithOptionalParams,g),g),x=new URLSearchParams;"recent"!==n&&c!==h&&x.set("t",c.toString()),p!==v&&x.set("v",p);var f=x.toString();return f?"".concat(b,"?").concat(f):b}},78380:(e,t,s)=>{s.d(t,{Lb:()=>r,Lo:()=>o,VC:()=>d,so:()=>l});var n=s(59443),i=s(5700),a=s(92895),o=e=>(0,i.gD)(e)&&(0,a.c7)(e),r=e=>{var t,s;return(0,i.RD)(e)&&((null===(t=e.media)||void 0===t?void 0:t[0].type)===n.lu.Gif||(null===(s=e.media)||void 0===s?void 0:s[0].type)===n.lu.Webp)},l=e=>{try{var t,s=null===(t=window.localStorage)||void 0===t?void 0:t.getItem("video_hub_".concat(e,"_last_post_viewed"));if(s){var n=JSON.parse(s);if(n.id&&n.blogName)return n}}catch(e){console.error(e)}},d=(e,t)=>{try{var s,n,i=void 0;if(t)i=JSON.stringify(t),null===(s=window.localStorage)||void 0===s||s.setItem("video_hub_".concat(e,"_last_post_viewed"),i);else null===(n=window.localStorage)||void 0===n||n.removeItem("video_hub_".concat(e,"_last_post_viewed"));window.dispatchEvent(new StorageEvent("storage",{key:"video_hub_".concat(e,"_last_post_viewed"),newValue:i}))}catch(e){console.error(e)}}}}]);