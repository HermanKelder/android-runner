/*! For license information please see 9347-ef82a7bb.js.LICENSE.txt */
(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[9347],{98465:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={overlay:"R5xCG",fire:"_OHHp",fireEmoji:"Q_Mpz",firefall:"hGGIh",igniteSuccess:"Z9CC5",flame:"hnU80",flamefly:"MwgAh",one:"Lyjvv",flame3:"w83t4",two:"HLVUD",flameMain:"aMIf6",flameWobble:"hy7Ja",three:"FKIz9",four:"tiQnH",five:"udvLD"}},20814:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={icon:"OIzSg",title:"YZnLZ",subtitle:"oQs98",container:"GzZtE",igniteProductionOptions:"IOcGh",radioInnerContainer:"QXuBs",price:"XezzS",description:"XjFjI",igniteAlert:"IwJZG",targeting:"VVkpl",targetingText:"xx3Yj",targetingLabel:"R15af",infoText:"_vOn7",modalFooter:"k9mqe",igniteButtons:"QgXyr",igniteExtinguishButton:"rw1Ql",helpButton:"T6LPn",igniteCancelButton:"M4lpn",igniteSuccessButton:"ILRkA",extinguishCancelButton:"PHxLn",extinguishConfirmButton:"aYIQf",hasCustomBg:"DPlCX",successPopoverButton:"s2wDP",loadingText:"amVpp",popoverContainer:"ST0Bu",targetWrapper:"uJ6_Y",popover:"QJf1C",audienceButton:"tiqnP",audienceCaret:"F0ual",dropdownBtnContainer:"MarEW"}},43099:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={masonry:"hyiL2",column:"USr9U"}},74708:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={reorderButton:"_WHTS"}},93678:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={listTimelineObject:"So6RQ",listTimelineObjectInner:"ge_yK",paywallTimelineObject:"hbJOQ",expandedGridObjectContainer:"gODLh",postInGrid:"rCRIW",gridTimelineObject:"tCZnl",expandedCover:"ojpYJ",expandedCoverIsExpanded:"aRqkN",gridObjectExpandCover:"Yxz86",gridObjectExpandCoverInner:"ju4hw",impressionLoggingWrapper:"c79Av",hiddenObserver:"qj1WD",hiddenObserverMiddlePoint:"XJ0js",animateOut:"jYrjr",slideLeft:"EAhje",masonryTimelineObject:"i4aRn",sortDragDropTarget:"RFqS2",merginObject:"osIkK"}},1181:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={header:"KWFLb",headerText:"a3_ie",headerLink:"Y7QU6",cover:"EAugG",content:"Qb2zX",isShowingCover:"vS0xc",coverHeader:"UF4Vo",coverAuthorNotice:"MIDUS",coverButton:"bkPoT",coverContent:"UypGJ",communityLabel:"dR2LL",loader:"ynaAM",communityLabelHeader:"H71ba",missingLabel:"ZK4MW",communityLabelDetail:"Cc6H4"}},40657:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n={header:"BjErQ",dogEarWrapper:"_QcnS",dogEar:"jk63e",dogEarLink:"c7hPc",avatar:"RYkKH",sponsoredSubHeading:"rGP1C",narrowSponsoredSubHeading:"Euban",timestamp:"j8f9p",sponsoredText:"zYMVR",headerContent:"q4Pce",headerSponsored:"CsjTP",headerHasInlineAvatar:"J_Wh8",hidesPosterBlogname:"xjVqt",leftContent:"ZJdm4",leftContentMain:"ffqNn",leftContentSecondary:"pVS0A",innerText:"rJe2J",attribution:"WJ6ij",postAttribution:"vGkyT",reblogAttribution:"jOhmG",rebloggedFromName:"eLzSX",leftContentMainStacked:"nQmSU",followButton:"rmjNp",private:"ps_dU",lock:"rFnRs",rightContent:"KFWnx",headerBloglessAdvertiser:"yWEqH"}},83707:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},o=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],i=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],a=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],r="undefined"!=typeof window&&void 0!==window.document?window.document:{},l="fullscreenEnabled"in r&&Object.keys(n)||o[0]in r&&o||i[0]in r&&i||a[0]in r&&a||[];const d={requestFullscreen:function(e){return e[l[n.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[l[n.requestFullscreen]]},get exitFullscreen(){return r[l[n.exitFullscreen]].bind(r)},get fullscreenPseudoClass(){return":"+l[n.fullscreen]},addEventListener:function(e,t,s){return r.addEventListener(l[n[e]],t,s)},removeEventListener:function(e,t,s){return r.removeEventListener(l[n[e]],t,s)},get fullscreenEnabled(){return Boolean(r[l[n.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return r[l[n.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return r[("on"+l[n.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return r[("on"+l[n.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return r[("on"+l[n.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return r[("on"+l[n.fullscreenerror]).toLowerCase()]=e}}},70817:(e,t)=>{function s(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return a[e];var s,i=String(e);return(s=n[i.toLowerCase()])?s:(s=o[i.toLowerCase()])||(1===i.length?i.charCodeAt(0):void 0)}s.isEventKey=function(e,t){if(e&&"object"==typeof e){var s=e.which||e.keyCode||e.charCode;if(null==s)return!1;if("string"==typeof t){var i;if(i=n[t.toLowerCase()])return i===s;if(i=o[t.toLowerCase()])return i===s}else if("number"==typeof t)return t===s;return!1}};var n=(t=e.exports=s).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(i=97;i<123;i++)n[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)n[i-48]=i;for(i=1;i<13;i++)n["f"+i]=i+111;for(i=0;i<10;i++)n["numpad "+i]=i+96;var a=t.names=t.title={};for(i in n)a[n[i]]=i;for(var r in o)n[r]=o[r]},29193:(e,t,s)=>{"use strict";var n=s(2062);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,s,o,i,a){if(a!==n){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return s.PropTypes=s,s}},67773:(e,t,s)=>{e.exports=s(29193)()},2062:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},84362:(e,t,s)=>{"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(s(50920)),i=n(s(38642)),a=n(s(88249)),r=n(s(45182)),l=n(s(30157)),d=n(s(16544)),c=n(s(54589)),p=n(s(42307)),u=n(s(95004));n(s(67773)),n(s(75714));var h,m=(h=null,function(){if(null!==h)return h;var e,t,s,n=!1;try{window.addEventListener("test",null,(e={},t="passive",s={get:function(){n=!0}},Object.defineProperty(e,t,s)))}catch(e){}return h=n,n}()),g={capture:!1,passive:!1};function v(e){return p({},g,e)}function b(e,t,s){var n=[e,t];return n.push(m?s:s.capture),n}function x(e,t,s,n){e.addEventListener.apply(e,b(t,s,n))}function f(e,t,s,n){e.removeEventListener.apply(e,b(t,s,n))}function C(e,t){e.children,e.target;var s=c(e,["children","target"]);Object.keys(s).forEach((function(e){if("on"===e.substring(0,2)){var n=s[e],o=d(n),i="object"===o;if(i||"function"===o){var a="capture"===e.substr(-7).toLowerCase(),r=e.substring(2).toLowerCase();r=a?r.substring(0,r.length-7):r,i?t(r,n.handler,n.options):t(r,n,v({capture:a}))}}}))}var y=function(e){function t(){return o(this,t),a(this,r(t).apply(this,arguments))}return l(t,e),i(t,[{key:"componentDidMount",value:function(){this.applyListeners(x)}},{key:"componentDidUpdate",value:function(e){this.applyListeners(f,e),this.applyListeners(x)}},{key:"componentWillUnmount",value:function(){this.applyListeners(f)}},{key:"applyListeners",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props,s=t.target;if(s){var n=s;"string"==typeof s&&(n=window[s]),C(t,e.bind(null,n))}}},{key:"render",value:function(){return this.props.children||null}}]),t}(u.PureComponent);y.propTypes={},t.withOptions=function(e,t){return{handler:e,options:v(t)}},t.default=y},74802:(e,t,s)=>{"use strict";var n=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(s(95004)),i=(n(s(75714)),function(e){e.index;var t=e.children;o.default.Children.count(t)});t.default=i},35999:(e,t,s)=>{"use strict";var n=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,s=e.children,n=e.startIndex,a=e.startX,r=e.pageX,l=e.viewLength,d=e.resistance,c=o.default.Children.count(s)-1,p=n+(a-r)/l;d?p<0?p=Math.exp(p*i.default.RESISTANCE_COEF)-1:p>c&&(p=c+1-Math.exp((c-p)*i.default.RESISTANCE_COEF)):p<0?t=((p=0)-n)*l+r:p>c&&(t=((p=c)-n)*l+r);return{index:p,startX:t}};var o=n(s(95004)),i=n(s(36396))},36396:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3}},65901:(e,t,s)=>{"use strict";var n=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(s(95004)),i=function(e,t){var s=!1,n=function(e){return e?e.key:"empty"};if(e.children.length&&t.children.length){var i=o.default.Children.map(e.children,n)[e.index];if(null!=i)i===o.default.Children.map(t.children,n)[t.index]&&(s=!0)}return s};t.default=i},94193:(e,t,s)=>{"use strict";var n=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"checkIndexBounds",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"computeIndex",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"constant",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"getDisplaySameSlide",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return l.default}});var o=n(s(74802)),i=n(s(35999)),a=n(s(36396)),r=n(s(65901)),l=n(s(10185))},10185:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){var s=e%t;return s<0?s+t:s};t.default=s},89635:(e,t,s)=>{"use strict";var n=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){function s(e){var t;return(0,a.default)(this,s),(t=(0,l.default)(this,(0,d.default)(s).call(this,e))).timer=null,t.state={},t.handleInterval=function(){var e=t.props,s=e.children,n=e.direction,o=e.onChangeIndex,i=e.slideCount,a=t.state.index,r=a;"incremental"===n?r+=1:r-=1,(i||s)&&(r=(0,m.mod)(r,i||p.default.Children.count(s))),void 0===t.props.index&&t.setState({index:r}),o&&o(r,a)},t.handleChangeIndex=function(e,s,n){void 0===t.props.index&&t.setState({index:e}),t.props.onChangeIndex&&t.props.onChangeIndex(e,s,n)},t.handleSwitching=function(e,s){t.timer?(clearInterval(t.timer),t.timer=null):"end"===s&&t.startInterval(),t.props.onSwitching&&t.props.onSwitching(e,s)},t.handleVisibilityChange=function(e){e.target.hidden?clearInterval(t.timer):t.startInterval()},t.state.index=e.index||0,t}return(0,c.default)(s,t),(0,r.default)(s,[{key:"componentDidMount",value:function(){this.startInterval()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;"number"==typeof t&&t!==this.props.index&&this.setState({index:t})}},{key:"componentDidUpdate",value:function(e){!(0,u.shallowEqualObjects)({index:e.index,interval:e.interval,autoplay:e.autoplay},{index:this.props.index,interval:this.props.interval,autoplay:this.props.autoplay})&&this.startInterval()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"startInterval",value:function(){var e=this.props,t=e.autoplay,s=e.interval;clearInterval(this.timer),t&&(this.timer=setInterval(this.handleInterval,s))}},{key:"render",value:function(){var t=this.props,s=t.autoplay,n=(t.direction,t.index,t.interval,t.onChangeIndex),a=(0,i.default)(t,["autoplay","direction","index","interval","onChangeIndex"]),r=this.state.index;return s?p.default.createElement(h.default,{target:"document",onVisibilityChange:this.handleVisibilityChange},p.default.createElement(e,(0,o.default)({index:r,onChangeIndex:this.handleChangeIndex,onSwitching:this.handleSwitching},a))):p.default.createElement(e,(0,o.default)({index:r,onChangeIndex:n},a))}}]),s}(p.default.Component);return t.propTypes={},t.defaultProps={autoplay:!0,direction:"incremental",interval:3e3},t};var o=n(s(42307)),i=n(s(54589)),a=n(s(50920)),r=n(s(38642)),l=n(s(88249)),d=n(s(45182)),c=n(s(30157)),p=n(s(95004)),u=(n(s(67773)),s(26152)),h=n(s(84362)),m=s(94193)},32150:(e,t,s)=>{"use strict";var n=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){function s(){var e,t;(0,a.default)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=(0,l.default)(this,(e=(0,d.default)(s)).call.apply(e,[this].concat(o)))).state={},t.handleKeyDown=function(e){var s,n=t.props,o=n.axis,i=void 0===o?"x":o,a=n.children,r=n.onChangeIndex,l=n.slideCount;switch((0,u.default)(e)){case"page down":case"down":"y"===i?s="decrease":"y-reverse"===i&&(s="increase");break;case"left":"x"===i?s="decrease":"x-reverse"===i&&(s="increase");break;case"page up":case"up":"y"===i?s="increase":"y-reverse"===i&&(s="decrease");break;case"right":"x"===i?s="increase":"x-reverse"===i&&(s="decrease")}if(s){var d=t.state.index,c=d;"increase"===s?c+=1:c-=1,(l||a)&&(c=(0,m.mod)(c,l||p.default.Children.count(a))),void 0===t.props.index&&t.setState({index:c}),r&&r(c,d)}},t.handleChangeIndex=function(e,s,n){void 0===t.props.index&&t.setState({index:e}),t.props.onChangeIndex&&t.props.onChangeIndex(e,s,n)},t}return(0,c.default)(s,t),(0,r.default)(s,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({index:this.props.index||0})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;"number"==typeof t&&t!==this.props.index&&this.setState({index:t})}},{key:"render",value:function(){var t=this.props,s=(t.index,t.onChangeIndex,(0,i.default)(t,["index","onChangeIndex"])),n=this.state.index;return p.default.createElement(h.default,{target:"window",onKeyDown:this.handleKeyDown},p.default.createElement(e,(0,o.default)({index:n,onChangeIndex:this.handleChangeIndex},s)))}}]),s}(p.default.Component);return t.propTypes={},t};var o=n(s(42307)),i=n(s(54589)),a=n(s(50920)),r=n(s(38642)),l=n(s(88249)),d=n(s(45182)),c=n(s(30157)),p=n(s(95004)),u=(n(s(67773)),n(s(70817))),h=n(s(84362)),m=s(94193)},47414:(e,t,s)=>{"use strict";var n=s(41463);Object.defineProperty(t,"p6",{enumerable:!0,get:function(){return a.default}});var o=n(s(89635)),i=n(s(32150)),a=n(s(61450))},61450:(e,t,s)=>{"use strict";var n=s(63268),o=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){function s(e){var t;return(0,r.default)(this,s),(t=(0,d.default)(this,(0,c.default)(s).call(this,e))).timer=null,t.state={},t.handleChangeIndex=function(e,s,n){var o=t.props,i=o.slideCount,a=o.onChangeIndex,r=e-s,l=t.state.index+r;i&&(l=(0,h.mod)(l,i)),void 0===t.props.index&&t.setIndex(l,e,r),a&&a(l,t.state.index,n)},t.handleTransitionEnd=function(){t.timer=setTimeout((function(){t.setWindow()}),0),t.props.onTransitionEnd&&t.props.onTransitionEnd()},t.state.index=e.index||0,t}return(0,p.default)(s,t),(0,l.default)(s,[{key:"UNSAFE_componentWillMount",value:function(){this.setWindow(this.state.index)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;if("number"==typeof t&&t!==this.props.index){var s=t-this.props.index;this.setIndex(t,this.state.indexContainer+s,s)}}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"setIndex",value:function(e,t,s){var n={index:e,indexContainer:t,indexStart:this.state.indexStart,indexStop:this.state.indexStop};s>0&&(!this.props.slideCount||n.indexStop<this.props.slideCount-1)&&(n.indexStop+=1),e>n.indexStop&&(n.indexStop=e);var o=n.indexStart-e;o>0&&(n.indexContainer+=o,n.indexStart-=o),this.setState(n)}},{key:"setWindow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.index,t=this.props.slideCount,s=this.props.overscanSlideBefore,n=this.props.overscanSlideAfter;t&&(s>e&&(s=e),n+e>t-1&&(n=t-e-1)),this.setState({indexContainer:s,indexStart:e-s,indexStop:e+n})}},{key:"render",value:function(){for(var t=this.props,s=(t.children,t.index,t.onChangeIndex,t.onTransitionEnd,t.overscanSlideAfter,t.overscanSlideBefore,t.slideCount,t.slideRenderer),n=(0,a.default)(t,["children","index","onChangeIndex","onTransitionEnd","overscanSlideAfter","overscanSlideBefore","slideCount","slideRenderer"]),o=this.state,r=o.indexContainer,l=o.indexStart,d=o.indexStop,c=[],p=l;p<=d;p+=1)c.push(s({index:p,key:p}));return u.default.createElement(e,(0,i.default)({index:r,onChangeIndex:this.handleChangeIndex,onTransitionEnd:this.handleTransitionEnd},n),c)}}]),s}(u.PureComponent);return t.propTypes={},t.defaultProps={overscanSlideAfter:2,overscanSlideBefore:3},t};var i=o(s(42307)),a=o(s(54589)),r=o(s(50920)),l=o(s(38642)),d=o(s(88249)),c=o(s(45182)),p=o(s(30157)),u=n(s(95004)),h=(o(s(67773)),s(94193))},33894:(e,t,s)=>{"use strict";var n=s(63268),o=s(41463);Object.defineProperty(t,"__esModule",{value:!0}),t.getDomTreeShapes=y,t.findNativeHandler=j,t.default=t.SwipeableViewsContext=void 0;var i=o(s(42307)),a=o(s(54589)),r=o(s(50920)),l=o(s(38642)),d=o(s(88249)),c=o(s(45182)),p=o(s(30157)),u=n(s(95004)),h=(o(s(67773)),o(s(75714)),s(94193));function m(e,t,s,n){return e.addEventListener(t,s,n),{remove:function(){e.removeEventListener(t,s,n)}}}var g={direction:"ltr",display:"flex",willChange:"transform"},v={width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"},b={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(e){return"translate(".concat(-e,"%, 0)")},"x-reverse":function(e){return"translate(".concat(e,"%, 0)")},y:function(e){return"translate(0, ".concat(-e,"%)")},"y-reverse":function(e){return"translate(0, ".concat(e,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function x(e,t){var s=t.duration,n=t.easeFunction,o=t.delay;return"".concat(e," ").concat(s," ").concat(n," ").concat(o)}function f(e,t){var s=b.rotationMatrix[t];return{pageX:s.x[0]*e.pageX+s.x[1]*e.pageY,pageY:s.y[0]*e.pageX+s.y[1]*e.pageY}}function C(e){return e.touches=[{pageX:e.pageX,pageY:e.pageY}],e}function y(e,t){for(var s=[];e&&e!==t&&e!==document.body&&!e.hasAttribute("data-swipeable");){var n=window.getComputedStyle(e);"absolute"===n.getPropertyValue("position")||"hidden"===n.getPropertyValue("overflow-x")?s=[]:(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&s.push({element:e,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),e=e.parentNode}return s}var w=null;function j(e){var t=e.domTreeShapes,s=e.pageX,n=e.startX,o=e.axis;return t.some((function(e){var t=s>=n;"x"!==o&&"y"!==o||(t=!t);var i=Math.round(e[b.scrollPosition[o]]),a=i>0,r=i+e[b.clientLength[o]]<e[b.scrollLength[o]];return!!(t&&r||!t&&a)&&(w=e.element,!0)}))}var k=u.createContext();t.SwipeableViewsContext=k;var S=function(e){function t(e){var s;return(0,r.default)(this,t),(s=(0,d.default)(this,(0,c.default)(t).call(this,e))).rootNode=null,s.containerNode=null,s.ignoreNextScrollEvents=!1,s.viewLength=0,s.startX=0,s.lastX=0,s.vx=0,s.startY=0,s.isSwiping=void 0,s.started=!1,s.startIndex=0,s.transitionListener=null,s.touchMoveListener=null,s.activeSlide=null,s.indexCurrent=null,s.firstRenderTimeout=null,s.setRootNode=function(e){s.rootNode=e},s.setContainerNode=function(e){s.containerNode=e},s.setActiveSlide=function(e){s.activeSlide=e,s.updateHeight()},s.handleSwipeStart=function(e){var t=s.props.axis,n=f(e.touches[0],t);s.viewLength=s.rootNode.getBoundingClientRect()[b.length[t]],s.startX=n.pageX,s.lastX=n.pageX,s.vx=0,s.startY=n.pageY,s.isSwiping=void 0,s.started=!0;var o=window.getComputedStyle(s.containerNode),i=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform");if(i&&"none"!==i){var a=i.split("(")[1].split(")")[0].split(","),r=window.getComputedStyle(s.rootNode),l=f({pageX:parseInt(a[4],10),pageY:parseInt(a[5],10)},t);s.startIndex=-l.pageX/(s.viewLength-parseInt(r.paddingLeft,10)-parseInt(r.paddingRight,10))||0}},s.handleSwipeMove=function(e){if(s.started){if(null===w||w===s.rootNode){var t=s.props,n=t.axis,o=t.children,i=t.ignoreNativeScroll,a=t.onSwitching,r=t.resistance,l=f(e.touches[0],n);if(void 0===s.isSwiping){var d=Math.abs(l.pageX-s.startX),c=Math.abs(l.pageY-s.startY),p=d>c&&d>h.constant.UNCERTAINTY_THRESHOLD;if(!r&&("y"===n||"y-reverse"===n)&&(0===s.indexCurrent&&s.startX<l.pageX||s.indexCurrent===u.Children.count(s.props.children)-1&&s.startX>l.pageX))return void(s.isSwiping=!1);if(d>c&&e.preventDefault(),!0===p||c>h.constant.UNCERTAINTY_THRESHOLD)return s.isSwiping=p,void(s.startX=l.pageX)}if(!0===s.isSwiping){e.preventDefault(),s.vx=.5*s.vx+.5*(l.pageX-s.lastX),s.lastX=l.pageX;var m=(0,h.computeIndex)({children:o,resistance:r,pageX:l.pageX,startIndex:s.startIndex,startX:s.startX,viewLength:s.viewLength}),g=m.index,v=m.startX;if(null===w&&!i)if(j({domTreeShapes:y(e.target,s.rootNode),startX:s.startX,pageX:l.pageX,axis:n}))return;v?s.startX=v:null===w&&(w=s.rootNode),s.setIndexCurrent(g);var b=function(){a&&a(g,"move")};!s.state.displaySameSlide&&s.state.isDragging||s.setState({displaySameSlide:!1,isDragging:!0},b),b()}}}else s.handleTouchStart(e)},s.handleSwipeEnd=function(){if(w=null,s.started&&(s.started=!1,!0===s.isSwiping)){var e,t=s.state.indexLatest,n=s.indexCurrent,o=t-n;e=Math.abs(s.vx)>s.props.threshold?s.vx>0?Math.floor(n):Math.ceil(n):Math.abs(o)>s.props.hysteresis?o>0?Math.floor(n):Math.ceil(n):t;var i=u.Children.count(s.props.children)-1;e<0?e=0:e>i&&(e=i),s.setIndexCurrent(e),s.setState({indexLatest:e,isDragging:!1},(function(){s.props.onSwitching&&s.props.onSwitching(e,"end"),s.props.onChangeIndex&&e!==t&&s.props.onChangeIndex(e,t,{reason:"swipe"}),n===t&&s.handleTransitionEnd()}))}},s.handleTouchStart=function(e){s.props.onTouchStart&&s.props.onTouchStart(e),s.handleSwipeStart(e)},s.handleTouchEnd=function(e){s.props.onTouchEnd&&s.props.onTouchEnd(e),s.handleSwipeEnd(e)},s.handleMouseDown=function(e){s.props.onMouseDown&&s.props.onMouseDown(e),e.persist(),s.handleSwipeStart(C(e))},s.handleMouseUp=function(e){s.props.onMouseUp&&s.props.onMouseUp(e),s.handleSwipeEnd(C(e))},s.handleMouseLeave=function(e){s.props.onMouseLeave&&s.props.onMouseLeave(e),s.started&&s.handleSwipeEnd(C(e))},s.handleMouseMove=function(e){s.props.onMouseMove&&s.props.onMouseMove(e),s.started&&s.handleSwipeMove(C(e))},s.handleScroll=function(e){if(s.props.onScroll&&s.props.onScroll(e),e.target===s.rootNode)if(s.ignoreNextScrollEvents)s.ignoreNextScrollEvents=!1;else{var t=s.state.indexLatest,n=Math.ceil(e.target.scrollLeft/e.target.clientWidth)+t;s.ignoreNextScrollEvents=!0,e.target.scrollLeft=0,s.props.onChangeIndex&&n!==t&&s.props.onChangeIndex(n,t,{reason:"focus"})}},s.updateHeight=function(){if(null!==s.activeSlide){var e=s.activeSlide.children[0];void 0!==e&&void 0!==e.offsetHeight&&s.state.heightLatest!==e.offsetHeight&&s.setState({heightLatest:e.offsetHeight})}},s.state={indexLatest:e.index,isDragging:!1,renderOnlyActive:!e.disableLazyLoading,heightLatest:0,displaySameSlide:!0},s.setIndexCurrent(e.index),s}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.transitionListener=m(this.containerNode,"transitionend",(function(t){t.target===e.containerNode&&e.handleTransitionEnd()})),this.touchMoveListener=m(this.rootNode,"touchmove",(function(t){e.props.disabled||e.handleSwipeMove(t)}),{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout((function(){e.setState({renderOnlyActive:!1})}),0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;"number"==typeof t&&t!==this.props.index&&(this.setIndexCurrent(t),this.setState({displaySameSlide:(0,h.getDisplaySameSlide)(this.props,e),indexLatest:t}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var e=this;return{slideUpdateHeight:function(){e.updateHeight()}}}},{key:"setIndexCurrent",value:function(e){if(this.props.animateTransitions||this.indexCurrent===e||this.handleTransitionEnd(),this.indexCurrent=e,this.containerNode){var t=this.props.axis,s=b.transform[t](100*e);this.containerNode.style.WebkitTransform=s,this.containerNode.style.transform=s}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var e,t,s=this,n=this.props,o=(n.action,n.animateHeight),r=n.animateTransitions,l=n.axis,d=n.children,c=n.containerStyle,p=n.disabled,h=(n.disableLazyLoading,n.enableMouseEvents),m=(n.hysteresis,n.ignoreNativeScroll,n.index,n.onChangeIndex,n.onSwitching,n.onTransitionEnd,n.resistance,n.slideStyle),f=n.slideClassName,C=n.springConfig,y=n.style,w=(n.threshold,(0,a.default)(n,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"])),j=this.state,S=j.displaySameSlide,I=j.heightLatest,N=j.indexLatest,P=j.isDragging,T=j.renderOnlyActive,Z=p?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},A=!p&&h?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},E=(0,i.default)({},v,m);if(P||!r||S)e="all 0s ease 0s",t="all 0s ease 0s";else if(e=x("transform",C),t=x("-webkit-transform",C),0!==I){var M=", ".concat(x("height",C));e+=M,t+=M}var L={height:null,WebkitFlexDirection:b.flexDirection[l],flexDirection:b.flexDirection[l],WebkitTransition:t,transition:e};if(!T){var O=b.transform[l](100*this.indexCurrent);L.WebkitTransform=O,L.transform=O}return o&&(L.height=I),u.createElement(k.Provider,{value:this.getSwipeableViewsContext()},u.createElement("div",(0,i.default)({ref:this.setRootNode,style:(0,i.default)({},b.root[l],y)},w,Z,A,{onScroll:this.handleScroll}),u.createElement("div",{ref:this.setContainerNode,style:(0,i.default)({},L,g,c),className:"react-swipeable-view-container"},u.Children.map(d,(function(e,t){if(T&&t!==N)return null;var n,i=!0;return t===N&&(i=!1,o&&(n=s.setActiveSlide,E.overflowY="hidden")),u.createElement("div",{ref:n,style:E,className:f,"aria-hidden":i,"data-swipeable":"true"},e)})))))}}]),t}(u.Component);S.displayName="ReactSwipableView",S.propTypes={},S.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var I=S;t.default=I},26285:(e,t,s)=>{"use strict";var n=s(63268);Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return o.default}});var o=n(s(33894))},26152:(e,t,s)=>{"use strict";function n(e,t){if(e===t)return!0;if(!e||!t)return!1;var s=Object.keys(e),n=Object.keys(t),o=s.length;if(n.length!==o)return!1;for(var i=0;i<o;i++){var a=s[i];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}function o(e,t){if(e===t)return!0;if(!e||!t)return!1;var s=e.length;if(t.length!==s)return!1;for(var n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0}s.r(t),s.d(t,{shallowEqualArrays:()=>o,shallowEqualObjects:()=>n})},75714:e=>{"use strict";var t=function(){};e.exports=t},49515:(e,t,s)=>{"use strict";s.d(t,{Z:()=>N});var n=s(50209),o=s.n(n),i=s(95004),a=s(36343),r=(0,a.q)("badge-ask");r.defaultProps={size:{width:14,height:14}};const l=r;var d=(0,a.q)("badge-blaze");d.defaultProps={size:{width:14,height:14}};const c=d;var p=(0,a.q)("badge-follow");p.defaultProps={size:{width:14,height:14}};const u=p;var h=(0,a.q)("badge-like");h.defaultProps={size:{width:14,height:14}};const m=h;var g=(0,a.q)("badge-mention");g.defaultProps={size:{width:14,height:14}};const v=g;var b=(0,a.q)("badge-reblog");b.defaultProps={size:{width:14,height:14}};const x=b;var f=(0,a.q)("badge-reply");f.defaultProps={size:{width:14,height:14}};const C=f;var y=(0,a.q)("badge-tip");y.defaultProps={size:{width:14,height:14}};const w=y;var j=s(17901);const k="CvcGO",S="D9Rbd";var I=s(2629);class N extends i.Component{render(){var e=this.props,t=e.icon,s=e.backgroundColor;return(0,I.jsx)("div",{className:S,style:{backgroundColor:s},children:t})}}o()(N,"ofType",(e=>{switch(e){case j.w.Reblog:case j.w.Like:case j.w.Reply:case j.w.Follower:case j.w.Ask:case j.w.Tip:case j.w.Blaze:return N[e]();case j.w.UserMention:case j.w.NoteMention:return N.mention();default:return null}})),o()(N,"reblog",(()=>(0,I.jsx)(x,{className:k}))),o()(N,"like",(()=>(0,I.jsx)(m,{className:k}))),o()(N,"reply",(()=>(0,I.jsx)(C,{className:k}))),o()(N,"follower",(()=>(0,I.jsx)(u,{className:k}))),o()(N,"mention",(()=>(0,I.jsx)(v,{className:k}))),o()(N,"ask",(()=>(0,I.jsx)(l,{}))),o()(N,"tip",(()=>(0,I.jsx)(w,{className:k}))),o()(N,"blaze",(()=>(0,I.jsx)(c,{className:k})))},75408:(e,t,s)=>{"use strict";s.d(t,{x:()=>J,Z:()=>K});var n=s(54138),o=s.n(n),i=s(50209),a=s.n(i),r=s(5754),l=s.n(r),d=s(95004),c=s(17709),p=s(79615),u=s(59514),h=s(68144),m=s(62412),g=s(25190),v=s(59215),b=s(63583),x=s.n(b),f=s(78667),C=s(73683),y=s(64186),w=s(68384),j=s(13773);const k="AHkyw",S="N96N2",I="KxZIc",N="D_cxo",P="OfvnG",T="OX4Jm",Z="iGp0T",A="g3qmO",E="Uyky3",M="a5mFW",L="nd0kT";var O=s(2629),R=e=>(0,O.jsx)("div",{className:Z,children:(0,O.jsx)(y.Z,{count:e,style:{color:x().paletteWhite,borderColor:x().paletteWhite}})});const D=function(e){var t=e.isSelected,s=e.onListItemClick,n=e.blog,o=e.pathGenerator,i=e.isMobile,a=e.showUnreadMessagesCount,r=e.showNotificationCount,d=(0,j.B)(),u=d.rerequestPoll,h=d.unreadMessagesByBlog,m=d.notificationCountByBlog,g=e=>{u(),s(e,n)},v=()=>{var e=i?24:16,s=n.title||" ";return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:T,children:[(0,O.jsx)(c.Z,{dimension:36,imageResponse:n.avatar}),!!a&&n.mentionKey&&R(h[n.mentionKey]),!!r&&n.uuid&&R(m[n.uuid])]}),(0,O.jsxs)("div",{className:A,children:[(0,O.jsx)("div",{className:E,children:n.name}),(0,O.jsx)("div",{className:l()(M,{[L]:!n.title}),children:s})]}),t&&(0,O.jsx)("div",{className:I,children:(0,O.jsx)(w.Z,{size:{width:e,height:e}})})]})},b=l()(k,{[P]:i});return o?(0,O.jsx)(C.rU,{className:l()(b,N),onClick:g,to:o(n),state:{selectedBlog:n},children:v()}):(0,O.jsx)(p.Z,{wrapperClassName:b,className:S,onClick:g,label:n.name,children:v()})},F="criTZ",B="ZJtsP",_="tosY3",U="QYM1E";const V=function(e){var t=e.blogs,s=e.selectedBlogName,n=e.isMobile,o=e.onListItemClick,i=e.pathGenerator,a=e.showUnreadMessagesCount,r=e.showNotificationCount,d=(0,f.bp)()._t;return(0,O.jsxs)("div",{className:l()(F,{[U]:n}),children:[n&&(0,O.jsx)("div",{className:B,children:d("Blogs")}),(0,O.jsx)("div",{className:_,children:t.map(((e,t)=>(0,O.jsx)(D,{isSelected:s===e.name,blog:e,onListItemClick:o,pathGenerator:i,isMobile:n,showUnreadMessagesCount:a,showNotificationCount:r},t)))})]})},z="zOAiO",H="lHc1y",W="gcKSf",q="h6_FZ",G="HhrsO",X="wxU_r",Q="SERD7";var J;!function(e){e[e.center=0]="center",e[e.left=1]="left"}(J||(J={}));class Y extends d.Component{constructor(){super(...arguments),a()(this,"state",{isOpen:!1}),a()(this,"renderSelectorArrow",(()=>{var e;return(0,O.jsx)(h.nT,{size:{width:14,height:14},colors:{primary:null!==(e=this.props.textColor)&&void 0!==e?e:x().paletteTransparentWhite65}})})),a()(this,"toggleOpen",(()=>this.setState((e=>({isOpen:!e.isOpen})),(()=>{var e,t;return null===(e=(t=this.props).onToggle)||void 0===e?void 0:e.call(t,this.state.isOpen)})))),a()(this,"onClickListItem",((e,t)=>{e.stopPropagation();var s=this.props.onClickSelectedBlog;this.toggleOpen(),null==s||s(t,e)}))}render(){var e=this.props,t=e.blogs,s=e.children;return(0,O.jsx)(g.ZP,{children:e=>{var n=e.isMobile;return 1===t.length?this.renderBlogName(n):n?(0,O.jsxs)(O.Fragment,{children:[(null==s?void 0:s(this.toggleOpen))||this.renderSelectorElement(n),this.state.isOpen&&(0,O.jsx)(u.Z,{onGlassClick:this.toggleOpen,children:this.renderBlogsList(n)})]}):(0,O.jsx)(m.ZP,{isOpen:this.state.isOpen,toggle:this.toggleOpen,targetWrapperDisplayBlock:!0,width:240,height:"auto",maxHeight:300,component:this.renderBlogsList(n),children:(null==s?void 0:s(this.toggleOpen))||this.renderSelectorElement(n)})}})}renderSelectorElement(e){var t=this.props,s=t.avatarOnly,n=t.align,o=t.selectedBlog,i=t.showUnreadMessagesCount,a=t.showNotificationCount,r=t.appContext._c;return(0,O.jsxs)(p.Z,{label:r("Variable is blog name","Select a blog. Current selection is %1$s",[o.name]),onClick:this.toggleOpen,wrapperClassName:z,className:l()(H,{[X]:n===J.left}),children:[this.renderAvatar(),!s&&this.renderBlogName(e),!s&&this.renderSelectorArrow(),i&&this.renderMessagingBadge(),a&&this.renderActivityBadge()]})}renderMessagingBadge(){var e=this.props,t=e.selectedBlog.mentionKey,s=e.pollerContext,n=s.unreadMessagesCount,o=s.unreadMessagesByBlog;return this.renderBadge(n,o,t)}renderActivityBadge(){var e=this.props,t=e.selectedBlog.uuid,s=e.pollerContext,n=s.notificationCount,o=s.notificationCountByBlog;return this.renderBadge(n,o,t)}renderBadge(e,t,s){var n=s&&t[s]&&1===Object.keys(t).length;return e&&!n?(0,O.jsx)("div",{className:Q}):null}renderAvatar(){var e=this.props,t=e.selectedBlog,s=e.avatarDimension;return e.displayAvatar&&s&&(0,O.jsx)(c.Z,{dimension:s,imageResponse:t.avatar})}renderBlogName(e){var t=this.props,s=t.selectedBlog,n=t.displayAvatar,i=t.maxTextWidth,a=t.textColor;return(0,O.jsx)("div",{className:l()(W,{[G]:n,[q]:e}),style:o()({maxWidth:i},a&&{color:a}),children:s.name})}renderBlogsList(e){var t=this.props,s=t.selectedBlog,n=t.pathGenerator,o=t.blogs,i=t.showUnreadMessagesCount,a=t.showNotificationCount;return(0,O.jsx)(V,{blogs:o,selectedBlogName:s.name,onListItemClick:this.onClickListItem,pathGenerator:n,isMobile:e,showUnreadMessagesCount:i,showNotificationCount:a})}}a()(Y,"defaultProps",{avatarOnly:!1,avatarDimension:25,align:J.center,caretColor:x().paletteTransparentWhite65});const K=(0,v.X9)(Y,{appContext:!0,pollerContext:!0})},3732:(e,t,s)=>{"use strict";s.d(t,{SL:()=>o,mk:()=>n});var n=(0,s(95004).createContext)(void 0),o=(n.Provider,n.Consumer)},66306:(e,t,s)=>{"use strict";s.d(t,{Z:()=>Z});var n=s(54138),o=s.n(n),i=s(50209),a=s.n(i),r=s(5754),l=s.n(r),d=s(95004),c=s(13586),p=s(79615),u=s(36343),h=e=>(0,u.q)("carousel-arrow",{style:{transform:"rotate(".concat(e,"deg)"),transformOrigin:"center"}}),m=h(180),g=h(0);[g,m].forEach((e=>e.defaultProps={size:{width:31,height:50}}));var v=s(43523),b=s(78667),x=s(78093);const f="xXVDM",C="BQiWl",y="EvNuu",w="w9aO4",j="YL2V0",k="DeYmO",S="uFGNN",I="EwcDy",N="Ld7nr";var P=s(2629);class T extends d.Component{constructor(){super(...arguments),a()(this,"state",{currentItemIndex:0}),a()(this,"increment",(()=>{var e=this.props.items.length-1;this.state.currentItemIndex===e&&this.quickWiggle("left"),this.props.appContext.logEvent({eventName:v.J.CarouselSlide,eventDetails:this.props.krakenEventDetails||{}}),this.setState({currentItemIndex:Math.min(this.state.currentItemIndex+1,e)})})),a()(this,"decrement",(()=>{0===this.state.currentItemIndex&&this.quickWiggle("right"),this.props.appContext.logEvent({eventName:v.J.CarouselSlide,eventDetails:this.props.krakenEventDetails||{}}),this.setState({currentItemIndex:Math.max(0,this.state.currentItemIndex-1)})})),a()(this,"focusOnItem",(e=>{e>=0&&e<this.props.items.length&&this.setState({currentItemIndex:e})})),a()(this,"getFocusOnItem",(e=>()=>this.focusOnItem(e))),a()(this,"handleIntersectionChange",(e=>{e&&this.quickWiggle("left")}))}quickWiggle(e){var t=100*this.state.currentItemIndex*-1;"left"===e?this.setState({temporaryTransformX:"".concat(t-20,"%")}):this.setState({temporaryTransformX:"".concat(t+20,"%")}),clearTimeout(this.wiggleTimeout),this.wiggleTimeout=window.setTimeout((()=>{this.setState({temporaryTransformX:void 0})}),x.carouselSlideMoveTransitionTimeMs/2)}render(){var e=this.props,t=e.items,s=e.appContext._t,n=e.hideIndicator,i=e.hideArrowIfLast,a=e.arrowProps,r=e.className,d=e.carouselItemClassName,u=e.alwaysShowArrow,h=this.state,v=h.currentItemIndex,b=h.temporaryTransformX;if(1===t.length)return t;var x=b||"-".concat(v,"00%"),S={transform:"translate3d(".concat(x,", 0, 0)")};return(0,P.jsxs)(c.df,{className:l()(f,r),onChange:this.handleIntersectionChange,threshold:.9,triggerOnce:!0,children:[(0,P.jsx)("div",{className:C,style:S,children:t.map(((e,t)=>(0,P.jsx)("div",{className:l()(y,d),onFocus:this.getFocusOnItem(t),children:e},"item-".concat(t))))}),(!i||0!==v)&&(0,P.jsx)(p.Z,{wrapperClassName:l()(w,{[k]:u}),label:s("Previous"),onClick:this.decrement,tabIndex:-1,children:(0,P.jsx)(m,o()({},a))}),(!i||v<t.length-1)&&(0,P.jsx)(p.Z,{wrapperClassName:l()(j,{[k]:u}),label:s("Next"),onClick:this.increment,tabIndex:-1,children:(0,P.jsx)(g,o()({},a))}),!n&&this.renderIndicator()]})}renderIndicator(){var e=this.props,t=e.items,s=e.appContext._cn,n=this.state.currentItemIndex;return(0,P.jsx)("div",{className:S,children:t.map(((e,t)=>(0,P.jsx)(p.Z,{className:l()(I,{[N]:t===n}),onClick:this.getFocusOnItem(t),tabIndex:-1,label:s("Buttons that control a carousel of content - placeholder is the number slide that clicking on the button shows","Show slide %1$s","Show slide %1$s",t+1)},"dot-".concat(t))))})}}a()(T,"defaultProps",{hideIndicator:!1,hideArrowIfLast:!1,alwaysShowArrow:!1});const Z=(0,b.HJ)(T)},63334:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var n=s(50209),o=s.n(n),i=s(95004),a=s(79615),r=s(78667),l=s(80057);const d="LaNUG",c="uR3i7";var p=s(2629);class u extends i.Component{constructor(){super(...arguments),o()(this,"state",{clientHeight:void 0,unfoldNestedContent:!1,isExpanded:!1,maxHeightForVideo:0}),o()(this,"holderRef",(0,i.createRef)()),o()(this,"expand",(e=>{var t,s;e.stopPropagation(),null===(t=(s=this.props).onExpand)||void 0===t||t.call(s),this.setState({isExpanded:!0,unfoldNestedContent:!0})})),o()(this,"onVideoResize",((e,t)=>{var s=this.props.maxHeight,n=t>s&&e<s;this.shouldCrop()&&n&&this.setState({maxHeightForVideo:t+50})}))}componentDidMount(){var e;this.setState({clientHeight:null===(e=this.holderRef.current)||void 0===e?void 0:e.clientHeight})}static preventScroll(e){e.target.scroll(0,0)}shouldCrop(){var e=this.state,t=e.clientHeight,s=e.isExpanded,n=this.props,o=n.maxHeight,i=n.maxHeightTolerance,a=n.preventTruncation,r=n.setIsLongPost,l=void 0===t||t>o+(i||50),d=!s&&l&&!a;return null==r||r(l),d}render(){var e=this.state,t=e.clientHeight,s=e.unfoldNestedContent,n=e.maxHeightForVideo,o=this.props,i=o.maxHeight,r=o.children,h=o.expandButtonClassName,m=void 0===h?c:h,g=o.onCrop,v=o.appContext._t,b=this.shouldCrop();null==g||g(b);var x=b&&void 0!==t,f=v("Expand"),C={unfoldNestedContent:s,onVideoResize:this.onVideoResize},y={maxHeight:b?Math.max(n||i):void 0};return(0,p.jsx)(l.mO.Provider,{value:C,children:(0,p.jsxs)("div",{className:d,style:y,onScroll:u.preventScroll,children:[(0,p.jsx)("div",{ref:this.holderRef,children:r}),x&&(0,p.jsx)(a.Z,{wrapperClassName:m,onClick:this.expand,label:f,children:f})]})})}}const h=(0,r.HJ)(u)},43619:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s(13586);const o="qrzdF";var i=s(2629);const a=e=>{var t=e.margin,s=void 0===t?"250%":t,a=e.children,r=e.wrapperClassName,l=e.wrapperStyle,d=(0,n.YD)({rootMargin:s}),c=d.ref,p=d.inView,u=d.entry;if(Boolean(!p&&(null==u?void 0:u.target))){var h=null==u?void 0:u.target,m=h.clientHeight,g={maxWidth:h.clientWidth,height:m};return(0,i.jsx)("div",{ref:c,role:"figure",className:o,style:g})}return(0,i.jsx)("div",{className:r,style:l,ref:c,children:a})}},27755:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=(0,s(36343).q)("airplane");n.defaultProps={size:{width:17,height:17}};const o=n},68384:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=(0,s(36343).q)("checkmark");n.defaultProps={size:{width:24,height:24}};const o=n},28863:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=(0,s(36343).q)("collapse");n.defaultProps={size:{width:24,height:24}};const o=n},60499:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(36343),o=(0,n.$)({filledIcon:(0,n.q)("fire-filled"),emptyIcon:(0,n.q)("fire-empty")});o.defaultProps={filled:!1,size:{width:23,height:20}};const i=o},83302:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=(0,s(36343).q)("full-screen");n.defaultProps={size:{width:24,height:24}};const o=n},7390:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(36343),o=(0,n.$)({filledIcon:(0,n.q)("like-filled"),emptyIcon:(0,n.q)("like-empty")});o.defaultProps={filled:!1,size:{width:20,height:18}};const i=o},27252:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=(0,s(36343).q)("memberships-lock");n.defaultProps={size:{width:36,height:36}};const o=n},10490:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=(0,s(36343).q)("pause");n.defaultProps={size:{width:24,height:24}};const o=n},39934:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=(0,s(36343).q)("post-flagged");n.defaultProps={size:{width:34,height:34}};const o=n},81022:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=(0,s(36343).q)("posts-audio",{altIcon:"posts-audio-alt"});n.defaultProps={size:{width:24,height:24},useAltIcon:!1};const o=n},48430:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=(0,s(36343).q)("posts-link",{altIcon:"posts-link-alt"});n.defaultProps={size:{width:24,height:24},useAltIcon:!1};const o=n},40565:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=(0,s(36343).q)("posts-video",{altIcon:"posts-video-alt"});n.defaultProps={size:{width:24,height:24},useAltIcon:!1};const o=n},82145:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var n=s(54138),o=s.n(n),i=s(54589),a=s.n(i),r=s(36343),l=s(55015),d=s(2629),c=["isCompact"],p=(0,r.q)("reblog"),u=(0,r.q)("reblog-compact"),h=e=>{var t=e.isCompact,s=a()(e,c);return t?(0,d.jsx)(u,o()({},s)):(0,d.jsx)(p,o()({},s))};h.defaultProps={size:l.Z.desktop.reblogIconSize,isCompact:!1};const m=h},17635:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(36343),o=(0,n.$)({filledIcon:(0,n.q)("reply-filled"),emptyIcon:(0,n.q)("reply-empty")});o.defaultProps={filled:!1,size:{width:17,height:17}};const i=o},33951:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=(0,s(36343).q)("tipping");n.defaultProps={size:{width:21,height:21}};const o=n},37560:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s(50209),o=s.n(n),i=s(95004),a=s(36485),r=s(2629);class l extends i.Component{render(){var e=this.props,t=e.className,s=e.src,n=e.title,o=e.queryParams,i=e.scrolling,l=e.frameBorder,d=e.style,c=e.onLoad,p=e.placementId,u=e.allow,h=e.allowFullScreen;return(0,r.jsx)("iframe",{className:t,name:p,title:n,src:(0,a.Z)(s,o),scrolling:i,frameBorder:l,style:d,onLoad:c,allow:u,allowFullScreen:h})}}o()(l,"defaultProps",{className:"",queryParams:{},scrolling:"no",frameBorder:0});const d=l},77434:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var n=s(33970),o=s.n(n),i=s(5754),a=s.n(i),r=s(95004),l=s(4840),d=s(42914),c=s(16273);function p(e,t){Object.entries(t).forEach((t=>{var s=o()(t,2),n=s[0],i=s[1];e.style[n]=i}))}var u=s(98465),h=s(2629);const m=e=>{var t=(0,r.useRef)(null),s=(0,r.useState)(0),n=o()(s,2),i=n[0],m=n[1];return(0,r.useEffect)((()=>{var e=t.current;if(e){var s=window.innerWidth,n=window.innerHeight;p(e,{width:"".concat(s,"px"),height:"".concat(n,"px")}),e.style.setProperty("--fire-container-height","".concat(n+30,"px")),e.querySelectorAll(".".concat(u.Z.fireEmoji)).forEach((e=>{var t=.4*Math.random()+.6,o=30*t,i=n/120;p(e,{height:"".concat(30*t,"px"),width:"".concat(o,"px"),opacity:"".concat(t),animationDirection:"".concat(t*i,"s"),animationDelay:"-".concat(Math.random()*t*i,"s"),left:"".concat(Math.random()*s-o/2,"px")})}));var o=(0,d.Z)((()=>{m(i+1)}),100);return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)}}),[i]),(0,h.jsxs)("div",{className:a()(u.Z.overlay,e.className),"data-testid":"ignite-animation",children:[(0,h.jsx)("div",{className:u.Z.fire,children:(0,h.jsxs)("svg",{width:"125",height:"189.864",viewBox:"0 0 125 189.864",children:[(0,h.jsx)("path",{className:u.Z.flameMain,fill:"#F36E21",d:"M76.553 186.09s-10.178-2.976-15.325-8.226-9.278-16.82-9.278-16.82-.241-6.647-4.136-18.465c0 0 3.357 4.969 5.103 9.938 0 0-5.305-21.086 1.712-30.418 7.017-9.333.571-35.654-2.25-37.534 0 0 13.07 5.64 19.875 47.54 6.806 41.899 16.831 45.301 6.088 53.985"}),(0,h.jsx)("path",{className:a()(u.Z.flameMain,u.Z.one),fill:"#F6891F",d:"M61.693 122.257c4.117-15.4 12.097-14.487-11.589-60.872 0 0 32.016 10.223 52.601 63.123 20.585 52.899-19.848 61.045-19.643 61.582.206.537-19.401-.269-14.835-18.532s-10.651-29.902-6.534-45.301z"}),(0,h.jsx)("path",{className:a()(u.Z.flameMain,u.Z.two),fill:"#FFD04A",d:"M81.657 79.192s11.549 24.845 3.626 40.02c-7.924 15.175-21.126 41.899-.425 64.998 0 0 40.847-33.305-3.201-105.018z"}),(0,h.jsx)("path",{className:a()(u.Z.flameMain,u.Z.three),fill:"#FDBA16",d:"M99.92 101.754s-23.208 47.027-12.043 80.072c0 0 32.741-16.073 20.108-45.79-12.631-29.717-8.065-21.928-8.065-34.282z"}),(0,h.jsx)("path",{className:a()(u.Z.flameMain,u.Z.four),fill:"#F36E21",d:"M103.143 105.917s8.927 30.753-1.043 46.868c-9.969 16.115-14.799 29.041-14.799 29.041s47.086-17.223 15.842-75.909z"}),(0,h.jsx)("path",{className:a()(u.Z.flameMain,u.Z.five),fill:"#FDBA16",d:"M62.049 104.171s-15.645 67.588 10.529 77.655c26.175 10.068-3.545-51.065-10.529-77.655z"}),(0,h.jsx)("path",{className:u.Z.flame,fill:"#F36E21",d:"M101.011 112.926s8.973 10.519 4.556 16.543c-6.197.266 1.185-12.063-4.556-16.543z"}),(0,h.jsx)("path",{className:a()(u.Z.flame,u.Z.one),fill:"#F36E21",d:"M55.592 126.854s-3.819 13.29 2.699 16.945c5.747-2.319-2.384-11.536-2.699-16.945z"}),(0,h.jsx)("path",{className:a()(u.Z.flame,u.Z.two),fill:"#F36E21",d:"M54.918 104.595s-3.959 6.109-1.24 8.949c3.252-.288-1.45-6.215 1.24-8.949z"})]})}),(0,h.jsx)("div",{ref:t,children:(0,c.Z)(0,60).map((e=>(0,h.jsx)("img",{src:l,alt:"",className:u.Z.fireEmoji},e)))})]})}},79406:(e,t,s)=>{"use strict";s.d(t,{Y:()=>i,p:()=>o});var n=s(95004),o=(0,n.createContext)(void 0),i=()=>(0,n.useContext)(o)},64683:(e,t,s)=>{"use strict";s.d(t,{ZP:()=>oe});var n=s(50209),o=s.n(n),i=s(54138),a=s.n(i),r=s(5754),l=s.n(r),d=s(95004),c=s(26285),p=s(47414),u=s(79615),h=s(59514),m=s(6790),g=s(83054),v=s(33970),b=s.n(v),x=s(13586),f=s(79406),C=s(25190),y=s(43166),w=s(93415);var j=new class{constructor(){o()(this,"listeners",{})}on(e,t){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t),()=>{this.listeners[e]=this.listeners[e].filter((e=>e!==t))}}emit(e,t){(this.listeners[e]||[]).forEach((e=>e(t)))}};const k=e=>{var t=(0,d.useState)(!0),s=b()(t,2),n=s[0],o=s[1];(0,d.useEffect)((()=>(j.emit("mounted"),j.on("mounted",(()=>{o(!1)})))),[]),(0,d.useEffect)((()=>{var t=j.on("closeAll",(()=>{null==e||e(),t()}));return i}),[]);var i=(0,d.useCallback)((()=>{j.emit("closeAll")}),[]);return{isTopmost:n,closeAll:i}};var S=s(17276),I=s.n(S),N=s(99077),P=s.n(N),T=s(31710),Z=s(14542),A=s(74754),E=s(10381),M=s(22979),L=s(81584),O=s(74446),R=s(59215),D=s(55015),F=s(32156);const B="GHloH",_="Pha3k",U="LaNhI",V="yPZfR",z="WYaZw",H="j8GND";var W=s(2629);class q extends d.Component{constructor(){super(...arguments),o()(this,"state",{posts:[]}),o()(this,"apiHelper",(0,L.ZP)(this.props.appContext.apiFetch)),o()(this,"onLike",((e,t)=>{this.props.timelineContext.onLike(e,t),this.setState({posts:this.state.posts.map((s=>(0,M.xT)(s)&&s.id===e?(0,F.bX)(s,t):s))})})),o()(this,"renderDesktopContent",(()=>{var e=this.state.posts;return!(e.length<3)&&(0,W.jsx)(E.U$,{children:t=>{var s,n=t.width,o=(s=n,Math.min(4,Math.floor((s+20)/320+3e-4))),i=320*o-20;return(0,W.jsx)("div",{className:U,style:{width:i},children:(0,W.jsxs)(A.ZP.Provider,{value:A.Vn,children:[(0,W.jsx)("h2",{children:this.props.appContext._t("More like this")}),(0,W.jsx)(T.Z,{numberOfColumns:o,columnWidth:300,columnSpacing:20,elementSpacing:10,children:e.map((e=>this.renderElement(e))).filter((e=>e))})]})})}})})),o()(this,"renderElement",(e=>{var t="".concat(e.placementId?"".concat(e.placementId,":"):"").concat(e.id).concat(e.isExpandedInGrid?":expanded":"");return(0,W.jsx)(Z.Z,{presentationStyle:D.Z.masonry,timelineObject:a()({},e),isNarrow:!0},t)}))}componentDidMount(){var e=this;return P()(I()().mark((function t(){var s,n;return I()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.apiHelper.getRelatedPosts(e.props.queryId,e.props.blogName,e.props.postsContext).fetch(),t.next=3,s;case 3:n=t.sent.response.elements.filter((e=>"client_side_ad_waterfall"!==e.objectType)),e.setState({posts:n},(()=>{e.props.onLoad(n.length>=3)}));case 5:case"end":return t.stop()}}),t)})))()}render(){return(0,W.jsx)(O.k.Provider,{value:a()(a()({},this.props.timelineContext),{},{onLike:this.onLike}),children:(0,W.jsx)(C.ZP,{children:e=>!e.isMobile&&this.renderDesktopContent()})})}}const G=(0,R.X9)(q,{appContext:!0,timelineContext:!0});var X=s(43099);const Q=function(e){var t=e.glassProps,s=e.children,n=(0,y.I_)(),o=n?n.post:void 0,i=(0,d.useRef)(null),r=(0,d.useState)(!1),c=b()(r,2),p=c[0],u=c[1],m=(0,f.Y)(),g=k(null==m?void 0:m.closeLightbox),v=g.isTopmost,j=g.closeAll,S=(0,d.useCallback)((e=>{var t,s="string"==typeof(null===(t=e.target)||void 0===t?void 0:t.className)?e.target.className:"";(e.target===i.current||s.split(" ").includes(X.Z.column))&&j()}),[j]),I=!v;return(0,W.jsx)(C.ZP,{children:e=>{if(e.isMobile||null==o||!o.id||o.adInstanceId)return(0,W.jsx)(h.Z,a()(a()({},t),{},{children:s}));var n=o.rebloggedFromId?o.rebloggedFromId:o.id,r=a()(a()({},t),{},{glassIsClickable:!1,opacity:I?0:t.opacity});return(0,W.jsx)(h.Z,a()(a()({},r),{},{children:(0,W.jsx)("div",{className:l()(B,{[_]:I}),onClick:S,ref:i,role:"dialog",children:(0,W.jsxs)(w.I.Provider,{value:i.current,children:[(0,W.jsx)(x.df,{threshold:.7,children:e=>{var t=e.inView,n=e.ref;return(0,W.jsx)("div",{className:l()(V,{[z]:p&&t}),ref:n,children:s})}}),(0,W.jsx)("div",{className:l()(H,{[_]:!p}),children:(0,W.jsx)(G,{queryId:"".concat(n),blogName:o.blog.name,onLoad:u,postsContext:"lightbox"})})]})})}))}})};var J=s(43523),Y=s(68346),K=s(63583),$=s.n(K);const ee={swipeableViews:"h5VS4",focus:"Semgf",mobileSlide:"xKxtH",mobileImage:"uNsrv",image:"MjNMI",left:"UBbzn",center:"kjHHx",right:"rquNV",caption:"dvdaL"};var te;!function(e){e[e.Center=ee.center]="Center",e[e.Left=ee.left]="Left",e[e.Right=ee.right]="Right",e[e.Mobile=ee.mobileImage]="Mobile"}(te||(te={}));var se=e=>{var t=e.glassProps,s=e.children;return(0,W.jsx)(h.Z,a()(a()({},t),{},{children:s}))};class ne extends d.Component{constructor(){super(...arguments),o()(this,"state",{isOpen:!1,currentIndex:0,images:[]}),o()(this,"tempIndex",-1),o()(this,"addImageToLightbox",(e=>{var t=this.state.images.length,s=this.state.images;return s.push(e),this.setState({images:s}),()=>this.openLightbox(t)})),o()(this,"toggleLightbox",(()=>{this.setState((e=>({isOpen:!e.isOpen})),this.logStateChange)})),o()(this,"closeLightbox",(()=>{this.setState({isOpen:!1},this.logStateChange)})),o()(this,"logStateChange",(()=>{this.props.adContext.sendClickADMBeacon(this.props.adm),this.props.appContext.logEvent({eventName:J.J.Photo,eventDetails:a()({placement_id:this.props.placementId},this.props.krakenEventDetails)})})),o()(this,"renderDesktopContent",(()=>{var e=this.state,t=e.currentIndex,s=e.images,n=s.length,o=0===t,i=t===s.length-1,a=!o&&n>=2?this.renderImage(s[t-1],te.Left):null,r=this.renderImage(s[t],te.Center),l=!i&&n>=t+1?this.renderImage(s[t+1],te.Right):null;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(m.ZP,{hotkey:[{key:m.SV.Left,command:this.decrementImage},{key:m.SV.Right,command:this.incrementImage}]}),a,r,l]})})),o()(this,"renderMobileContent",(()=>{var e=this.state,t=e.currentIndex,s=e.images,n=(0,p.p6)(c.ZP);return(0,W.jsx)(u.Z,{onClick:this.toggleLightbox,label:this.props.appContext._c("Clicking on the image will expand it and open a lightbox","Close image"),children:(0,W.jsx)(n,{className:ee.swipeableViews,containerStyle:{width:"100vw"},slideClassName:ee.mobileSlide,slideStyle:{overflow:"visible"},index:t,slideCount:s.length,slideRenderer:e=>{var t=e.index,n=e.key;return this.renderImage(s[t],te.Mobile,n)},onChangeIndex:e=>{this.tempIndex=e},onTransitionEnd:()=>{-1!==this.tempIndex&&(this.setState({currentIndex:this.tempIndex}),this.tempIndex=-1)},overscanSlideBefore:1,overscanSlideAfter:1,resistance:!0})})})),o()(this,"renderImage",((e,t,s)=>{var n,o=this.state,i=o.currentIndex,a=o.images,r=e.imageResponse,d=e.caption;switch(t){case te.Left:n=this.decrementImage;break;case te.Right:n=this.incrementImage;break;case te.Center:var c=i===a.length-1;n=1===a.length?this.toggleLightbox:c?this.decrementImage:this.incrementImage}var p=new Y.Z(r).getLargestImage().width,h="".concat(p,"px");return n?(0,W.jsxs)(u.Z,{wrapperClassName:[ee.image,t].join(" "),onClick:n,label:this.props.appContext._c("Clicking on the image will expand it and open a lightbox","Close image"),children:[(0,W.jsx)(g.Z,{imageResponse:r,sizes:h}),d&&(0,W.jsx)("div",{className:ee.caption,children:d})]},s):(0,W.jsxs)("div",{className:l()(ee.image,t),children:[(0,W.jsx)(g.Z,{imageResponse:r,sizes:h}),d&&(0,W.jsx)("div",{className:ee.caption,children:d})]},s)})),o()(this,"decrementImage",(()=>{0!==this.state.currentIndex&&this.setState((e=>a()(a()({},e),{},{currentIndex:e.currentIndex-1})))})),o()(this,"incrementImage",(()=>{this.state.currentIndex!==this.state.images.length-1&&this.setState((e=>a()(a()({},e),{},{currentIndex:e.currentIndex+1})))})),o()(this,"openLightbox",(e=>{this.props.appContext.logEvent({eventName:J.J.FeatureExposed,eventDetails:{feature_key:"redpop_lightbox_open"}}),this.setState({isOpen:!0,currentIndex:e})})),o()(this,"contextValue",{addImageToLightbox:this.addImageToLightbox,closeLightbox:this.closeLightbox})}render(){var e,t=this.state.isOpen,s=(null===(e=this.props.appContext.features)||void 0===e?void 0:e.redpopRelatedPostsLightbox)?Q:se;return(0,W.jsxs)(f.p.Provider,{value:this.contextValue,children:[this.props.children,t&&(0,W.jsx)(C.ZP,{children:e=>{var t=e.isMobile;return(0,W.jsx)(s,{glassProps:{onGlassClick:this.toggleLightbox,centerContent:!0,color:$().black,opacity:.85},children:t?this.renderMobileContent():this.renderDesktopContent()})}})]})}}const oe=(0,R.X9)(ne,{appContext:!0,adContext:!0})},77129:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var n=s(5754),o=s.n(n),i=s(95004),a=s(79615),r=s(78667),l=s(45051),d=s(79406);const c="k4_Vq";var p=s(2629);const u=e=>{var t=e.children,s=e.imageResponse,n=e.altText,u=e.caption,h=e.className,m=(0,i.useRef)(l.Z),g=(0,i.useRef)({imageResponse:s,altText:n,caption:u}),v=(0,r.bp)()._t,b=(0,d.Y)();(0,i.useEffect)((()=>{b&&(m.current=b.addImageToLightbox(g.current))}),[b]);var x=v("Image");return(0,p.jsx)(a.Z,{wrapperClassName:o()(c,h),onClick:()=>{m.current()},label:n?"".concat(x,": ").concat(n):x,children:t})}},31710:(e,t,s)=>{"use strict";s.d(t,{Z:()=>v});var n=s(54138),o=s.n(n),i=s(75464),a=s.n(i),r=s(50209),l=s.n(r),d=s(95004),c=s(94522),p=s(43099),u=s(2629);const h=function(e){var t=e.columns,s=e.columnWidth,n=e.elementSpacing,i=void 0===n?5:n,a=e.columnSpacing,r=void 0===a?i:a,l=e.elementContainerClass,d=e.numberOfColumns,c={width:s?"".concat(s,"px"):"".concat(100/d,"%"),maxWidth:s?"".concat(s,"px"):void 0},h=o()(o()({},c),{},{marginLeft:r}),m={marginTop:i};return(0,u.jsx)("div",{className:p.Z.masonry,children:t.map(((e,t)=>(0,u.jsx)("div",{className:p.Z.column,style:t>0?h:c,children:e.map(((e,s)=>{var n=e.element,o=e.tabIndex;return(0,u.jsx)("div",{tabIndex:o,className:l,style:s>0?m:void 0,children:n},"".concat(t,"-").concat(s))}))},"column-".concat(t))))})};var m=e=>{for(var t=e.fromChildren,s=e.numberOfColumns,n=e.offset,o=void 0===n?0:n,i=e.pinnedToUpperRightIndexes,a=void 0===i?[]:i,r=[],l=0;l<s;l+=1)r.push([]);var d=[...t];return a.map(((e,t)=>{var n=d[e];d.splice(e,1),d.splice((t+1)*s-1,0,n)})),d.forEach(((e,t)=>{r[t%s].push({element:e,tabIndex:t+o})})),r};class g extends d.Component{constructor(){super(...arguments),l()(this,"state",{objectsToLayOut:[],columns:m({fromChildren:d.Children.toArray(this.props.children),numberOfColumns:this.props.numberOfColumns,pinnedToUpperRightIndexes:this.props.pinnedToUpperRightIndexes})}),l()(this,"columnSpacerRefs",[]),l()(this,"addNextObjectToLayOutToColumn",((e,t)=>{var s=this.state.objectsToLayOut,n=d.Children.count(this.props.children);if(s.length){if(!(t<0)){var o=a()(s),i=o[0],r=o.slice(1),l=[...e];l[t].push({element:i,tabIndex:n-s.length}),this.setState({columns:l,objectsToLayOut:r})}}else this.state.columns!==e&&this.setState({columns:e})})),l()(this,"naivelyLayOutObjects",((e,t,s,n)=>{for(var o=[...t],i=this.props.numberOfColumns,a=m({numberOfColumns:i,fromChildren:e,offset:n}),r=Math.max(s,0),l=0;l<i;l+=1){var d=(l+r)%i;o[d]=[...o[d],...a[l]]}return o})),l()(this,"columnsWithoutRemovedChildren",((e,t)=>e.map((e=>e.filter((e=>{var s=e.element;return(0,d.isValidElement)(s)&&s.key&&t.indexOf(s.key)<0})))))),l()(this,"updateColumnsWithNewProps",((e,t)=>{if(!t.length)return e;var s=t.map((e=>e.key));return e.map((e=>e.map((e=>{var n=e.element,o=e.tabIndex;if(s.indexOf(n.key)>=0){var i=t.find((e=>e.key===n.key));if(i)return{tabIndex:o,element:i}}return{element:n,tabIndex:o}}))))}))}componentDidUpdate(e){var t=this.props,s=t.numberOfColumns,n=t.children,o=t.pinnedToUpperRightIndexes,i=!(0,c.X)(o,e.pinnedToUpperRightIndexes);if(s!==e.numberOfColumns||i)this.setState({columns:m({numberOfColumns:s,pinnedToUpperRightIndexes:o,fromChildren:d.Children.toArray(n)}),objectsToLayOut:[]});else{var a=d.Children.toArray(this.props.children),r=d.Children.toArray(e.children);this.makeLayoutPass(a,r)}}render(){var e=this.state.columns.reduce(((e,t,s)=>[...e,[...t,{element:(0,u.jsx)("div",{ref:e=>this.columnSpacerRefs[s]=e},"column ".concat(s," bottom spacer")),tabIndex:-1}]]),[]),t=o()({},this.props);return delete t.children,(0,u.jsx)(h,o()({columns:e},t))}makeLayoutPass(e,t){for(var s=(e,t)=>e.filter((e=>!t.find((t=>(null==e?void 0:e.key)===(null==t?void 0:t.key))))),n=s(t,e),o=s(e,t),i=e.reduce(((e,s,n)=>{var o=t[n];return o&&s&&(0,c.X)(s.props,o.props)||e.push(s),e}),[]),a=this.updateColumnsWithNewProps(this.state.columns,i),r=n.map((e=>e.key)),l=-1,p=-1,u=0;u<this.props.numberOfColumns;u+=1){var h=this.columnSpacerRefs[u];if(h){var m=h.getBoundingClientRect().top;(m<p||-1===p)&&(p=m,l=u)}}var g=l;if(n.length||o.length){var v=[...this.state.objectsToLayOut.filter((e=>(0,d.isValidElement)(e)&&e.key&&r.indexOf(e.key)<0)),...o],b=v.slice(0,Math.ceil(v.length/2));a=this.columnsWithoutRemovedChildren(a,r);var x=this.naivelyLayOutObjects(b,a,g,t.length),f=v.slice(Math.ceil(v.length/2));this.setState({columns:x,objectsToLayOut:f})}else this.addNextObjectToLayOutToColumn(a,g)}}const v=g},15321:(e,t,s)=>{"use strict";s.d(t,{d:()=>H,Z:()=>G});var n=s(17276),o=s.n(n),i=s(99077),a=s.n(i),r=s(54138),l=s.n(r),d=s(50209),c=s.n(d),p=s(5754),u=s.n(p),h=s(95004),m=s(79615),g=s(5136),v=s(6001),b=s(3069),x=s(59514),f=s(13434),C=s(73078),y=s(10736),w=s(25694),j=s(64560),k=s(46819),S=s(67023),I=s(50899),N=s(43523),P=s(43684),T=s(17901),Z=s(5700),A=s(81584),E=s(59215),M=s(34056),L=s(87517),O=s(73125),R=s(91949),D=s(24228),F=s(63583),B=s.n(F),_=s(39277),U=s(20775),V=s(2629);const z=(0,E.X9)((e=>{var t=e.postContext.post,s=t.id,n=t.blog.uuid,o=e.appContext,i=o._t,a=o.apiFetch,r=e.timelineContext.onRemoveTimelineObject,l=e.children,d=e.isOpen,c=e.toggleIsOpen;return(0,V.jsxs)(V.Fragment,{children:[l,d&&(0,V.jsx)(x.Z,{onGlassClick:c,glassIsClickable:!1,children:(0,V.jsx)(C.Z,{"data-testid":"delete-dialog",title:i("Are you sure you want to delete this post?"),buttons:[{text:i("Cancel"),onClick:c,buttonStyle:C.X.Neutral},{text:i("OK"),onClick:()=>{var e=null==r?void 0:r({id:s});return c(),a("/v2/blog/".concat(n,"/post/delete"),{method:"POST",body:{id:s}}).catch((()=>null==e?void 0:e()))},buttonStyle:C.X.Confirm}]})})]})}),{appContext:!0,postContext:!0,timelineContext:!0});var H,W=s(21912);!function(e){e[e.Unclicked=0]="Unclicked",e[e.Success=1]="Success",e[e.Failure=2]="Failure"}(H||(H={}));class q extends h.Component{constructor(){var e;super(...arguments),e=this,c()(this,"state",{copyLinkStatus:H.Unclicked,copyCustomLinkStatus:H.Unclicked,showingPinPostConfirmationDialog:!1,isOpenDeleteDialog:!1,canSubscribe:!0,isSubscribed:!1,isSubscribeFetching:!1,reportViolationStatus:"idle",communityLabelVisibilitySetting:k.Gl,toggleCommunityLabelStatus:"idle",isGeneratingBranchUrl:!1}),c()(this,"apiHelper",(0,A.ZP)(this.props.appContext.apiFetch)),c()(this,"containerRef",(0,h.createRef)()),c()(this,"hasUnfollowed",!1),c()(this,"toggleIsOpenDeleteDialog",(()=>this.setState((e=>({isOpenDeleteDialog:!e.isOpenDeleteDialog}))))),c()(this,"renderItems",(e=>{var t=this.props,s=t.blogUrl,n=t.blogName,o=t.followed,i=t.postUrl,a=t.dismissal,r=t.isPostPublishedOrPrivate,l=t.date,d=t.renderPin,c=void 0!==d&&d,p=t.postContext,h=p.post,x=h.id,C=h.isPromoted,w=h.canPin,k=h.isPinned,I=h.placementId,N=h.blogName,P=h.askingName,T=h.postAuthor,Z=p.presentationStyle,A=Z.showsPreviewPostLink,E=Z.usesInboxAttribution,M=Z.hasCustomPostLink,R=t.timelineContext,D=t.appContext,F=D._c,_=D.apiFetch,q=D.isLoggedIn,G=D._getRelativeDateString,X=D.wwwBaseUrl,Q=D.features,J=Q.commentingUxRedesign,Y=Q.communityLabels,K=t.canDelete,$=t.canEdit,ee=t.editablePost,te=t.trail,se=t.shouldOpenInLegacy,ne=void 0===se||se,oe=this.state,ie=oe.copyLinkStatus,ae=oe.copyCustomLinkStatus,re=oe.showingPinPostConfirmationDialog,le=oe.isOpenDeleteDialog,de=oe.canSubscribe,ce=[],pe=x;if(l&&r&&ce.push((0,V.jsx)(g.Z,{linkTo:i,title:F("Hover text for timestamp that links to a blog permalink. %1$s is the blog's domain","View post on %1$s",[(0,O.Z)(n)]),className:u()(W.Z.meatballItem,W.Z.thin,W.Z.timestamp),children:(0,V.jsx)("span",{className:W.Z.timestampDate,children:G(l,S.qC.Simple)})},"timestamp")),Y&&ce.push(...this.communityLabelCategoriesItem(e)),!r&&A&&ce.push((0,V.jsx)(g.Z,{linkTo:i,className:u()(W.Z.meatballItem,W.Z.thin),children:(0,V.jsx)("span",{children:F("Link text for previewing an unpublished post","Preview Post")})},"preview-post")),c&&w){var ue=u()(W.Z.meatballItem,W.Z.thin);k?ce.push((0,V.jsx)(g.Z,{keepDropdownOpenAfterClick:!0,className:ue,onClick:this.unpinPost,children:F("Link text for unpinning a post","Unpin")},"pin-post")):ce.push((0,V.jsxs)(g.Z,{keepDropdownOpenAfterClick:!0,className:ue,onClick:this.pinPostClick,children:[F("Link text for pinning a post","Pin"),re&&this.renderPinPostConfirmationDialog()]},"pin-post"))}if(ce.push((0,V.jsx)(v.Z,{blogIdentifier:n,postId:pe,onPromote:null==R?void 0:R.onPromote,className:W.Z.meatballItem,isPromoted:!!C},"promoteForItem")),r){var he={[H.Success]:F("Success message after copying a link","Link copied!"),[H.Failure]:F("Error message when trying to copy a link","Failed to copy link."),[H.Unclicked]:F("Menu item to copy the link to a post to your clipboard","Copy link")},me={[H.Success]:W.Z.success,[H.Failure]:W.Z.failure,[H.Unclicked]:""};M&&ce.push((0,V.jsx)(g.Z,{onClick:this.copyCustomLink,keepDropdownOpenAfterClick:!0,className:u()(W.Z.meatballItem,me[ae]),children:this.state.isGeneratingBranchUrl?(0,V.jsx)("div",{className:W.Z.loader,children:(0,V.jsx)(f.Z,{small:!0,color:B().paletteGray65})}):he[ae]},"copyCustomLink"));var ge=he[ie];ie===H.Unclicked&&M&&(ge=F("Menu item to copy the link to a post to your clipboard","Copy link to post")),ce.push((0,V.jsx)(g.Z,{onClick:this.copyLink,keepDropdownOpenAfterClick:!0,className:u()(W.Z.meatballItem,me[ie]),children:this.state.isGeneratingBranchUrl?(0,V.jsx)("div",{className:W.Z.loader,children:(0,V.jsx)(f.Z,{small:!0,color:B().paletteGray65})}):ge},"copyLink"))}if(q&&!e&&o&&s&&ce.push((0,V.jsx)(g.Z,{isWrappingButton:!0,keepDropdownOpenAfterClick:!0,children:(0,V.jsx)(b.Z,{following:!0,blogName:n,blogUrl:s,className:W.Z.meatballItem,placementId:I,isPostHeader:!0,children:this.renderUnfollowText})},"unfollow")),J&&de&&!E){var ve=this.state.isSubscribed?F("Contextual action to unsubscribe from updates","Unsubscribe from conversation"):F("Contextual action to subscribe to updates","Subscribe to conversation");ce.push((0,V.jsx)(g.Z,{keepDropdownOpenAfterClick:!0,isWrappingButton:!0,className:W.Z.meatballItem,children:this.state.isSubscribeFetching?(0,V.jsx)("div",{className:W.Z.loader,children:(0,V.jsx)(f.Z,{small:!0,color:B().paletteGray65})}):(0,V.jsx)(m.Z,{label:ve,onClick:this.toggleSubscribePost,title:ve,children:ve})},"subscribe"))}$&&ee&&ce.push((0,V.jsx)(g.Z,{isWrappingButton:!0,keepDropdownOpenAfterClick:!0,className:u()(W.Z.meatballItem,{[W.Z.spaceRest]:!ne}),children:(0,V.jsx)(y.Z,{isTextButton:!0,className:u()(W.Z.meatballItemReset,W.Z.expand),editablePost:ee,trail:te,shouldAlwaysOpenInLegacy:ne})},"edit")),K&&ce.push((0,V.jsx)(g.Z,{isWrappingButton:!0,keepDropdownOpenAfterClick:!0,className:u()(W.Z.meatballItem,W.Z.red),onClick:this.toggleIsOpenDeleteDialog,children:(0,V.jsx)(z,{isOpen:le,toggleIsOpen:this.toggleIsOpenDeleteDialog,children:F("Link text to open delete dialog","Delete")})},"delete")),a&&a.options.forEach((e=>{var t,s,n=u()(W.Z.meatballItem,{[W.Z.red]:e.destructive}),o=e.link,i=o.type,a=o.href;switch(i){case j.U.Action:t=(0,L.Z)(e.link,_,this.removePost);break;case j.U.Web:s=a;break;default:return}ce.push((0,V.jsx)(g.Z,{linkTo:s,onClick:t,className:n,children:e.text},"dismissal-".concat(e.text)))})),Y&&q&&ce.push(...this.communityLabelItems());var be=P||T;if(q&&!e){var xe=E&&be?(0,U.IX)(be,i,X,{postId:pe,recipientName:N},"message"):(0,U.IX)(N,i,X,{postId:pe});ce.push((0,V.jsx)(g.Z,{alwaysExternalLink:!0,linkTo:xe,className:u()(W.Z.meatballItem,W.Z.red),children:F("Menu item to report a post or blog","Report")},"report"))}return ce})),c()(this,"renderPinPostConfirmationDialog",(()=>{var e=this.props.appContext._t;return(0,V.jsx)(x.Z,{onGlassClick:this.pinPostCancel,glassIsClickable:!1,children:(0,V.jsx)(C.Z,{title:e("Pin this post"),body:e("This will appear at the top of your blog and replace any previous pinned post. Are you sure?"),buttons:[{text:e("Nevermind"),buttonStyle:C.X.Neutral,onClick:this.pinPostCancel},{text:e("Yes"),buttonStyle:C.X.Confirm,onClick:this.pinPostConfirm}]})})})),c()(this,"onPopoverClose",(()=>this.hasUnfollowed&&this.removePost(null,{wasBlogUnfollowed:!0}))),c()(this,"onPopoverOpen",(()=>{var e=this.props,t=e.appContext.features.commentingUxRedesign,s=e.blogUuid,n=e.postContext.post.id;this.setState({toggleCommunityLabelStatus:"idle"}),t&&s&&(this.setState({isSubscribeFetching:!0}),this.apiHelper.getNotes(s,{id:n,mode:T.L.Conversation}).fetch().then((e=>{var t=e.response,s=t.canSubscribe,n=t.isSubscribed;this.setState({canSubscribe:!!s,isSubscribed:!!n})})).finally((()=>this.setState({isSubscribeFetching:!1}))))})),c()(this,"removePost",(function(t){var s,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.props,i=o.postContext,a=o.timelineContext.onRemoveTimelineObject;null!=i&&null!==(s=i.post)&&void 0!==s&&s.id&&(null==a||a(l()(l()({},n),{},{id:i.post.id})))})),c()(this,"renderUnfollowText",(()=>this.props.appContext._c("Menu item to unfollow a blog","Unfollow"))),c()(this,"logMeatballsEvent",(e=>{this.props.appContext.logEvent({eventName:e,eventDetails:{placement_id:this.props.placementId}})})),c()(this,"generateBranchLink",function(){var t=a()(o()().mark((function t(s){var n,i,a,r,l,d,c,p,u,h;return o()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,i=n.blogName,a=n.postContext.post,r=a.id,l=a.slug,d=n.appContext,c=d.branch,p=d.routeSet,!(u=e.state.branchUrl)){t.next=4;break}return t.abrupt("return",u);case 4:return e.setState({isGeneratingBranchUrl:!0}),h=s,t.next=8,null==c?void 0:c.link({blogName:i,postId:r,url:s,pathname:window.location.pathname,slug:l,routeSet:p}).then((t=>{e.setState({branchUrl:t}),h=t})).finally((()=>{e.setState({isGeneratingBranchUrl:!1})}));case 8:return t.abrupt("return",h);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),c()(this,"copyLink",a()(o()().mark((function t(){var s,n,i,a,r,l,d,c;return o()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.postContext.post,i=n.blog,a=n.id,r=n.slug,l=n.postUrl,d=n.state,c=d===Z.hA.Private?l:(0,D.b)(i,a,r),null===(s=e.props.appContext.branch)||void 0===s||!s.isBranchLoaded()){t.next=8;break}return t.next=5,e.generateBranchLink(c);case 5:t.t0=t.sent,t.next=9;break;case 8:t.t0=c;case 9:return c=t.t0,t.abrupt("return",(0,M.Z)(c).then((()=>{e.setState({copyLinkStatus:H.Success}),e.logMeatballsEvent(N.J.CopyPostLink),e.setLinkResetTimer()})).catch((()=>{e.setState({copyLinkStatus:H.Failure}),e.setLinkResetTimer()})));case 11:case"end":return t.stop()}}),t)})))),c()(this,"copyCustomLink",a()(o()().mark((function t(){var s,n,i,a;return o()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.props,n=s.location.pathname,i=s.appContext.branch,a="".concat(I.Cw).concat(n),null==i||!i.isBranchLoaded()){t.next=8;break}return t.next=5,e.generateBranchLink(a);case 5:t.t0=t.sent,t.next=9;break;case 8:t.t0=a;case 9:return a=t.t0,t.abrupt("return",(0,M.Z)(a).then((()=>{e.setState({copyCustomLinkStatus:H.Success}),e.logMeatballsEvent(N.J.CopyPostLink),e.setLinkResetTimer()})).catch((()=>{e.setState({copyCustomLinkStatus:H.Failure}),e.setLinkResetTimer()})));case 11:case"end":return t.stop()}}),t)})))),c()(this,"pinPostClick",(()=>{this.setState({showingPinPostConfirmationDialog:!0}),this.props.appContext.logEvent({eventName:N.J.PinPost})})),c()(this,"pinPostConfirm",(()=>(this.setState({showingPinPostConfirmationDialog:!1}),this.onPin(!0)))),c()(this,"pinPostCancel",(()=>{this.setState({showingPinPostConfirmationDialog:!1}),this.props.appContext.logEvent({eventName:N.J.PinPostCancel})})),c()(this,"unpinPost",(()=>this.onPin(!1))),c()(this,"onPin",(e=>{var t=this.props,s=t.appContext.logEvent,n=t.postContext.post,o=t.timelineContext.onPin;return null==o||o(n.id,e),s({eventName:e?N.J.PinPostConfirm:N.J.UnpinPost}),(e?this.apiHelper.pinPost:this.apiHelper.unpinPost)(n.blogName,n.id).fetch().catch((()=>null==o?void 0:o(n.id,!e)))})),c()(this,"toggleSubscribePost",(()=>{var e=this.props,t=e.blogName,s=e.postContext.post.id,n=this.state.isSubscribed;return n||this.logMeatballsEvent(N.J.PostActivitySubscribe),this.setState({isSubscribed:!n,isSubscribeFetching:!0}),(n?this.apiHelper.unsubscribeToPost(t,s):this.apiHelper.subscribeToPost(t,s)).fetch().catch((()=>this.setState({isSubscribed:n}))).finally((()=>this.setState({isSubscribeFetching:!1})))})),c()(this,"reportViolation",(()=>{var e=this.props,t=e.blogUuid,s=e.postContext,n=s.post.id,o=s.setCommunityLabel,i=e.toastContext.toggleToast,a=e.appContext._c,r=String(t)||"",l=String(n)||"",d=this.state.communityLabelVisibilitySetting;return this.setState({reportViolationStatus:"pending"}),this.apiHelper.reportViolation(String(l),r,"community-label").fetch().then((()=>{i(a("Feedback when the report violation is successful","Thanks for the suggestion! Way to look out for yourself and others on Tumblr."),"success"),this.setState({reportViolationStatus:"success"}),d==k.fj&&this.removePost(null),o&&o(!0)})).catch((()=>{i(a("Feedback when the report violation fail","Oops! Something went wrong. Please try again later."),"error"),this.setState({reportViolationStatus:"failure"})}))})),c()(this,"communityLabelCategoriesItem",(e=>{var t,s=[],n=(0,R.nT)(this.props.postContext.post.communityLabels),o=null==n?void 0:n.categories,i=(0,V.jsx)(w.Z,{categories:o,isYourOwnBlog:e,hasCommunityLabel:null===(t=this.props.postContext.post.communityLabels)||void 0===t?void 0:t.hasCommunityLabel,reportViolation:this.reportViolation,reportViolationStatus:this.state.reportViolationStatus});return s.push((0,V.jsx)(g.Z,{className:u()(W.Z.meatballItem,W.Z.thin,W.Z.communityLabel),isWrappingButton:!0,children:i},"community-label")),s})),c()(this,"communityLabelItems",(()=>{var e=this.props.appContext._c,t=[];return t.push((0,V.jsx)(g.Z,{linkTo:"/settings/account",className:W.Z.meatballItem,children:e("Menu item to redirect to content settings","Content settings")},"content-settings")),t}))}componentDidUpdate(e){e.followed&&!this.props.followed&&(this.hasUnfollowed=!0)}componentDidMount(){return this.props.appContext.getUserInfo().then((e=>{e.communityLabelVisibilitySetting==k.fj&&this.setState({communityLabelVisibilitySetting:k.fj})}))}render(){var e=this.props.postContext.post.id;return(0,V.jsx)(U.ZP,l()(l()({},(0,U._r)(this.props)),{},{forwardedRef:this.containerRef,renderItems:this.renderItems,onPopoverClose:this.onPopoverClose,onPopoverOpen:this.onPopoverOpen,onBlock:this.removePost,popoverBoundary:P.gc.ScrollParent,showOverflowY:!0,postId:e}))}setLinkResetTimer(){clearTimeout(this.copyLinkMessageTimer),this.copyLinkMessageTimer=setTimeout((()=>{this.setState({copyLinkStatus:H.Unclicked}),this.setState({copyCustomLinkStatus:H.Unclicked})}),3e3)}}const G=(0,_.Z)((0,E.X9)(q,{appContext:!0,postContext:!0,timelineContext:!0,toastContext:!0}))},93003:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var n=s(5754),o=s.n(n),i=s(90891),a=s(92023),r=s(43523),l=s(78667),d=s(63583),c=s.n(d);const p="veGhd",u="N4DvW";var h=s(2629);const m=e=>{var t=e.className,s=e.blog,n=e.plan,d=e.useBlogColors,m=e.context,g=(0,l.bp)().logEvent,v=null==n?void 0:n.checkoutLabels.support,b=d?c().blogBackgroundColor:c().paletteAccent,x=d?c().blogContrastingLinkColor:c().paletteAccentTransparent15;return(0,h.jsx)("div",{className:o()(p,t),children:(0,h.jsx)(i.Z,{className:u,label:v,theme:"default",size:"entireWidth",textColor:b,backgroundColor:x,disabledBackgroundColor:x,disabledTheme:"default",onClick:()=>{g({eventName:r.J.PostpSupportTap,eventDetails:{source:m}})},href:(0,a.T8)(s,{membership:{isSupport:!0}}),children:v})})}},11389:(e,t,s)=>{"use strict";s.d(t,{Z:()=>S});var n=s(5754),o=s.n(n),i=s(79615),a=s(59514),r=s(68144),l=s(68384),d=s(62412),c=s(25190),p=s(43684),u=s(63583),h=s.n(u);const m="JloGo",g="IQS1M",v="oE9j4",b="Ohe4v",x="jOW7m",f="ram4w",C="lAM6N",y="eHy7n",w="AYiEs";var j=s(2629),k=e=>{var t=e.content,s=e.isActive,n=void 0!==s&&s,a=e.label,r=e.listItemClassName,d=e.listItemInnerClassName,p=e.onSelect,u=e.value,m=(0,c.v$)().isMobile,v=m?24:16;return(0,j.jsxs)(i.Z,{wrapperClassName:o()(x,r,{[g]:m}),className:o()(f,d),label:a,role:"option",onClick:e=>p(u,e),children:[t||a,n&&(0,j.jsx)(l.Z,{size:{width:v,height:v},colors:{primary:h().paletteGray65}})]})};const S=e=>{var t=e.value,s=e.title,n=e.titleEl,i=e.options,l=e.isOpen,u=void 0!==l&&l,g=e.noChevron,x=void 0!==g&&g,f=e.noTitle,S=void 0!==f&&f,I=e.onChangeIsOpen,N=e.onChange,P=e.onClickGlass,T=e.width,Z=e.chromelessPopover,A=void 0!==Z&&Z,E=e.popoverPosition,M=void 0===E?p.I2.BottomStart:E,L=e.popoverRef,O=e.popoverWrapperClassName,R=e.listItemClassName,D=e.listItemInnerClassName,F=(0,c.v$)().isMobile,B=i.find((e=>e.value===t)),_=(e,t)=>{N(e,t),null==I||I(!1)},U=(0,j.jsx)(j.Fragment,{children:i.map((e=>{var s=e.label,n=e.content,o=e.value;return(0,j.jsx)(k,{value:o,label:s,content:n||s,isActive:t===o,onSelect:_,listItemClassName:R,listItemInnerClassName:D},s)}))}),V=(0,j.jsxs)("button",{onClick:()=>{null==I||I(!u)},className:v,children:[(0,j.jsx)("span",{children:(null==B?void 0:B.label)||s}),!x&&(0,j.jsx)(r.sn,{size:{width:14,height:14},colors:{primary:h().paletteGray65},className:y})]}),z=n?(0,j.jsx)("button",{children:n}):V,H=(0,j.jsxs)("div",{role:"listbox","data-testid":"mobile-selector",className:o()({[w]:u}),children:[!S&&z,u&&(0,j.jsx)(a.Z,{onGlassClick:()=>{null==P||P()},children:(0,j.jsxs)("div",{className:m,children:[(0,j.jsx)("div",{className:C,children:n||s}),(0,j.jsx)("div",{className:b,children:U})]})})]}),W=(0,j.jsx)("div",{role:"listbox","data-testid":"desktop-selector",className:o()({[w]:u}),children:(0,j.jsx)(d.ZP,{isOpen:u,toggle:()=>{null==I||I(!u)},width:T,height:"auto",maxHeight:300,component:U,boundary:p.gc.ScrollParent,position:M,isChromeless:A,popoverWrapperClassName:O,useFlex:!0,disableScroll:!0,isFlipEnabled:!1,popoverRef:L,children:S?(0,j.jsx)(j.Fragment,{}):z})});return(0,j.jsx)(j.Fragment,{children:F?H:W})}},62239:(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var n=s(2474),o=s(54382);const i="q9Ryt",a="qos2S",r="rjayT";var l=s(2629),d=(0,l.jsx)("div",{className:r,children:(0,l.jsx)(n.Ii,{size:{width:15,height:15}})}),c=(0,l.jsx)("div",{className:a});const p=()=>(0,l.jsxs)("div",{className:i,children:[c,d,(0,l.jsx)("div",{children:(0,l.jsx)(o.ZP,{comment:"The text for the 'teaser line' that separates the free content from the membership-only content",children:"Teaser"})}),d,c]})},28798:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s(5754),o=s.n(n),i=s(79615),a=s(78667),r=s(74708),l=s(2629);const d=(0,a.HJ)((function(e){var t=e.appContext._t,s=e.className;return(0,l.jsx)(i.Z,{wrapperClassName:o()(r.Z.reorderButton,s),label:t("Reorder"),children:"::"})}))},26372:(e,t,s)=>{"use strict";s.d(t,{Z:()=>P});var n=s(5754),o=s.n(n),i=s(95004),a=s(60499),r=s(36343),l=(0,r.q)("sponsored-border");l.defaultProps={size:{width:25,height:25}};const d=l;var c=(0,r.q)("sponsored-dollar");c.defaultProps={size:{width:14,height:8}};const p=c;var u=s(43523),h=s(78667),m=s(43166),g=s(63583),v=s.n(g);const b="FqD9n",x="fLccs",f="b76BB",C="zU1s3",y="LVy2A",w="m544j",j="XuRmK",k="UGqjE",S="lEZQk",I="IBqNg";var N=s(2629);const P=function(e){var t=e.dollarSize,s=void 0===t?{width:8,height:11}:t,n=e.blazeSize,r=void 0===n?{width:13,height:13}:n,l=e.link,c=e.color,g=void 0===c?v().paletteGray65:c,P=e.showSpinner,T=void 0===P||P,Z=e.showSponsoredText,A=void 0===Z||Z,E=e.showAdFreeLink,M=void 0===E||E,L=e.hideOnMobile,O=void 0===L||L,R=e.isBlazeCampaign,D=(0,h.bp)(),F=D._c,B=D._t,_=D.wwwBaseUrl,U=D.logEvent,V=(0,m.uu)().isNarrow,z=(0,i.useRef)(null),H=null!=l?l:"".concat(_,"/docs/en/relevantads");R&&(H=null!=l?l:"https://tumblr.zendesk.com/hc/en-us/articles/5298854249367");return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("a",{className:o()({[x]:!V,[b]:V,[f]:O}),href:H,target:"_blank",children:[T&&(0,N.jsxs)("div",{className:C,children:[R?(0,N.jsx)("div",{className:j,children:(0,N.jsx)(a.Z,{filled:!0,filledIconColors:{primary:"#666"},size:r})}):(0,N.jsx)("div",{className:y,children:(0,N.jsx)(p,{size:s,colors:{primary:g}})}),(0,N.jsx)("div",{className:w,ref:z,children:(0,N.jsx)(d,{size:{width:22,height:22},colors:{primary:g}})})]}),A&&(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("div",{className:k,style:{color:g},children:R?F("Label for blaze campaigns, were Blaze is the product name.","Sponsored with Blaze "):B("Sponsored")})})]}),M&&(0,N.jsx)("a",{className:S,href:"/settings/ad-free-browsing?source=tsd",target:"_blank",rel:"noopener noreferrer",onClick:()=>{U({eventName:u.J.AdFreeLinkClick})},children:(0,N.jsx)("div",{className:I,style:{color:g},children:B("Go Ad-Free")})})]})}},89006:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s(97013),o=s(54382);const i="MbFgY",a="fK9F5";var r=s(2629);const l=e=>{var t=e.color,s=e.backgroundColor,l=e.size,d=s?{color:t,backgroundColor:s,padding:"2px 12px"}:{color:t};return(0,r.jsxs)("span",{className:i,style:d,children:[(0,r.jsx)(n.Z,{size:{width:l,height:l},colors:{primary:t}}),(0,r.jsx)("span",{className:a,children:(0,r.jsx)(o.ZP,{comment:"Indicates that the user has supported the creator of a post by subscribing to their blog.",children:"Supporting"})})]})}},26216:(e,t,s)=>{"use strict";s.d(t,{s:()=>y});var n=s(54138),o=s.n(n),i=s(50209),a=s.n(i),r=s(95004),l=s(13586),d=s(83644),c=s(43523),p=s(19403),u=s(22979),h=s(78667),m=s(59215),g=s(7070),v=s(86179),b=s(96467),x=s(93678),f=s(2629);const C=function(e){var t=e.logImpression,s=(0,r.useRef)(),n=(0,r.useRef)(!1),o=(0,v.TH)(),i=()=>{if(n.current&&s.current){var e=Math.floor(performance.now()-s.current);t(e)}s.current=void 0,n.current=!1};return(0,r.useEffect)((()=>(document.addEventListener("visibilitychange",i),function(){document.removeEventListener("visibilitychange",i)})),[]),(0,r.useEffect)((()=>i),[o]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l.df,{className:x.Z.hiddenObserver,onChange:e=>{e?s.current=performance.now():i()},rootMargin:"-".concat(b.desktopHeaderHeightPx,"px 0px"),children:(0,f.jsx)("div",{})}),(0,f.jsx)(l.df,{className:x.Z.hiddenObserverMiddlePoint,onChange:e=>{e&&(n.current=!0)},children:(0,f.jsx)("div",{})})]})};function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=1e3;class n extends r.Component{constructor(){super(...arguments),a()(this,"areImpressionsEnabled",!t),a()(this,"provideEventDetails",p.L),a()(this,"isIntersecting",!1),a()(this,"isAboutToIntersect",!1),a()(this,"isPostTruncated",!1),a()(this,"setIsPostTruncatedForImpressionEvent",(e=>{this.isPostTruncated=e})),a()(this,"setInViewCallback",(e=>{this.inViewCallback=e})),a()(this,"setApproachingViewCallback",(e=>{this.approachingViewCallback=e})),a()(this,"isInView",(()=>this.isIntersecting)),a()(this,"isApproachingView",(()=>this.isAboutToIntersect)),a()(this,"onEnterView",(e=>{var t;(this.isIntersecting=e,this.isIntersecting)?(null===(t=this.inViewCallback)||void 0===t||t.call(this),this.inViewCallback=null,this.didBeginIntersecting()):this.didEndIntersecting()})),a()(this,"beforeEnterView",(e=>{var t;(this.isAboutToIntersect=e,this.isAboutToIntersect)&&(null===(t=this.approachingViewCallback)||void 0===t||t.call(this))})),a()(this,"didBeginIntersecting",(()=>{if(this.areImpressionsEnabled){var e=this.props,t=e.timelineObject,n=e.adContext,o=t.adm,i=this.props.appContext.features;o&&n.sendImpressionADMBeacon(o),i.redpopUseDwellTimeImpression||this.logImpression({eventName:c.J.Impression}),((null==t?void 0:t.displayType)===d.y.Sponsored||(0,u.WN)(t))&&(i.redpopUseDwellTimeImpression&&this.logImpression({eventName:c.J.Impression}),this.viewableImpressionTimer=window.setTimeout((()=>{this.logImpression({eventName:c.J.ViewableImpression}),this.viewableImpressionTimer=null}),s))}})),a()(this,"logImpression",(e=>{var t=e.eventName,s=this.props.appContext.logImpression,n=this.props.dashboardContext.tabId,i=this.props.timelineObject;s({placementId:i.placementId,displayType:i.displayType,serveId:i.serveId,eventName:t,eventDetails:o()(o()({},this.provideEventDetails(i,!0)),{},{tab:n})})})),a()(this,"logImpressionWithDwellTime",(e=>{var t,s=this.props.appContext.logImpression,n=this.props.timelineContext.displayMode,i=this.props.dashboardContext.tabId,a=this.props.timelineObject,r=a.placementId,l=a.displayType,p=a.serveId,u=a.shouldShowTip;(null==a?void 0:a.displayType)!==d.y.Sponsored&&s({placementId:r,displayType:l,serveId:p,eventName:c.J.Impression,eventDetails:o()(o()({},this.provideEventDetails(a,!0)),{},{post_id:a.id,trackable_type:a.objectType,dwell_time:e,display_mode:n,blog_id:null===(t=a.blog)||void 0===t?void 0:t.uuid,has_tip:!!u,is_post_trucated:this.isPostTruncated,tab:i})})})),a()(this,"didEndIntersecting",(()=>{this.viewableImpressionTimer&&(window.clearTimeout(this.viewableImpressionTimer),this.viewableImpressionTimer=null)})),a()(this,"setImpressionsEnabled",(e=>{var t=this.areImpressionsEnabled;this.areImpressionsEnabled=e,t!==e&&e&&this.isIntersecting&&this.didBeginIntersecting()})),a()(this,"setProvideEventDetails",(e=>this.provideEventDetails=e))}render(){var s=this.props.timelineObject,n=s.placementId,i=s.serveId,a=s.displayType,r=o()(o()({},this.props),{},{setIsPostTruncatedForImpressionEvent:this.setIsPostTruncatedForImpressionEvent},t?{setImpressionsEnabled:this.setImpressionsEnabled,setProvideEventDetails:this.setProvideEventDetails,isInView:this.isInView,isApproachingView:this.isApproachingView,setInViewCallback:this.setInViewCallback,setApproachingViewCallback:this.setApproachingViewCallback}:{}),l=(0,f.jsx)(e,o()({},r));return n||i||a===d.y.Sponsored?(0,f.jsx)(w,{beforeEnterView:this.beforeEnterView,onEnterView:this.onEnterView,logDwelltimeImpression:this.logImpressionWithDwellTime,children:l}):l}componentDidUpdate(e){this.props.timelineObject.placementId!==e.timelineObject.placementId&&this.didEndIntersecting()}componentWillUnmount(){this.viewableImpressionTimer&&window.clearTimeout(this.viewableImpressionTimer)}}return(0,g.D)(n,"".concat(e.name,"WithImpressionLogging")),(0,m.X9)(n,{appContext:!0,adContext:!0,timelineContext:!0,dashboardContext:!0})}var w=e=>{var t=e.children,s=e.beforeEnterView,n=e.onEnterView,o=e.logDwelltimeImpression,i="".concat(Math.max(window.innerHeight+270,700),"px"),a=(0,h.bp)().features;return(0,f.jsxs)("div",{className:x.Z.impressionLoggingWrapper,children:[a.redpopUseDwellTimeImpression&&(0,f.jsx)(C,{logImpression:o}),(0,f.jsx)(l.df,{onChange:n,className:x.Z.hiddenObserver}),(0,f.jsx)(l.df,{onChange:s,rootMargin:"0px 0px ".concat(i," 0px"),triggerOnce:!0,className:x.Z.hiddenObserver}),t]})}},753:(e,t,s)=>{"use strict";s.d(t,{ej:()=>ce,ZP:()=>oe,$E:()=>re});var n=s(54138),o=s.n(n),i=s(56305),a=s(64683),r=s(43462),l=s(68280),d=s(5700),c=s(49827),p=s(50209),u=s.n(p),h=s(95004),m=s(79615),g=s(59215);const v="ZqZ6N",b="lYffY";var x=s(2629);class f extends h.Component{constructor(){super(...arguments),u()(this,"state",{expanded:!1}),u()(this,"expand",(()=>{this.setState({expanded:!0})}))}componentDidUpdate(){var e=this.props.postTruncationContext.unfoldNestedContent,t=this.state.expanded;e&&!t&&this.expand()}render(){if(this.state.expanded)return this.props.components;var e=(0,this.props.appContext._t)("Keep reading");return(0,x.jsx)("div",{className:v,children:(0,x.jsx)(m.Z,{onClick:this.expand,className:b,label:e,children:e})})}}const C=(0,g.X9)(f,{appContext:!0,postTruncationContext:!0});var y=s(68384),w=s(78667),j=s(63583),k=s.n(j);const S="vtkd5",I="N9n3m",N="nXX23",P="uEVCb",T="Cetez",Z="jkMFs";const A=function(e){var t=e.answered,s=e.choices,n=e.component,o=e.handleChoiceClick,i=e.isSelected,a=e.isPollAnswer,r=e.totalVotes,l=(0,w.bp)()._t;if(a){var d;if(!t)return(0,x.jsx)(m.Z,{label:l("Poll Choice"),onClick:o,wrapperClassName:N,children:(0,x.jsx)("div",{className:S,children:n})});var c=(null===(d=R(n.props.blockIndex,s))||void 0===d?void 0:d.voteCount)||0,p=Math.round(c/r*100);return(0,x.jsxs)("div",{className:S,children:[(0,x.jsx)("progress",{className:P,max:r,value:c}),(0,x.jsxs)("div",{className:I,children:[n,i&&(0,x.jsx)("div",{className:Z,children:(0,x.jsx)(y.Z,{size:{width:14,height:14},colors:{primary:k().paletteBlack}})}),(0,x.jsxs)("div",{className:T,children:[p,"%"]})]})]})}return(0,x.jsx)(x.Fragment,{children:n})};var E=s(81584),M=s(94522),L=s(45051);function O(e,t){return(0,d.U0)(t)&&t.choices.find((t=>{var s=t.blocks.find((t=>t===e));return s||0===s}))}function R(e,t){return t.find((t=>{var s=t.blocks.find((t=>t===e));return!!s||0===s}))||null}class D extends h.Component{constructor(){var e;super(...arguments),u()(this,"state",{answered:(e=this.props.layout,!!e.selected.length),selected:this.props.layout.selected,totalVotes:this.props.layout.choices.reduce(((e,t)=>e+t.voteCount),0),choices:this.props.layout.choices}),u()(this,"apiHelper",(0,E.ZP)(this.props.appContext.apiFetch))}componentDidUpdate(e){var t={};(0,M.X)(this.props.layout.selected,e.layout.selected)||(t.selected=this.props.layout.selected),(0,M.X)(e.layout.choices,this.props.layout.choices)||(t.choices=this.props.layout.choices),Object.keys(t).length&&this.setState(o()({},t))}render(){var e=this.props,t=e.components,s=e.layout;return(0,x.jsx)(x.Fragment,{children:t.map(((e,t)=>{var n=R(e.props.blockIndex,this.state.choices);return(0,x.jsx)(A,{answered:this.state.answered,choices:this.state.choices,component:e,handleChoiceClick:n?this.handleChoiceClick(n.choiceId):L.Z,isSelected:!!n&&this.state.selected.indexOf(n.choiceId)>-1,totalVotes:this.state.totalVotes,isPollAnswer:!!O(e.props.blockIndex,s)},t)}))})}handleChoiceClick(e){return()=>this.votePoll([e])}votePoll(e){return this.apiHelper.votePoll(this.props.layout.pollId,e).fetch((e=>{var t=e.response;this.setState({answered:!0,selected:t.selected,totalVotes:t.choices.reduce(((e,t)=>e+t.voteCount),0),choices:t.choices})}))}}const F=(0,w.HJ)(D);var B=s(5754),_=s.n(B),U=s(66306),V=s(68346),z=s(55855),H=s(96467),W=s(59992);const q="GzjsW",G="CQmeg",X="ntvhe";class Q extends h.Component{constructor(){super(...arguments),u()(this,"state",{isObjectFitSupported:!0})}componentDidMount(){var e,t;this.setState({isObjectFitSupported:null===(e=(t=CSS).supports)||void 0===e?void 0:e.call(t,"object-fit","cover")})}render(){var e=this.props,t=e.layout,s=e.components,n=e.postContext,i=e.adContext,a=i.adPlacementConfiguration,r=i.hydraConfigInstanceId;if(!this.state.isObjectFitSupported)return(0,x.jsx)(x.Fragment,{children:s});var l=(0,W.M3)(t),c=re(ce(l)),p=this.rowHasPaywallComponent();return(0,x.jsx)("div",{className:q,children:l.display.map((e=>{var t,i,l,u,m=e.blocks;if(!m.length)return null;var g=m.map((e=>{if(p){var t=s.find((t=>t.props.blockIndex===e));if(t)return t}return s[c.indexOf(e)]}));if(!g.length||1===m.length&&(null===(t=g[0])||void 0===t||null===(i=t.props)||void 0===i||null===(l=i.block)||void 0===l?void 0:l.type)===d.kH.None)return null;var v=g.filter(Y);if(1===g.length&&!v.length)return g;var b=m.reduce(((e,t)=>"".concat(e," ").concat(t)),"");if((null===(u=e.mode)||void 0===u?void 0:u.type)===d.T8.Carousel)return(0,x.jsx)(U.Z,{items:g,krakenEventDetails:(0,z.U)({adPlacementConfiguration:a,hydraConfigInstanceId:r,timelineObject:this.props.postContext.post})},b);var f=v.map((e=>(0,W.J0)((0,d.I3)(e.props.block)))).sort(((e,t)=>e-t))[0],C=!1,y=g.map((e=>{var t,s;if(!Y(e))return e;var i=e.props.block,a=new V.Z((0,d.I3)(i));null!==(t=null==n||null===(s=n.presentationStyle)||void 0===s?void 0:s.showsSmallImagesAtOriginalWidth)&&void 0!==t&&!t||1!==g.length?a.generateDisplayHeights((e=>{var t=e.width;return f*t})):a.getLargestImage().width<H.smallImagePostBreakpoint&&(C=!0);var r={displayAtOriginalSize:C,block:o()(o()({},i),{},{media:a.getImagesArray(),imageScale:1/g.length})};return(0,h.cloneElement)(e,r)}));return(0,x.jsx)("div",{className:_()(G,{[X]:C}),children:y},b)}))})}rowHasPaywallComponent(){return this.props.components.some((e=>e.props.block.type===d.kH.Paywall))}}const J=(0,g.X9)(Q,{postContext:!0,adContext:!0});function Y(e){var t,s;return(null==e||null===(t=e.props)||void 0===t||null===(s=t.block)||void 0===s?void 0:s.type)===d.kH.Image}var K=(e,t)=>{var s=(0,r.i)(e,t);return(0,x.jsx)(r.Z,{block:e,blockIndex:t},s)};const $=function(e){var t,s,n=e.layout,o=e.components;(0,d.af)(n)?t=(0,x.jsx)(c.Z,{blog:null===(s=n.attribution)||void 0===s?void 0:s.blog,isAsking:!0,components:o}):(0,d.U0)(n)?t=(0,x.jsx)(F,{components:o,layout:n}):(0,d.Rf)(n)?t=(0,x.jsx)(c.Z,{blog:n.attribution.blog,isAsking:!1,components:o}):(0,d.le)(n)?t=(0,x.jsx)(J,{layout:n,components:o}):(0,d.eQ)(n)?t=(0,x.jsx)(C,{components:o}):((0,d.m9)(n)||(0,d.PV)(n))&&(t=(0,x.jsx)(x.Fragment,{children:o}));return t||("production"===l.Z.Development&&console.warn('Unsupported layout type "'.concat(n.type,'" in post')),null)};var ee=s(31679),te=s(43166);const se=function(e){var t=e.blocks.map((e=>o()({},e))),s=[],n=t.reduce(((e,t)=>{if((0,d.dz)(t)&&(0,d.pZ)(t)){var n=e.length-1;if(n>=0){var o=e[n];if((0,d.cd)(o)&&o.elements[0].subtype===t.subtype)return s.push({type:d.kH.None}),o.elements=o.elements.concat(t),e}var i={type:t.subtype===d.lr.OrderedListItem?d.kH.OrderedList:d.kH.UnorderedList,elements:[t]},a=[...s];return s=[],[...e,...a,i]}var r=[...s];return s=[],[...e,...r,t]}),[]);return n.push(...s),n};var ne=s(16273);const oe=e=>{var t=e.blocks,s=e.layouts,n=e.postingBlog,r=e.isOriginalPost,l=e.adm,c=e.placementId,p=e.isEdit,u=(0,te.uu)(),h=u.post,m=u.presentationStyle,g=u===te.Nw,v=(0,ee.b)(),b=v.hydraConfigInstanceId,f=v.adPlacementConfiguration,C=function(e){if(!e)return[];return e.filter(d.Lk)}(s),y=function(e){for(var t=e.layouts,s=e.numberOfBlocks,n=e.isOriginalPost,i=e.postingBlog,a=[],r=0;r<s;r+=1)a.push(r);var l=[];if(!t.length){var c={type:d.ms.Rows,rows:a.map((e=>[e]))};l.push(c)}return t.forEach((e=>{if(l.push(e),(0,d.af)(e)){var t=a.slice(e.blocks.length);if(t.length){var s=o()({type:n?d.ms.None:d.ms.Answer,blocks:t},!n&&{attribution:{blog:i,type:"blog"}});l.push(s)}}else if((0,d.PV)(e)){var r=a.slice(e.truncateAfter+1),c={type:d.ms.BelowTheFold,blocks:r};l.push(c)}})),l}({isOriginalPost:r,postingBlog:n,layouts:C,numberOfBlocks:t.length}),w=function(e,t){return e.map((e=>(0,d.LX)(e)?o()(o()({},e),{},{blog:t}):e))}(t,n),j=function(e){if(e.length<=1)return e;var t,s,n,i,a,r,l=[];if(e.forEach((e=>{(0,d.PV)(e)?n=e:(0,d.eQ)(e)?i=e:(0,d.af)(e)?t=e:(0,d.Rf)(e)?s=e:(0,d.le)(e)?a=e:r=e})),n&&i){var c=[];if(t)c=[t];else if(a&&n.truncateAfter>-1){var p=n.blocks.length-1;c=[ie(a,p)[0]]}l.push(o()(o()({},n),{},{nestedLayouts:c})),l.push(i)}else{if(!t)return e;if(!a)return e;var u=t.blocks.length-1,h=ie(a,u),m=[h[1]];l.push(o()(o()({},t),{},{nestedLayouts:[h[0]]})),l.push(s?o()(o()({},s),{},{type:d.ms.Answer,nestedLayouts:m}):o()(o()({},r),{},{type:d.ms.None,nestedLayouts:m}))}return l}(y),k=ae(j,w);return w.filter(d.RD).length?m.imagePostsOpenInPeepr?(0,x.jsx)(i.Z,{blogName:null==n?void 0:n.name,postId:null==h?void 0:h.id,showBlogCard:!1,children:k}):(0,x.jsx)(a.ZP,{adm:l,placementId:c,krakenEventDetails:p||g?{}:(0,z.U)({adPlacementConfiguration:f,hydraConfigInstanceId:b,timelineObject:h}),children:k}):(0,x.jsx)(x.Fragment,{children:k})};function ie(e,t){var s=[{type:d.ms.Rows,display:[]},{type:d.ms.Rows,display:[]}];if((0,d.oF)(e)){var n=e.display;n.forEach(((i,a)=>{var r=i.blocks[i.blocks.length-1];if(t===r){var l=n.slice(0,a+1),d=n.slice(a+1);s=[o()(o()({},e),{},{display:l}),o()(o()({},e),{},{display:d})]}}))}if((0,d.Ps)(e)){var i=e.rows;i.forEach(((n,a)=>{var r=n[n.length-1];if(t===r){var l=i.slice(0,a+1),d=i.slice(a+1);s=[o()(o()({},e),{},{rows:l}),o()(o()({},e),{},{rows:d})]}}))}return s}function ae(e,t){var s=[];return e.forEach((e=>{var n;if(e)if(null!==(n=e.nestedLayouts)&&void 0!==n&&n.length){var o=re(ce(e)),i=[],a=[];e.nestedLayouts.forEach(((e,s)=>{var n=re(ce(e));if(s>0){var o=a[a.length-1];if(o+1!==n[0]){var r=le(t.slice(o+1,n[0])).map(K);i.push(...r);var l=(0,ne.Z)(o+1,n[0]);a.push(...l)}}i.push(...ae([e],t)),a.push(...n)}));var r=le(t.slice(o[0],a[0])).map(K),l=le(t.slice(a[0]+a.length,o[o.length-1]+1)).map(K);s.push(de(e,[...r,...i,...l]))}else{var d=re(ce(e,t)),c=le(t.slice(d[0],d[d.length-1]+1));s.push(de(e,c.map(K)))}})),s}function re(e){return e.sort(((e,t)=>e-t))}function le(e){return e&&se({blocks:e})||[]}function de(e,t){var s=ce(e).reduce(((e,t)=>e.concat("".concat(t," "))),"".concat(e.type," "));return(0,x.jsx)($,{layout:e,components:t},s)}function ce(e,t){return(0,d.af)(e)||(0,d.Rf)(e)||(0,d.PV)(e)||(0,d.eQ)(e)||(0,d.m9)(e)?e.blocks:(0,d.Ps)(e)?e.rows.flat():(0,d.oF)(e)?e.display.map((e=>e.blocks)).flat():(0,d.U0)(e)&&(null==t?void 0:t.map(((e,t)=>t)))||[]}},10736:(e,t,s)=>{"use strict";s.d(t,{Z:()=>C});var n=s(50209),o=s.n(n),i=s(95004),a=s(73683),r=s(8156),l=s(79615),d=s(22183),c=s(25190),p=s(65214),u=s(43452),h=s(5700),m=s(81584),g=s(59215),v=s(63583),b=s.n(v),x=s(2629);class f extends i.Component{constructor(){super(...arguments),o()(this,"apiHelper",(0,m.ZP)(this.props.appContext.apiFetch)),o()(this,"setLegacyFormCloseHandler",(()=>{var e=this.props.modalRouteContext.addOnCloseModalRouteHandler;this.removeOnModalCloseListener=e(this.onLegacyFormClose)})),o()(this,"setFormCloseHandler",(()=>{var e=this.props.modalRouteContext.addOnCloseModalRouteHandler;this.removeOnModalCloseListener=e(this.onFormClose)})),o()(this,"refreshPostInTimeline",(()=>{var e=this.props,t=e.timelineContext,s=e.editablePost,n=s.id,o=s.blog;return this.apiHelper.getPosts({postId:n,blogIdentifier:o.name}).fetch((e=>{var s;null==t||null===(s=t.onEditTimelineObject)||void 0===s||s.call(t,e.response.posts[0])}))})),o()(this,"onFormClose",(e=>{var t,s=e.isModalSuccess,n=e.postStatus,o=this.props.editablePost.state,i=o!==h.hA.Published&&o!==h.hA.Private&&(n===u.$t.Now||n===u.$t.Private);return null===(t=this.removeOnModalCloseListener)||void 0===t||t.call(this),s&&!i?this.refreshPostInTimeline():Promise.resolve()})),o()(this,"onLegacyFormClose",(e=>{var t,s,n=e.isModalSuccess,o=e.legacyPostFormState,i=this.props,a=i.timelineContext,r=i.editablePost,l=r.state,d=r.id;if(null===(t=this.removeOnModalCloseListener)||void 0===t||t.call(this),n&&o&&o===l)return this.refreshPostInTimeline();n&&o&&o!==l&&(null==a||null===(s=a.onRemoveTimelineObject)||void 0===s||s.call(a,{id:d}));return Promise.resolve()}))}componentWillUnmount(){var e;null===(e=this.removeOnModalCloseListener)||void 0===e||e.call(this)}render(){return(0,x.jsx)(c.ZP,{children:e=>{var t=e.isMobile;return this.getButton(t)}})}getButton(e){var t,s=this.props,n=s.editablePost,o=s.shouldAlwaysOpenInLegacy,i=s.appContext._t,l=s.className,d=s.disabled;return o?e?this.getLegacyAnchor():this.getLegacyIframeButton():d?(0,x.jsx)(x.Fragment,{children:this.getLinkDisplay()}):(0,x.jsx)(a.rU,{onClick:this.setFormCloseHandler,to:(0,p.yj)({blogName:n.blog.name,postId:null===(t=n.id)||void 0===t?void 0:t.toString()},(0,r.Z)({editablePost:n})),"aria-label":i("Edit"),className:l,children:this.getLinkDisplay()})}getLinkDisplay(){var e=this.props,t=e.isTextButton,s=e.appContext._t;return t?s("Edit"):this.getIcon()}getIcon(){var e=this.props.disabled;return(0,x.jsx)(d.Z,{size:{width:21,height:21},colors:{primary:e?b().paletteGray40:b().paletteGray65}})}getLegacyIframeButton(){var e,t=this.props,s=t.editablePost,n=t.disabled,o=this.props.appContext._t;return n?(0,x.jsx)(l.Z,{label:o("Edit"),disabled:n,children:this.getLinkDisplay()}):(0,x.jsx)(a.rU,{to:(0,p.yj)({blogName:s.blog.name,postId:null===(e=s.id)||void 0===e?void 0:e.toString()}),children:(0,x.jsx)(l.Z,{onClick:this.setLegacyFormCloseHandler,label:o("Edit"),children:this.getLinkDisplay()})})}getLegacyAnchor(){var e=this.props.appContext,t=e._t,s=e.wwwBaseUrl,n=this.props.disabled,o=encodeURIComponent("".concat(s,"/dashboard?restore=1"));return n?(0,x.jsx)(l.Z,{label:t("Edit"),disabled:n,children:this.getLinkDisplay()}):(0,x.jsx)("a",{href:"".concat(s,"/edit/").concat(this.props.editablePost.id,"?redirect_to=").concat(o,"&avoid_redirect=1"),role:"button",tabIndex:-1,children:(0,x.jsx)(l.Z,{label:t("Edit"),children:this.getLinkDisplay()})})}}o()(f,"defaultProps",{shouldAlwaysOpenInLegacy:!0});const C=(0,g.X9)(f,{appContext:!0,timelineContext:!0,modalRouteContext:!0})},53379:(e,t,s)=>{"use strict";s.d(t,{Z:()=>x});var n=s(54138),o=s.n(n),i=s(54589),a=s.n(i),r=s(5754),l=s.n(r),d=s(79615),c=s(27755),p=s(22790),u=s(78667),h=s(63583),m=s.n(h);const g="yDfZA";var v=s(2629),b=["color","forceUseAirplane","disabled","wrapperClassName"];const x=e=>{var t=e.color,s=void 0===t?m().paletteGray65:t,n=e.forceUseAirplane,i=void 0!==n&&n,r=e.disabled,h=e.wrapperClassName,x=a()(e,b),f=(0,u.bp)(),C=f._t,y=f.features,w=r?m().paletteGray40:s,j=y.shareButtonSwap&&!i?(0,v.jsx)(p.Z,{size:{width:24,height:24},colors:{primary:w}}):(0,v.jsx)(c.Z,{size:{width:21,height:21},colors:{primary:w}});return(0,v.jsx)(d.Z,o()(o()({},x),{},{disabled:r,label:C("Share"),wrapperClassName:l()(h,{[g]:!!r}),children:j}))}},72835:(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var n=s(54138),o=s.n(n),i=s(79615),a=s(33951),r=s(78667);const l="PArFh",d="HQqNA";var c=s(2629);const p=function(e){var t=e.onClick,s=e.withLabel,n=void 0===s||s,p=e.size,u=(0,(0,r.bp)()._c)("Tip is a verb labeling a button that start the process of giving a tip to a blog","Tip"),h=p?{size:p}:{};return(0,c.jsxs)(i.Z,{className:l,label:u,onClick:t,"data-testid":"tippingButton",children:[(0,c.jsx)(a.Z,o()({},h)),n&&(0,c.jsx)("span",{className:d,"data-testid":"tipLabel",children:u})]})}},827:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s(54382),o=s(5700);const i="If3QZ";var a=s(2629);const r=function(e){var t=e.attribution;if((0,o.yw)(t)){var s=t.url,r=t.blog.name;return(0,a.jsx)("div",{className:i,"data-attribution":"true",children:(0,a.jsx)("a",{href:s,target:"_blank",rel:"noopener",children:(0,a.jsx)(n.ZP,{params:{blogName:r},components:{strong:(0,a.jsx)("strong",{})},children:"GIF by [strong][blogName][/strong]"})})})}return null}},72341:(e,t,s)=>{"use strict";s.d(t,{ZP:()=>z,XK:()=>V});var n=s(5754),o=s.n(n),i=s(43619),a=s(5700),r=s(68859),l=s(54138),d=s.n(l),c=s(50209),p=s.n(c),u=s(95004),h=s(10490),m=s(96977),g=s(83054),v=s(25190),b=s(59215),x=s(63583),f=s.n(x),C=s(96467),y=s.n(C);const w={nativePlayer:"VpTnv",progress:"iFok_",withImage:"GR0kA",seeking:"bgpDC",wrapper:"vP7cO",playPause:"zwgHD",trackInfo:"ZVJh0",trackTitle:"Lshd2",trackArtist:"LKThX",trackAlbum:"OKWej",albumImage:"Zz9Fz"};var j=s(2629);class k extends u.Component{constructor(){super(...arguments),p()(this,"state",{isPlaying:!1,seekingBarWidth:0,isDragging:!1}),p()(this,"onTimeUpdate",(()=>{if(this.progress&&this.audioEl){var e=this.progress.clientWidth,t=this.audioEl.duration,s=this.audioEl.currentTime,n=Math.round(s/t*e);this.setState({seekingBarWidth:n})}})),p()(this,"onEnded",(()=>{this.setState({isPlaying:!1,seekingBarWidth:0}),this.audioEl&&(this.audioEl.currentTime=0)})),p()(this,"handlePlayButtonClick",(()=>this.setState((e=>({isPlaying:!e.isPlaying}))))),p()(this,"onTouchStart",(e=>{this.state.isPlaying&&this.touchHandler(e)})),p()(this,"onTouchEnd",(()=>{this.handleTouchEndMouseUp()})),p()(this,"onProgressClick",(e=>{this.mouseHandler(e)})),p()(this,"onMouseMove",(e=>{this.state.isDragging&&this.mouseHandler(e)})),p()(this,"onMouseDown",(()=>{this.setState({isDragging:!0,isPlaying:!1})})),p()(this,"onMouseUp",(()=>{this.handleTouchEndMouseUp()})),p()(this,"handleTouchEndMouseUp",(()=>{this.setState({isDragging:!1,isPlaying:!0})})),p()(this,"touchHandler",(e=>{var t=e.changedTouches[0].clientX,s=e.currentTarget;this.updateSeekBarPositionWithEvent(t,s)})),p()(this,"mouseHandler",(e=>{var t=e.clientX,s=e.currentTarget;this.updateSeekBarPositionWithEvent(t,s)})),p()(this,"updateSeekBarPositionWithEvent",((e,t)=>{var s;if(this.audioEl&&this.progress){var n=e-((null===(s=t.firstElementChild)||void 0===s?void 0:s.getBoundingClientRect().left)||0),o=this.audioEl.duration,i=this.progress.clientWidth,a=o/i*n,r=Math.round(a/o*i);r<=i&&this.setState({seekingBarWidth:r}),this.audioEl.currentTime=a}})),p()(this,"playAudio",(()=>{var e;null===(e=this.audioEl)||void 0===e||e.play()})),p()(this,"stopAudio",(()=>{var e;null===(e=this.audioEl)||void 0===e||e.pause()}))}componentDidUpdate(e,t){var s,n;null===(s=(n=this.props.autoDockContext).setComponentToAutoDock)||void 0===s||s.call(n,this.state.isPlaying),t.isPlaying!==this.state.isPlaying&&(this.state.isPlaying?this.playAudio():this.stopAudio()),e.isDocked&&!this.props.isDocked&&this.setState({isPlaying:!1})}render(){var e=this.props.appContext._t,t="".concat(w.progress," ").concat(this.props.poster?w.withImage:""),s={onTouchStart:this.onTouchStart,onTouchMove:this.touchHandler,onTouchEnd:this.onTouchEnd},n={onClick:this.onProgressClick,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp};return(0,j.jsxs)("div",{className:w.nativePlayer,children:[(0,j.jsx)(v.ZP,{children:o=>{var i,a,r=o.isMobile?s:n;return(0,j.jsx)("div",d()(d()({},r),{},{className:t,ref:e=>this.progress=e,role:"slider","aria-label":e("Audio Player"),"aria-valuemin":0,"aria-valuemax":null===(i=this.audioEl)||void 0===i?void 0:i.duration,"aria-valuenow":null===(a=this.audioEl)||void 0===a?void 0:a.currentTime,children:(0,j.jsx)("div",{className:w.seeking,ref:e=>this.seeking=e,style:{width:"".concat(this.state.seekingBarWidth,"px")}})}))}}),(0,j.jsxs)("div",{className:w.wrapper,children:[(0,j.jsx)("div",{className:w.playPause,onClick:this.handlePlayButtonClick,role:"button","aria-label":this.state.isPlaying?e("Pause"):e("Play"),children:this.state.isPlaying?(0,j.jsx)(h.Z,{colors:{primary:f().paletteWhite}}):(0,j.jsx)(m.Z,{cropped:!0,colors:{primary:f().paletteWhite},size:{width:24,height:24}})}),(0,j.jsxs)("div",{className:w.trackInfo,children:[this.props.trackInfo.title&&(0,j.jsx)("div",{className:w.trackTitle,children:this.props.trackInfo.title}),this.props.trackInfo.artist&&(0,j.jsx)("div",{className:w.trackArtist,children:this.props.trackInfo.artist}),this.props.trackInfo.album&&(0,j.jsx)("div",{className:w.trackAlbum,children:this.props.trackInfo.album})]}),(0,j.jsx)("audio",{preload:"auto",style:w,ref:e=>this.audioEl=e,onTimeUpdate:this.onTimeUpdate,onEnded:this.onEnded,title:this.props.trackInfo.title,crossOrigin:"anonymous",children:(0,j.jsx)("source",{className:"audio-source",src:this.props.src})}),this.props.poster?(0,j.jsx)("div",{className:w.albumImage,children:(0,j.jsx)(g.Z,{imageResponse:this.props.poster,sizes:"".concat(y().audioPostAlbumCoverWidth,"px")})}):null]})]})}}const S=(0,b.X9)(k,{appContext:!0,autoDockContext:!0}),I="BIsI3",N="OHDdK",P="KilfT",T="SDYOz",Z="zZeJN",A="t69by",E="Z6JVM",M="no7Dd",L="sl8DM";var O=function(e){var t,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return void 0!==e.media&&"tumblr"===e.provider&&(s||(0,r.Z)(null===(t=e.media)||void 0===t?void 0:t.url))},R=e=>e.provider===a.nY.Spotify,D=e=>{var t,s;return R(e)&&!!(null!==(t=e.url)&&void 0!==t&&t.includes("/episode/")||null!==(s=e.url)&&void 0!==s&&s.includes("/show/"))},F=e=>e.provider===a.nY.Soundcloud,B=e=>e.provider===a.nY.Bandcamp,_=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!O(e,t)&&!!e.embedUrl&&(R(e)||B(e)||F(e))},U=(e,t,s,n)=>{var a,r=e.title,l=e.artist,d=e.album,c=e.poster,p=e.url,u={title:r,artist:l,album:d};if(O(e,n))return((e,t,s,n)=>(0,j.jsx)(S,{poster:s,trackInfo:t,src:e.url,isDocked:n}))(e.media,u,c,s);if(_(e,n))return((e,t,s)=>(0,j.jsx)(i.Z,{wrapperClassName:o()(I,t),children:(0,j.jsx)("iframe",{title:s,className:M,src:e,frameBorder:"0"})}))(e.embedUrl,t,r);var h=p||(null===(a=e.media)||void 0===a?void 0:a.url);return h?(0,j.jsx)("a",{className:L,href:h,target:"_blank",rel:"noopener noreferrer",children:h}):null},V=e=>!O(e)&&!R(e)&&!_(e);const z=e=>{var t=e.block,s=e.isDocked,n=e.showsMediaCompact,i=void 0!==n&&n,a=e.isEditing,r=void 0!==a&&a,l=o()({[P]:!!s||i,[N]:R(t),[T]:D(t),[Z]:_(t)&&F(t),[A]:_(t)&&B(t)});return(0,j.jsx)("div",{className:o()(E,l),children:U(t,l,s,r)})}},43462:(e,t,s)=>{"use strict";s.d(t,{i:()=>pt,Z:()=>ut});var n=s(20583),o=s(54138),i=s.n(o),a=s(17276),r=s.n(a),l=s(99077),d=s.n(l),c=s(33970),p=s.n(c),u=s(5754),h=s.n(u),m=s(95004),g=s(98384),v=s(48451),b=s(77129),x=s(62412),f=s(827),C=s(54382),y=s(43523),w=s(43684),j=s(5700),k=s(31679),S=s(78667),I=s(43166),N=s(59215);function P(e){try{var t=new URL(e);return"https:"===t.protocol||"http:"===t.protocol}catch(e){return!1}}var T=s(68346),Z=s(55855),A=s(22527),E=s(96488),M=s(63583),L=s.n(M),O=s(96467);const R="DdFPj",D="jWulj",F="seYEy",B="Dt_Mi",_="od3k_",U="CdvbL",V="POhPp",z="NDQyX",H="Pr7R3",W="eqBap",q="tGxQL",G="x3zpc",X="k8FXT";var Q=s(2629),J=(e,t)=>{if(1===e)return t;var s=t.match(/[0-9]+/g);if(!s)return t;var n=s[0],o=parseInt(n,10),i=Math.round(o*e*100)/100;return t.replace(n,"".concat(i))};const Y=(0,N.X9)((function(e){var t,s,n=e.block,o=e.displayAtOriginalSize,a=void 0===o||o,l=e.postContext,c=n.media,u=n.attribution,N=n.colors,M=n.altText,Y=n.caption,K=n.imageScale,$=void 0===K?1:K,ee=n.isBlurredImages,te=n.clickthrough,se=l!==I.Nw,ne=se?l.post.actions:void 0,oe=l.presentationStyle,ie=oe.mobilePostWidth,ae=oe.desktopPostWidth,re=(0,S.bp)(),le=re.logEvent,de=re._t,ce=re.features,pe=(0,k.b)(),ue=pe.adPlacementConfiguration,he=pe.hydraConfigInstanceId;if(ie){var me=J($,ie);s=["(max-width: ".concat(O.phoneResponsiveMaxBreakpoint,"px)"),me].join(" ")}var ge,ve=[s,J($,ae)].filter((e=>!!e)).join(", "),be=se?{"data-login-wall-type":"blogView","data-login-wall-blog-name":l.post.blogName,"data-login-wall-post-id":l.post.id,"data-login-wall-post-slug":l.post.slug,"data-login-wall-redirect":"/dashboard"}:{},xe=(0,m.useState)(!1),fe=p()(xe,2),Ce=fe[0],ye=fe[1],we=function(){var e=d()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.Z)(t);case 2:e.sent||ye(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=()=>{if(M&&M!==de("Image")&&"image"!==M)return(0,Q.jsx)(x.ZP,{hasArrow:!0,isChromeless:!0,arrowWrapperClassName:V,popoverWrapperClassName:_,component:(0,Q.jsxs)("div",{className:U,children:[(0,Q.jsx)("h2",{children:(0,Q.jsx)(C.ZP,{children:"Image Description"})}),null==M?void 0:M.split("\n").map(((e,t)=>(0,Q.jsxs)("span",{children:[e,(0,Q.jsx)("br",{})]},t)))]}),position:w.I2.BottomStart,isOpen:Ce,toggle:null,skipClickToOpen:!0,skipClickToClose:!0,closeForAllExternalClicks:!0,isFlipEnabled:!1,useFlex:!0,targetStyles:{marginLeft:"20px",width:"40px"},positionBasedOffsetModifiers:{[w.I2.Bottom]:{left:-20,top:0}},strategy:"fixed",children:(0,Q.jsx)("a",{className:B,onClick:e=>{e.preventDefault(),e.stopPropagation(),ye(!Ce)},onKeyDown:e=>{["Enter"," "].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),ye(!Ce)),Ce&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),ye(!1))},role:"button",tabIndex:0,children:"ALT"})})},ke=(0,Q.jsxs)("figure",i()(i()({className:R},be),{},{onBlur:we,children:[(0,Q.jsx)(v.pC,{imageResponse:c,colors:N,altText:M,sizes:ve,isBlurredImages:ee}),je()]})),Se=e=>{var t;le({eventName:e,eventDetails:i()({placement_id:null==l||null===(t=l.post)||void 0===t?void 0:t.placementId},(0,Z.U)({adPlacementConfiguration:ue,hydraConfigInstanceId:he,timelineObject:null==l?void 0:l.post}))})},Ie=()=>{Se(y.J.ClickThrough),Se(y.J.Photo),Se(y.J.PhotoClickThrough)},Ne=()=>{Se(y.J.WrittenUrlClickThrough)},Pe=(0,A.d)(ne),Te=(null==te?void 0:te.webUrl)||ce.tspDirectClickThrough&&(null==Pe?void 0:Pe.tspSkipLightbox)&&(null==Pe?void 0:Pe.urls.web),Ze=Te?(0,Q.jsx)("a",i()(i()({className:R,href:Te,target:"_blank",rel:"noopener"},!(null!=te&&te.webUrl)&&{onClick:Ie}),{},{children:ke})):(0,Q.jsx)(b.Z,{className:F,imageResponse:c,altText:M,caption:Y,children:ke}),Ae=new T.Z(c),Ee=Ae.getLargestImage(),Me=null===(t=l.presentationStyle.showsSmallImagesAtOriginalWidth)||void 0===t||t;if(!(0,j.yw)(u)&&Ee&&Me&&a&&Ee.width<O.smallImagePostBreakpoint&&Ee.height<2*O.smallImagePostBreakpoint&&(ge=Ee.width,ke=(0,Q.jsxs)("figure",{className:h()(R,D),style:{width:ge},children:[(0,Q.jsx)(v.pC,{imageResponse:Ae.getImagesArrayWithoutCroppedImage(),colors:N,altText:M,sizes:"".concat(ge,"px"),isBlurredImages:ee}),je()]}),Ze=Te?(0,Q.jsx)("a",i()(i()({className:R,href:Te,target:"_blank",rel:"noopener"},!(null!=te&&te.webUrl)&&{onClick:Ie}),{},{children:ke})):ke),u&&u.url&&P(u.url)){if((0,j.yw)(u))return(0,Q.jsxs)("div",{className:z,children:[Ze,(0,Q.jsx)(f.Z,{attribution:u})]});var Le=u.url;if((0,j.Jr)(u)){var Oe=u.displayText;return(0,Q.jsxs)("div",{className:H,children:[Ze,(0,Q.jsxs)("a",{"aria-label":de("Attribution"),href:Le,target:"_blank",rel:"noopener",style:{width:ge},className:h()(W,{[X]:!!ge}),onClick:Ne,children:[(0,Q.jsx)("div",{className:q,children:Oe}),(0,Q.jsx)("div",{className:G,children:(0,Q.jsx)(g.iL,{size:{width:14,height:14},colors:{primary:L().paletteGray40}})})]})]})}var Re=u.urlRedirect||Le,De=Re&&P(Re)?Re:"",Fe=new URL(Le||"").hostname;return(0,Q.jsxs)("div",{className:H,children:[Ze,(0,Q.jsxs)("a",{href:De,target:"_blank",rel:"noopener",style:{width:ge},className:h()(W,{[X]:!!ge}),onClick:Ne,children:[(0,Q.jsx)("div",{className:q,children:Fe}),(0,Q.jsx)("div",{className:G,children:(0,Q.jsx)(g.iL,{size:{width:14,height:14},colors:{primary:L().paletteGray40}})})]})]})}return Ze}),{postContext:!0});var K=s(62109);const $="zR66v";const ee=function(e){var t=e.block,s=t.url,n=t.displayUrl,o=t.title,i=t.description,a=t.author,r=t.poster,l=t.siteName;return(0,Q.jsx)("div",{className:$,children:(0,Q.jsx)(K.Z,{urls:{displayUrl:n,redirectUrl:s},info:{title:o,description:i,author:a,poster:r,siteName:l}})})};var te=s(76319),se=s(73683),ne=s(97013),oe=s(93003),ie=s(62239),ae=s(92023),re=s(52153),le=s(93099),de=s(12885),ce=s(5984);const pe="aU80z",ue="nW3UY",he="hTKrt",me="IfJLc",ge="FjdIX",ve="ZaZiD",be="cUWEe",xe="pKFYc";const fe=function(e){var t=e.block,s=(0,S.bp)(),n=s.features.paywallConsumption,o=s.isPeeprShowing,i=(0,I.uu)().post,a=i.id,r=i.rebloggedFromId,l=t.title,d=t.text,c=t.blog,p=t.subtype;if(!c)return null;var u=c.subscriptionPlan,m=c.name,g=c.isPaywallOn,v=c.paywallAccess,b=c.theme||{},x=b.titleFont,f=b.titleFontWeight,C=b.linkColor,y=b.backgroundColor,w=(0,ce.YK)(y||L().blogBackgroundColor);if(!n)return null;if(p===j.br.Divider)return v===re.bv.Creator?(0,Q.jsx)(ie.Z,{}):null;if(p===j.br.Disabled&&v!==re.bv.Disabled)return null;if(!(v===re.bv.Disabled||u&&g))return null;var k=p===j.br.Cta,N=k?(0,te.Z)({mixedString:d.replace(/%s/,"{{blogName /}}"),components:{blogName:(0,Q.jsx)("strong",{children:m})}}):(0,te.Z)({mixedString:d.replace(/%s/,"{{blogName /}}"),components:{blogName:(0,Q.jsx)(se.rU,{to:(0,le.Z)(ae.u2,{peeprBlogname:m}),children:m})}});return(0,Q.jsxs)("div",{className:h()(pe,{[ue]:o,[he]:void 0!==r}),style:(0,de.ZP)(c),children:[(0,Q.jsxs)("div",{className:me,children:[k&&(0,Q.jsx)(ne.Z,{colors:{primary:C},size:{width:36,height:36}}),(0,Q.jsx)("span",{className:ge,style:{fontFamily:"'".concat(x,"'"),fontWeight:"bold"===f?"bold":"normal"},children:l})]}),(0,Q.jsx)("div",{className:ve,style:{color:w},children:N}),k&&(0,Q.jsx)("div",{className:be,children:(0,Q.jsx)(oe.Z,{className:xe,blog:c,postId:a,plan:u,useBlogColors:!0,context:re.Xh.Post})})]})};var Ce=s(17709),ye=s(79615),we=s(37236);const je="oXROo",ke="iLvsm",Se="GhhyY",Ie="Lu7CU",Ne="VVJno",Pe="D63Wc",Te="N2ajm",Ze="Fs5NP",Ae="MROL0",Ee="ACLdV",Me="SqYOv";var Le=e=>{var t=e.answer,s=e.currentUserAvatar,n=e.isFinal,o=e.isTopResult,i=e.onSelect,a=e.selected,r=e.percentage,l=e.view,d=h()(Se,{[Ie]:"results"===l});if("results"===l){var c=h()(Pe,{[Te]:!n,[Ze]:n&&o});return(0,Q.jsxs)("div",{className:d,children:[(0,Q.jsx)("div",{className:c,style:{width:"".concat(r,"%")}}),(0,Q.jsx)("span",{className:Ne,children:t.answerText}),a&&s&&(0,Q.jsx)("span",{className:Ae,children:(0,Q.jsx)(Ce.Z,{dimension:22,imageResponse:s,avatarShape:we.o.Square,showBlogCard:!1,isLink:!1})}),(0,Q.jsx)("span",{className:Ee,children:"".concat(r,"%")})]})}return(0,Q.jsx)(ye.Z,{wrapperClassName:d,className:Ne,label:t.answerText,onClick:()=>i(t),disabled:"loading"===l,children:t.answerText})},Oe=31536e3,Re=2592e3,De=86400,Fe=3600,Be=60,_e=e=>!!e.answers&&e.answers.length>=2,Ue=e=>{var t=e.closeAfter;return e.closeStatus===j.L8.CLOSE_AFTER&&(new Date).getTime()/1e3>(t||Number.MAX_SAFE_INTEGER)},Ve=(e,t,s)=>{var n=s._cn,o=e-t;return o>=Oe?n("Number of years","%1$s year","%1$s years",Math.round(o/Oe)):o>=Re?n("Number of months","%1$s month","%1$s months",Math.round(o/Re)):o>=De?n("Number of days","%1$s day","%1$s days",Math.round(o/De)):o>=Fe?n("Number of hours","%1$s hour","%1$s hours",Math.round(o/Fe)):o>=Be?n("Number of minutes","%1$s minute","%1$s minutes",Math.round(o/Be)):n("Number of seconds","%1$s second","%1$s seconds",o)};const ze=e=>{var t,s,n=e.block,o=(0,m.useState)("loading"),a=p()(o,2),r=a[0],l=a[1],d=(0,m.useState)({}),c=p()(d,2),u=c[0],h=c[1],g=(0,m.useState)([]),v=p()(g,2),b=v[0],x=v[1],f=(0,m.useState)(void 0),C=p()(f,2),y=C[0],w=C[1],k=(0,S.bp)(),I=k._c,N=k._cn;(0,m.useEffect)((()=>{var e;_e(n)&&null!==(e=k.features)&&void 0!==e&&e.redpopPollEditor&&(k.apiFetch("/v2/polls/".concat(n.clientId,"/results")).then((e=>{var t=e.response;h((null==t?void 0:t.results)||{}),x((null==t?void 0:t.userVotes)||[]),l(Ue(n.settings||{})||null!=t&&t.userVotes&&(null==t?void 0:t.userVotes.length)>0?"results":"vote")})).catch((()=>l("vote"))),k.getUserInfo().then((e=>{w(e.blogs[0].avatar)})))}),[]);var P,T=e=>{h(i()(i()({},u),{},{[e.clientId]:(u[e.clientId]||0)+1})),x([e.clientId]),l("results"),k.apiFetch("/v2/polls/".concat(n.clientId),{method:"POST",body:{selected:[e.clientId]}}).catch((()=>{h(i()({},u)),Ue(n.settings||{})||l("vote")}))},Z=(0,m.useMemo)((()=>n.answers&&"results"===r?[...n.answers].sort(((e,t)=>u[t.clientId]-u[e.clientId])):n.answers||[]),[n.answers,r,u]),A=Object.values(u).reduce(((e,t)=>e+t),0),E=Ue(n.settings||{}),M=N("Number of votes","%1$s vote","%1$s votes",A);(null===(t=n.settings)||void 0===t?void 0:t.closeStatus)===j.L8.CLOSE_AFTER&&(M=E?N("Describes the final result for a poll","Final result from %1$s vote","Final result from %1$s votes",A):M+" • "+I("Indicated how much time is left before a poll closes","Poll ends in %1$s",[Ve((null===(P=n.settings)||void 0===P?void 0:P.closeAfter)||Number.MAX_SAFE_INTEGER,Math.round((new Date).getTime()/1e3),k)]));return _e(n)&&null!==(s=k.features)&&void 0!==s&&s.redpopPollEditor?(0,Q.jsxs)("div",{className:je,children:[(0,Q.jsx)("div",{className:ke,children:n.question}),Z.map(((e,t)=>(0,Q.jsx)(Le,{answer:e,currentUserAvatar:y,onSelect:T,selected:b.indexOf(e.clientId)>=0,percentage:A&&u[e.clientId]?Math.round(100*u[e.clientId]/A):0,isFinal:E,isTopResult:0===t,view:r},"answer-".concat(e.clientId)))),(0,Q.jsx)("div",{className:Me,children:M})]}):null};var He=s(50209),We=s.n(He),qe=s(13586),Ge=s(2474),Xe=s(65),Qe=s(47339),Je=s(71969);const Ye="LbyNj",Ke="WwHLs",$e="bklUO",et="WPVvO";class tt extends m.Component{constructor(){var e;super(...arguments),e=this,We()(this,"state",{shouldAutoDock:!1,alwaysAutoDock:!1,mediaSize:{width:0,height:0}}),We()(this,"reparentableMediaManager",new Qe.R),We()(this,"setMediaWrapper",(e=>this.mediaWrapper=e)),We()(this,"updateMediaSize",(()=>{if(this.mediaWrapper&&!this.currentPostIsDocked()){var e=this.mediaWrapper.offsetWidth,t=this.mediaWrapper.offsetHeight;e===this.state.mediaSize.width&&t===this.state.mediaSize.height||this.setState({mediaSize:{width:e,height:t}})}})),We()(this,"currentPostIsDocked",(()=>{var e;return this.mediaIsDockable()&&!!this.props.dockableContext.reparentableMediaManager&&this.reparentableMediaManager.id===(null===(e=this.props.dockableContext.reparentableMediaManager)||void 0===e?void 0:e.id)})),We()(this,"dockMedia",(e=>{this.updateMediaSize(),this.props.dockableContext.dock({isAutoDock:e,dockedTimelineObject:this.getTimelineObject(),reparentableMediaManager:this.reparentableMediaManager,canAutoDock:this.state.alwaysAutoDock}),this.reparentableMediaManager.isReparented=!0})),We()(this,"getTimelineObject",(()=>i()(i()({},this.props.postContext.post),{},{content:[],trail:[]}))),We()(this,"undockMedia",(()=>{this.props.dockableContext.undock()})),We()(this,"setComponentToAutoDock",(function(t){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.mediaIsDockable()&&e.state.shouldAutoDock!==t&&e.setState({shouldAutoDock:t,alwaysAutoDock:s})})),We()(this,"autoDock",(e=>{this.mediaIsDockable()&&this.state.shouldAutoDock&&!e&&this.dockMedia(!0)})),We()(this,"mediaIsDockable",(()=>this.props.postContext.presentationStyle.showsDockMediaButton)),We()(this,"onClickDock",(()=>{this.dockMedia(!1)}))}componentDidMount(){this.reparentableMediaManager.id=this.props.dockableContext.getId()}componentWillUnmount(){var e=this.props.dockableContext.undock;this.currentPostIsDocked()&&e()}render(){var e=this.props,t=e.media,s=e.appContext._c,n=this.mediaIsDockable(),o=this.currentPostIsDocked(),a=s('Button label. "Dock" as in for videos that get put in the sidebar and are always visible when you scroll',"Dock post in sidebar"),r=n&&!o&&(0,Q.jsx)(ye.Z,{label:a,title:a,wrapperClassName:Ke,onClick:this.onClickDock,children:(0,Q.jsx)(Ge.vK,{size:{width:15,height:15},colors:{primary:L().paletteWhite}})}),l=s('Button label. "Dock" as in for videos that get put in the sidebar and are always visible when you scroll',"Undock post in sidebar");return(0,Q.jsx)(Je.Z.Provider,{value:{setComponentToAutoDock:this.setComponentToAutoDock},children:(0,Q.jsx)(qe.df,{onChange:this.autoDock,threshold:.5,children:(0,Q.jsxs)("div",{ref:this.setMediaWrapper,className:Ye,children:[this.reparentableMediaManager.render(t.component,this.forceUpdate.bind(this),i()(i()({},t.props),{},{isDocked:o})),(0,Q.jsx)(Xe.$,{shouldRenderContent:!o,reparentableContent:this.reparentableMediaManager}),o?(()=>n&&(0,Q.jsxs)(ye.Z,{label:l,title:l,wrapperClassName:$e,className:et,onClick:this.undockMedia,wrapperStyle:{paddingBottom:"calc(".concat(this.state.mediaSize.height/this.state.mediaSize.width*100,"% - ").concat(4,"px)")},children:[(0,Q.jsx)(Ge._C,{colors:{primary:L().paletteBlack},size:{width:30,height:30}}),s("Undock a video that is in the sidebar.","Put it back")]}))():r]})})})}}const st=(0,N.X9)(tt,{appContext:!0,postContext:!0,dockableContext:!0});var nt=s(72341);const ot=(0,N.X9)((function(e){var t=e.block,s=e.postContext.presentationStyle.showsMediaCompact;return(0,nt.XK)(t)?(0,Q.jsx)(nt.ZP,{block:t,showsMediaCompact:s}):(0,Q.jsx)(st,{media:{props:{block:t,showsMediaCompact:s},component:nt.ZP}})}),{postContext:!0});var it=s(80057);const at=()=>{var e=(0,m.useRef)(null),t=(0,it.jY)().onVideoResize;return(0,m.useEffect)((()=>{var s=e.current;if(t&&s){var n=new ResizeObserver((e=>{var s=e[0].target,n=s.offsetTop,o=s.offsetHeight;t(n,n+o)}));return n.observe(s),()=>{n.unobserve(s),n.disconnect()}}}),[]),e};var rt=s(92895),lt=s(58259);const dt=e=>{var t=e.block,s=e.isEditing,n=at(),o=(0,rt.SV)(t)||!(0,rt.c7)(t,s)&&!(0,rt.P2)(t,s)?(0,Q.jsx)(lt.ZP,{block:t}):(0,Q.jsx)(st,{media:{props:{block:t},component:lt.ZP}});return(0,Q.jsx)("div",{ref:n,children:o})},ct="RihjV";function pt(e,t){return"".concat(e.type," ").concat(t)}const ut=function e(t){var s=t.block,o=t.displayAtOriginalSize;if((0,j.dz)(s))return(0,Q.jsx)(n.ZP,{block:s});if((0,j.cd)(s)){var i=s.elements.map(((t,s)=>{var n=pt(t,s);return(0,Q.jsx)(e,{block:t,blockIndex:s},n)}));switch(s.type){case j.kH.OrderedList:return(0,Q.jsx)("ol",{className:ct,children:i});case j.kH.UnorderedList:return(0,Q.jsx)("ul",{className:ct,children:i});default:return(0,Q.jsx)("div",{})}}return(0,j.RD)(s)?(0,Q.jsx)(Y,{block:s,displayAtOriginalSize:o}):(0,j._P)(s)?(0,Q.jsx)(ot,{block:s}):(0,j.R0)(s)?(0,Q.jsx)(ee,{block:s}):(0,j.gD)(s)?(0,Q.jsx)(dt,{block:s}):(0,j.LX)(s)?(0,Q.jsx)(fe,{block:s}):(0,j.bT)(s)?(0,Q.jsx)(ze,{block:s}):null}},62109:(e,t,s)=>{"use strict";s.d(t,{Z:()=>P});var n=s(83054),o=s(31679),i=s(78667),a=s(43166),r=s(58546),l=s(43747),d=s(28821),c=s(55855),p=s(96467);const u="gXnIr",h="gaUuO",m="Nu6LP",g="Sv170",v="prqGC",b="AO6cP",x="POcHT",f="pqMQN",C="NMiaP",y="PUcxv",w="o9hq8",j="rKhPR",k="nsUJI",S="OCxEI",I="OVGbY";var N=s(2629);const P=e=>{var t,s=e.urls,P=e.info,T=(0,i.bp)().logEvent,Z=(0,a.uu)(),A=(0,o.b)(),E=A.hydraConfigInstanceId,M=A.adPlacementConfiguration,L=s.redirectUrl,O=s.displayUrl,R=Z!==a.Nw?null==Z||null===(t=Z.post)||void 0===t?void 0:t.placementId:void 0,D=Z!==a.Nw?(0,c.U)({adPlacementConfiguration:M,hydraConfigInstanceId:E,timelineObject:Z.post}):{},F=(0,r.Q)(P)?function(e){return(0,N.jsx)("a",{className:m,href:e,target:"_blank",rel:"noopener",children:e})}(L):function(e,t,s,o,i,a,d){var c=null!=o?o:d&&(0,l.Z)(d)?new URL(d).host:null,u=!!s||!!c||!!i,m=!!t||!(0,r.y)(a),P=!!c||!!i,T=!u&&!m,Z=[g];u||Z.push(C),a&&Z.push(x);var A=p.phoneResponsiveMaxBreakpoint,E=["(max-width: ".concat(A,"px) 100vw"),"".concat(p.postWidth-2*p.linkCardHorizontalMargin,"px")].join(", "),M=m||T?(0,N.jsxs)("div",{className:Z.join(" "),children:[a&&(0,N.jsx)(n.Z,{imageResponse:a,sizes:E,className:f}),(0,N.jsx)("div",{className:v,children:(0,N.jsx)("span",{className:b,children:T?d||e:t})})]}):null,L=[y];m||L.push(w),a&&L.push(j);var O=P?(0,N.jsxs)("div",{className:S,children:[c,c&&i&&(0,N.jsx)("span",{className:I,children:"|"}),i]}):null,R=u?(0,N.jsxs)("div",{className:L.join(" "),children:[s&&(0,N.jsxs)("div",{className:k,children:[" ",s," "]}),O]}):null;return(0,N.jsxs)("a",{className:h,target:"_blank",href:e,children:[M,R]})}(L,null==P?void 0:P.title,null==P?void 0:P.description,null==P?void 0:P.siteName,null==P?void 0:P.author,null==P?void 0:P.poster,O);return(0,N.jsx)("div",{className:u,onClick:R?()=>{(0,d.B)(T,R,D)}:void 0,role:"link",children:F})}},58259:(e,t,s)=>{"use strict";s.d(t,{ZP:()=>W});var n=s(54138),o=s.n(n),i=s(5754),a=s.n(i),r=s(43619),l=s(96977),d=s(37560),c=s(33970),p=s.n(c),u=s(95004),h=s(43523),m=s(78667),g=s(60042),v=s(2629),b=(0,u.createContext)(null);b.displayName="YouTubeIframeContext";var x,f,C,y=e=>{var t=e.children,s=e.initialSeekTime,n=(0,u.useState)(s),o=p()(n,2),i=o[0],a=o[1];return(0,v.jsx)(b.Provider,{value:{seekTime:i,setSeekTime:a},children:t})};!function(e){e.StateChanged="stateChanged",e.CurrentTimeChanged="currentTimeChanged"}(x||(x={})),function(e){e.Initializing="initializing",e.Ready="ready",e.Buffering="buffering",e.Unstarted="unstarted",e.Playing="playing",e.AutoPlaying="autoPlaying",e.Paused="paused",e.Ended="ended"}(f||(f={})),function(e){e.Play="play",e.Seek="seek",e.Mute="mute",e.GetCurrentTime="getCurrentTime"}(C||(C={}));var w=e=>{var t=e.src,s=e.videoState,n=e.onVideoStateChange,o=e.onVideoCurrentTimeChange,i=t.split("#").pop(),a=(0,u.useState)(),r=p()(a,2),l=r[0],d=r[1];(0,u.useEffect)((()=>{if(i){var e=g.ag.listen(i,{[x.StateChanged]:e=>{if(e===f.Ready){var t=s(),o=t.source,i=t.origin,a=t.namespace,r=g.bG.bind(null,{source:o,target:i,namespace:a});d((()=>r)),n(e,r)}else n(e)},[x.CurrentTimeChanged]:o}),t=e.handler,s=e.getChannelInfo;return()=>g.ag.unlisten(t)}}),[t,i,n,o]),(e=>{var t=e.videoState,s=e.sendMessageToPlayer;(0,u.useEffect)((()=>{var e,n=()=>{t===f.Playing&&s&&(s(C.GetCurrentTime),e=setTimeout(n,1e3))};return e=setTimeout(n,1e3),()=>clearTimeout(e)}),[t,s])})({videoState:s,sendMessageToPlayer:l})},j=()=>{var e=(0,m.bp)().logEvent,t={[f.Playing]:h.J.VideoPlay,[f.AutoPlaying]:h.J.VideoAutoPlay,[f.Paused]:h.J.VideoStop,[f.Ended]:h.J.VideoEnd};return s=>{var n=t[s];n&&e({eventName:n,eventDetails:{vendor:"youtube",player_type:"youtube"}})}};const k=(0,u.forwardRef)(((e,t)=>{var s=e.src,n=e.isDocked,i=e.onStateChange,a=(0,u.useState)(f.Initializing),r=p()(a,2),l=r[0],c=r[1],h=(()=>{var e=(0,u.useContext)(b);if(!e)throw new Error("<YouTubeIframe> needs <YouTubeIframeProvider> in order to keep track of the current playback position (to resume playback when docked)");return e})(),m=h.seekTime,g=h.setSeekTime,x=j(),y=(0,u.useCallback)(((e,t)=>{if(!(n&&e===f.Playing&&[f.Buffering,f.Unstarted].includes(l))){var s=n&&e===f.Ready&&m;s&&(null==t||t(C.Seek,{to:m}),null==t||t(C.Play));var o=s?f.AutoPlaying:e;c(o),i&&i(o),x(o)}}),[m,n,l]);return w({src:s,videoState:l,onVideoStateChange:y,onVideoCurrentTimeChange:g}),(0,v.jsx)(d.Z,o()(o()({ref:t},e),{},{allow:n?"autoplay":void 0}))}));var S=s(48451),I=s(10381),N=s(22979),P=s(92677),T=s(43166),Z=s(63583),A=s.n(Z),E=s(96467),M=s.n(E),L=s(92895),O=s(41169);const R="ypwxx",D="Cf37_",F="ONC_J",B="X93pX",_="l7zyP",U="gGIs6";var V=e=>{var t=e.url,s=e.poster,n=e.provider,o=(0,m.bp)()._c;return(0,v.jsxs)("div",{className:_,children:[s&&(0,v.jsx)(S.wZ,{imageResponse:s,altText:n?o("Accessibility title of a thumbnail for a video on an external site. The placeholder is the name of the external site.","Thumbnail of a video on %1$s",[n]):o("Accessibility title of a thumbnail for a video on an unknown external site","Thumbnail of a video on an external site")}),(0,v.jsx)("div",{className:U,children:(0,v.jsxs)("a",{href:t,target:"_blank",rel:"noopener",children:[(0,v.jsx)(l.Z,{cropped:!0,colors:{primary:A().paletteWhite},size:{width:24,height:24}}),n?o("Title of a link to open a video on an external site. The placeholder is the name of the external site.","Watch on %1$s",[n]):null]})})]})},z=e=>{var t,s=e.block,n=s.media,o=s.poster,i=s.filmstrip,a=e.isDocked,r=(0,T.uu)(),l=(0,m.bp)().features.tspvAutoDock,d=r!==T.Nw&&(0,N.uz)(null==r?void 0:r.post);return(0,v.jsx)(O.Z,{media:n,useViewabilityTracker:r!==T.Nw,timelineObject:r!==T.Nw?null==r?void 0:r.post:void 0,poster:o,filmstrip:i,isDocked:a,alwaysAutoDock:l&&d,showsDockMediaButton:r!==T.Nw?null==r||null===(t=r.presentationStyle)||void 0===t?void 0:t.showsDockMediaButton:void 0})},H=e=>{var t=e.provider,s=e.embedIframe,n=e.isDocked;return(0,v.jsx)(I.U$,{children:e=>{var i=e.width,l=s.height/s.width,c=t===P.G6.Youtube,p=Math.min(M().postWidth,i),u=c?{maxWidth:p,height:l*p}:{},h={src:s.url,title:t,allowFullScreen:!0,className:a()(D,{[F]:!c}),style:u};return c?(0,v.jsx)(y,{children:(0,v.jsx)(r.Z,{children:(0,v.jsx)(k,o()(o()({},h),{},{isDocked:n}))})}):(0,v.jsx)(r.Z,{wrapperStyle:{paddingBottom:"".concat(s.height/s.width*100,"%")},children:(0,v.jsx)(d.Z,o()({},h))})}})};const W=function(e){var t=e.block,s=e.isDocked,n=e.isEditing,o=t.poster,i=t.provider,r=t.url,l=(0,L.c7)(t,n)?(0,v.jsx)(z,{block:t,isDocked:s}):(0,L.P2)(t,n)?(0,v.jsx)(H,{provider:t.provider,embedIframe:t.embedIframe,isDocked:s}):null;if(l){var d=i===P.G6.Youtube,c=!d&&(0,L.P2)(t)?{paddingBottom:"".concat(t.embedIframe.height/t.embedIframe.width*100,"%")}:void 0;return(0,v.jsx)("div",{className:a()(R,{[B]:(0,L.P2)(t)&&!d}),style:c,children:l})}return(0,v.jsx)(V,{url:r,poster:o,provider:i})}},41169:(e,t,s)=>{"use strict";s.d(t,{Z:()=>Ze});var n=s(54138),o=s.n(n),i=s(50209),a=s.n(i),r=s(5754),l=s.n(r),d=s(83707),c=s(95004),p=s(13586),u=s(60612);var h=s(79615),m=s(36343),g=(0,m.q)("replay");g.defaultProps={size:{width:40,height:40}};const v=g;var b,x,f,C,y,w=s(19403);!function(e){e.Mute="video_mute",e.Unmute="video_unmute",e.Play="video_play",e.Autoplay="video_auto_play",e.Pause="video_pause",e.Autopause="video_auto_stop",e.Loop="video_loop",e.Scrub="video_scrub_end",e.Fullscreen="video_fullscreen",e.ExitFullscreen="video_exitfullscreen"}(b||(b={})),function(e){e.Start="video_start"}(x||(x={})),function(e){e.Quartile25="video_quartile_25",e.Quartile50="video_quartile_50",e.Quartile75="video_quartile_75",e.Quartile100="video_quartile_100"}(f||(f={})),function(e){e.View1Second="video_view_1_second",e.View2Seconds="video_view_2_second",e.View3Seconds="video_view_3_second",e.View10Seconds="video_view_10_second"}(C||(C={})),function(e){e.PositionChange="position_change",e.Reset="reset"}(y||(y={}));var j={[f.Quartile25]:.25,[f.Quartile50]:.5,[f.Quartile75]:.75,[f.Quartile100]:.98},k={[C.View1Second]:1,[C.View2Seconds]:2,[C.View3Seconds]:3,[C.View10Seconds]:10},S=s(22979),I=s(59215),N={a:0,c:1,p:50};const P=class{constructor(e,t){a()(this,"beacons",[]),a()(this,"lastMetReqTime",0),a()(this,"totalTimeMeetingReqs",0),this.ruleKey=e,this.reqAudioOn=!!t.a,this.reqContinuous=!!t.c,this.reqDuration=t.d,this.reqPercentInView=t.p||0,this.isDurationCheckpoint=t.isDurationCheckpoint}reset(){this.totalTimeMeetingReqs=0}setBeacons(e){this.beacons=e}fireBeacons(){this.hasFiredBeacons||(this.beacons.forEach((e=>e())),this.isDurationCheckpoint||(this.hasFiredBeacons=!0))}checkRule(e){if(!this.audioCheck(e)||!this.inViewCheck(e))return this.reqContinuous&&(this.lastMetReqTime=null),!1;var t=e.getTimePosition();null===this.lastMetReqTime?this.totalTimeMeetingReqs=0:this.totalTimeMeetingReqs+=t-this.lastMetReqTime;var s=this.durationCheck(t);return this.lastMetReqTime=t,s}audioCheck(e){return!(this.reqAudioOn&&e.isMuted())}inViewCheck(e){return!(this.reqPercentInView>0&&!e.isInView())}durationCheck(e){if(!this.reqDuration)return!0;if(this.reqContinuous)return this.totalTimeMeetingReqs>=this.reqDuration;var t=e===this.reqDuration,s=this.lastMetReqTime===this.reqDuration,n=t&&!s,o=e>this.reqDuration,i=Number(this.lastMetReqTime)<this.reqDuration,a=e-Number(this.lastMetReqTime)<1;return n||o&&i&&a}};const T=class{constructor(e,t){if(a()(this,"setRulesFromDuration",(e=>{var t=Object.keys(k).map((e=>{var t=new P(e,o()(o()({},N),{},{d:k[e]}));return t.beacons=[()=>this.beaconDefinition(e)],t}));Number.isNaN(e)||(t=t.concat(Object.keys(j).map((t=>{var s=new P(t,{d:j[t]*e,isDurationCheckpoint:!0});return s.beacons=[()=>this.beaconDefinition(t)],s})))),this.rules=t})),!e)throw new Error("RuleEngine cannot be instantiated without beaconDefinition! Check the placement id of the viewability tracker.");this.beaconDefinition=e,this.setRulesFromDuration(t)}updateMaxDuration(e){this.setRulesFromDuration(e)}checkRules(e){this.rules.forEach((t=>t.checkRule(e)&&t.fireBeacons()))}resetContinuousRules(){this.resetRules((e=>!!e.reqContinuous))}resetAudioOnContinuousRules(){this.resetRules((e=>!!e.reqContinuous&&e.reqAudioOn))}resetRules(e){this.rules.forEach((t=>e(t)&&t.reset()))}};const Z=class{constructor(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a()(this,"isAutoplay",(()=>this.videoEl.autoplay)),a()(this,"isMuted",(()=>this.videoEl.muted)),a()(this,"getTimePosition",(()=>this.videoEl.currentTime)),a()(this,"getMaxDuration",(()=>Number.isNaN(this.videoEl.duration)?null:this.videoEl.duration)),a()(this,"handleMute",(()=>this.stateChangeFn(b.Mute))),a()(this,"handleUnmute",(()=>this.stateChangeFn(b.Unmute))),a()(this,"handleLoop",(()=>this.stateChangeFn(b.Loop))),a()(this,"handleScrub",(()=>this.stateChangeFn(b.Scrub))),a()(this,"handleFullscreen",(()=>this.stateChangeFn(b.Fullscreen))),a()(this,"handleExitFullscreen",(()=>this.stateChangeFn(b.ExitFullscreen))),a()(this,"handlePause",(()=>this.stateChangeFn(this.isAutoplay()?b.Autopause:b.Pause))),a()(this,"handlePlay",(()=>this.stateChangeFn(this.isAutoplay()?b.Autoplay:b.Play))),a()(this,"handleTimeUpdate",(()=>this.stateChangeFn(y.PositionChange))),this.videoEl=e,this.stateChangeFn=t,this.isInView=s,this.options=n,this.lastKnownIsMuted=this.videoEl.muted,this.addEventListeners()}addEventListeners(){this.videoEl.addEventListener("timeupdate",(()=>this.handleTimeUpdate())),this.videoEl.addEventListener("play",(()=>this.handlePlay())),this.videoEl.addEventListener("pause",(()=>this.handlePause())),this.videoEl.addEventListener("ended",(()=>{this.nextSeekedIsLoop=!0,this.options.doesVideoLoop&&this.handleLoop()})),this.videoEl.addEventListener("seeked",(()=>{this.nextSeekedIsLoop&&0===Math.floor(this.videoEl.currentTime)?this.nextSeekedIsLoop=!1:this.handleScrub()})),["fullscreenchange","webkitfullscreenchange"].forEach((e=>{var t;null===(t=this.videoEl.parentNode)||void 0===t||t.addEventListener(e,(()=>{document.fullscreenElement?this.handleFullscreen():this.handleExitFullscreen()}))})),this.videoEl.addEventListener("webkitbeginfullscreen",(()=>{this.handleFullscreen()})),this.videoEl.addEventListener("webkitendfullscreen",(()=>{this.handleExitFullscreen()})),this.videoEl.addEventListener("volumechange",(()=>{var e=!this.lastKnownIsMuted&&this.isMuted(),t=this.lastKnownIsMuted&&!this.isMuted();this.lastKnownIsMuted=this.isMuted(),e?this.handleMute():t&&this.handleUnmute()}))}};class A extends c.Component{constructor(){super(...arguments),a()(this,"lastEventTime",0),a()(this,"totalPlayTime",0),a()(this,"totalUniquePlayedSeconds",new Set),a()(this,"provideEventDetails",w.L),a()(this,"updateTotalPlayTime",(()=>{var e=this.videoContext.getTimePosition(),t=this.videoContext.getMaxDuration();t&&this.totalUniquePlayedSeconds.size<Math.ceil(t)&&this.totalUniquePlayedSeconds.add(Math.floor(e));var s=e-this.lastEventTime;this.lastEventTime=e,s>0&&s<1&&(this.totalPlayTime+=s)})),a()(this,"sendAnalyticsEvent",((e,t)=>{var s=this.props,n=s.videoRef,i=s.timelineObject,a=this.props.dashboardContext.tabId;if(n&&null!=i&&i.placementId){var r=n.currentTime,l=n.duration,d={eventName:e,eventDetails:o()(o()({},this.provideEventDetails(i,!0)),{},{is_ad:(0,S.uz)(i)||(0,S.A6)(i)||(0,S.N0)(i),placement_id:i.placementId,video:{current_position:Math.floor(r),total_length:Math.floor(l),total_play_length:this.totalPlayTime,total_unique_play_length:this.totalUniquePlayedSeconds.size},tab:a})};this.props.appContext.logEvent(d,{sendPayloadImmediately:t})}})),a()(this,"sendUnloadEvent",(()=>{var e;!this.props.videoRef||null!==(e=this.props.videoRef)&&void 0!==e&&e.paused||this.sendAnalyticsEvent(b.Autopause,!0)})),a()(this,"updateRulesEngineDuration",(()=>{this.props.videoRef&&this.rulesEngine.updateMaxDuration(this.props.videoRef.duration)}))}componentDidUpdate(e){!e.videoRef&&this.props.videoRef&&this.setVideoContextAndRulesEngine(this.props.videoRef)}componentDidMount(){this.props.videoRef&&this.setVideoContextAndRulesEngine(this.props.videoRef)}componentWillUnmount(){var e;null===(e=this.props.videoRef)||void 0===e||e.removeEventListener("loadedmetadata",this.updateRulesEngineDuration),window.removeEventListener("beforeunload",this.sendUnloadEvent)}render(){return null}stateChanged(e){var t;switch(e){case b.Mute:case b.Unmute:case b.Loop:case b.Scrub:case b.Fullscreen:case b.ExitFullscreen:this.fireBeacon(e);break;case b.Play:case b.Autoplay:this.hasStarted||(this.hasStarted=!0,this.fireBeacon(x.Start)),this.fireBeacon(e);break;case b.Pause:case b.Autopause:this.rulesEngine.resetContinuousRules(),this.fireBeacon(e);break;case y.Reset:this.rulesEngine.resetRules((()=>!0));break;case y.PositionChange:null!==(t=this.props.videoRef)&&void 0!==t&&t.paused||this.updateTotalPlayTime(),this.rulesEngine.checkRules(this.videoContext);break;default:this.rulesEngine.checkRules(this.videoContext)}}fireBeacon(e){this.sendAnalyticsEvent(e)}setVideoContextAndRulesEngine(e){var t=this.props,s=t.isInView,n=t.videoContextOptions;this.videoContext=new Z(e,(e=>this.stateChanged(e)),s,n),this.rulesEngine=new T(this.sendAnalyticsEvent,e.duration),e.addEventListener("loadedmetadata",this.updateRulesEngineDuration),window.addEventListener("beforeunload",this.sendUnloadEvent)}}const E=(0,I.X9)(A,{appContext:!0,adContext:!0,dashboardContext:!0});var M=s(10381),L=s(92677);var O=s(68346),R=s(63583),D=s.n(R),F=s(96467),B=s.n(F),_=s(28863),U=s(83302),V=(0,m.q)("hd");V.defaultProps={size:{width:24,height:24}};const z=V;var H=s(10490),W=(0,m.q)("sound-off");W.defaultProps={size:{width:24,height:24}};const q=W;var G=(0,m.q)("sound-on");G.defaultProps={size:{width:24,height:24}};const X=G;var Q=(0,m.q)("video-play");Q.defaultProps={size:{width:24,height:24}};const J=Q;var Y=s(78667);const K="V3aM5",$="NUgGE",ee="ES7KG",te="NqMAD",se="kmLdA",ne="qW8gI",oe="g82Fd",ie="oaGjt",ae="YBpn6",re="m4j3o",le="FdHaH",de="IUn0z",ce="cP4TA";var pe=s(2629);const ue=(0,c.forwardRef)(((e,t)=>{var s=e.filmstrip,n=e.onClickToggleFullScreen,o=e.onClickPlay,i=e.onClickPause,a=e.onClickVolume,r=e.onClickHd,d=e.isHdAvailable,c=e.isFullScreen,p=e.isHd,u=e.isMuted,m=e.isPlaying,g=e.isInitialOverlay,v=e.time,b=e.handlePosition,x=e.handleHoverPosition,f=e.onMouseMoveSeekbarWrapper,C=e.onMouseLeaveSeekbarWrapper,y=e.onMouseDownSeekbarWrapper,w=e.onMouseUpSeekbarWrapper,j=e.onClickSeekHandleHover,k=e.buffered,S=e.seekHover,I=e.frameTime,N=e.thumbnailStyles,P=e.useLimitedControls,T=e.soundDisabled,Z=e.showMuteControlOnly,A=(0,Y.bp)()._c,E=P&&{height:40,width:40},M=!T&&(0,pe.jsx)(h.Z,{className:ce,onClick:a,label:A("Video controls","Mute sound"),"aria-pressed":u,children:u?(0,pe.jsx)(q,{size:E}):(0,pe.jsx)(X,{size:E})}),L={display:g?"none":void 0};return P||Z?(0,pe.jsx)("div",{className:l()(K,$),style:L,children:M}):(0,pe.jsxs)("div",{className:K,style:L,children:[m?(0,pe.jsx)(h.Z,{className:ce,onClick:i,label:A("Video controls","Pause"),children:(0,pe.jsx)(H.Z,{})}):(0,pe.jsx)(h.Z,{className:ce,onClick:o,label:A("Video controls","Play"),children:(0,pe.jsx)(J,{})}),(0,pe.jsx)("div",{className:ee,onMouseMove:f,onMouseLeave:C,onMouseDown:y,onMouseUp:w,role:"progressbar",children:(0,pe.jsxs)("div",{className:te,ref:t,children:[(0,pe.jsx)("div",{className:ne,style:{width:"".concat(k,"%")}}),(0,pe.jsx)("div",{className:se,style:{width:b}}),(0,pe.jsx)("div",{className:l()(oe,{[ae]:S}),style:{left:b}}),(0,pe.jsx)("div",{className:l()(ie,{[ae]:S}),style:S?{visibility:"visible",left:"".concat(x,"px")}:void 0,onClick:j,role:"button",children:s&&(0,pe.jsx)("div",{className:re,style:N,children:(0,pe.jsx)("div",{className:le,children:I})})})]})}),(0,pe.jsxs)("div",{className:de,children:[" ",v||"--:--"," "]}),d&&(0,pe.jsx)(h.Z,{className:ce,onClick:r,label:A("Video controls","Toggle high definition"),children:(0,pe.jsx)(z,{colors:{primary:p?D().paletteWhite:D().transparentWhite65}})}),(0,pe.jsx)(h.Z,{className:ce,onClick:n,label:A("Video controls","Toggle full screen"),children:c?(0,pe.jsx)(_.Z,{"data-testid":"collapse-icon",size:{width:22,height:22}}):(0,pe.jsx)(U.Z,{"data-testid":"fullscreen-icon",size:{width:22,height:22}})}),M]})}));var he=s(96977),me=s(13434);const ge="kEaLk",ve="C4lo4",be="EfjkQ",xe="eB3NB";const fe=e=>{var t=e.isPlaying,s=e.showPoof,n=e.isLoading,o=e.isInitialOverlay,i=e.onAnimationEndPoof;return(0,pe.jsxs)("div",{className:l()(ge,{[xe]:t}),children:[o&&(0,pe.jsx)(he.Z,{cropped:!0,size:{width:24,height:24}}),s&&(0,pe.jsx)("div",{className:be,onAnimationEnd:i,children:t?(0,pe.jsx)(he.Z,{cropped:!0,size:{width:24,height:24}}):(0,pe.jsx)(H.Z,{size:{width:24,height:24}})}),n&&(0,pe.jsx)("div",{className:ve,children:(0,pe.jsx)(me.Z,{small:!0})})]})},Ce="gDuxW",ye="yz4vl",we="oce3Y",je="RYYxJ",ke="iTJ8p",Se="ykHbW",Ie="sm7Xn",Ne="qILrx";var Pe;!function(e){e[e.AdStopped=0]="AdStopped",e[e.AdVideoStart=1]="AdVideoStart",e[e.AdVideoFirstQuartile=2]="AdVideoFirstQuartile",e[e.AdVideoMidpoint=3]="AdVideoMidpoint",e[e.AdVideoThirdQuartile=4]="AdVideoThirdQuartile",e[e.AdVideoComplete=5]="AdVideoComplete",e[e.AdPaused=6]="AdPaused",e[e.AdPlaying=7]="AdPlaying",e[e.AdVolumeChange=8]="AdVolumeChange"}(Pe||(Pe={}));class Te extends c.Component{constructor(){super(...arguments),a()(this,"state",{playing:!1,autoplay:!1,isMuted:!!this.props.isMuted,showControls:!0,time:"",isHd:!1,isHdAvailable:!1,seekHover:!1,handleHoverPosition:0,handlePosition:"0%",showHdIcon:!1,loading:!1,showPoof:!1,isInitialOverlay:!0,buffered:0,frameTime:"",thumbnailCount:10,filmstripOffset:0,hasPausedSource:null,isSeeking:!1,isFullScreen:!!this.props.isFullScreen,videoEl:null,isVideoIntersecting:!1,hasVideoIntersected:!1,hasClickedVideoOrMuteControl:!1,showMuteControlOnly:!0,moatQuartileEventsStatus:{AdVideoFirstQuartileIsDispatched:!1,AdVideoMidpointIsDispatched:!1,AdVideoThirdQuartileIsDispatched:!1}}),a()(this,"fscreen",d.Z),a()(this,"seekBar",(0,c.createRef)()),a()(this,"videoContainerRef",(0,c.createRef)()),a()(this,"getVideoElementProps",(e=>{var t=this.props,s=t.media,n=t.poster,i=t.isVideoSponsoredDay,a=t.appContext._t,r=t.minHeight,l=void 0===r?250:r,d=t.videoElementProps,c=void 0===d?{}:d,p=this.state,u=p.playing,h=p.autoplay,m=p.isMuted,g=p.isFullScreen;return o()(o()({muted:m,autoPlay:h,style:{minHeight:s.height?Math.min(s.height,l):l},role:"button",crossOrigin:"anonymous",playsInline:!0,ref:this.setVideoEl,onEnded:this.onEnded,onTouchEnd:this.onTouchEnd,poster:n&&new O.Z(n).getOriginalSourceClosestToWidth(Math.min(e,B().postWidth)).url},this.shouldShowCustomControls()?{role:"button","aria-label":a(u?"Pause":"Play"),onClick:this.onVideoClick,onLoadedData:this.getVideoDurationInMinSec,onWaiting:this.onVideoWaiting,onCanPlayThrough:this.hideLoading,onPlaying:this.hideLoading,onSeeking:this.hideLoading,onSeeked:this.hideLoading,onVolumeChange:g?this.onVolumeChangeFullScreen:void 0,onTimeUpdate:this.onTimeUpdateVideo,onProgress:this.onProgressVideo}:{controls:!i,controlsList:"nodownload"}),c)})),a()(this,"renderVideoControls",(()=>{var e=this.props,t=e.filmstrip,s=e.soundDisabled,n=e.isVideoSponsoredDay,o=e.appContext._t,i=this.state,a=i.isHd,r=i.time,d=i.playing,c=i.isMuted,p=i.isInitialOverlay,m=i.isHdAvailable,g=i.isFullScreen,b=i.handlePosition,x=i.handleHoverPosition,f=i.buffered,C=i.seekHover,y=i.frameTime,w=i.isVideoFinished,j=i.videoEl,k=i.showMuteControlOnly;return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(ue,{onClickToggleFullScreen:this.onClickToggleFullScreen,onClickPlay:this.onClickPlay,onClickPause:this.onClickPause,onClickVolume:this.onClickVolume,onClickHd:this.onClickHd,isFullScreen:g,isHdAvailable:m,isHd:a,isMuted:c,isPlaying:d,time:r,isInitialOverlay:p,handlePosition:b,handleHoverPosition:x,buffered:f,seekHover:C,frameTime:y,onMouseMoveSeekbarWrapper:this.onMouseMoveSeekbarWrapper,onMouseLeaveSeekbarWrapper:this.onMouseLeaveSeekbarWrapper,onMouseDownSeekbarWrapper:this.onMouseDownSeekbarWrapper,onMouseUpSeekbarWrapper:this.onMouseUpSeekbarWrapper,onClickSeekHandleHover:this.onClickSeekHandleHover,filmstrip:t,thumbnailStyles:this.getThumbnailStyles(),useLimitedControls:n||void 0,soundDisabled:s,showMuteControlOnly:k,ref:this.seekBar}),n&&(0,pe.jsx)(u.ZP,{in:w&&(null==j?void 0:j.duration)===(null==j?void 0:j.currentTime),timeout:200,mountOnEnter:!0,unmountOnExit:!0,children:e=>(0,pe.jsx)("div",{className:l()(Se,{[Ie]:[u.d0,u.Ix,u.Wj].includes(e)}),style:{transition:"opacity ".concat(200,"ms")},children:(0,pe.jsx)(h.Z,{label:o("Replay video"),wrapperClassName:Ne,onClick:this.onReplayVideoClick,children:(0,pe.jsx)(v,{size:{height:65,width:65},colors:{primary:D().white}})})})})]})})),a()(this,"shouldShowCustomControls",(()=>this.props.isVideoSponsoredDay||!("undefined"!=typeof matchMedia&&matchMedia("(hover: none)").matches))),a()(this,"setVideoEl",(e=>this.setState({videoEl:e}))),a()(this,"playVideo",(()=>{var e;return null===(e=this.state.videoEl)||void 0===e?void 0:e.play().catch((()=>this.setState({playing:!1})))})),a()(this,"pauseVideo",(()=>{var e;return null===(e=this.state.videoEl)||void 0===e?void 0:e.pause()})),a()(this,"onClickPause",(()=>this.onUXTriggerPause(L.Fj.User,!1))),a()(this,"onClickPlay",(()=>this.onUXTriggerPlay(!1))),a()(this,"onUXTriggerPause",((e,t)=>this.setState({hasPausedSource:e,autoplay:t,playing:!1}))),a()(this,"onUXTriggerPlay",(e=>this.setState({autoplay:e,playing:!0,hasPausedSource:null}))),a()(this,"onClickVolume",(e=>{e.preventDefault(),e.stopPropagation(),this.setState((e=>{var t=e.isMuted,s=e.videoEl;return t&&s&&!s.volume&&(s.volume=1),{isMuted:!t,hasClickedVideoOrMuteControl:!0}}))})),a()(this,"onVolumeChangeFullScreen",(e=>this.setState({isMuted:e.currentTarget.muted||!e.currentTarget.volume}))),a()(this,"onMouseEnterVideo",(()=>this.setState({showControls:!0,showMuteControlOnly:!1}))),a()(this,"onMouseLeaveVideo",(()=>this.setState((e=>({showControls:!e.hasClickedVideoOrMuteControl,showMuteControlOnly:!e.hasClickedVideoOrMuteControl}))))),a()(this,"onAnimationEndPoof",(()=>this.setState({showPoof:!1}))),a()(this,"onEnded",(()=>{this.setState({isVideoFinished:!0}),this.props.disableAutolooping||this.resetVideoPosition(!0)})),a()(this,"onTouchEnd",(()=>this.setState({autoplay:!1}))),a()(this,"onClickHd",(()=>this.setState((e=>({isHd:!e.isHd}))))),a()(this,"onVideoClick",(()=>{if(!this.props.isVideoSponsoredDay){if(this.props.timelineObject&&(0,S.xT)(this.props.timelineObject)){var e,t=null===(e=this.props.timelineObject.actions)||void 0===e?void 0:e[0];if(null!=t&&t.tspSkipLightbox&&null!=t&&t.urls.web)return void window.open(null==t?void 0:t.urls.web,"_blank","noreferrer,noopener")}this.setState((e=>({playing:!e.playing,autoplay:!1,showPoof:!0,isInitialOverlay:!1,hasPausedSource:e.playing?L.Fj.User:null,hasClickedVideoOrMuteControl:!0})))}})),a()(this,"onVideoWaiting",(()=>this.setState({loading:!0}))),a()(this,"hideLoading",(()=>this.setState({loading:!1}))),a()(this,"getVideoDurationInMinSec",(()=>this.state.videoEl&&this.setState({time:this.formatVideoTime(this.state.videoEl.duration)}))),a()(this,"formatVideoTime",(e=>{var t=Math.floor(e/60),s=Math.floor(e%60);return"".concat(t,":").concat(s<10?"0".concat(s):s)})),a()(this,"isVideoInView",(()=>this.state.isVideoIntersecting)),a()(this,"setPlaybackPosition",(e=>{var t=this.state.videoEl,s=((null==t?void 0:t.duration)||0)*e;this.setState((e=>({handlePosition:"".concat(e.handleHoverPosition,"px")}))),t&&(t.currentTime=s)})),a()(this,"onMouseMoveSeekbarWrapper",(e=>{var t,s;this.setState({seekHover:!0});var n=this.state,o=n.isSeeking,i=n.videoEl,a=n.thumbnailCount,r=(null===(t=e.currentTarget.firstElementChild)||void 0===t?void 0:t.getBoundingClientRect().width)||0,l=Math.abs(Math.round(e.clientX-((null===(s=e.currentTarget.firstElementChild)||void 0===s?void 0:s.getBoundingClientRect().left)||0)));if(!(l<0||l>r)){var d=l/r,c=100*d,p=Math.floor(d*((null==i?void 0:i.duration)||0)),u=100/(a-1),h=Math.floor(c/a)*u;this.setState({handleHoverPosition:l,filmstripOffset:h}),this.updateFrameTime(p),o&&this.setPlaybackPosition(d)}})),a()(this,"updateFrameTime",(e=>this.setState({frameTime:this.formatVideoTime(e)}))),a()(this,"onMouseDownSeekbarWrapper",(()=>this.setState({isSeeking:!0}))),a()(this,"onMouseUpSeekbarWrapper",(()=>this.setState({isSeeking:!1}))),a()(this,"onMouseLeaveSeekbarWrapper",(()=>this.setState({seekHover:!1,isSeeking:!1}))),a()(this,"onClickSeekHandleHover",(e=>{var t,s,n=e.clientX-((null===(t=e.currentTarget.parentElement)||void 0===t?void 0:t.getBoundingClientRect().left)||0),o=null===(s=this.seekBar.current)||void 0===s?void 0:s.getBoundingClientRect().width;if(o){var i=n/o;this.setPlaybackPosition(i)}})),a()(this,"getThumbnailStyles",(()=>{var e=this.props.filmstrip,t=this.state,s=t.thumbnailCount,n=t.filmstripOffset;if(!e)return{};var o=e.height,i=e.width,a=e.url,r=.35*i/s,l=.35*o;return{top:-(l+10),left:-r/2+5,width:"".concat(r,"px"),height:"".concat(l,"px"),backgroundImage:"url(".concat(a,")"),backgroundSize:"".concat(r*s,"px ").concat(l,"px"),backgroundPosition:"".concat(n,"% 0%")}})),a()(this,"onTimeUpdateVideo",(()=>{var e=this.state,t=e.showControls,s=e.videoEl;if(t&&s){var n=s.duration,o=s.currentTime,i=o/n*100;this.setState({handlePosition:"".concat(i,"%"),time:this.formatVideoTime(n-o)})}})),a()(this,"onProgressVideo",(()=>{var e=this.state.videoEl;if(e){var t=e.duration,s=e.buffered,n=e.currentTime;if(t>0)for(var o=0;o<s.length;o+=1)if(s.start(s.length-1-o)<=n){var i=s.end(s.length-1-o);this.setState({buffered:i/t*100});break}}})),a()(this,"onClickToggleFullScreen",(()=>{var e;if(!this.state.isFullScreen&&null!==(e=this.videoContainerRef)&&void 0!==e&&e.current){var t;if(this.props.onFullScreenChange)return void this.props.onFullScreenChange(!0);this.setViewportResizeRender("disable"),this.fscreen.requestFullscreen(null===(t=this.videoContainerRef)||void 0===t?void 0:t.current),this.setState({isFullScreen:!0},(()=>{this.fscreen.addEventListener("fullscreenchange",this.onFullScreenExit)}))}else{if(this.props.onFullScreenChange)return void this.props.onFullScreenChange(!1);this.fscreen.exitFullscreen()}})),a()(this,"onFullScreenExit",(()=>{this.fscreen.fullscreenElement||this.setState({isFullScreen:!1},(()=>{this.setViewportResizeRender("enable"),this.fscreen.removeEventListener("fullscreenchange",this.onFullScreenExit)}))})),a()(this,"onReplayVideoClick",(e=>{null==e||e.stopPropagation(),null==e||e.preventDefault(),this.resetVideoPosition(!1)})),a()(this,"resetVideoPosition",(e=>this.setState({autoplay:e,handlePosition:"0%",isVideoFinished:!1,playing:!0},(()=>{this.state.videoEl&&(this.state.videoEl.currentTime=0,this.playVideo())})))),a()(this,"getMediaType",(()=>{var e=this.props.media;return e.type===L.w3.Mov?void 0:e.type})),a()(this,"handleIntersectionChange",(e=>{this.setState((t=>{var s=t.playing,n=t.hasPausedSource,o=t.isVideoFinished,i=t.autoplay,a=t.hasVideoIntersected||e,r=this.shouldAutoDock(a)?s:e&&!n&&!o;return{playing:r,autoplay:s!==r||i,isInitialOverlay:!1,isVideoIntersecting:e,hasVideoIntersected:a}}))})),a()(this,"onVisibilityChange",(()=>{var e=this.state,t=e.playing,s=e.hasPausedSource;"visible"===document.visibilityState?t||s!==L.Fj.DocumentVisibility||this.onUXTriggerPlay(!0):t&&this.onUXTriggerPause(L.Fj.DocumentVisibility,!0)}))}shouldAutoDock(e){var t=this.state,s=t.playing,n=t.isMuted,o=this.props,i=o.showsDockMediaButton,a=o.alwaysAutoDock,r=o.dockableContext.isMediaDocked;return!!i&&s&&(!n||!!a&&e&&!r)}dispatchMoatVideoEvent(e){var t,s,n;(0,S.nJ)(null===(t=this.props)||void 0===t?void 0:t.timelineObject)&&(null===(s=this.moatApiReferenceInstance)||void 0===s||null===(n=s.dispatchEvent)||void 0===n||n.call(s,{type:Pe[e],adVolume:this.state.isMuted?0:1}))}initMoatApiReference(){var e,t,s,n=null===(e=this.props)||void 0===e?void 0:e.timelineObject;if((0,S.nJ)(n)||null!==(t=this.state)&&void 0!==t&&t.videoEl){var o={level1:(null==n?void 0:n.advertiserId)||"",level2:(null==n?void 0:n.campaignId)||"",level3:(null==n?void 0:n.adGroupId)||"",level4:(null==n?void 0:n.creativeId)||""};this.moatApiReferenceInstance=function(e,t,s,n,o,i){var a,r,l=document.createElement("script"),d=[],c={vidIntType:"3",vidIntVersion:"1.0",adData:{ids:t,duration:s,url:o},dispatchEvent:function(e){c.sendEvent?(d&&(d.push(e),e=d,d=!1),c.sendEvent(e)):d&&d.push(e)},clientCallback:i};t="_moatApi"+Math.floor(1e8*Math.random());try{r=(a=e.ownerDocument).defaultView||a.parentWindow}catch(e){a=document,r=window}return r[t]=c,l.type="text/javascript",e&&e.insertBefore(l,e.childNodes[0]||null),l.src="https://z.moatads.com/"+n+"/moatvideo.js#"+t,c}(this.videoContainerRef.current,o,null===(s=this.state.videoEl)||void 0===s?void 0:s.duration,"tumblrjsvideo916683822435")}}componentDidMount(){window.addEventListener("visibilitychange",this.onVisibilityChange),this.numGlassContextOnMount=this.props.numGlassOpenContext.numGlassOpen,setTimeout((()=>{this.numGlassContextOnMount=this.props.numGlassOpenContext.numGlassOpen}),0),this.initMoatApiReference()}componentWillUnmount(){window.removeEventListener("visibilitychange",this.onVisibilityChange)}componentDidUpdate(e,t){var s,n,i=this.state,a=i.isFullScreen,r=i.isMuted,l=i.playing,d=i.hasPausedSource,c=i.hasVideoIntersected,p=this.props,u=p.isDocked,h=p.numGlassOpenContext.numGlassOpen,m=p.alwaysAutoDock;e.isMuted!==this.props.isMuted&&this.props.isMuted!==r&&this.setState({isMuted:!r}),e.isFullScreen!==this.props.isFullScreen&&this.props.isFullScreen!==a&&this.setState({isFullScreen:!a}),this.props.playing!==e.playing&&l!==this.props.playing&&this.onVideoClick(),null===(s=(n=this.props.autoDockContext).setComponentToAutoDock)||void 0===s||s.call(n,this.shouldAutoDock(c),m),l&&this.numGlassContextOnMount<h?this.onUXTriggerPause(L.Fj.Glass,!0):!l&&d===L.Fj.Glass&&this.numGlassContextOnMount>=h&&this.onUXTriggerPlay(!0),t.playing!==l&&(l?(this.playVideo(),this.dispatchMoatVideoEvent(Pe.AdVideoStart)):this.pauseVideo()),this.state.playing&&("100%"===this.state.handlePosition&&this.dispatchMoatVideoEvent(Pe.AdVideoComplete),parseFloat(this.state.handlePosition)>=25&&!this.state.moatQuartileEventsStatus.AdVideoFirstQuartileIsDispatched&&(this.dispatchMoatVideoEvent(Pe.AdVideoFirstQuartile),this.setState((e=>({moatQuartileEventsStatus:o()(o()({},e.moatQuartileEventsStatus),{},{AdVideoFirstQuartileIsDispatched:!0})})))),parseFloat(this.state.handlePosition)>=50&&!this.state.moatQuartileEventsStatus.AdVideoMidpointIsDispatched&&(this.dispatchMoatVideoEvent(Pe.AdVideoMidpoint),this.setState((e=>({moatQuartileEventsStatus:o()(o()({},e.moatQuartileEventsStatus),{},{AdVideoMidpointIsDispatched:!0})})))),parseFloat(this.state.handlePosition)>=75&&!this.state.moatQuartileEventsStatus.AdVideoThirdQuartileIsDispatched&&(this.dispatchMoatVideoEvent(Pe.AdVideoThirdQuartile),this.setState((e=>({moatQuartileEventsStatus:o()(o()({},e.moatQuartileEventsStatus),{},{AdVideoThirdQuartileIsDispatched:!0})})))),"0%"===this.state.handlePosition&&"100%"===t.handlePosition&&(this.dispatchMoatVideoEvent(Pe.AdVideoStart),this.setState({moatQuartileEventsStatus:{AdVideoFirstQuartileIsDispatched:!1,AdVideoMidpointIsDispatched:!1,AdVideoThirdQuartileIsDispatched:!1}}))),e.isDocked&&!u&&this.onClickPause()}render(){var e=this.props,t=e.media,s=e.isDocked,n=e.hasNoMaxUndockedHeight,i=e.isVideoSponsoredDay,a=e.playerStyle,r=e.timelineObject,d=e.useViewabilityTracker,c=e.appContext._t,u=this.state,h=u.playing,m=u.showPoof,g=u.loading,v=u.isInitialOverlay,b=u.showControls,x=u.videoEl,f=u.isFullScreen;return(0,pe.jsx)(M.ZP,{children:e=>{var u=e.width,C=e.setViewportResizeRender,y=l()(Ce,{[we]:n,[ke]:s,[je]:f});return this.setViewportResizeRender=C,(0,pe.jsxs)(p.df,{onChange:this.handleIntersectionChange,threshold:.5,className:y,role:"application","aria-label":c("Video Player"),style:a,children:[(0,pe.jsxs)("div",{ref:this.videoContainerRef,onMouseEnter:this.onMouseEnterVideo,onMouseLeave:this.onMouseLeaveVideo,className:ye,children:[(0,pe.jsx)("video",o()(o()({},this.getVideoElementProps(u)),{},{children:(0,pe.jsx)("source",{src:t.url,type:this.getMediaType()})})),this.shouldShowCustomControls()&&(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(fe,{isPlaying:h,showPoof:m,isLoading:g,isInitialOverlay:v,onAnimationEndPoof:this.onAnimationEndPoof}),(i||b)&&this.renderVideoControls()]})]}),d&&r&&(0,pe.jsx)(E,{videoRef:x,isInView:this.isVideoInView,timelineObject:r,videoContextOptions:{doesVideoLoop:!this.props.disableAutolooping,trackPauseAsAutoStop:i}})]})}})}}a()(Te,"defaultProps",{isMuted:!0,useViewabilityTracker:!0});const Ze=(0,I.X9)(Te,{appContext:!0,numGlassOpenContext:!0,dockableContext:!0,autoDockContext:!0})},25694:(e,t,s)=>{"use strict";s.d(t,{Z:()=>y});var n=s(33970),o=s.n(n),i=s(5754),a=s.n(i),r=s(95004),l=s(79615),d=s(39934),c=s(13434),p=s(89351),u=s(54382),h=s(43684),m=s(81846),g=s(78667),v=s(91949),b=s(63583),x=s.n(b),f=s(1181),C=s(2629);function y(e){var t=e.categories,s=e.isYourOwnBlog,n=e.hasCommunityLabel,i=e.reportViolation,b=e.reportViolationStatus,y=(0,g.bp)()._c,w=(0,r.useMemo)((()=>{var e=y("Separator of list of content warnings",", "),s=Object.entries(t).filter((e=>{var t=o()(e,2)[1];return(0,v.CS)(t)})).map((e=>{var t=o()(e,1)[0];return(0,v.id)(t,y).label.toLocaleLowerCase()})).join(e);return(0,m.k)(s)}),[y,t]),j=y("Menu item to suggest a community label to a post","Suggest a Content Warning"),k=y("Menu item to alert that the community label was already suggested","Community Label suggested"),S=(0,C.jsx)(u.ZP,{comment:"Shown next to 'Suggest a Community Label' button",children:"Missing label?"}),I=(0,C.jsx)(l.Z,{label:j,onClick:i,children:(0,C.jsx)(p.Z,{content:S,position:h.I2.Top,children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{className:f.Z.missingLabel,children:S}),(0,C.jsx)(d.Z,{})]})})}),N=(0,C.jsx)("div",{className:f.Z.loader,children:(0,C.jsx)(c.Z,{small:!0,color:x().paletteGray65})}),P=(0,C.jsx)(l.Z,{label:k,disabled:!0,title:k,children:k}),T=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:a()(f.Z.communityLabelHeader),children:[(0,C.jsx)(u.ZP,{comment:"Community Label in post menu for labelled post",children:"Community Label: Mature"}),!s&&("idle"===b||"failure"===b)&&(0,C.jsx)("span",{children:I})||"pending"===b&&N]}),(0,C.jsxs)("div",{className:a()(f.Z.communityLabelDetail),children:[0!==w.length&&w,!s&&"success"===b&&P]})]});return(0,C.jsx)("div",{className:a()(f.Z.communityLabel),"data-testid":"community-label-menu-item",children:n?T:(0,C.jsxs)("span",{className:a()(f.Z.communityLabelHeader),children:[" ",(0,C.jsx)(u.ZP,{comment:"Content warning in post menu for unlabelled post",children:"Community Label: Everyone"}),!s&&I]})})}},14542:(e,t,s)=>{"use strict";s.d(t,{Z:()=>co});var n=s(54138),o=s.n(n),i=s(50209),a=s.n(i),r=s(5754),l=s.n(r),d=s(29774),c=s(95004),p=s(17709),u=s(56305),h=s(63334),m=s(36343),g=(0,m.q)("calendar");g.defaultProps={size:{width:18,height:18}};const v=g;var b=(0,m.q)("clock");b.defaultProps={size:{width:18,height:18}};const x=b;var f=s(26216),C=s(83644),y=s(43523),w=s(31679),j=s(78667),k=s(43166),S=s(55855),I=s(63583),N=s.n(I);const P="SpkZj",T="RqsHX",Z="dvqFF";var A=s(2629);const E=function(e){var t=e.ctaText,s=e.backgroundColor,n=void 0===s?N().paletteAccent:s,i=e.borderColor,a=void 0===i?N().paletteAccent:i,r=e.color,d=void 0===r?N().paletteWhite:r,c=e.clickUrl,p=e.placementId,u=(0,j.bp)(),h=u.logEvent,m=u.features,g=(0,k.uu)().post,v=(0,w.b)(),b=v.hydraConfigInstanceId,x=v.adPlacementConfiguration,f=m.tspCtaButtonUnderline?T:P;return(0,A.jsx)("a",{className:l()(f,Z),style:{backgroundColor:n,color:d,borderColor:a},href:c,rel:"nofollow noreferrer noopener",target:"_blank",onClick:()=>{h({eventName:y.J.CTAButton,eventDetails:o()(o()({placement_id:p},(0,S.U)({hydraConfigInstanceId:b,adPlacementConfiguration:x,timelineObject:g})),{},{cta_button_style:m.tspCtaButtonUnderline?"underline":"none"})}),h({eventName:y.J.Click,eventDetails:o()({placement_id:p},(0,S.U)({hydraConfigInstanceId:b,adPlacementConfiguration:x,timelineObject:g}))})},children:t||C.J.LearnMore})};var M=s(235),L=s(25190),O=s(90621),R=s(59215),D=s(79615),F=s(2474);const B=e=>{var t=e.onClick,s=(0,j.bp)()._t;return(0,A.jsx)(D.Z,{label:s("Move down"),onClick:t,children:(0,A.jsx)(F.br,{size:{width:21,height:21},colors:{primary:N().paletteGray65}})})};var _=s(57921);const U=e=>{var t=e.onClick,s=(0,j.bp)()._t;return(0,A.jsx)(D.Z,{label:s("Move to bottom"),onClick:t,children:(0,A.jsx)(_.E,{size:{width:21,height:21},colors:{primary:N().paletteGray65}})})};const V=e=>{var t=e.onClick,s=(0,j.bp)()._t;return(0,A.jsx)(D.Z,{label:s("Move to top"),onClick:t,children:(0,A.jsx)(_.I,{size:{width:21,height:21},colors:{primary:N().paletteGray65}})})};const z=e=>{var t=e.onClick,s=(0,j.bp)()._t;return(0,A.jsx)(D.Z,{label:s("Move up"),onClick:t,children:(0,A.jsx)(F.Ii,{size:{width:21,height:21},colors:{primary:N().paletteGray65}})})},H="squP2",W="gc3fY",q="fDUq4";class G extends c.Component{constructor(){super(...arguments),a()(this,"allPosts",[]),a()(this,"queuedPosts",[]),a()(this,"moveUp",(()=>{var e=this.props.id,t=this.queuedPosts.findIndex((t=>e===t))-1,s=this.allPosts.findIndex((e=>this.queuedPosts[t]===e));return this.queueReorder(this.allPosts[s-1]||0,t)})),a()(this,"moveDown",(()=>{var e=this.props.id,t=this.queuedPosts.findIndex((t=>e===t))+1,s=this.allPosts.findIndex((e=>this.queuedPosts[t]===e));return this.queueReorder(this.allPosts[s-1],t)})),a()(this,"moveToTop",(()=>this.queueReorder(0,0))),a()(this,"moveToBottom",(()=>this.queueReorder(this.allPosts[this.allPosts.length-1],this.queuedPosts.length-1))),a()(this,"queueReorder",((e,t)=>{var s=this.props,n=s.id,o=s.blogName,i=s.timelineContext,a=s.appContext.apiFetch;return(0,O.wW)(a,{blogName:o,id:n,insertAfter:e}).fetch((()=>null==i?void 0:i.onQueueReorder(n,t)))}))}render(){return(0,A.jsx)(L.ZP,{children:e=>{var t=e.isMobile;return(0,A.jsx)("div",{className:l()(H,this.props.className),children:this.getControls(t)})}})}getControls(e){var t=this.props.id;return(0,A.jsx)(M.Jj.Consumer,{children:s=>{var n=s.allPosts,o=s.queuedPosts;this.allPosts=n,this.queuedPosts=o;var i=this.queuedPosts.length,a=this.queuedPosts.findIndex((e=>t===e)),r=[];return e&&a>0&&r.push((0,A.jsx)("div",{className:W,children:(0,A.jsx)(z,{onClick:this.moveUp})},"moveUp")),e&&a!==i-1&&r.push((0,A.jsx)("div",{className:W,children:(0,A.jsx)(B,{onClick:this.moveDown})},"moveDown")),a>0&&r.push((0,A.jsx)("div",{className:W,children:(0,A.jsx)(V,{onClick:this.moveToTop})},"moveToTop")),e&&a!==i-1&&r.push((0,A.jsx)("div",{className:W,children:(0,A.jsx)(U,{onClick:this.moveToBottom})},"moveToBottom")),r.length>0?(0,A.jsx)("div",{className:q,children:r}):null}})}}const X=(0,R.X9)(G,{appContext:!0,timelineContext:!0});var Q=s(17276),J=s.n(Q),Y=s(99077),K=s.n(Y),$=s(59514),ee=s(30420);var te=(0,m.q)("like-circle");te.defaultProps={size:{width:22,height:22},className:"Ij1AD"};const se=te;var ne=(0,m.q)("reblog-circle");ne.defaultProps={size:{width:22,height:22},className:"I2mEo"};const oe=ne;var ie=(0,m.q)("reply-circle");ie.defaultProps={size:{width:22,height:22},className:"O07_X"};const ae=ie;var re=s(77434),le=s(33970),de=s.n(le),ce=s(50049),pe=(0,m.q)("camera-flip");pe.defaultProps={size:{width:23,height:20}};const ue=pe;var he=(0,m.q)("extinguisher");he.defaultProps={size:{width:13,height:18}};const me=he;var ge=(0,m.q)("ignite");ge.defaultProps={size:{width:23,height:20}};const ve=ge,be="hgLUH",xe="cuF6B";const fe=e=>{var t=e.label,s=e.onClick,n=e.disabled,o=void 0!==n&&n;return(0,A.jsxs)(D.Z,{wrapperClassName:be,label:t,onClick:s,disabled:o,children:[(0,A.jsx)(me,{}),(0,A.jsx)("div",{className:xe,children:t})]})};var Ce=s(54382),ye=s(67023);const we=e=>{var t=e.classname,s=e.percent;return(0,A.jsx)("div",{className:t,style:{width:"".concat(s>100?100:s,"%")}})},je="s4g_h",ke="yXNX0",Se="pMpfW",Ie="HQcQr",Ne="hrv3x",Pe="VgtfT",Te="rBSgB";var Ze=e=>(0,(0,j.bp)()._getLocaleDateString)(new Date(1e3*e),ye.Cx.WeekDayDateAndTime);const Ae=e=>{var t=e.startingDate,s=e.impressionGoal,n=e.impressionCount;return(0,A.jsxs)("div",{className:Se,children:[(0,A.jsxs)("div",{className:Ie,children:[(0,A.jsx)("label",{className:je,children:(0,(0,j.bp)()._t)("Started:")}),(0,A.jsx)("label",{className:ke,children:"".concat(Ze(t))})]}),0!==n&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:Ie,children:[(0,A.jsx)("label",{className:je,children:(0,(0,j.bp)()._t)("Estimated Progress:")}),(0,A.jsx)("label",{id:"impressionCount",className:ke,children:(0,A.jsx)(Ce.ZP,{params:{impressionCount:n,impressionGoal:s},components:{highlight:(0,A.jsx)("span",{className:Te})},children:"[highlight][impressionCount][/highlight] / [impressionGoal] impressions"})})]}),(0,A.jsx)("div",{className:Pe,children:(0,A.jsx)(we,{classname:Ne,percent:n/s*100})})]})]})};var Ee=s(13434),Me=s(29521),Le=s(81584),Oe=s(67657),Re=s(87674),De=s(73078),Fe=s(8705),Be=s(5136),_e=s(98384),Ue=s(62412),Ve=s(43684),ze=s(39895),He=s(20814);const We=function(e){var t=(0,j.bp)(),s=t._t,n=t._c,o=t.apiFetch,i=e.productSelected,a=e.productsChanged,r=e.audienceOptionSelected,l=()=>(0,A.jsx)("img",{className:He.Z.blazed,src:Fe,alt:n("Alternate text for a special tumblr t logo","Tumblr t logo with fires around")}),d=(0,c.useState)([]),p=de()(d,2),u=p[0],h=p[1],m=(0,c.useState)([]),g=de()(m,2),v=g[0],b=g[1],x=(0,c.useState)(!0),f=de()(x,2),C=f[0],y=f[1],w=(0,c.useState)(0),k=de()(w,2),S=k[0],I=k[1],N=(0,c.useState)(void 0),P=de()(N,2),T=P[0],Z=P[1],E=(0,c.useState)(null),M=de()(E,2),L=M[0],O=M[1],R=(0,c.useState)(!1),F=de()(R,2),B=F[0],_=F[1],U=(0,c.useCallback)(K()(J()().mark((function e(){return J()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,Le.ZP)(o).igniteProducts().fetch().then((e=>{var t=e.response,s=t.products,n=t.audienceOptions;if(!s||!s.length)throw h([]),a([]),b([]),new Error("No products found");var o=s.map((e=>({value:e.slug,children:(0,A.jsxs)("span",{className:He.Z.radioInnerContainer,children:[(0,A.jsx)("span",{className:He.Z.price,children:(0,A.jsx)("b",{children:e.price})}),(0,A.jsx)("span",{className:He.Z.description,children:e.description})]})})));h(o),a(o),i(o[0]);var l=n.map((e=>({key:e.key,description:e.description})));b(l),r(l[0]),Z(0),y(!1)})).catch((()=>{O("No products found"),y(!1)}));case 1:case"end":return e.stop()}}),e)}))),[o,i,a,r]);return(0,c.useEffect)((()=>{U()}),[]),C?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("p",{className:He.Z.icon,children:(0,A.jsx)(l,{})}),(0,A.jsx)("p",{className:He.Z.title,children:n("Blaze is the brand name here - sponsor a post","Tumblr Blaze")}),(0,A.jsx)("p",{className:He.Z.loadingText,children:"Loading products..."}),(0,A.jsx)(Ee.Z,{centerOrientation:Ee.Q.Horizontal,color:"white"})]}):u&&u.length?(0,A.jsxs)("div",{className:He.Z.container,children:[(0,A.jsx)("p",{className:He.Z.icon,children:(0,A.jsx)(l,{})}),(0,A.jsx)("p",{className:He.Z.title,children:n("Blaze is the brand name here - sponsor a post","Tumblr Blaze")}),(0,A.jsx)("p",{className:He.Z.subtitle,children:(0,A.jsx)("b",{children:s("Set your post ablaze. Sponsor it to put it in front of more people across Tumblr!")})}),(0,A.jsx)(ze.Z,{className:He.Z.igniteProductionOptions,groupLabel:s("Pricing"),name:"productSlug",options:u,selectedOptionIndex:S,onChange:e=>{I(e),i(u[e])}}),v.length>0&&void 0!==T&&v[T].description?(0,A.jsx)("div",{className:He.Z.popoverContainer,children:(0,A.jsx)(Ue.ZP,{component:(0,A.jsxs)("div",{children:[(0,A.jsx)(Be.Z,{isWrappingButton:!0,isDisabled:!0,className:He.Z.dropdownBtnContainer,children:(0,A.jsx)(D.Z,{children:(0,A.jsx)(Ce.ZP,{children:"Audience"})})}),v.map(((e,t)=>(0,A.jsx)(Be.Z,{isWrappingButton:!0,className:He.Z.dropdownBtnContainer,children:(0,A.jsx)(D.Z,{label:e.description,onClick:()=>{(e=>{Z(e),r(v[e])})(t)},children:e.description})},t)))]}),width:"calc(100% - 48px)",maxWidth:464,height:"auto",usePortals:!0,position:Ve.I2.BottomStart,targetWrapperDisplayBlock:!0,isOpen:B,toggle:()=>_((e=>!e)),children:(0,A.jsxs)(D.Z,{className:He.Z.targeting,wrapperClassName:He.Z.audienceButton,label:s("Audience"),children:[(0,A.jsxs)("span",{children:[(0,A.jsx)("span",{className:He.Z.targetingText,children:n("Label for audience Blaze campaigns (modal)","Audience")}),(0,A.jsx)("span",{className:He.Z.targetingLabel,children:v[T].description})]}),(0,A.jsx)("span",{className:He.Z.audienceCaret,children:B?(0,A.jsx)(_e.mV,{size:{width:12,height:12},colors:{primary:"#000000"}}):(0,A.jsx)(_e.$S,{size:{width:12,height:12},colors:{primary:"#000000"}})})]})})}):(0,A.jsxs)("div",{className:He.Z.targeting,children:[(0,A.jsx)("div",{className:He.Z.targetingText,children:n("Label for targeting Blaze campaigns (modal)","Targeting")}),(0,A.jsx)("div",{className:He.Z.targetingLabel,children:n("Option for targeting Blaze campaigns","@anyone")})]})]}):(0,A.jsx)(ce.Z,{theme:"error",wrapperClassName:He.Z.alert,message:L})};const qe=function(e){var t,s,n,o=(0,j.bp)(),i=o._c,a=o._t,r=o.apiFetch,d=(0,k.uu)().post,p=d.id,u=d.blogName,h=d.blog.uuid,m=d.igniteStatus,g=d.igniteTransaction,v=d.igniteReport,b=p.toString(),x=(null==g?void 0:g.transactionUuid)||"",f=(null==g?void 0:g.impressionGoal)||0,C=(null==v?void 0:v.impressions)||0,y=e.toggle,w=e.isOpen,S=(0,c.useState)(!1),N=de()(S,2),P=N[0],T=N[1],Z=(0,c.useState)(!1),E=de()(Z,2),M=E[0],L=E[1],O=(0,c.useState)(null),R=de()(O,2),F=R[0],B=R[1],_=(0,c.useState)([]),U=de()(_,2),V=U[0],z=U[1],H=(0,c.useState)(null),W=de()(H,2),q=W[0],G=W[1],X=(0,c.useState)(null),Q=de()(X,2),Y=Q[0],$=Q[1],ee=(0,c.useState)(!1),te=de()(ee,2),se=te[0],ne=te[1];if(!w)return null;var oe=i("Playful confirmation that the user wants to proceed","🔥 Blaze it"),ie=i("Blaze is the brand name here - sponsor a post","Tumblr Blaze"),ae=i("Blaze is the brand name - post is awaiting moderation","Blaze campaign pending!"),re=i("The post has been sponsored and is hot / trending","This post is on fire – in a good way!"),le=i("A post is being sponsored for X views, where Blaze is the name of the product","You’ve set this post ablaze. It may take up to 24 hours for your post to be moderated and queued up for delivery. We’ll send you an email when that happens!"),pe=i("A follow up that shows how well their sponsored post did","We’ll send a full report when your campaign is complete. Here's how it is going:"),he=i("The user wants to cancel a blazed post and needs to confirm","Extinguish your Blaze campaign"),ge=i("The post blaze was successfully cancelled","Post successfully extinguished"),be=function(){var e=K()(J()().mark((function e(){var t,s;return J()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(!0),!F||!F.value){e.next=17;break}return e.prev=2,t=q&&q.key?q.key:"anyone",e.next=6,ye(F.value,t);case 6:s=e.sent,window.location.assign(s),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),$("There was a problem redirecting to checkout"),L(!1),(0,Oe.AU)(b);case 15:e.next=19;break;case 17:$("Please select a product before proceeding"),L(!1);case 19:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),xe=()=>{T(!1),y()},ye=function(){var e=K()(J()().mark((function e(t,s){var n;return J()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(window.location.protocol,"//").concat(window.location.host,"/blog/view/").concat(u,"/").concat(b),e.abrupt("return",(0,Le.ZP)(r).ignitePost(b,h,t,n,s).fetch().then((e=>{var t=e.response,s=t.url,n=t.transactionUuid;if(!s)throw new Error("Cannot redirect to checkout");return(0,Oe.NV)(b,{transactionUuid:n}),s})));case 2:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),we=()=>(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("p",{className:He.Z.loadingText,children:a("Redirecting to payment...")}),(0,A.jsx)(Ee.Z,{color:I.paletteGray40,centerOrientation:Ee.Q.Horizontal,small:!0})]}),je=()=>{m===Me.g.approved?Se():ke(),ne(!0)},ke=()=>(0,Le.ZP)(r).igniteCancelPendingBlaze(b,h,x).fetch(),Se=()=>(0,Le.ZP)(r).igniteExtinguishPost(b,h,x).fetch(),Ie=()=>(0,A.jsx)(Re.Z,{headerIcon:(0,A.jsx)(me,{}),title:se?ge:he,onClose:xe,compact:!0,children:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(ce.Z,{theme:"info",wrapperClassName:He.Z.alert,title:"",message:se?m==Me.g.approved?i("A follow up indicating the post blaze has been successfully stopped","It may take a little bit for your post to be fully removed from promotion across Tumblr."):i("A follow up indicating the pending post blaze has been successfully cancelled","Your post will be removed from the moderation queue in a few moments."):m==Me.g.approved?(0,A.jsx)("label",{children:(0,A.jsx)(Ce.ZP,{params:{impressionCount:C,impressionGoal:f},children:"You can extinguish the remaining campaign and we’ll stop sharing your post across Tumblr. So far it’s been shown to [impressionCount] out of [impressionGoal] impressions. All sales are final and this will not refund your purchase. Would you like to extinguish your Blaze campaign?"})}):(0,A.jsx)("label",{children:(0,A.jsx)(Ce.ZP,{children:"Your post will be removed from the Blaze moderation queue and a full refund of your payment will be issued."})}),icon:(0,A.jsx)("div",{})}),(0,A.jsxs)("div",{className:He.Z.igniteButtons,children:[se?(0,A.jsx)(D.Z,{onClick:y,label:a("Done"),wrapperClassName:He.Z.igniteSuccessButton,children:a("Done")}):(0,A.jsx)(D.Z,{onClick:je,label:m==Me.g.pending?a("Yes, cancel my Blaze campaign"):a("Yes, extinguish my Blaze campaign"),wrapperClassName:He.Z.extinguishConfirmButton,children:m==Me.g.pending?a("Yes, cancel my Blaze campaign"):a("Yes, extinguish my Blaze campaign")}),se?(0,A.jsx)("div",{}):(0,A.jsx)(D.Z,{onClick:xe,label:a("No, continue campaign"),wrapperClassName:He.Z.extinguishCancelButton,children:a("No, continue campaign")})]})]})}),Ne=[];m?(Ne.push({text:a("Done"),onClick:be,buttonStyle:De.X.Confirm}),Ne.push({text:a("Extinguish"),onClick:be,buttonStyle:De.X.Confirm})):V&&V.length&&Ne.push({text:oe,onClick:be,buttonStyle:De.X.Confirm});var Pe=void 0,Te=void 0,Ze=ie,Fe=!1;return m!==Me.g.approved&&m!==Me.g.pending&&(Pe="blaze",Te=Re.L.Rounded,Ze=" ",Fe=!0),P?(0,A.jsx)(Ie,{}):(0,A.jsx)(Re.Z,{title:Ze,onClose:y,compact:!0,theme:Te,modalWrapperClass:Pe,children:M?(0,A.jsx)(we,{}):(0,A.jsxs)(A.Fragment,{children:[Y&&(0,A.jsx)(ce.Z,{theme:"error",wrapperClassName:He.Z.alert,message:Y}),m===Me.g.pending?(0,A.jsx)(ce.Z,{theme:"warning",wrapperClassName:He.Z.alert,title:ae,message:le,icon:(0,A.jsx)(ue,{})}):m===Me.g.approved?(0,A.jsx)(ce.Z,{theme:"success",wrapperClassName:He.Z.alert,title:re,message:pe,icon:(0,A.jsx)(ve,{}),children:(0,A.jsx)(Ae,{startingDate:null!==(t=null==g?void 0:g.startTimestamp)&&void 0!==t?t:0,impressionGoal:null!==(s=null==g?void 0:g.impressionGoal)&&void 0!==s?s:0,impressionCount:null!==(n=null==v?void 0:v.impressions)&&void 0!==n?n:0})}):(0,A.jsx)(We,{productSelected:B,productsChanged:z,audienceOptionSelected:G}),(0,A.jsxs)("div",{className:l()(He.Z.modalFooter,{[He.Z.hasCustomBg]:Fe}),children:[(0,A.jsxs)("div",{className:He.Z.infoText,children:[(0,A.jsx)("a",{href:"https://www.tumblr.com/support",target:"_blank",children:a("Help")}),"  •  ",(0,A.jsx)("a",{href:"https://tumblr.zendesk.com/hc/en-us/articles/5298854249367",target:"_blank",children:a("FAQs")})]}),(0,A.jsxs)("div",{className:He.Z.igniteButtons,children:[m?(0,A.jsx)(D.Z,{onClick:y,label:a("Done"),wrapperClassName:He.Z.igniteSuccessButton,children:a("Done")}):V&&V.length&&(0,A.jsx)(D.Z,{onClick:be,label:oe,wrapperClassName:He.Z.igniteSuccessButton,children:oe}),m?(0,A.jsx)(fe,{label:i("CTA label - for stopping a campaign from running.","Extinguish Campaign"),onClick:()=>{T(!0)},disabled:!1}):void 0]})]})]})})};const Ge=function(e){var t=e.toggleProductPopover,s=e.productPopoverIsOpen;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(qe,{isOpen:s,toggle:t}),s&&(0,A.jsx)(re.Z,{})]})};var Xe=s(80293);const Qe=(0,Xe.Z)((()=>Promise.all([s.e(4051),s.e(744),s.e(9853)]).then(s.bind(s,15653))),"AsyncPostActivityNeue");var Je=s(49515),Ye=s(82145),Ke=s(60857),$e=s(81022),et=s(48430),tt=s(40565),st=s(48451),nt=s(5700);const ot="24",it="AImO6",at="MT3mF",rt="tpZ8V",lt="kEusV",dt="Qne7x",ct="AXdIl",pt="KvHCB",ut="tkkxL",ht="WW8zi",mt="jlJk9",gt="ELEQL",vt="gzn4G",bt="oozSP";var xt=e=>{var t=e.type,s=e.label,n=e.icon;return(0,A.jsx)("div",{className:vt,"data-media-type":t,"aria-label":s,children:n})};const ft=e=>{var t,s=e.className,n=e.note,o=n.blog,i=o.avatar,a=o.name,r=o.theme.avatarShape,d=n.postId,c=n.reblogParentBlogName,h=n.type,m=e.note,g=e.onClickViewAll,v=(0,j.bp)()._c,b=(t=m.content,(0,nt.FI)(t,nt.kH.Text)?t.filter(nt.dz).map((e=>e.text)).join(" "):""),x=((e,t)=>{var s=e.content,n=e.blog.isAdult,o=s.find(nt.RD);return o?(0,A.jsx)("div",{"aria-label":t("Label for an image","Image"),children:(0,A.jsx)(st.Sw,{imageResponse:o.media,isSquare:!0,pixelated:n})}):(0,nt.FI)(s,nt.kH.Video)?(0,A.jsx)(xt,{type:nt.kH.Video,label:t("Label for a video block","Video"),icon:(0,A.jsx)(tt.Z,{colors:{primary:I.paletteNavy}})}):(0,nt.FI)(s,nt.kH.Audio)?(0,A.jsx)(xt,{type:nt.kH.Audio,label:t("Label for an audio block","Audio"),icon:(0,A.jsx)($e.Z,{colors:{primary:I.paletteNavy}})}):(0,nt.FI)(s,nt.kH.Link)?(0,A.jsx)(xt,{type:nt.kH.Link,label:t("Label for a link block","Link"),icon:(0,A.jsx)(et.Z,{colors:{primary:I.paletteNavy}})}):null})(m,v);return(0,A.jsx)("div",{"aria-label":v("A small preview of notes for a post","Notes preview"),className:l()(it,s),children:(0,A.jsxs)("div",{className:at,children:[(0,A.jsx)("div",{className:rt,children:(0,A.jsx)(p.Z,{avatarShape:r,imageResponse:i,name:a,dimension:+ot,badge:Je.Z.ofType(h)})}),(0,A.jsxs)("div",{className:lt,children:[(0,A.jsxs)("div",{className:dt,children:[(0,A.jsx)(u.Z,{className:ct,blogName:a,postId:d,krakenEventName:y.J.PostActivityNoteClickBlogName,krakenEventDetails:{type:h},ellipsisOverflow:!0,children:a}),c&&(0,A.jsx)("div",{className:pt,children:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:ut,children:(0,A.jsx)(Ye.Z,{size:{width:14,height:14},isCompact:!0})}),(0,A.jsx)(u.Z,{blogName:c,href:(0,Ke.Z)(c),showBlogCard:!1,children:c})]})})]}),(b||x)&&(0,A.jsxs)("div",{className:ht,children:[b&&(0,A.jsx)("div",{className:mt,children:b}),x&&(0,A.jsx)("div",{className:gt,children:x})]}),(0,A.jsx)("button",{className:bt,onClick:g,children:v("A link to all notes for a post","View all notes")})]})]})})};var Ct=s(28798);const yt=(0,Xe.Z)((()=>s.e(2474).then(s.bind(s,10583))),"AsyncSendAPost");var wt=s(73683),jt=s(65214),kt=s(6259),St=s(74446);const It=e=>{var t=e.editablePost,s=t.blog.name,n=t.id,o=(0,St.i)().onRemoveTimelineObject,i=(0,j.bp)()._c,a=(0,kt._)().addOnCloseModalRouteHandler,r=(0,c.useRef)(null),l=i("clicking the button will allow the user to reply.","Answer"),d=(0,c.useCallback)((e=>{var t;e&&(null==o||o({id:n})),null===(t=r.current)||void 0===t||t.call(r)}),[o,n]),p=(0,c.useCallback)((()=>{r.current=a((e=>{var t=e.isModalSuccess;return d(!!t)}))}),[]);return(0,A.jsx)(wt.rU,{to:(0,jt.yj)({blogName:s,postId:n.toString()}),children:(0,A.jsx)(D.Z,{label:l,onClick:p,children:l})})};var Nt=(0,m.q)("delete");Nt.defaultProps={size:{width:24,height:24}};const Pt=Nt;const Tt=e=>{var t=e.id,s=e.disabled,n=void 0!==s&&s,o=e.onClick,i=(0,j.bp)()._t;return t?(0,A.jsx)(D.Z,{label:i("Delete"),disabled:n,onClick:o,children:(0,A.jsx)(Pt,{size:{width:21,height:21},colors:{primary:n?N().paletteGray40:N().paletteGray65}})}):null};var Zt=s(10736),At=s(60499);const Et="cnNot",Mt="y56NR";const Lt=e=>{var t=e.color,s=void 0===t?N().paletteGray65:t,n=e.label,o=void 0===n?"":n,i=e.onClick,a=e.disabled,r=void 0!==a&&a,l=e.filled,d=void 0!==l&&l,c=e.withLabel,p=void 0===c||c;return(0,A.jsxs)(D.Z,{className:Et,label:o,onClick:i,disabled:r,children:[(0,A.jsx)(At.Z,{filled:d,emptyIconColors:{primary:s}}),p&&(0,A.jsx)("span",{className:Mt,children:(0,A.jsx)(Ce.ZP,{children:"Blaze"})})]})};var Ot=s(86179),Rt=s(7390),Dt=s(45451),Ft=s(18046),Bt=s(77),_t=s(22470),Ut=s(93613),Vt=s(43906),zt=s(66591),Ht=(0,m.q)("broken-heart-left");Ht.defaultProps={size:{width:24,height:24}};const Wt=Ht;var qt=(0,m.q)("broken-heart-right");qt.defaultProps={size:{width:16,height:24}};const Gt=qt,Xt="WXF6Z",Qt="y_8_Y",Jt="WQE_S",Yt="zTFrW",Kt="C281d";class $t extends c.Component{constructor(){super(...arguments),a()(this,"state",{isAnimating:!1}),a()(this,"animate",(()=>{this.setState((()=>({isAnimating:!0}))),window.setTimeout((()=>{this.setState({isAnimating:!1})}),750)}))}componentDidUpdate(e){e.liked!==this.props.liked&&this.animate()}render(){var e=this.props.liked;return this.state.isAnimating?e?(0,A.jsx)("div",{className:l()(Xt,Qt),children:(0,A.jsx)(Rt.Z,{filled:!0,size:{height:51,width:57}})}):(0,A.jsxs)("div",{className:l()(Xt,Jt),children:[(0,A.jsx)("div",{className:Kt,children:(0,A.jsx)(Wt,{size:{height:54,width:54}})}),(0,A.jsx)("div",{className:Yt,children:(0,A.jsx)(Gt,{size:{height:54,width:36}})})]}):null}}const es="ztpfZ",ts="B1Z5w",ss="YCZ8P";const ns=e=>{var t=e.color,s=void 0===t?N().paletteGray65:t,n=e.postIndex,i=void 0===n?0:n,a=(0,j.bp)(),r=a._c,d=a.logEvent,c=a.isLoggedIn,p=a.apiFetch,u=(0,St.i)(),h=u.onLike,m=u.onInjectTimelineObjects,g=u.displayMode,v=(0,k.uu)(),b=v.post,x=b.canLike,f=b.earnedId,C=b.id,w=b.liked,S=b.placementId,I=b.reblogKey,P=b.blogName,T=v.getIsLongPost,Z=(0,Ut.V)().toggleToast,E=(0,Bt.iv)().tabId,M=(0,Ot.TH)().pathname,L=(0,Vt.g)(),O=L.shouldShowLikeTip,R=L.postLiked,F=(0,_t.m)(),B=F.addRelatedPosts,_=F.relatedPosts,U=O(i),V=c&&!x,z=function(){var e=K()(J()().mark((function e(){return J()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,Le.ZP)(p).likePost({id:C,liked:w,reblogKey:I,blogName:P,placementId:S,earnedId:f,logEvent:d,onLike:h,isLongPost:null==T?void 0:T(),tabId:E,context:(0,jt.qz)(M),displayMode:g,tooltipShown:U}).fetch().then((e=>{var t,s;if(null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(s=t.timeline)&&void 0!==s&&s.elements){var n,i,a,l,c,p=null==e||null===(n=e.response)||void 0===n||null===(i=n.timeline)||void 0===i?void 0:i.elements,u=p[p.length-1],h=null===(a=u.elements)||void 0===a||null===(l=a[0])||void 0===l||null===(c=l.objectData)||void 0===c?void 0:c.injectInline;if(!h){var g=p[1].highlightText;p[1].text=r("Text that is shown to explain more posts","More posts by %1$s",[g]),m(C,p)}if(void 0===_[C]&&h){var v=p.map((e=>o()(o()({},e),{},{parentPostId:C})));m(C,v),B(C,v),d({eventName:y.J.RecommendationModuleImpression,eventDetails:{module_type:"3x1 chiclet",name:u.eventData.name,type:u.eventData.type,serve_id:u.serveId,tab:E}})}}})).catch((e=>{e instanceof zt.Z&&Z(e.message,"error")})),w||R();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,A.jsx)(Dt.Z,{isOpen:U,content:r("Text that is shown as a tooltip to nudge the user to like a post.","Psst... liking a post you’re into makes your recommendations better 👀"),popoverProps:{useFlex:!0,targetStyles:{height:"100%"}},onFirstShow:()=>{d({page:"TourGuideLikeTooltip",eventName:y.J.Shown})},onDismiss:()=>{d({page:"TourGuideLikeTooltip",eventName:y.J.Dismissed})},children:(0,A.jsxs)(D.Z,o()(o()({className:l()(ts,{[es]:w,[ss]:V}),label:w?r("Like button: Unlike label","Unlike"):r("Like button: Like label","Like"),onClick:z,disabled:V},!c&&{"data-login-wall-type":"like","data-login-wall-id":C,"data-login-wall-reblog-key":I,"data-login-wall-blog-name":P,"data-login-wall-placement-id":S,"data-login-wall-earned-id":f,"data-login-wall-redirect":(0,jt.wT)({exploreMode:Ft.Ru.Trending})}),{},{children:[(0,A.jsx)(Rt.Z,{filled:w,size:{width:23,height:21},emptyIconColors:{primary:V?N().paletteGray40:s}}),(0,A.jsx)($t,{liked:w})]}))})},os="UUr5c";class is extends c.Component{constructor(){super(...arguments),a()(this,"state",{dialogIsShowing:!1}),a()(this,"apiHelper",(0,Le.ZP)(this.props.appContext.apiFetch)),a()(this,"confirmPublish",(()=>this.setState({dialogIsShowing:!0}))),a()(this,"cancelConfirmation",(()=>this.setState({dialogIsShowing:!1}))),a()(this,"publishPost",(()=>{var e=this.props,t=e.timelineContext,s=e.postContext.post,n=s.blog.uuid,o=s.id;return n&&this.apiHelper.quickPublishPost(n,o).fetch((()=>{var e;this.cancelConfirmation(),null==t||null===(e=t.onRemoveTimelineObject)||void 0===e||e.call(t,{id:o})}))}))}render(){var e=this.props,t=e.appContext,s=t._c,n=t.features.postFooterSecondRedesign,o=e.postContext.post.state,i=this.state.dialogIsShowing;if(o===nt.hA.Published||o===nt.hA.Private)return null;var a=s("Action button to publish a post, should be verb here","Post");return(0,A.jsxs)(c.Fragment,{children:[(0,A.jsx)(D.Z,{label:a,onClick:this.confirmPublish,className:n?os:void 0,children:a}),i&&this.renderDialog()]})}renderDialog(){var e=this.props.appContext._t;return(0,A.jsx)($.Z,{onGlassClick:this.cancelConfirmation,children:(0,A.jsx)(De.Z,{title:e("Publish this post now?"),buttons:[{text:e("Cancel"),onClick:this.cancelConfirmation,buttonStyle:De.X.Neutral},{text:e("OK"),onClick:this.publishPost,buttonStyle:De.X.Confirm}]})})}}const as=(0,R.X9)(is,{appContext:!0,postContext:!0,timelineContext:!0});var rs=e=>{var t=e.size,s=t.width,n=t.height,o=e.fill;return(0,A.jsxs)("svg",{width:s,height:n,fill:"none",viewBox:"0 0 24 24",children:[(0,A.jsx)("path",{fill:o,fillRule:"evenodd",d:"M12 21a9 9 0 100-18 9 9 0 000 18zm0 2c6.075 0 11-4.925 11-11S18.075 1 12 1 1 5.925 1 12s4.925 11 11 11z",clipRule:"evenodd"}),(0,A.jsx)("path",{fill:o,fillRule:"evenodd",d:"M12 5a1 1 0 00-1 1v6a1 1 0 001 1h5a1 1 0 100-2h-4V6a1 1 0 00-1-1z",clipRule:"evenodd"})]})};rs.defaultProps={size:{width:24,height:24},fill:I.paletteBlack};const ls=rs;class ds extends c.Component{constructor(){super(...arguments),a()(this,"state",{dialogIsShowing:!1}),a()(this,"confirmQueue",(()=>this.setState({dialogIsShowing:!0}))),a()(this,"cancelConfirmation",(()=>this.setState({dialogIsShowing:!1}))),a()(this,"queuePost",(()=>{var e=this.props,t=e.timelineContext,s=e.postContext.post,n=s.blog.uuid,o=s.id,i=e.appContext.apiFetch;return n&&(0,O.V6)(i,{blogUuid:n,postId:o}).fetch((()=>{var e;this.cancelConfirmation(),null==t||null===(e=t.onRemoveTimelineObject)||void 0===e||e.call(t,{id:o})}))}))}render(){var e=this.props,t=e.appContext,s=t._c,n=t.features.postFooterSecondRedesign,o=e.postContext.post.state,i=this.state.dialogIsShowing;if(o!==nt.hA.Draft&&o!==nt.hA.Submission)return null;var a=s("Action button to queue a post, should be verb here","Queue");return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(D.Z,{label:a,onClick:this.confirmQueue,children:n?(0,A.jsx)(ls,{fill:I.paletteGray65}):a}),i&&this.renderDialog()]})}renderDialog(){var e=this.props.appContext._t;return(0,A.jsx)($.Z,{onGlassClick:this.cancelConfirmation,children:(0,A.jsx)(De.Z,{title:e("Queue this post for publishing?"),buttons:[{text:e("Cancel"),onClick:this.cancelConfirmation,buttonStyle:De.X.Neutral},{text:e("OK"),onClick:this.queuePost,buttonStyle:De.X.Confirm}]})})}}const cs=(0,R.X9)(ds,{appContext:!0,postContext:!0,timelineContext:!0});var ps=s(54589),us=s.n(ps),hs=s(92816),ms=s(8156),gs=s(68582),vs=["reblogKey","reblogBlogName","reblogPostId","routeQueryProps","mode"];const bs=e=>{var t=e.reblogKey,s=e.reblogBlogName,n=e.reblogPostId,i=e.routeQueryProps,a=e.mode,r=void 0===a?"reblog":a,l=us()(e,vs),d=()=>{var e=(0,ms.Z)(i),o={reblogKey:t,blogName:s,postId:n.toString()};return"reblog"===r?(0,jt.oh)(o,e):(0,jt.eJ)(o,e)};if(!(0,j.bp)().isLoggedIn){var c=(0,jt.wT)({exploreMode:Ft.Ru.Trending});return(0,A.jsx)(hs.Z,o()(o()({},l),{},{className:gs.Z.loggedOutLink,"data-login-wall-type":"reblog","data-login-wall-reblog-path":d(),"data-login-wall-destination":c,"data-login-wall-redirect":c}))}return(0,A.jsx)(hs.Z,o()(o()({},l),{},{getPath:d,isAlreadyOnPostFormPath:jt.LX}))};var xs=s(75408),fs=s(18042),Cs=s(37236);const ys="o6JAm",ws="LpPf2",js="ALkTz",ks="chDxw";const Ss=e=>{var t=e.onClickSelectedBlog,s=e.blogs,n=e.onMouseLeave,o=e.onMouseEnter,i=e.avatarTitle,a=(0,c.useState)(!1),r=de()(a,2),d=r[0],u=r[1],h=(0,j.bp)()._c,m=(0,c.useCallback)(((e,s)=>{t(s,e,{bubbleIndex:3}),u(!1)}),[t]);if(1===s.length)return null;var g=s.length>4,v=g?s.slice(0,3):s;return(0,A.jsxs)("div",{"aria-label":h("A list of blogs","Blogs"),className:l()(ys,{[ks]:d}),onMouseLeave:n,onMouseEnter:o,children:[v.map(((e,s)=>(0,A.jsx)(D.Z,{wrapperClassName:ws,onClick:n=>t(n,e,{bubbleIndex:s}),title:null==i?void 0:i(e.name),children:(0,A.jsx)(p.Z,{imageResponse:e.avatar,avatarShape:Cs.o.Circle,dimension:50})},s))),g&&(0,A.jsx)("div",{className:ws,children:(0,A.jsx)(xs.Z,{blogs:s.slice(3),selectedBlog:s[0],onClickSelectedBlog:m,onToggle:u,children:e=>(0,A.jsx)(D.Z,{wrapperClassName:js,onClick:e,children:(0,A.jsx)(fs.b,{colors:{primary:I.paletteNavy}})})})})]})};var Is=s(89351),Ns=s(22979),Ps=s(81095),Ts=s(8737),Zs=s(82560);const As="n8L1c";class Es extends c.Component{constructor(){super(...arguments),a()(this,"state",{isAnimating:!1}),a()(this,"animate",(()=>{this.setState({isAnimating:!0},(()=>setTimeout((()=>this.setState({isAnimating:!1})),800)))}))}render(){return this.props.children?this.state.isAnimating&&(0,A.jsx)("div",{className:As,children:(0,c.cloneElement)(this.props.children,{fill:this.props.fill})}):null}}a()(Es,"defaultProps",{fill:N().paletteGreen,children:null});const Ms="Od7LS";var Ls;!function(e){e[e.Reblogged=0]="Reblogged",e[e.Queued=1]="Queued"}(Ls||(Ls={}));const Os=e=>{var t=e.color,s=void 0===t?N().paletteGray65:t,n=e.disabled,i=e.className,a=e.mode,r=void 0===a?"reblog":a,d=e.postIndex,p=void 0===d?0:d,u=(0,j.bp)(),h=u.apiFetch,m=u._t,g=u._c,v=u.features.redpopFastReblog,b=u.features,x=u.logEvent,f=u.labsSettings.fastQueue,C=(0,k.uu)(),w=C.post,S=w.id,I=w.reblogKey,P=w.placementId,T=w.placementId,Z=w.earnedId,E=w.earnedId,O=w.blogName,R=w.shouldShowTip,D=C.post,F=C.getIsLongPost,B=(0,Bt.iv)().tabId,_=(0,kt._)().addOnCloseModalRouteHandler,U=(0,Ut.V)().toggleToast,V=(0,L.v$)().isMobile,z=(0,M.q5)(),H=z.canFastReblog,W=z.canFastQueue,q=z.fastRebloggedPosts,G=z.setDefaultFastBlog,X=z.getBlogs,Q=(0,St.i)(),J=Q.onReblogged,Y=Q.onInjectTimelineObjects,K=(0,Vt.g)(),$=K.shouldShowReblogTip,ee=K.reblogTipShown,te=$(p),se=c.useState(!1),ne=de()(se,2),oe=ne[0],ie=ne[1],ae=c.useState(void 0),re=de()(ae,2),le=re[0],ce=re[1],pe=c.useRef(null),ue=c.useRef(null),he=c.useRef((0,Le.ZP)(h)),me=c.useRef(!1),ge=c.useRef(!1),ve=c.useRef();c.useEffect((()=>()=>{var e;return null===(e=ve.current)||void 0===e?void 0:e.call(ve)}),[]);var be=X(),xe="reblog"===r&&H,fe=("queue"===r||!f)&&W,ye=!n&&(xe||fe),we=me.current||ge.current;ye||(ge.current=!1,we=!1);var je=le===Ls.Reblogged,ke=le===Ls.Queued,Se=je?N().paletteGreen:N().palettePurple,Ie=je||q.includes(S)?N().paletteGreen:le===Ls.Queued?N().palettePurple:n?N().paletteGray40:xe?N().paletteBlue:fe?N().palettePink:s,Ne="reblog"===r?(0,A.jsx)(Ye.Z,{size:{width:21,height:21},colors:{primary:Ie}}):(0,A.jsx)(ls,{fill:Ie});if(!S||!I)return(0,A.jsxs)(A.Fragment,{children:[Ne,(0,A.jsx)(Es,{ref:ue,fill:Se})]});var Pe=(e,t)=>Ze(nt.hA.Published,e,t),Te=(e,t)=>Ze(nt.hA.Queue,e,t),Ze=(e,t,s)=>(te&&ee(),null==t||t.preventDefault(),he.current.postAPost({selectedBlogName:s,placementId:T,logEvent:x,isLongPost:null==F?void 0:F(),post:o()(o()({},D),{},{date:void 0,tags:void 0,content:[],layout:[],state:e,parentTumblelogUuid:D.blog.uuid,parentPostId:S,id:""}),reblogType:e===nt.hA.Published?Ps.k.Fast:void 0}).fetch((t=>{var s,n,o;if(null===(s=ue.current)||void 0===s||s.animate(),null!=t&&null!==(n=t.response)&&void 0!==n&&null!==(o=n.timeline)&&void 0!==o&&o.elements){var i,a,r=null==t||null===(i=t.response)||void 0===i||null===(a=i.timeline)||void 0===a?void 0:a.elements;Y(S,r)}return D&&ce(e===nt.hA.Published?Ls.Reblogged:Ls.Queued)}))),Ae=e=>{var t,s,n,o=e.isModalSuccess,i=e.response;if((null===(t=ve.current)||void 0===t||t.call(ve),(0,Ts.Ly)(),o)&&(Me&&x({eventName:y.J.ClientReblog,eventDetails:{placement_id:P,earned_id:Z,has_tip:!!R,tab:B}}),void 0===le&&ce(Ls.Reblogged),null==J||J(S),null!=i&&null!==(s=i.response)&&void 0!==s&&null!==(n=s.timeline)&&void 0!==n&&n.elements)){var a,r,l=null==i||null===(a=i.response)||void 0===a||null===(r=a.timeline)||void 0===r?void 0:r.elements;Y(S,l)}},Ee=(e,t,s)=>{ge.current=!1,me.current=!1,ie(!oe),G(t),(xe?Pe:Te)(e,t.name).then((()=>{x({eventDetails:o()(o()({},s),{},{tab:B}),eventName:xe?y.J.FastReblog:y.J.FastQueue}),U(xe?(0,A.jsx)(Ce.ZP,{params:{blogName:t.name},children:"Reblogged to [blogName]"}):(0,A.jsx)(Ce.ZP,{params:{blogName:t.name},children:"Queued to [blogName]"})),xe&&(null==J||J(S))})).catch((()=>{U(m("Oops! Something went wrong."),"error")}))},Me=(0,Zs.Z)({isMobile:V,features:b,editablePost:D,isReblog:!0}),Oe={onMouseEnter:()=>{me.current=!0,ye&&ie(!oe)},onMouseLeave:()=>me.current=!1},Re=m(xe?"Quick Reblog":fe?"Quick Queue":"reblog"===r?"Reblog":"Queue"),De={};if((0,Ns.uz)(D)&&!E){var Fe=D.advertiserId,Be=D.campaignId,_e=D.creativeId,Ue=D.adGroupId,ze=D.adId;De=o()(o()({},De),{},{[Ns.PC.AdvertiserId]:Fe,[Ns.PC.CampaignId]:Be,[Ns.PC.CreativeId]:_e,[Ns.PC.AdGroupId]:Ue,[Ns.PC.AdId]:ze})}return(0,A.jsxs)(A.Fragment,{children:[v&&ye&&we&&(0,A.jsx)(Ss,{onMouseEnter:()=>ge.current=!0,onClickSelectedBlog:Ee,onMouseLeave:e=>{var t;null!==(t=pe.current)&&void 0!==t&&t.contains(e.relatedTarget)||(me.current=!1,ge.current=!1,ie(!oe))},avatarTitle:e=>m(xe?"Reblog to %1$s":"Queue to %1$s",[e]),blogs:be}),mn((0,A.jsx)(Dt.Z,{isOpen:$(p)&&"reblog"===r,content:g("Text that is shown as a tooltip to nudge the user to reblog a post.","Tap for a little clue...  🔎"),popoverProps:{useFlex:!0,targetStyles:{height:"100%"}},onFirstShow:()=>{x({page:"TourGuideReblogTooltip",eventName:y.J.Shown})},onDismiss:()=>{x({page:"TourGuideReblogTooltip",eventName:y.J.Dismissed})},children:(0,A.jsx)(bs,o()(o()({mode:r,disabled:n,label:Re,reblogBlogName:O,reblogPostId:S,forwardedRef:pe,reblogKey:I,routeQueryProps:De,disableNavigation:ye,className:l()(i,{[Ms]:n}),onClick:e=>{ye?(e=>{Ee(e,be[0])})(e):(e=>{(0,Ts.r9)(S,T,null==F?void 0:F(),B),null!=e&&e.ctrlKey||null!=e&&e.metaKey||(ve.current=_(Ae),te&&ee())})(e),x({eventName:y.J.ReblogIconClick,eventDetails:{tooltipShown:!!te}})}},Oe),{},{children:Ne}))}),o()({position:Ve.I2.Top,content:m(je?"Reblogged":ke?"Queued":"reblog"===r?"Reblog":"Queue")},je&&{color:Is.v.GREEN})),(0,A.jsx)(Es,{ref:ue,fill:Se,children:"reblog"===r?(0,A.jsx)(Ye.Z,{size:{height:21,width:21}}):(0,A.jsx)(ls,{size:{height:21,width:21}})})]})};var Rs=s(17635);const Ds="tc6fQ";const Fs=function(e){var t=e.color,s=void 0===t?N().paletteGray65:t,n=e.onClick,o=e.disabled,i=(0,j.bp)()._t,a=o?N().paletteGray40:s;return(0,A.jsx)(D.Z,{label:i("Reply"),onClick:n,disabled:o,className:o&&Ds,children:(0,A.jsx)(Rs.Z,{size:{width:21,height:21},emptyIconColors:{primary:a}})})};var Bs=s(53379),_s=s(72835),Us=s(22591),Vs=s(55351),zs=s(68280),Hs=s(50899),Ws=s(68087),qs=s(399),Gs=s(24228),Xs=s(96467),Qs=s(5984),Js=s(39277),Ys=s(51535),Ks=s(20041),$s=s(95867);const en=e=>{var t=e.canDoThingsFast,s=(0,c.useState)(!1),n=de()(s,2),o=n[0],i=n[1],a=(0,c.useRef)(null),r=(0,c.useRef)(!1),l=(0,c.useRef)(!1),d=r.current||l.current;t||(l.current=!1,d=!1);return{showBubbles:d,onBubbleMouseEnter:()=>{l.current=!0},onBubbleMouseLeave:e=>{var t;null!==(t=a.current)&&void 0!==t&&t.contains(e.relatedTarget)||(r.current=!1,l.current=!1,i(!o))},onBubbleMouseClick:()=>{l.current=!1,r.current=!1,i(!o)},onAnchorMouseEnter:()=>{r.current=!0,t&&i(!o)},onAnchorMouseLeave:()=>{r.current=!1}}};var tn=s(5553),sn=s(22183);const nn={root:"v2JIl",menu:"EvymM",title:"qcYGf",option:"Gdn85",blogOption:"asnZc",blogOptionMeta:"yX3XS",blogOptionTitle:"pT6VO",titleAvatar:"nT5UJ",optionIcon:"cP0pN",titleLabel:"QgXdE",optionLabel:"kt8zB",blogOptionName:"iGLok",optionShortcut:"OPqLY",listItem:"M9Ov7",listItemInner:"crS1E",popoverWrapper:"bjnZi",chevron:"YqkCK",blogSelectorOpen:"n1exf",disabled:"CGCzZ"};const on=e=>{var t=e.disabled,s=void 0!==t&&t,n=e.iconColor,i=void 0===n?N().paletteGray65:n,a=e.onClick,r=e.postIndex,d=void 0===r?0:r,c=e.postState,p=e.onBubbleClick,u=(0,j.bp)(),h=u._c,m=u.logEvent,g=(0,(0,Vt.g)().shouldShowReblogTip)(d),v=(0,M.q5)(),b=v.canFastReblog,x=v.canFastQueue,f=v.canFastQuote,C=b?"reblog":x?"queue":f?"comment":void 0,w=(e=>{var t=e.activeHotkey,s=e.disabled,n=e.postState;if(t)switch(t){case"reblog":return"reblog-hotkey-active";case"queue":return"queue-hotkey-active";case"comment":return"comment-hotkey-active"}if(s)return"disabled";switch(n){case nt.hA.Published:return"published";case nt.hA.Queue:return"queued"}return"default"})({postState:c,activeHotkey:C,disabled:s}),k=(e=>{var t=e._c,s=e.buttonState,n=e.iconColor,o=t("Tooltip for the reblog button","Reblog"),i=n,a=(0,A.jsx)(Ye.Z,{size:{height:21,width:21},colors:{primary:i}});switch(s){case"published":o=t("Tooltip when the post has been reblogged","Reblogged"),i=N().paletteGreen;break;case"queued":o=t("Tooltip when the post has been queued","Queued"),i=N().palettePurple;break;case"disabled":i=N().paletteGray40;break;case"reblog-hotkey-active":i=N().paletteBlue;break;case"queue-hotkey-active":i=N().palettePink,a=(0,A.jsx)(ls,{size:{height:24,width:24},fill:i});break;case"comment-hotkey-active":i=N().paletteOrange,a=(0,A.jsx)(sn.Z,{size:{height:21,width:21},colors:{primary:i}})}return{label:o,color:i,icon:a}})({buttonState:w,iconColor:i,_c:h}),S=k.label,I=k.color,P=!s&&(b||x||f),T=(0,tn.Z)(),Z=en({canDoThingsFast:P}),E=Z.showBubbles,L=Z.onBubbleMouseEnter,O=Z.onBubbleMouseLeave,R=Z.onBubbleMouseClick,D=Z.onAnchorMouseEnter,F=Z.onAnchorMouseLeave;return(0,A.jsxs)(A.Fragment,{children:[P&&E&&(0,A.jsx)(Ss,{onMouseEnter:L,onMouseLeave:O,onClickSelectedBlog:(e,t)=>{R(),C&&p(t,C)},avatarTitle:e=>{var t="";switch(C){case"reblog":t=h("Tooltip for reblogging to a particular blog","Reblog to %1$s",[e]);break;case"comment":t=h("Tooltip for reblogging with a comment to a particular blog","Reblog with comment to %1$s",[e]);break;case"queue":t=h("Tooltip for queuing a reblog to a particular blog","Queue to %1$s",[e])}return t},blogs:T||[]}),mn((0,A.jsx)(Dt.Z,{isOpen:g,content:h("Text that is shown as a tooltip to nudge the user to reblog a post.","Tap for a little clue...  🔎"),popoverProps:{useFlex:!0,targetStyles:{height:"100%"}},onFirstShow:()=>{m({page:"TourGuideReblogTooltip",eventName:y.J.Shown})},onDismiss:()=>{m({page:"TourGuideReblogTooltip",eventName:y.J.Dismissed})},children:(0,A.jsx)("button",{"aria-label":S,onClick:()=>{a(),m({eventName:y.J.ReblogIconClick,eventDetails:{tooltipShown:!!g}})},disabled:s,className:l()({[nn.disabled]:s}),onMouseEnter:D,onMouseLeave:F,children:(0,A.jsx)(Ye.Z,{size:{height:21,width:21},colors:{primary:I}})})}),o()({position:Ve.I2.Top,content:S},c===nt.hA.Published&&{color:Is.v.GREEN}))]})};var an=s(68144),rn=s(11389);const ln=(e,t)=>e?e.map((e=>({value:e,label:e.name,title:e.title,selected:e.name===(null==t?void 0:t.name)}))):[];const dn=e=>[{value:"reblog",label:e("A menu option to immediately reblog this post, without opening the post editor","Reblog now"),icon:(0,A.jsx)(Ye.Z,{size:{height:21,width:21},colors:{primary:N().paletteGray65}}),shortcut:"E"},{value:"comment",label:e("A menu option to reblog this post by opening the post editor","Reblog"),icon:(0,A.jsx)(sn.Z,{size:{height:21,width:21},colors:{primary:N().paletteGray65}}),shortcut:"Q"},{value:"queue",label:e("A menu option to immediately add this post to your queue, without opening the post editor","Add to queue"),icon:(0,A.jsx)(ls,{size:{height:21,width:21},fill:N().paletteGray65}),shortcut:"W"}];const cn=e=>{var t,s=e.activeSelector,n=void 0===s?"reblog-selector":s,i=e.selectedBlog,a=e.onChangeActiveSelector,r=e.onChangeSelectedBlog,d=e.onClose,u=e.onSelectReblogAction,h=(0,j.bp)()._c,m=(0,tn.Z)(),g=ln(m,i),v=dn(h),b=(0,c.useRef)(),x=(0,c.useState)(0),f=de()(x,2),C=f[0],y=f[1];(0,c.useEffect)((()=>{var e,t=(null==b||null===(e=b.current)||void 0===e?void 0:e.scrollWidth)||0;t>C&&y(t)}),[n,C]);var w,k=g.map((e=>{var t,s=e.value,n=e.label,o=e.title;return{content:(0,A.jsxs)("div",{className:l()(nn.option,nn.blogOption),children:[(0,A.jsx)("div",{className:nn.iconOption,children:(0,A.jsx)(p.Z,{imageResponse:s.avatar,avatarShape:null===(t=s.theme)||void 0===t?void 0:t.avatarShape,name:s.name,url:s.url,dimension:Xs.postFooterReblogMenuOptionAvatarWidth,showBlogCard:!1})}),(0,A.jsxs)("div",{className:nn.blogOptionMeta,children:[(0,A.jsx)("div",{className:l()(nn.optionLabel,nn.blogOptionName),children:n}),o&&(0,A.jsx)("div",{className:nn.blogOptionTitle,children:o})]})]}),value:s,label:n}})),S=v.map((e=>{var t=e.value,s=e.label,n=e.icon,o=e.shortcut;return{content:(0,A.jsxs)("div",{className:nn.option,children:[(0,A.jsx)("div",{className:nn.optionIcon,children:n}),(0,A.jsx)("div",{className:nn.optionLabel,children:s}),(0,A.jsx)(Vs.Z,{children:(0,A.jsx)("div",{className:nn.optionShortcut,children:(0,A.jsx)(Ce.ZP,{comment:"Help text for keyboard shortcuts which involve pressing a key (Q, W, or E) and hovering with the mouse eg. Q + Hover, W + Hover, E + Hover",params:{shortcut:o},components:{span:(0,A.jsx)("span",{})},children:"[span][shortcut][/span] + [span]Hover[/span]"})})})]}),value:t,label:s}}));switch(n){case"blog-selector":w={options:k,onChange:(e,t)=>{null==t||t.nativeEvent.stopImmediatePropagation(),r(e),a("reblog-selector")}};break;case"reblog-selector":w={options:S,onChange:u}}var I=(0,A.jsxs)("div",{onClick:()=>{a("reblog-selector"===n?"blog-selector":"reblog-selector")},className:nn.title,style:{width:C-Xs.postFooterReblogMenuTitleAvatarWidth-Xs.postFooterReblogMenuTitlePadding-Xs.postFooterReblogMenuItemMargin},role:"presentation",children:[(0,A.jsx)("div",{className:nn.titleAvatar,children:(0,A.jsx)(p.Z,{imageResponse:null==i?void 0:i.avatar,avatarShape:null==i||null===(t=i.theme)||void 0===t?void 0:t.avatarShape,name:null==i?void 0:i.name,url:null==i?void 0:i.url,dimension:Xs.postFooterReblogMenuTitleAvatarWidth,showBlogCard:!1})}),(0,A.jsx)("div",{className:nn.titleLabel,children:null==i?void 0:i.name}),(0,A.jsx)(an.sn,{size:{width:14,height:14},colors:{primary:N().paletteGray65},className:nn.chevron})]});return(0,A.jsx)("div",{className:nn.menu,style:{width:C},children:(0,A.jsx)(rn.Z,o()(o()({},w),{},{titleEl:I,isOpen:!0,popoverWrapperClassName:nn.popoverWrapper,chromelessPopover:!0,onClickGlass:d,listItemClassName:nn.listItem,listItemInnerClassName:nn.listItemInner,popoverRef:b}))})};const pn=()=>{var e=(0,j.bp)(),t=e.apiFetch,s=e.logEvent,n=e._c,i=(0,Ut.V)().toggleToast;return function(){var e=K()(J()().mark((function e(a,r,l){return J()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Le.ZP)(t).postAPost({selectedBlogName:r.name,placementId:a.placementId,logEvent:s,post:o()(o()({},a),{},{id:"",date:void 0,tags:void 0,content:[],layout:[],state:l,parentTumblelogUuid:a.blog.uuid,parentPostId:a.id}),reblogType:l===nt.hA.Published?Ps.k.Fast:void 0}).fetch();case 3:return i(l===nt.hA.Published?(0,A.jsx)(Ce.ZP,{comment:"Message displayed after a post is successfully reblogged",params:{blogName:r.name},children:"Reblogged to [blogName]"}):(0,A.jsx)(Ce.ZP,{comment:"Message displayed after a post is successfully queued",params:{blogName:r.name},children:"Queued to [blogName]"})),e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),i(n("Error message displayed when a post cannot be reblogged","Oops! Something went wrong."),"error"),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s,n){return e.apply(this,arguments)}}()};const un=e=>{var t=e.color,s=e.disabled,n=e.postIndex,o=e.selector,i=void 0===o?"reblog-selector":o,a=(0,j.bp)().logEvent,r=(0,c.useState)(!1),d=de()(r,2),p=d[0],u=d[1],h=(0,c.useState)(i),m=de()(h,2),g=m[0],v=m[1],b=(0,c.useState)(),x=de()(b,2),f=x[0],C=x[1],w=(0,k.b8)().post,S=(0,$s.ZP)(),I=S.selectedBlog,N=S.onChangeSelectedBlog,P=pn(),T=(0,Ys.Z)(w.id,w.blogName,"completeOnUnmount"),Z=()=>{p||(u(!0),a({eventName:y.J.ReblogPopoverOpen}))},E=()=>{p&&(u(!1),v("reblog-selector"),a({eventName:y.J.ReblogPopoverClose}))},M=function(){var e=K()(J()().mark((function e(t,s,n){return J()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(),e.t0=n,e.next="reblog"===e.t0?4:"queue"===e.t0?9:"comment"===e.t0?14:17;break;case 4:return e.next=6,P(t,s,nt.hA.Published);case 6:return e.sent&&(C(nt.hA.Published),a({eventName:y.J.ReblogPopoverReblogClick})),e.abrupt("break",17);case 9:return e.next=11,P(t,s,nt.hA.Queue);case 11:return e.sent&&(C(nt.hA.Queue),a({eventName:y.J.ReblogPopoverQueueClick})),e.abrupt("break",17);case 14:return T(),a({eventName:y.J.ReblogPopoverReblogWithCommentClick}),e.abrupt("break",17);case 17:case"end":return e.stop()}}),e)})));return function(t,s,n){return e.apply(this,arguments)}}(),L=(0,Ks.Z)({outsideEvents:["click","scroll"],onOutsideEvent:E});return(0,A.jsxs)("div",{ref:L,className:l()(nn.root,{[nn.blogSelectorOpen]:"blog-selector"===g}),children:[(0,A.jsx)(on,{disabled:s,iconColor:t,onClick:()=>{p?E():Z()},postIndex:n,postState:f,onBubbleClick:(e,t)=>{N(e),M(w,e,t)}}),p&&(0,A.jsx)(cn,{selectedBlog:I,onChangeSelectedBlog:N,activeSelector:g,onChangeActiveSelector:v,onSelectReblogAction:e=>{I&&M(w,I,e)},onClose:E})]})},hn={footer:"tOKgq",isPaywallShown:"Q5Knh",noteCount:"gstmW",igniteSuccessButton:"XvNsi",noteCountButton:"rlv6m",hide:"YICWt",noteCountButtonInner:"RHkx9",noteCountContainer:"zrO3e",noteCountTypes:"WNEhC",noteCountReply:"Pbawl",noteCountReblog:"C9fUY",noteCountLike:"Cq903",notesCloseButton:"ePsyd",controls:"MCavR",controlIcon:"sfGru",controlsWithDivider:"r3vIz",postActivityWrapper:"yTb5J",postActivityWrapperOpen:"DUvqr",tippingWrapper:"YfPOA",igniteTooltip:"x23xO",postFooterSecondRedesign:"eIaSl",footerRow:"m5KTc",zeroNotes:"VNASy",controlAutoWidth:"Ed7CO",postControl:"t21M4",previewNote:"eBUmE"};var mn=(e,t)=>(0,A.jsx)(Is.Z,o()(o()({},t),{},{children:e}));class gn extends c.Component{constructor(e){var t;super(e),t=this,a()(this,"setNoteCountRef",(e=>this.noteCountEl=e)),a()(this,"noteCountRef",(0,c.createRef)()),a()(this,"noteCountEllipsisCache",new Map),a()(this,"getTopRow",(()=>{var e=this.props,t=e.appContext.features,s=t.commentingUxRedesign,n=t.postFooterSecondRedesign,o=e.postContext.post.shouldShowTip&&s?this.tippingContent():void 0,i=this.getIgniteButton(),a=this.getUserControlButtons(),r=this.getActionsAllowStatus(),d=r.isQueue,c=r.isDraft;return n&&!c&&!d&&(o||i||a)?(0,A.jsxs)("div",{className:hn.footerRow,children:[(0,A.jsxs)("div",{className:l()(hn.controls,hn.controlsWithDivider),children:[o,i]}),(0,A.jsx)("div",{className:hn.controls,children:a})]}):void 0})),a()(this,"getBottomRow",(()=>{var e=this.props,t=e.appContext,s=t.isLoggedIn,n=t.features,o=n.commentingUxRedesign,i=n.postFooterSecondRedesign,a=e.postContext.post.shouldShowTip,r=this.state.showDeleteDialog,d=this.noteContent(),c=!i&&a&&o&&this.tippingContent(),p=!!d||!!c;return(0,A.jsxs)("div",{className:l()(hn.footerRow,{[hn.zeroNotes]:null===d}),children:[p&&(0,A.jsxs)("div",{ref:this.noteCountRef,className:hn.noteCount,children:[d,c]}),s?this.renderControls():this.renderLoggedOutControls(),r&&this.renderDeleteDialog()]})})),a()(this,"postActivityContent",(()=>{var e=this.props,t=e.timelineContext.onReplyAdded,s=e.postContext,n=s.post,o=n.id,i=n.blog,a=n.reblogKey,r=n.replyCount,l=n.reblogCount,d=n.likeCount,c=n.liked,p=n.shouldShowTip,u=s.presentationStyle.expandNotesOnMount,h=this.state,m=h.postActivityTypeToOpen,g=h.focusReplyOnMount,v=h.replyText,b=this.getActionsAllowStatus(),x=b.canDoReply,f=b.canDoReblog;return"tipping"===m?(0,A.jsx)(Us.Z,{onClose:this.onTipButtonClick,blogname:i.name,postId:o,canDoReply:!!x,replyText:v}):(0,A.jsx)(Qe,{id:o,blog:i,reblogKey:a,canReply:x,canReblog:f,replyCount:r,reblogCount:l,likeCount:d,onReplyAdded:t,shouldUpdateLikeNotes:this.shouldUpdateLikeNotes(c),focusReplyOnMount:g,onTipButtonClick:p?this.onTipButtonClick:void 0,expandNotesOnMount:u})})),a()(this,"shouldUpdateLikeNotes",(e=>{var t=e!==this.state.likeChanged;return t&&this.setState({likeChanged:e}),t})),a()(this,"renderLoggedOutControls",(()=>{var e=this.props,t=e.postContext,s=t.presentationStyle,n=s.showsReblogButton,o=s.showsLikeButton,i=t.post.state,a=e.postChromeStyles,r=[],l=this.getAdjustedForegroundColor();return r.push((0,A.jsx)("div",{className:hn.controlIcon,children:this.sendAPostContent()},"send a post")),n&&i!==nt.hA.Private&&r.push((0,A.jsx)("div",{className:hn.controlIcon,children:(0,A.jsx)(Os,{color:l})},"reblog")),o&&r.push((0,A.jsx)("div",{className:hn.controlIcon,children:(0,A.jsx)(ns,{color:l})},"like")),(0,A.jsx)("div",{className:hn.controls,style:a,children:r})})),a()(this,"getActionsAllowStatus",(()=>{var e=this.props.postContext,t=e.presentationStyle,s=t.showsEditButton,n=t.showsReplyButton,o=t.showsShareButton,i=t.showsReblogButton,a=t.showsLikeButton,r=t.showsDeleteButton,l=t.showsQueueButton,d=t.showsPublishButton,c=e.post,p=c.canSendInMessage,u=c.canReply,h=c.canReblog,m=c.canLike,g=c.canDelete,v=c.canEdit,b=c.queuedState,x=c.shouldShowTip,f=c.state,C=c.blog,y=f===nt.hA.Queued&&b===nt.SH.Queued&&C,w=f===nt.hA.Draft,j=f===nt.hA.Private;return{isQueue:y,isDraft:w,isPrivate:j,canDoReply:u&&n,canDoShare:p&&o,canDoReblog:h&&!C.isPasswordProtected&&!j&&i,canDoLike:m&&a,canDoEdit:v&&s,canDoQueue:h&&!C.isPasswordProtected&&!j&&l,canDoDelete:g&&r,canDoPublish:v&&d,shouldShowTip:x}})),a()(this,"getUserControlButtons",(()=>{var e=this.props,t=e.appContext.features.tumblrIgnite,s=e.postContext.post,n=s.id,o=s.trail,i=s.shouldOpenInLegacy,a=s.igniteStatus,r=s.rebloggedFromId,l=s.canIgnite,d=e.canAnswer,c=e.isInboxAsk,p=e.editablePost,u=this.getActionsAllowStatus(),h=u.canDoEdit,m=u.canDoDelete,g=[];return(t&&l&&void 0===r||m)&&g.push((0,A.jsx)("div",{className:hn.controlIcon,children:mn((0,A.jsx)(Tt,{id:n,disabled:a===Me.g.approved||a===Me.g.pending,onClick:this.toggleShowDeleteDialog}),{position:Ve.I2.Top,content:this.deleteTooltipMessage(),className:a?hn.igniteTooltip:void 0})},"delete")),(t&&l&&void 0===r||h&&p&&!c&&!d)&&g.push((0,A.jsx)("div",{className:hn.controlIcon,children:mn((0,A.jsx)(Zt.Z,{editablePost:null!=p?p:this.props.postContext.post,trail:o,shouldAlwaysOpenInLegacy:i,disabled:!p||a===Me.g.pending||a===Me.g.approved}),{position:Ve.I2.Top,content:this.editTooltipMessage(),className:a?hn.igniteTooltip:void 0})},"edit")),g.length>0?g:void 0})),a()(this,"getIgniteButton",(function(){var e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withLabel:!0},n=s.withLabel,o=t.props,i=o.appContext.features.tumblrIgnite,a=o.postContext.post,r=a.igniteStatus,d=a.rebloggedFromId,c=a.canIgnite;return i&&c&&void 0===d&&(e=(0,A.jsx)("div",{className:l()(hn.controlIcon,hn.controlAutoWidth),children:mn((0,A.jsx)(Lt,{color:r?N().betamaxOrange:N().paletteGray65,label:t.popoverMessage(),onClick:t.toggleIgniteProductPopover,filled:r===Me.g.approved,withLabel:n}),{position:Ve.I2.Top,content:t.popoverMessage(),className:r?hn.igniteTooltip:void 0})},"ignite")),e})),a()(this,"renderControls",(()=>{var e=this.props,t=e.appContext,s=t._t,n=t._c,i=t.features,a=i.postFooterSecondRedesign,r=i.postFooterThirdRedesign,d=t.labsSettings.fastQueue,c=e.postContext,p=c.presentationStyle,u=p.showsReplyButton,h=p.showsShareButton,m=p.showsReblogButton,g=p.showsQueueButton,v=p.showsLikeButton,b=c.post,x=b.id,f=b.liked,C=b.state,y=b.blog,w=e.isInInboxTimeline,j=e.isNarrow,k=e.isSubmissionDraft,S=e.isInboxAsk,I=e.canAnswer,N=e.postChromeStyles,P=e.editablePost,T=e.postIndex,Z=this.getActionsAllowStatus(),E=Z.isQueue,M=Z.isDraft,L=Z.canDoReply,O=Z.canDoShare,R=Z.canDoReblog,D=Z.canDoLike,F=Z.canDoEdit,B=Z.canDoQueue,_=Z.canDoPublish,U=this.getAdjustedForegroundColor(),V=[];if((O||h)&&V.push((0,A.jsx)("div",{className:hn.controlIcon,children:this.sendAPostContent()},"send a post")),!a){var z=this.getIgniteButton({withLabel:!1});z&&V.push(z)}if((L||u)&&V.push((0,A.jsx)("div",{className:hn.controlIcon,children:mn((0,A.jsx)(Fs,{onClick:this.onReplyIconClick,disabled:!L,color:U}),{position:Ve.I2.Top,content:s("Reply")})},"reply")),!g||!d||M||k||S||j&&a||V.push((0,A.jsx)("div",{className:hn.controlIcon,children:(0,A.jsx)(Os,{mode:"queue",disabled:!B,color:U,postIndex:T})},"queue-post")),!R&&!m||w||(r?V.push((0,A.jsx)("div",{className:hn.controlIcon,children:(0,A.jsx)(un,{disabled:!R,color:U,postIndex:T})},"reblog")):V.push((0,A.jsx)("div",{className:hn.controlIcon,children:(0,A.jsx)(Os,{disabled:!R,color:U,postIndex:T})},"reblog"))),(D||v)&&V.push((0,A.jsx)("div",{className:hn.controlIcon,children:mn((0,A.jsx)(ns,{color:U,postIndex:T}),o()({position:Ve.I2.Top,content:s(f?"Liked":"Like")},f&&{color:Is.v.RED}))},"like")),a&&F&&E&&V.push((0,A.jsx)(Vs.Z,{children:(0,A.jsx)("div",{className:hn.controlIcon,children:(0,A.jsx)(Ct.Z,{})})},"reorder")),a&&F&&E&&V.push((0,A.jsx)(Vs.Z,{children:(0,A.jsx)(X,{blogName:y.name,id:x.toString()})},"queueControls")),!a||a&&(M||E)){var H=this.getUserControlButtons();H&&V.push(...H)}return P&&I&&V.push((0,A.jsx)("div",{className:l()(hn.controlIcon,hn.controlAutoWidth),children:(0,A.jsx)(It,{editablePost:P})},"answer")),B&&(M||k)&&V.push((0,A.jsx)("div",{className:hn.controlIcon,children:mn((0,A.jsx)(cs,{}),{position:Ve.I2.Top,content:n("Tooltip for button to queue a post, should be verb here","Queue")})},"queue")),!a&&F&&E&&V.push((0,A.jsx)(Vs.Z,{children:(0,A.jsx)(X,{blogName:y.name,id:x.toString()})},"queueControls")),_&&(M||C===nt.hA.Queued||k)&&V.push((0,A.jsx)("div",{className:l()(hn.postControl,hn.controlIcon,hn.controlAutoWidth),children:(0,A.jsx)(as,{})},"post")),!a&&F&&E&&V.push((0,A.jsx)(Vs.Z,{children:(0,A.jsx)("div",{className:hn.controlIcon,children:(0,A.jsx)(Ct.Z,{})})},"reorder")),(0,A.jsx)("div",{className:hn.controls,style:N,children:V})})),a()(this,"editTooltipMessage",(()=>{var e=this.props.postContext.post.igniteStatus,t=this.props.appContext._t;switch(e){case Me.g.approved:case Me.g.pending:return t("A post in a Blaze campaign cannot be edited");default:return t("Edit")}})),a()(this,"deleteTooltipMessage",(()=>{var e=this.props.postContext.post.igniteStatus,t=this.props.appContext._t;switch(e){case Me.g.approved:case Me.g.pending:return t("A post in a Blaze campaign cannot be deleted");default:return t("Delete")}})),a()(this,"popoverMessage",(()=>{var e=this.props.postContext.post.igniteStatus,t=this.props.appContext._t;switch(e){case Me.g.pending:return t("Blaze campaign pending! We’ll email you when it’s approved.");case Me.g.approved:return t("This post is on fire – in a good way! We’ll send you a wrap-up when it’s done.");default:return t("Blaze")}})),a()(this,"toggleShowDeleteDialog",(()=>this.setState((e=>({showDeleteDialog:!e.showDeleteDialog}))))),a()(this,"renderDeleteDialog",(()=>{var e=this.props.appContext._t;return(0,A.jsx)($.Z,{onGlassClick:this.toggleShowDeleteDialog,glassIsClickable:!1,children:(0,A.jsx)(De.Z,{title:e("Are you sure you want to delete this post?"),buttons:[{text:e("Cancel"),onClick:this.toggleShowDeleteDialog,buttonStyle:De.X.Neutral},{text:e("OK"),onClick:this.deletePost,buttonStyle:De.X.Confirm}]})})})),a()(this,"deletePost",K()(J()().mark((function e(){var s,n,o,i,a,r,l;return J()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.props,n=s.appContext.apiFetch,o=s.timelineContext.onRemoveTimelineObject,i=s.postContext.post,a=i.id,r=i.blog.uuid,l=null==o?void 0:o({id:a}),t.toggleShowDeleteDialog(),e.abrupt("return",n("/v2/blog/".concat(r,"/post/delete"),{method:"POST",body:{id:a}}).catch((()=>null==l?void 0:l())));case 4:case"end":return e.stop()}}),e)})))),a()(this,"toggleNotesPanel",(()=>{this.setState((e=>("notes"===e.postActivityTypeToOpen||e.notesOpenedFromReply||this.logOpenNotesAnalyticsEvents(),{notesOpenedFromReply:!1})),(()=>{this.togglePostActivity("notes")}))})),a()(this,"toggleNotesPopover",(()=>{this.setState((e=>(e.notesPopoverIsOpen||e.notesOpenedFromReply||this.logOpenNotesAnalyticsEvents(),{focusNotePopoverTextareaOnMount:!1,notesPopoverIsOpen:!e.notesPopoverIsOpen,notesOpenedFromReply:!1})))})),a()(this,"toggleSendAPostPopover",(()=>{var e=this.props.dashboardContext.tabId;this.setState((e=>({sendAPostPopoverIsOpen:!e.sendAPostPopoverIsOpen}))),this.props.adContext.sendClickADMBeacon(this.props.postContext.post.adm),this.props.appContext.logEvent({eventName:y.J.SendAPostClick,eventDetails:o()({placement_id:this.props.postContext.post.placementId,tab:e},(0,S.U)({timelineObject:this.props.postContext.post,adPlacementConfiguration:this.props.adContext.adPlacementConfiguration,hydraConfigInstanceId:this.props.adContext.hydraConfigInstanceId}))})})),a()(this,"logOpenNotesAnalyticsEvents",(()=>{var e=this.props,t=e.adContext,s=t.adPlacementConfiguration,n=t.hydraConfigInstanceId,i=t.sendClickADMBeacon,a=e.appContext.logEvent,r=e.postContext.post,l=e.dashboardContext.tabId,d=r.adm,c=r.earnedId,p=r.placementId;i(d),a({eventName:y.J.Notes,eventDetails:o()({placement_id:p,earned_id:c,tab:l},(0,S.U)({timelineObject:r,adPlacementConfiguration:s,hydraConfigInstanceId:n}))})})),a()(this,"onPostActivityTransitionEnd",(()=>{var e=this.state,t=e.focusReplyOnMount;e.postActivityIsOpen||(this.setState({postActivityTypeToOpen:null}),t&&this.setState({focusReplyOnMount:!1}))})),a()(this,"onReplyIconClick",(e=>{e.stopPropagation();var t=this.props,s=t.adContext,n=s.adPlacementConfiguration,i=s.hydraConfigInstanceId,a=t.appContext,r=a.features.commentingUxRedesign,l=a.logEvent,d=t.isNarrow,c=t.postContext.post,p=t.dashboardContext.tabId,u=c.placementId;this.state.notesPopoverIsOpen||"notes"===this.state.postActivityTypeToOpen||l({eventName:y.J.ReplyIconClick,eventDetails:o()({placement_id:u,tab:p},(0,S.U)({timelineObject:c,adPlacementConfiguration:n,hydraConfigInstanceId:i}))}),this.setState({notesOpenedFromReply:!0}),d||!r?this.toggleNotesPopover():(this.setState({focusReplyOnMount:!0}),this.toggleNotesPanel())})),a()(this,"toggleNotes",(()=>{var e=this.props,t=e.appContext.features.commentingUxRedesign;e.isNarrow||!t?this.toggleNotesPopover():(this.setState({focusReplyOnMount:!1}),this.toggleNotesPanel())})),a()(this,"toggleIgniteProductPopover",(()=>{this.setState((e=>({ignitePopoverIsOpen:!e.ignitePopoverIsOpen})))})),a()(this,"formatNoteCount",((e,t)=>{var s,n,o=this.props.appContext,i=o._n,a=o._getLocaleNumberString,r=o.features,l=r.postFooterSecondRedesign;return r.postFooterAdaptiveNoteCount?this.noteCountRef.current&&(null===(s=this.noteCountRef.current)||void 0===s?void 0:s.scrollHeight)>(null===(n=this.noteCountRef.current)||void 0===n?void 0:n.clientHeight)||this.noteCountEllipsisCache.get(t)&&e>=this.noteCountEllipsisCache.get(t)?(this.noteCountEllipsisCache.set(t,e),i("%2$s note","%2$s notes",e,[a(e,ye.gO.Short).toLowerCase()])):i("%2$s note","%2$s notes",e,[a(e)]):i("%2$s note","%2$s notes",e,l?[a(e,ye.gO.Short).toLowerCase()]:[a(e)])})),a()(this,"noteContent",(()=>{var e=this.state,t=e.notesPopoverIsOpen,s=e.postActivityIsOpen,n=e.postActivityTypeToOpen,i=e.focusNotePopoverTextareaOnMount,a=this.props,r=a.appContext,d=r._c,c=r._t,p=r._n,u=r.features,h=r.isLoggedIn,m=a.timelineContext.onReplyAdded,g=a.postContext,v=g.post,b=v.id,x=v.blog,f=v.reblogKey,C=v.noteCount,y=v.replyCount,w=v.reblogCount,j=v.likeCount,k=v.liked,S=g.presentationStyle.expandNotesOnMount,I=a.location;if(!t&&!s&&(C<=0||!x.uuid))return null;var P=!u.postFooterSecondRedesign&&u.commentingUxRedesign&&y+w+j!==0,T=(0,A.jsx)(D.Z,o()(o()({onClick:this.toggleNotes,wrapperClassName:l()(hn.noteCountButton,{[hn.hide]:C<=0&&t}),className:hn.noteCountButtonInner,label:c("Notes")},!h&&!S&&{"data-login-wall-type":"notes","data-login-wall-tag-blog-name":x.name,"data-login-wall-post-id":b}),{},{children:s&&"notes"==n?(0,A.jsxs)("div",{className:hn.notesCloseButton,children:[(0,A.jsx)(ee.Z,{colors:{primary:N().paletteGray65}}),(0,A.jsx)("span",{children:d("Close the panel showing the notes for a post","Close notes")})]}):(0,A.jsxs)("span",{className:hn.noteCountContainer,ref:this.setNoteCountRef,children:[P&&(0,A.jsxs)("div",{className:hn.noteCountTypes,children:[j>0&&(0,A.jsx)("div",{title:p("%1$s like","%1$s likes",j),className:hn.noteCountLike,children:(0,A.jsx)(se,{})}),w>0&&(0,A.jsx)("div",{title:p("%1$s reblog","%1$s reblogs",w),className:hn.noteCountReblog,children:(0,A.jsx)(oe,{})}),y>0&&(0,A.jsx)("div",{title:p("%1$s reply","%1$s replies",y),className:hn.noteCountReply,children:(0,A.jsx)(ae,{})})]}),(0,A.jsx)("span",{"data-testid":"noteCountTotal",className:hn.noteCountTotal,children:this.formatNoteCount(C,b)})]})})),Z=this.getActionsAllowStatus(),E=Z.canDoReply,M=Z.canDoReblog,O=Z.shouldShowTip,R={focusNotePopoverTextareaOnMount:i,id:b,blog:x,reblogKey:f,canReply:E,canReblog:M,close:this.toggleNotesPopover,replyCount:y,reblogCount:w,likeCount:j,onReplyAdded:m},F=(0,A.jsx)(Qe,o()(o()({},R),{},{popoverLayout:!0,shouldUpdateLikeNotes:this.shouldUpdateLikeNotes(k),totalNoteCount:C,onClose:this.toggleNotesPopover,onTipButtonClick:O?this.onTipButtonClick:void 0}));return(0,A.jsx)(L.ZP,{children:e=>e.isMobile?(0,A.jsxs)("div",{children:[T,t&&(0,A.jsx)($.Z,{onGlassClick:this.toggleNotesPopover,topOffset:Xs.mobileHeaderHeight,children:F})]}):(0,A.jsx)(Ue.ZP,{closeForAllExternalClicks:!0,isOpen:t,toggle:this.toggleNotes,position:(0,jt.lc)(I.pathname)?Ve.I2.Right:Ve.I2.Auto,width:320,height:510,component:F,showOverflowY:!0,usePortals:!0,children:T})})})),a()(this,"sendAPostContent",(()=>{var e=this.state.sendAPostPopoverIsOpen,t=this.props,s=t.appContext,n=s._t,o=s.features.shareButtonSwap,i=t.postContext,a=i.post,r=a.blog,l=a.id,d=a.slug,c=a.shortUrl,p=a.embedUrl,u=a.placementId,h=a.earnedId,m=a.canSendInMessage,g=i.presentationStyle.hasCustomPostLink,v=t.location.pathname,b=o?{verticalAlign:"middle"}:{},x=this.getAdjustedForegroundColor(),f=(0,Gs.b)(r,l,d),C=g?"".concat(Hs.Cw).concat(v):f,y=g?"".concat(Hs.Cw).concat(v):c;return(0,A.jsx)(L.ZP,{children:t=>t.isMobile?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Bs.Z,{disabled:!m,onClick:this.toggleSendAPostPopover,color:x}),e&&(0,A.jsx)($.Z,{onGlassClick:this.toggleSendAPostPopover,topOffset:Xs.mobileHeaderHeight,children:(0,A.jsx)(yt,{blog:r,id:l,shortUrl:y,postUrl:C,slug:d,embedUrl:p,isMobile:!0,close:this.toggleSendAPostPopover,placementId:u,earnedId:h,asText:g})})]}):(0,A.jsx)(Ue.ZP,{width:340,height:"auto",isOpen:e,toggle:this.toggleSendAPostPopover,showOverflowY:!0,usePortals:!0,targetStyles:b,position:Ve.I2.AutoStart,component:(0,A.jsx)(yt,{blog:r,id:l,shortUrl:y,postUrl:C,slug:d,embedUrl:p,placementId:u,earnedId:h,asText:g}),children:mn((0,A.jsx)(Bs.Z,{disabled:!m,onClick:this.toggleSendAPostPopover,color:x}),{content:n("Share"),position:Ve.I2.Top})})})})),a()(this,"getAdjustedForegroundColor",(()=>{var e=this.props,t=e.isPaywallShown,s=e.postContext.post.blog,n=((null==s?void 0:s.theme)||{}).backgroundColor;return t?(0,Qs.YK)(n||N().blogBackgroundColor):void 0})),a()(this,"togglePostActivity",(e=>{var t=window.scrollY;this.setState((t=>({postActivityIsOpen:t.postActivityTypeToOpen!==e||!t.postActivityIsOpen,postActivityTypeToOpen:e})),(()=>{window.scrollTo({top:t})}))})),a()(this,"toggleTipping",(()=>{this.togglePostActivity("tipping")})),a()(this,"toggleTippingPopover",(()=>{this.setState((e=>({tippingPopoverIsOpen:!e.tippingPopoverIsOpen})))})),a()(this,"onTipButtonClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=t.props,n=s.isNarrow,o=s.appContext,i=o._c,a=o.logEvent,r=s.postContext.post,l=r.id,d=r.blog.isMember,c=s.toastContext.toggleToast;if(d){var p=(0,qs.iI)(i);c(p,"tumblrbot","post-".concat(l))}else t.setState({replyText:e,notesPopoverIsOpen:!1}),n?t.toggleTippingPopover():t.toggleTipping(),a({eventName:y.J.TipPostTap})})),a()(this,"tippingContent",(()=>{var e=this.props,t=e.appContext.features.postFooterSecondRedesign,s=e.postContext.post,n=s.id,o=s.blog,i=this.state,a=i.tippingPopoverIsOpen,r=i.replyText,l=this.getActionsAllowStatus().canDoReply;return(0,A.jsx)(Ue.ZP,{width:Ws.OH,height:Ws.u5,closeForAllExternalClicks:!0,position:Ve.I2.AutoStart,isOpen:a,toggle:this.onTipButtonClick,showOverflowY:!0,useFlex:t,usePortals:!0,component:(0,A.jsx)(Us.Z,{onClose:this.onTipButtonClick,blogname:o.name,postId:n,canDoReply:!!l,replyText:r}),children:(0,A.jsx)(_s.Z,{onClick:this.onTipButtonClick})})}));var s=this.props.postContext,n=s.post.noteCount,i=s.presentationStyle.expandNotesOnMount,r=!(!n||!i),d=r?"notes":null;this.state={ignitePopoverIsOpen:!1,notesPopoverIsOpen:!1,sendAPostPopoverIsOpen:!1,focusNotePopoverTextareaOnMount:!1,showDeleteDialog:!1,likeChanged:!1,focusReplyOnMount:!1,notesOpenedFromReply:!1,tippingPopoverIsOpen:!1,postActivityIsOpen:r,postActivityTypeToOpen:d,replyText:""},r&&this.logOpenNotesAnalyticsEvents()}render(){var e=this.props,t=e.appContext,s=t._t,n=t.features,i=n.commentingUxRedesign,a=n.tumblrIgnite,r=n.postFooterSecondRedesign,d=e.timelineContext.onRemoveTimelineObject,c=e.postContext,p=c.presentationStyle.showsDeleteButton,u=c.post,h=u.id,m=u.canDelete,g=u.previewNote,v=c.isNarrow,b=this.state,x=b.postActivityIsOpen,f=b.ignitePopoverIsOpen;"production"===zs.Z.Development&&m&&p&&!d&&console.warn("The post ".concat(h," can be deleted but has no onRemoveTimelineObject handler. This can cause the UI to get out of date with the delete state of the post."));var C=this.getAdjustedForegroundColor(),y=C?{color:C}:null;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("footer",o()(o()({role:"contentinfo","aria-label":s("Post Footer"),className:l()(hn.footer,{[hn.postFooterSecondRedesign]:r})},y&&{style:y}),{},{children:[this.getTopRow(),this.getBottomRow(),g&&!x&&(0,A.jsx)(ft,{className:hn.previewNote,note:g,onClickViewAll:this.toggleNotes}),!v&&i&&(0,A.jsx)("div",{className:l()(hn.postActivityWrapper,{[hn.postActivityWrapperOpen]:x}),onTransitionEnd:this.onPostActivityTransitionEnd,children:x&&this.postActivityContent()})]})),a&&(0,A.jsx)(Ge,{productPopoverIsOpen:f,toggleProductPopover:this.toggleIgniteProductPopover})]})}}a()(gn,"defaultProps",{trailElementForSelf:void 0,isNarrow:!1});var vn=(0,R.X9)(gn,{appContext:!0,adContext:!0,timelineContext:!0,loginContext:!0,postContext:!0,paletteContext:!0,toastContext:!0,dashboardContext:!0});const bn=(0,Js.Z)(vn);var xn=s(98478),fn=s(902),Cn=s(51416);const yn={flagged:"kZfp1",communityLabelFlag:"H2hul",available:"gPEd0",inReview:"zwjUv",hasError:"WfICw",appealButton:"zQ8dN",bannerPillButton:"TBfTV",pill:"EkBU0",bannerActions:"dJtjN",dismissBannerButton:"ACc3i",dismiss:"Nvxc5",modalBody:"Z8aXP",communityLabelModalContent:"BF3AU",appealComment:"U9tmV",communityLabelModalActions:"X5e5s",primary:"F7dEp",outline:"UHvHp",appealButtons:"YYlrz",modal:"lQ0w7",bannerText:"MQO0V"};class wn extends c.Component{constructor(){var e,t;super(...arguments),t=this,a()(this,"state",{appealState:null!==(e=this.props.initialAppealState)&&void 0!==e?e:"unavailable",openGlass:!1,hasError:!1,needsAppealComment:!1,appealComment:"",bannerDismissed:!1}),a()(this,"logEvent",(e=>{var t=this.props.appContext.logEvent,s=this.props;t({eventName:e,eventDetails:{blog_name:s.blogName,post_id:s.postId}})})),a()(this,"toggleGlass",(()=>{this.setState((e=>({openGlass:!e.openGlass})))})),a()(this,"onClickDismissGlass",(()=>{this.toggleGlass(),this.setState({hasError:!1,needsAppealComment:!1,appealComment:""}),this.logEvent(y.J.AdultContentAppealCancel)})),a()(this,"onClickSubmitAppeal",(()=>{this.submitAppeal("request_review")})),a()(this,"onClickDismissBanner",(()=>{this.setState({bannerDismissed:!0})})),a()(this,"onChangeAppealComment",(e=>{this.setState({appealComment:e.target.value})})),a()(this,"onClickOpenAppealModal",(()=>{this.toggleGlass()})),a()(this,"submitAppeal",function(){var e=K()(J()().mark((function e(s){var n,i,a,r,l,d,c;return J()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,i=n.blogName,a=n.postId,r=n.appContext,l=r.features.adultContentAppealTextbox,d=r.apiFetch,c=t.state.appealComment,e.prev=2,e.next=5,d("/v2/blog/".concat(i,"/posts/").concat(a,"/community-label/appeal"),{method:"POST",body:o()({community_label_appeal_action:s},l&&"request_review"===s&&{community_label_appeal_comment:c})});case 5:"request_review"===s&&t.setState({appealState:"in_review",openGlass:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),t.setState({hasError:!0});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}())}render(){var e=this.state,t=e.openGlass,s=e.appealState,n=e.appealComment,o=this.props.appContext._t,i=(0,A.jsx)(Re.Z,{title:o("Request community label review"),onClose:this.onClickDismissGlass,theme:Re.L.Rounded,children:(0,A.jsxs)("div",{className:yn.communityLabelModalContent,children:[(0,A.jsx)("p",{children:(0,A.jsx)(Ce.ZP,{components:{link:(0,A.jsx)("a",{href:"/policy/en/community",title:o("Community Guidelines"),target:"_blank",rel:"noopener noreferrer"})},children:"We have determined that your post contains content that would be better suited with a Community Label. While it does not violate our [link]Community Guidelines[/link], a Community Label has been added to your post so that it is only presented to those who wish to view that material. \n\nIf you think this was done in error, you can Request Review to let us know. Please include a short explanation with your request:"})}),(0,A.jsx)("textarea",{className:yn.appealComment,value:n,onChange:this.onChangeAppealComment,placeholder:o("Add a comment...")}),(0,A.jsxs)("div",{className:yn.communityLabelModalActions,children:[(0,A.jsx)("div",{className:yn.communityLabelModalLink,children:(0,A.jsx)("a",{href:"https://help.tumblr.com/hc/articles/5436241401239",title:"Learn more",target:"_blank",rel:"noopener noreferrer",children:o("Learn More")})}),(0,A.jsxs)("div",{className:yn.appealButtons,children:[(0,A.jsx)(D.Z,{"aria-label":o("Dismiss the post review request form"),onClick:this.onClickDismissGlass,children:(0,A.jsx)(Cn.Z,{className:l()(yn.pill,yn.outline,yn.large),children:o("Dismiss")})}),(0,A.jsx)(D.Z,{"aria-label":o("Submit a post review request"),onClick:this.onClickSubmitAppeal,disabled:""===this.state.appealComment,children:(0,A.jsx)(Cn.Z,{className:l()(yn.pill,yn.primary,yn.large),children:o("Request Review")})})]})]})]})}),a=(0,A.jsx)("a",{href:"https://help.tumblr.com/hc/articles/5436241401239",title:"Learn more",target:"_blank",rel:"noopener noreferrer",children:(0,A.jsx)(fn.Z,{colors:{primary:N().paletteWhite},size:{width:22,height:22}})}),r=(0,A.jsx)(D.Z,{"aria-label":o("Dismiss appeal banner"),onClick:this.onClickDismissBanner,children:(0,A.jsx)(xn.Z,{className:yn.dismiss})});return this.state.bannerDismissed?null:this.state.hasError?(0,A.jsxs)("div",{className:l()(yn.flagged,yn.communityLabelFlag,yn.hasError),children:[(0,A.jsx)("span",{className:yn.bannerText,children:o("There was an error submitting your request.")}),(0,A.jsx)("span",{className:yn.bannerActions,children:r})]}):"in_review"===s?(0,A.jsxs)("div",{className:l()(yn.flagged,yn.communityLabelFlag,yn.inReview),children:[(0,A.jsx)("span",{className:yn.bannerText,children:o("Your post is in Community Label review.")}),(0,A.jsx)("span",{className:yn.bannerActions,children:a})]}):"available"===s?(0,A.jsxs)("div",{className:l()(yn.flagged,yn.communityLabelFlag),children:[(0,A.jsx)("span",{className:yn.bannerText,children:o("We reviewed your post and determined it needed a Community Label.")}),(0,A.jsxs)("span",{className:yn.bannerActions,children:[(0,A.jsx)(D.Z,{"aria-label":o("Request second review of this post"),onClick:this.onClickOpenAppealModal,children:(0,A.jsx)(Cn.Z,{className:yn.bannerPillButton,children:o("Request Second Review")})}),r,t&&i]})]}):"label_required"===s?(0,A.jsx)("div",{className:l()(yn.flagged,yn.communityLabelFlag),children:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("span",{className:yn.bannerText,children:o("Based on our Community Guidelines, this post requires a Community Label.")}),(0,A.jsxs)("span",{className:yn.bannerActions,children:[(0,A.jsx)(D.Z,{"aria-label":o("Dismiss appeal banner"),onClick:this.onClickDismissBanner,children:(0,A.jsx)(Cn.Z,{className:yn.bannerPillButton,children:o("Dismiss")})}),a]})]})}):null}}const jn=(0,j.HJ)(wn),kn="gQmlg",Sn="wB6qM",In="_qMFx",Nn="SEj9V",Pn="D7qy6";class Tn extends c.Component{constructor(){super(...arguments),a()(this,"state",{openGlass:!1,inReview:!1,hasError:!1,needsAppealComment:!1,appealComment:""}),a()(this,"logEvent",(e=>{var t=this.props.appContext.logEvent,s=this.props;t({eventName:e,eventDetails:{blog_name:s.blogName,post_id:s.postId}})})),a()(this,"submitAppeal",(()=>{var e=this.props,t=e.blogName,s=e.postId,n=e.appContext,i=n.features.adultContentAppealTextbox,a=n.apiFetch,r=this.state.appealComment;return a("/v2/blog/".concat(t,"/posts/").concat(s,"/appeal"),{method:"POST",body:o()({owner_appeal_nsfw:"request_review"},i&&{appeal_comment:r})}).then((()=>{this.setState({inReview:!0,openGlass:!1})})).catch((()=>{this.setState({hasError:!0})}))})),a()(this,"toggleGlass",(()=>{this.setState((e=>({openGlass:!e.openGlass})))})),a()(this,"onClickNext",(()=>{this.setState({needsAppealComment:!0}),this.logEvent(y.J.AdultContentAppealNext)})),a()(this,"onClickSubmit",(()=>{switch(this.submitAppeal(),this.props.classification){case nt.CN.Explicit:this.logEvent(y.J.AdultContentAppealSubmitExplicit);break;case nt.CN.Sensitive:this.logEvent(y.J.AdultContentAppealSubmitSensitive)}})),a()(this,"onClickDismiss",(()=>{this.toggleGlass(),this.setState({hasError:!1,needsAppealComment:!1,appealComment:""}),this.logEvent(y.J.AdultContentAppealCancel)})),a()(this,"onClickAppealPost",(()=>{switch(this.toggleGlass(),this.props.classification){case nt.CN.Explicit:this.logEvent(y.J.AdultContentAppealOpenExplicit);break;case nt.CN.Sensitive:this.logEvent(y.J.AdultContentAppealOpenSensitive)}})),a()(this,"onChangeAppealComment",(e=>{this.setState({appealComment:e.target.value})}))}render(){var e=this.props,t=e.flaggedType,s=e.isReblog,n=e.isNsfw,i=e.showApprovedAppeals,a=e.appContext.features.adultContentAppealTextbox,r=this.state,d=r.openGlass,c=r.inReview,p=r.hasError,u=r.needsAppealComment,h=r.appealComment,m=this.props.appContext,g=m._t,v=m.wwwBaseUrl;if("none"===t)return null;if(!n&&i&&"complete"===t)return(0,A.jsx)("div",{className:l()(kn,In),children:g("Your appeal was accepted! This post is no longer hidden.")});if(!n)return null;var b={onGlassClick:this.toggleGlass,glassIsClickable:!1},x={text:g(a?"Next":"Appeal"),onClick:a?this.onClickNext:this.onClickSubmit,buttonStyle:a?De.X.Confirm:De.X.Neutral},f={text:g("Submit Appeal"),onClick:this.onClickSubmit,buttonStyle:De.X.Confirm},C={text:g("Dismiss"),onClick:this.onClickDismiss,buttonStyle:De.X.Confirm},y=o()(o()({},C),{},{buttonStyle:De.X.Neutral}),w={text:g("Learn More"),link:"".concat(v,"/docs/adultcontentfaq"),buttonStyle:De.X.Neutral},j={text:g("Learn More"),link:"".concat(v,"/docs/contentappeals"),buttonStyle:De.X.Neutral},k=(0,A.jsx)($.Z,o()(o()({},b),{},{children:(0,A.jsx)(De.Z,{body:g("This post was flagged because somewhere in your reblog there might be adult content which is a violation of our Community Guidelines."),buttons:[w,C]})})),S=(0,A.jsx)($.Z,o()(o()({},b),{},{children:(0,A.jsx)(De.Z,{body:g("Your post is in content appeal. Once a decision has been made, we'll send you an email."),buttons:[j,C]})})),I=(0,A.jsx)($.Z,o()(o()({},b),{},{children:(0,A.jsx)(De.Z,{body:g("Unable to appeal the post. Please contact support for further help."),buttons:[w,C]})})),P=(0,A.jsx)($.Z,o()(o()({},b),{},{children:(0,A.jsx)(De.Z,{body:g("This post was flagged because we think it contains adult content which violates our Community Guidelines. It has been hidden from others, but not deleted. If you think this was done in error, tap Appeal and a real, live human will review it."),buttons:[x,w,y]})})),T=(0,A.jsx)($.Z,o()(o()({},b),{},{children:(0,A.jsx)(De.Z,{title:g("Want to tell us more?"),body:g('Use the space below to give us more context regarding your appeal and why you think the post was misclassified.<br/><br/>Adult content is imagery that depicts realistic human genitals or sex acts. For more information and related exceptions, read our <a target="_blank" rel="noopener" href="//tumblr.zendesk.com/hc/en-us/articles/231885248-Adult-Content">Adult Content Policy</a>.'),isBodyHtml:!0,buttons:[f,y],children:(0,A.jsx)("textarea",{className:Pn,value:h,onChange:this.onChangeAppealComment,placeholder:g('Write your appeal here. For example you can write:\n\n"This post shows my top surgery recovery\n"This post shows other, non-sexual LGBTQ+ content" (please specify)\n"This is a non-sexual nude drawing I created"\n"My post is about breastfeeding"\n"This post doesn\'t contain any nudity"')})})})),Z=(0,A.jsx)($.Z,o()(o()({},b),{},{children:(0,A.jsx)(De.Z,{body:g("This post was flagged because it contains adult content which violates our Community Guidelines. It has not been deleted but is now only viewable to you. This decision cannot be appealed."),buttons:[w,C]})})),E=(0,A.jsx)(D.Z,{label:g("What does this mean?"),onClick:this.toggleGlass,children:(0,A.jsx)(fn.Z,{colors:{primary:N().paletteWhite},size:{width:22,height:22}})});return"in_review"===t||c?(0,A.jsxs)("div",{className:l()(kn,Sn),children:[g(s?"This reblog is in content appeal":"Your post is in content appeal"),E,d&&S]}):s?(0,A.jsxs)("div",{className:kn,children:[g("This post was flagged because somewhere in your reblog there might be adult content."),E,d&&k]}):"unavailable"===t?(0,A.jsxs)("div",{className:kn,children:[g("It looks like your post might be in violation of our Community Guidelines and is now hidden."),E,d&&Z]}):"complete"===t?(0,A.jsxs)("div",{className:kn,children:[g("Based on our Community Guidelines this post contains adult content and is now only viewable to you."),E,d&&Z]}):(0,A.jsxs)("div",{className:kn,children:[g("It looks like your post might be in violation of our Community Guidelines and is now hidden."),(0,A.jsx)("button",{className:Nn,"aria-label":g("Appeal this post"),onClick:this.onClickAppealPost,children:g("Appeal")}),d&&(0,A.jsx)(A.Fragment,{children:p?I:u&&a?T:P})]})}}const Zn=(0,j.HJ)(Tn);var An=s(90351),En=s(34320),Mn=s(46819),Ln=s(52153),On=s(72146),Rn=s(73125),Dn=s(12885),Fn=s(19370),Bn=e=>{var t,s=e.layout,n=e.content,o=null==s?void 0:s.find((e=>e.type===nt.ms.Ask));return(null==o||null===(t=o.blocks)||void 0===t?void 0:t.length)<(null==n?void 0:n.length)},_n=s(22527),Un=s(91949),Vn=s(97561),zn=s(58847),Hn=s(753),Wn=s(45820),qn=s(161),Gn=s(40657),Xn=s(1181);function Qn(e){var t=e.general,s=e.toggleCallback,n=e.state,o=e.permalink,i=e.date,a=e.presentation,r=(0,j.bp)()._c;if(!n||!t)return null;var d=n===Mn.Gl?r("Button to cover post with a community label","Hide post"):r("Button to show post with a community label","Show post");return(0,A.jsxs)("div",{className:l()(Xn.Z.header,Gn.Z.dogEarWrapper),children:[(0,A.jsx)("span",{className:Xn.Z.headerText,children:(0,A.jsx)(Ce.ZP,{comment:"Community Label in post header",children:"Community Label: Mature"})}),(0,A.jsx)(D.Z,{className:Xn.Z.headerLink,onClick:()=>{var e=n===Mn.Gl?Mn.aY:Mn.Gl;s(!0,e)},label:d,children:d}),(0,A.jsx)(qn.Z,{url:o,date:i,presentation:a})]})}var Jn=s(58849),Yn=s(56887);function Kn(e){var t,s,n,o,i,a,r=e.general,d=void 0!==r&&r,p=e.categories,u=e.state,h=e.toggleCallback,m=e.children,g=(0,j.bp)().isLoggedIn,v=(0,Jn.h)().openLoginWall,b=(0,Yn.P)().data,x=null!=b&&b.isLoggedIn?b.user:void 0,f=(null==x||null===(t=x.communityLabelCategories)||void 0===t?void 0:t.drugUse)===Mn.aY||(null==x||null===(s=x.communityLabelCategories)||void 0===s?void 0:s.drugUse)===Mn.fj,C=(null==x||null===(n=x.communityLabelCategories)||void 0===n?void 0:n.sexualThemes)===Mn.aY||(null==x||null===(o=x.communityLabelCategories)||void 0===o?void 0:o.sexualThemes)===Mn.fj,y=(null==x||null===(i=x.communityLabelCategories)||void 0===i?void 0:i.violence)===Mn.aY||(null==x||null===(a=x.communityLabelCategories)||void 0===a?void 0:a.violence)===Mn.fj;(0,c.useEffect)((()=>{p.drugUse!==f&&p.sexualThemes!==C&&p.violence!==y||h(!0,Mn.aY)}),[]);var w=(0,A.jsxs)("div",{className:Xn.Z.cover,"data-testid":"content-warning-cover",children:[(0,A.jsx)("div",{className:Xn.Z.coverHeader,children:(0,A.jsx)(Ce.ZP,{comment:"Community Label in post body",children:"Community Label: Mature"})}),(0,A.jsx)("p",{className:Xn.Z.coverAuthorNotice,children:(0,A.jsx)($n,{categories:p})}),(0,A.jsx)(D.Z,{onClick:()=>{g?h(!0,Mn.Gl):v()},children:(0,A.jsx)(Cn.Z,{className:Xn.Z.coverButton,children:(0,A.jsx)(Ce.ZP,{comment:"Button text on community label in post body",children:"Show post"})})})]}),k=d&&(u===Mn.aY||u===Mn.fj);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:l()(Xn.Z.content,{[Xn.Z.isShowingCover]:k}),children:(0,A.jsx)("span",{children:m})}),k&&w]})}function $n(e){var t=e.categories,s=(0,j.bp)()._c,n=(0,c.useMemo)((()=>Object.entries(t).filter((e=>{var t=de()(e,2)[1];return(0,Un.CS)(t)})).map((e=>{var t=de()(e,1)[0];return(0,Un.id)(t,s).label}))),[t,s]);if(0===n.length)return(0,A.jsx)(A.Fragment,{children:(0,Un.id)("general",s).info});if(1===n.length)return(0,A.jsx)(Ce.ZP,{params:{label:n[0]},children:"[label]"});if(2===n.length)return(0,A.jsx)(Ce.ZP,{params:{firstLabel:n[0],secondLabel:n[1]},children:"[firstLabel], [secondLabel]"});var o=s("Separator of list of community labels",", "),i=n.slice(0,-1).join(o);return(0,A.jsx)(Ce.ZP,{params:{initialLabels:i,finalLabel:n[n.length-1]},children:"[initialLabels], [finalLabel]."})}s(25694);const eo="W0ros",to="uamX1",so="q05ND",no="NQQC8";const oo=(0,j.HJ)((e=>{var t=e.expand,s=e.filteredTags,n=e.filteredContent,o=e.appContext._t,i=s&&s.length?"#tagfiltering":"#contentfiltering",a="/settings/account".concat(i),r=s&&s.length?s.map((e=>"#".concat(e))).join(", "):n.join(", "),l=(0,A.jsx)("a",{className:so,target:"_blank",href:a,children:r}),d=s&&s.length?o("This post contains filtered tags."):o("This post contains filtered content."),c=o("View post");return(0,A.jsxs)("div",{className:eo,children:[(0,A.jsx)("p",{className:to,children:d}),l,(0,A.jsx)(D.Z,{onClick:t,className:no,label:c,children:c})]})}));var io=s(62129);const ao={scheduledQueueDate:"SirwX",scheduledQueueDay:"jn3oa",scheduledQueueTime:"E2wfC",scheduledIndicator:"b1E_e",post:"FtjPK",withOutline:"r0etU",stickyContainer:"AD_w7",avatar:"JZ10N",contentWrapper:"VDRZ4",submission:"hYZb4",contentSource:"d_FyU",isPaywallShown:"fX9yp",footerWrapper:"qYXF9",isRenderedInPeepr:"EBcaC",submissionWrapper:"nPaE8",submitter:"IyHrQ",recommendationReasonTopTeaserWrapper:"n_1Sv",recommendationReasonTopTeaserInner:"tI3Pw",recommendationReasonTag:"Lufh9",hiddenNotice:"NwkDL",queueOrderControls:"jhYtw",queueControls:"BfCKm"};class ro extends c.Component{constructor(){var e;super(...arguments),a()(this,"state",{hasExpandedFromFiltered:!1,showPost:!0,hasCommunityLabel:null===(e=this.props.timelineObject.communityLabels)||void 0===e?void 0:e.hasCommunityLabel}),a()(this,"isLongPost",void 0),a()(this,"setIsLongPost",(e=>{this.isLongPost=e})),a()(this,"getPostContextValue",(0,d.Z)(((e,t)=>({presentationStyle:t,post:o()(o()({},e),{},{canReply:e.canReply&&t.showsReplyButton,canSendInMessage:e.canSendInMessage&&t.showsShareButton}),isNarrow:!!this.props.isNarrow,getIsLongPost:()=>this.isLongPost,setCommunityLabel:e=>this.updateCommunityLabel(e)})))),a()(this,"getSubmissionAttribution",(()=>{var e=this.props.timelineObject,t=e.postAuthor,s=e.state,n=e.anonymousEmail,o=e.anonymousName;return t?(0,A.jsx)("div",{className:ao.submissionWrapper,children:(0,A.jsx)(u.Z,{className:ao.submission,blogName:t,href:(0,Ke.Z)(t),children:(0,A.jsx)(Ce.ZP,{comment:"This text denotes that a post on some blog was submitted to it by some other user",params:{postAuthor:t},components:{span:(0,A.jsx)("span",{className:ao.submitter})},children:"Submitted by [span][postAuthor][/span]"})})}):s===nt.hA.Submission&&n&&o?(0,A.jsx)("div",{className:ao.submission,children:(0,A.jsx)(Ce.ZP,{params:{anonymousEmail:n,anonymousName:o},components:{span:(0,A.jsx)("span",{className:ao.submitter})},children:"Submitted by [span][anonymousName] ([anonymousEmail])[/span]"})}):(0,A.jsx)("div",{className:ao.submission,children:(0,A.jsx)(Ce.ZP,{comment:"This text denotes that a post on some blog was submitted to it by some anonymous user",components:{span:(0,A.jsx)("span",{className:ao.submitter})},children:"Submitted by [span]anonymous[/span]"})})})),a()(this,"renderTags",((e,t,s)=>{var n=this.props,o=n.timelineObject,i=o.recommendationReason,a=o.tags,r=o.isPinned,l=o.paywallAccess,d=o.isPaywalled,c=n.appContext._t,p=r&&{text:c("Pinned Post"),icon:On.c.Pin,color:I.paletteAccent,loggingReason:"",links:{}}||((null==i?void 0:i.icon)!==On.c.Pin?i:void 0);return(0,A.jsx)(io.C,{tags:a,isPaywallShown:t,isSupporting:l===Ln.bv.Member&&d,postChromeStyles:s,recommendationReason:p,collapsedHeight:e?Xs.wrappedTagsMobileHeight:Xs.wrappedTagsDesktopHeight})})),a()(this,"appendIsBlurredImages",((e,t)=>e.map((e=>e.type===nt.kH.Image&&t?o()(o()({},e),{},{isBlurredImages:this.props.timelineObject.isBlurredImages}):e)))),a()(this,"getInboxAttribution",(e=>{var t=this.props.timelineObject,s=t.postUrl,n=t.askingName,o=void 0===n?"":n,i=t.askingUrl,a=void 0===i?"":i,r=t.askingAvatar,l=t.postAuthor,d=void 0===l?"":l,c=t.postAuthorAvatar,p=t.blog,u=o,h=a,m=r,g=(0,nt.lG)(t);return g&&(u=d,m=c,h=(0,Rn.Z)(t.postAuthor)),{recipientName:e&&!p.primary?p.name:void 0,isSubmission:g,permalinkUrl:s,blog:{name:u,url:h,avatar:m,uuid:""}}})),a()(this,"getAttribution",((e,t)=>e?this.getInboxAttribution(t):(0,Vn.Z)(this.props.timelineObject))),a()(this,"expandFromFiltered",(()=>this.setState({hasExpandedFromFiltered:!0}))),a()(this,"hidePost",(()=>this.setState({showPost:!1}))),a()(this,"updateCommunityLabel",((e,t)=>this.setState({overrideCW:t,hasCommunityLabel:e})))}render(){var e,t=this.props,s=t.timelineObject,n=t.appContext,i=n.autoTruncatingPosts,a=n.isLoggedIn,r=n.isPeeprShowing,d=n.logEvent,c=n.communityLabelVisibilitySetting,u=n.features,m=u.paywallConsumption,g=u.tspUiUpdate,v=u.recommendationReasonTopTeaser,b=u.communityLabels,x=n._t,f=t.adContext,C=f.adPlacementConfiguration,w=f.hydraConfigInstanceId,j=t.dashboardContext,I=j.tabId,N=j.tabsHeaderDisplayedHeight,P=t.isInInboxTimeline,T=t.isNarrow,Z=t.postIndex,M=s.actions,O=s.blog,R=s.blogName,D=s.id,F=s.content,B=s.layout,_=s.canReblog,U=s.date,V=s.filtered,z=s.isNsfw,H=s.ownerAppealNsfw,W=s.rebloggedFromAdvertiserName,q=s.rebloggedFromCanBeFollowed,G=s.rebloggedFromFollowing,X=s.rebloggedFromId,Q=s.rebloggedFromName,J=s.rebloggedFromUrl,Y=s.reblogKey,K=s.trail,$=s.type,ee=s.canEdit,te=s.postAuthor,se=s.postAuthorAvatar,ne=s.isSubmission,oe=s.askingName,ie=s.sponsoredBadgeUrl,ae=s.sourceUrl,re=s.sourceTitle,le=s.sourceUrlRaw,de=s.dismissal,ce=s.state,pe=s.placementId,ue=s.adm,he=s.isPaywalled,me=s.paywallAccess,ge=s.earnedId,ve=s.communityLabels,be=s.communityLabelAppealState,xe=this.state,fe=xe.hasExpandedFromFiltered,ye=xe.showPost,we=xe.overrideCW,je=xe.hasCommunityLabel,ke=(0,Un.nT)(ve),Se=m&&he&&(me===Ln.bv.NonMember||me===Ln.bv.Disabled);if($!==nt.SB)return"production"===zs.Z.Development&&console.warn('Post with id "'.concat(D,'" is not blocks type and cannot be rendered')),null;var Ie=this.props.presentationStyle,Ne=this.getAttribution(Ie.usesInboxAttribution,Ie.showsRecipientForInboxAttribution);null!=Ne&&Ne.blog.advertiserName&&(Ie=o()(o()({},Ie),{},{showsPosterAvatar:!1}));var Pe,Te=Q&&J?{blogName:W||Q,permalinkUrl:J,postId:X}:void 0,Ze=!(void 0!==q)&&O.canBeFollowed,Ae=(0,_n.d)(M),Ee=!!oe,Me=Ee&&ce===nt.hA.Submission,Le=this.props.timelineObject.isAnonymous&&ne&&P||this.props.timelineObject.isAnonymous&&Me,Oe=ee?o()(o()({},s),{},{sourceUrl:le}):void 0;b&&je&&(Pe=we||(a?c:"warn"));var Re=null==ke?void 0:ke.categories,De=(0,A.jsx)(Qn,{state:Pe,toggleCallback:this.updateCommunityLabel,categories:Re,general:ke.active,permalink:null==Ne?void 0:Ne.permalinkUrl,date:U,presentation:Ie}),Fe=(0,A.jsx)(En.Z,o()(o()({postState:ce,postAttribution:Ne,reblogAttribution:Te,presentationStyle:Ie,showsFollowButton:!Ie.usesInboxAttribution&&(q||Ze),showsSponsored:!!ie,isFollowingReblogger:G,dismissal:de,date:U,placementId:pe,earnedId:ge,isPaywalled:he,showAsAnonymous:Le,isInboxAsk:Me,editablePost:Oe},!g&&{ctaButtonOptions:Ae}),{},{afterHideAd:this.hidePost,isBlazeCampaign:null!==(e=this.props.timelineObject.isBlazed)&&void 0!==e&&e,hideDogEar:!!Pe})),Be=(0,A.jsx)(Zn,{flaggedType:H,postId:D,blogName:R,isReblog:void 0!==X,isNsfw:z,showApprovedAppeals:Ie.showsApprovedAppealBanner,classification:s.classification}),_e=Le||!Ne.blog.url,Ue=Ie.showsPosterAvatar&&!Ie.showsAvatarInline?(0,A.jsx)("div",{className:ao.stickyContainer,"data-testid":"sticky-avatar-container",children:(0,A.jsx)("div",{className:ao.avatar,style:{top:"".concat(Xs.dashboardStickyPosition+(N||0),"px")},children:(0,A.jsx)(p.Z,{isAnonymous:_e,imageResponse:Ne.blog.avatar,dimension:Ie.avatarDimension,name:Ne.blog.name,url:Ne.blog.url,isAdult:Ne.blog.isAdult,blog:Ne.blog,authorImageResponse:Ie.showsAuthorImage?se:void 0,authorName:te,placementId:pe,eventName:y.J.Avatar,eventDetails:(0,S.U)({timelineObject:s,adPlacementConfiguration:C,hydraConfigInstanceId:w})})})}):null;if(V&&!fe)return(0,A.jsx)(k.Mj.Provider,{value:this.getPostContextValue(s,Ie),children:(0,A.jsxs)("article",{className:ao.post,children:[Ue,Fe,(0,A.jsx)(oo,{expand:this.expandFromFiltered,filteredTags:V.tags,filteredContent:V.content})]})});var Ve=!!K.length&&!!F.length,ze={content:F,layout:B,blog:O,post:{id:D,timestamp:null==s?void 0:s.timestamp},isContributedContent:!0},He=Ve?[...K,ze]:K,We=!(null==Ae||!Ae.text||null==Ae||!Ae.urls.web),qe=We&&(0,A.jsx)(E,{ctaText:null==Ae?void 0:Ae.text,clickUrl:null==Ae?void 0:Ae.urls.web,color:null==Ae?void 0:Ae.textColor,backgroundColor:null==Ae?void 0:Ae.backgroundColor,placementId:pe}),Ge=(0,A.jsx)(Wn.Z,{trail:He,parentPlacementId:pe,parentEarnedId:ge,contentFooter:He.length&&qe}),Xe=this.appendIsBlurredImages(F,Ie.blursImagesFromUnfollowedBlogs),Qe=!!F.length&&!K.length,Je=Qe&&Ie.showsOnlyFirstMediaBlock&&(0,Fn.x)(Xe),Ye=Qe&&(0,A.jsx)(Hn.ZP,{isOriginalPost:!0,postingBlog:O,adm:ue,placementId:pe,blocks:Je?[Je]:Xe,layouts:Je?void 0:B}),Ke=!!ne&&Ie.showsSubmissionAttribution&&this.getSubmissionAttribution(),$e=!!re&&!!ae&&(0,A.jsx)("div",{className:l()(ao.contentSource,{[ao.isPaywallShown]:Se}),children:(0,A.jsx)(Ce.ZP,{comment:'Content source. The placeholder is a link to the source of the post (like "website.com").',params:{sourceTitle:re},components:{link:(0,A.jsx)("a",{href:ae,target:"_blank",rel:"noopener noreferrer"})},children:"Source: [link][sourceTitle][/link]"})}),et=_?{content:F,layout:B,blog:O,post:{id:D,reblogKey:Y}}:void 0,tt=(0,A.jsxs)(A.Fragment,{children:[Be,this.props.children||(0,A.jsxs)(A.Fragment,{children:[Ge,Ye]})]});if(b&&(tt=(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(Kn,{state:Pe,toggleCallback:this.updateCommunityLabel,categories:Re,general:ke.active,children:tt})})),Ie.maximumContentHeight){var st=!T&&!i||Pe===Mn.aY||Pe===Mn.fj;tt=(0,A.jsx)(h.Z,{maxHeight:Ie.maximumContentHeight,maxHeightTolerance:Ie.maximumContentHeightBufferTolerance,preventTruncation:st,setIsLongPost:T?null:this.setIsLongPost,onCrop:this.props.setIsPostTruncatedForImpressionEvent,onExpand:()=>d({eventName:y.J.ViewPost,eventDetails:{post_id:s.id,tab:I}}),children:tt})}else tt=(0,A.jsx)("div",{className:ao.contentWrapper,children:tt});var ot=this.props.paletteContext.name,it=Se&&O.theme?(0,Dn.ZP)(O):{},at=Se&&O.theme?(0,Dn.ot)(O,ot):{},rt=v&&s.recommendationReason&&s.recommendationReason.icon===On.c.Hashtag?(0,A.jsx)("div",{className:ao.recommendationReasonTopTeaserWrapper,children:(0,A.jsxs)("div",{className:ao.recommendationReasonTopTeaserInner,children:[(0,A.jsx)("span",{className:ao.recommendationReasonPrompt,children:x("Because you follow")}),(0,A.jsx)("span",{className:ao.recommendationReasonTag,children:(0,A.jsx)(An.Z,{reason:s.recommendationReason})})]})}):null;return ye?(0,A.jsx)(L.ZP,{children:e=>{var t=e.isMobile;return(0,A.jsx)(k.Mj.Provider,{value:this.getPostContextValue(s,Ie),children:(0,A.jsxs)("article",{className:l()(ao.post,{[ao.withOutline]:Ie.hasOutline}),children:[ce===nt.hA.Queued?this.renderQueueSchedule(t):Ue,rt,De,Fe,b&&(0,A.jsx)(jn,{postId:D,blogName:R,initialAppealState:be}),tt,$e,Ke,!He.length&&We&&qe,Pe!==Mn.aY&&Pe!==Mn.fj&&(0,A.jsxs)("div",{className:l()(ao.footerWrapper,{[ao.isPaywallShown]:Se,[ao.isRenderedInPeepr]:r}),style:it,children:[!!Ie.showsTags&&this.renderTags(t,Se,at),(0,A.jsx)(bn,{isInInboxTimeline:P,canAnswer:Ee&&!Bn(s),isInboxAsk:Me,isPaywallShown:Se,isSubmissionDraft:ne&&ce===nt.hA.Submission,postChromeStyles:at,editablePost:Oe,trailElementForSelf:et,isNarrow:T,postIndex:Z})]})]})})}}):(0,A.jsx)("article",{className:l()({[ao.withOutline]:Ie.hasOutline}),children:(0,A.jsx)("div",{className:ao.hiddenNotice,children:"Hidden"})})}renderQueueSchedule(e){var t=this.props.timelineObject,s=t.scheduledPublishTime,n=t.id,o=t.blogName,i=t.queuedState,a=t.blog.timezoneOffset,r=this.props.appContext,l=r._getLocaleDateString,d=r._t;if(!s)return null;var c=new Date;c.setHours(23,59,59,999);var p,u,h=c.getTime()+5184e5>1e3*s?ye.Cx.WeekdayShort:ye.Cx.MonthDayShort;if(a){var m=(0,zn.ZP)(a,s);p=l(m,h),u=l(m,ye.Cx.TimeUTC)}else{var g=new Date(1e3*s);p=l(g,h),u=l(g,ye.Cx.Time)}var b=i===nt.SH.Scheduled?(0,A.jsx)("span",{className:ao.scheduledIndicator,title:d("Scheduled Post"),children:(0,A.jsx)(v,{})}):(0,A.jsx)("span",{className:ao.scheduledIndicator,title:d("Queued Post"),children:(0,A.jsx)(x,{})});return e?(0,A.jsxs)("div",{className:ao.scheduledQueueDate,children:[(0,A.jsxs)("div",{className:ao.scheduledQueueDay,children:[b," ",p," ",u]}),i===nt.SH.Queued&&(0,A.jsx)(X,{id:n.toString(),blogName:o})]}):(0,A.jsx)("div",{className:ao.stickyContainer,children:(0,A.jsxs)("div",{className:ao.scheduledQueueDate,children:[(0,A.jsx)("div",{className:ao.scheduledQueueDay,children:p}),(0,A.jsxs)("div",{className:ao.scheduledQueueTime,children:[u," ",b]})]})})}}var lo=(0,R.CN)(ro,{appContext:!0,adContext:!0,paletteContext:!0,dashboardContext:!0});const co=(0,f.s)(lo,!1)},49827:(e,t,s)=>{"use strict";s.d(t,{Z:()=>v});var n=s(17709),o=s(56305),i=s(54382),a=s(43166),r=s(65551);const l="XZFs6",d="WIYYp",c="wvu3V",p="pM6pK",u="IxFyd",h="SBa73",m="ZCpAa";var g=s(2629);const v=e=>{var t=e.blog,s=e.isAsking,v=e.components,b=e.post,x=(0,a.I_)(),f=(0,r.m)(),C=b||(null==x?void 0:x.post)||(null==f?void 0:f.editablePost)||null,y=(0,g.jsx)("span",{className:p,children:t?t.name:(0,g.jsx)(i.ZP,{children:"Anonymous"})}),w=s?(0,g.jsx)(i.ZP,{components:{blog:y},children:"[blog/] asked:"}):(0,g.jsx)(i.ZP,{components:{blog:y},children:"[blog/] answered:"});null!=C&&C.isAdFreeGiftAsk&&(w=(0,g.jsx)(i.ZP,{components:{blog:y},children:"[blog/] gifted you Tumblr Ad-Free Browsing!"})),null!=C&&C.isTumblrmartGiftAsk&&(w=(0,g.jsx)(i.ZP,{components:{blog:y},children:"[blog/] gifted you Tumblr Dashboard Crabs!"}));var j=t?(0,g.jsx)(o.Z,{blogName:t.name,href:t.url,blog:t,children:w}):w;return(0,g.jsxs)("div",{className:l,children:[(0,g.jsxs)("div",{className:d,children:[(0,g.jsx)("div",{className:c,children:j}),(0,g.jsx)("div",{className:u,children:v}),(0,g.jsx)("div",{className:h})]}),(0,g.jsx)("div",{className:m,children:(0,g.jsx)(n.Z,{isAnonymous:!t,imageResponse:null==t?void 0:t.avatar,name:null==t?void 0:t.name,url:null==t?void 0:t.url,dimension:40})})]})}},59992:(e,t,s)=>{"use strict";s.d(t,{J0:()=>l,M3:()=>r});var n=s(54138),o=s.n(n),i=s(5700),a=s(68346);function r(e){return function(e){var t,s=[];return null===(t=e.display)||void 0===t||t.forEach((e=>{e.mode&&e.mode.type!==i.T8.Weighted&&e.mode.type!==i.T8.Carousel?e.blocks.forEach((e=>{s.push({blocks:[e]})})):s.push(e)})),o()(o()({},e),{},{display:s})}((0,i.Ps)(e)?function(e){var t=o()(o()({},e),{},{display:e.rows.map((e=>({blocks:e})))});return delete t.rows,t}(o()(o()({},e),{},{rows:e.rows})):o()({},e))}function l(e){var t=new a.Z(e).getLargestImage();return t.height/t.width}},90351:(e,t,s)=>{"use strict";s.d(t,{Z:()=>g});var n=s(5754),o=s.n(n),i=(0,s(36343).q)("pin");i.defaultProps={size:{width:24,height:24}};const a=i;var r=s(19486),l=s(68280),d=s(72146);const c="VPQeD",p="ESJX7";var u=s(2629),h={[d.c.Search]:r.Z,[d.c.Pin]:a},m={width:14,height:14};const g=e=>{var t=e.reason,s=t.text,n=t.color,i=t.links,a=t.icon,r=i.recommendationDestination;if(a===d.c.Hashtag){var g="#"+s;return(0,u.jsx)("a",{href:null==r?void 0:r.href,style:{color:n},className:c,children:g})}var v=a&&h[a];"production"===l.Z.Development&&a&&!v&&console.warn('No icon found for recommendation reason icon type "'.concat(a,'"'));var b=v?(0,u.jsx)(v,{size:m,colors:{primary:n}}):null;return(0,u.jsxs)("a",{href:null==r?void 0:r.href,style:{color:n},className:o()(c,{[p]:b}),children:[b,s]})}},62129:(e,t,s)=>{"use strict";s.d(t,{C:()=>A});var n=s(50209),o=s.n(n),i=s(5754),a=s.n(i),r=s(95004),l=s(89006),d=s(90351),c=s(68280),p=s(72146),u=s(59215),h=s(63583),m=s.n(h),g=s(96467),v=s.n(g),b=s(84473);const x="hAFp3",f="mwjNz",C="KSDLH",y="p4wJy",w="AXXSZ",j="nwVPE",k="hyG7F",S="wERE9",I="uXaAK",N="m6pOC";var P,T=s(2629);!function(e){e[e.Unknown=0]="Unknown",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"}(P||(P={}));class Z extends r.Component{constructor(){super(...arguments),o()(this,"state",{collapsedState:P.Unknown}),o()(this,"wrapper",null),o()(this,"showCollapsedUIIfNeeded",(()=>{var e=this.wrapper&&this.wrapper.clientHeight>this.props.collapsedHeight;this.setState((()=>({collapsedState:e?P.Collapsed:P.Expanded})))})),o()(this,"getTagElements",(()=>{var e=this.props,t=e.tags,s=e.dashboardContext.highlightedTags,n=[],o=[];return t&&t.forEach((e=>{e.startsWith("_")||(null!=s&&s.includes(e)?o.push((0,T.jsx)(b.Z,{className:a()(C,y),tagName:e},e)):n.push((0,T.jsx)(b.Z,{className:C,tagName:e},e)))})),[...o,...n]})),o()(this,"expandTags",(e=>{e.stopPropagation(),this.setState((()=>({collapsedState:P.Expanded})))}))}componentDidMount(){this.showCollapsedUIIfNeeded()}render(){var e,t,s=this.props,n=s.tags,o=s.collapsedHeight,i=s.recommendationReason,r=s.isPaywallShown,u=s.postChromeStyles,h=s.isSupporting,g=this.state.collapsedState,b=this.props.appContext,C=b._t,y=b.features;switch(g){case P.Unknown:e=!0,t=!1;break;case P.Expanded:e=!1,t=!1;break;case P.Collapsed:e=!0,t=!0}if("production"===c.Z.Development&&o!==v().wrappedTagsDesktopHeight&&o!==v().wrappedTagsMobileHeight&&console.warn("Please use dimensions.wrappedTagsDesktopHeight or dimensions.wrappedTagsMobileHeight as the values for collapsedHeight in this component."),!(n&&n.length||i))return null;var Z=y.recommendationReasonTopTeaser&&(null==i?void 0:i.icon)===p.c.Hashtag,A=null;return i&&!Z?A=(0,T.jsx)("span",{className:w,children:(0,T.jsx)(d.Z,{reason:i})}):h&&(A=(0,T.jsx)("span",{className:a()(w,k),children:(0,T.jsx)(l.Z,{color:m().paletteGreen,size:12})})),(0,T.jsx)("div",{className:a()(x,{[I]:e,[S]:r}),style:u,children:(0,T.jsxs)("div",{ref:e=>this.wrapper=e,className:f,children:[A,this.getTagElements(),t&&(0,T.jsxs)("a",{className:j,onClick:this.expandTags,role:"button",children:["… ",(0,T.jsx)("span",{className:N,children:C("See all")})]})]})})}}const A=(0,u.X9)(Z,{appContext:!0,adContext:!0,dashboardContext:!0})},161:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var n=s(54138),o=s.n(n),i=s(95004),a=s(3732),r=s(67023),l=s(78667),d=s(33970),c=s.n(d),p=s(2629);const u=e=>{var t=e.children,s=(0,i.useState)(!1),n=c()(s,2),o=n[0],a=n[1];return(0,i.useEffect)((()=>{a(!0)}),[]),(0,p.jsx)(p.Fragment,{children:o?t:null})};var h=s(40657);function m(e){var t=e.url,s=e.date,n=e.presentation,d=void 0===n?{}:n,c=(0,l.bp)(),m=c._t,g=c._c,v=c._getRelativeDateString,b=(0,i.useContext)(a.mk),x=d.hasOutline,f=void 0!==x&&x,C=d.showsDogEar;if(!t||!(void 0===C||C))return null;var y={className:h.Z.dogEar,tabIndex:-1};if(b){var w=b.backgroundColor;y.style=o()({borderTopColor:w,borderRightColor:w},f&&{boxShadow:"2px 0px 0px ".concat(w,", 0px -2px 0px ").concat(w)})}return(0,p.jsx)(u,{children:(0,p.jsx)("a",{href:t,role:"button",target:"_blank",className:h.Z.dogEarLink,"aria-label":m("Permalink"),title:s&&g("Hover text showing a timestamp. %1$s is a simplified timestamp","View post - %1$s",[v(s,r.qC.Simple)]),children:(0,p.jsx)("div",o()({},y))})})}},34320:(e,t,s)=>{"use strict";s.d(t,{Z:()=>U});var n,o=s(5754),i=s.n(o),a=s(17709),r=s(56305),l=s(57475),d=s(19299),c=s(27252),p=s(82145),u=s(33970),h=s.n(u),m=s(95004),g=s(5136),v=s(43523),b=s(43684),x=s(22979),f=s(78667),C=s(43166),y=s(20775),w=s(21912),j=s(2629);!function(e){e[e.NotInterested=1]="NotInterested",e[e.Offensive=2]="Offensive",e[e.TooOften=3]="TooOften",e[e.AlreadyPurchased=4]="AlreadyPurchased"}(n||(n={}));var k=function(e){var t=(0,f.bp)(),s=t._t,o=t.logEvent,i=t.features,a=e.showAdFree,r=e.showHideAd,l=e.afterHideAd,d=(0,m.useState)(!1),c=h()(d,2),p=c[0],u=c[1],k=(0,C.uu)(),S=null==k?void 0:k.post,I=[],N={[n.NotInterested]:s("I'm not interested in this."),[n.Offensive]:s("It's offensive or inappropriate."),[n.TooOften]:s("I see it too often."),[n.AlreadyPurchased]:s("I already purchased something from this ad.")};if(p){I.push((0,j.jsx)(g.Z,{isDisabled:!0,children:s("Why are you hiding this ad?")},"hide-ad-reason-title"));for(var P=function(){var e=h()(Z[T],2),t=e[0],s=e[1];I.push((0,j.jsx)(g.Z,{onClick:()=>(e=>{var t={eventName:v.J.HideAd,eventDetails:{complaint_reason:e,is_ad:1,creative_id:null==S?void 0:S.creativeId,blog_name:null==S?void 0:S.blogName,campaign_id:null==S?void 0:S.campaignId,serve_id:null==S?void 0:S.serveId,post_id:null==S?void 0:S.id,placement_id:null==S?void 0:S.placementId}};o(t,{sendPayloadImmediately:!0}),null==l||l()})(parseInt(t,10)),children:s},"hide-ad-reason-".concat(t)))},T=0,Z=Object.entries(N);T<Z.length;T++)P();return(0,j.jsx)(y.ZP,{isOpen:p,blogName:"",width:400,renderItems:()=>I,popoverBoundary:b.gc.ScrollParent,showOverflowY:!0,onPopoverClose:()=>u(!1)},"hide-ad-reason-meatballs-menu")}if(a){var A=(0,x.uz)(S)?"tsp":"stream";I.push((0,j.jsx)(g.Z,{krakenEventName:v.J.AdFreeLinkClick,linkTo:"/settings/ad-free-browsing?source=".concat(A),alwaysExternalLink:!0,className:w.Z.meatballItem,children:s("Go Ad-Free")},"ad-free"))}return(()=>{if(i.hidingAds&&r&&(0,x.uz)(S)){var e=null==S?void 0:S.adProviderId;if(e===x.Rd.Smart||e===x.db.IponWeb)return!0}return!1})()&&I.push((0,j.jsx)(g.Z,{onClick:()=>u(!0),className:w.Z.meatballItem,children:s("Hide Ad")},"hide-ad")),(0,j.jsx)(y.ZP,{blogName:"",width:200,renderItems:()=>I,popoverBoundary:b.gc.ScrollParent,showOverflowY:!0},"ad-meatballs-menu")};k.defaultProps={showAdFree:!0,showHideAd:!0};const S=k;var I=s(15321),N=s(26372),P=s(89006),T=s(94631),Z=s(54382),A=s(52153),E=s(5700),M=s(31679),L=s(74446),O=s(55855),R=s(55015),D=s(63583),F=s.n(D),B=s(161),_=s(40657);const U=function(e){var t,s,n,o,u,h,m,g,b,y,w,k,D=e.postAttribution,U=e.reblogAttribution,V=e.showsFollowButton,z=e.showsSponsored,H=e.presentationStyle,W=void 0===H?{}:H,q=e.isAd,G=e.isInboxAsk,X=void 0!==G&&G,Q=e.showAsAnonymous,J=void 0!==Q&&Q,Y=e.isFollowingReblogger,K=e.dismissal,$=e.date,ee=e.postState,te=e.isNonInteractive,se=e.placementId,ne=e.earnedId,oe=e.isPaywalled,ie=e.editablePost,ae=e.afterHideAd,re=e.isBlazeCampaign,le=e.hideDogEar,de=(0,f.bp)(),ce=de._t,pe=de._c,ue=de.features,he=ue.paywallConsumption,me=ue.timestampsEverywhere,ge=ue.tspUiUpdate,ve=de.timestamps,be=(0,C.uu)(),xe=be.isNarrow,fe=void 0!==xe&&xe,Ce=(0,M.b)(),ye=Ce.hydraConfigInstanceId,we=Ce.adPlacementConfiguration,je=(0,L.i)().displayMode,ke=void 0===je?x.mt.List:je,Se=W.avatarDimension,Ie=W.reblogIconSize,Ne=W.showsAvatarInline,Pe=W.showsEditButton,Te=W.showsDeleteButton,Ze=W.showsPosterAvatar,Ae=W.showsPostingBlogName,Ee=W.stacksReblogAttribution,Me=W.usesInboxAttribution,Le=Ae||z,Oe=Ze||z,Re=be!==C.Nw,De=Re&&(null==be||null===(t=be.post)||void 0===t?void 0:t.canEdit)&&Pe,Fe=Re&&(null==be||null===(s=be.post)||void 0===s?void 0:s.canDelete)&&Te,Be=Re?null==be||null===(n=be.post)||void 0===n?void 0:n.trail:void 0,_e=Re?(0,O.U)({hydraConfigInstanceId:ye,adPlacementConfiguration:we,timelineObject:null==be?void 0:be.post}):{},Ue=U&&V&&(0,j.jsx)("div",{className:_.Z.followButton,children:(0,j.jsx)(l.Z,{blogName:U.blogName,blogUrl:U.blogName,following:!!Y,isPostHeader:!0,placementId:se,earnedId:ne})}),Ve=i()(_.Z.headerContent,{[_.Z.hidesPosterBlogname]:!Le}),ze=J?null!=ie&&ie.anonymousName&&null!=ie&&ie.anonymousEmail?"".concat(ie.anonymousName," <").concat(ie.anonymousEmail,">"):ce("Anonymous"):(null==D||null===(o=D.blog)||void 0===o?void 0:o.advertiserName)||(null==D||null===(u=D.blog)||void 0===u?void 0:u.name),He=U&&D?ce("%1$s reblogged a post from %2$s",[D.blog.name,U.blogName]):ze?ce("Posted by %1$s",[ze]):void 0,We=z&&(0,j.jsx)(N.Z,{showSpinner:!(ge||ke===x.mt.Masonry),showSponsoredText:!0,showAdFreeLink:!1,hideOnMobile:!1,isBlazeCampaign:re});if(q)return(0,j.jsx)("header",{role:"banner",className:_.Z.header,"aria-label":He,children:(0,j.jsx)("div",{className:Ve,children:(0,j.jsx)(N.Z,{showSpinner:!ge,showSponsoredText:!0,showAdFreeLink:!0})})});var qe,Ge=U&&(0,j.jsxs)("div",{className:_.Z.reblogAttribution,children:[(0,j.jsx)(p.Z,{size:Ie,isCompact:!0}),(0,j.jsx)("div",{className:_.Z.rebloggedFromName,children:(0,j.jsx)(r.Z,{blogName:U.blogName,postId:U.postId,href:U.permalinkUrl,placementId:se,krakenEventName:v.J.Posts,children:U.blogName})}),Ue]}),Xe=!J&&null!=D&&D.permalinkUrl&&D.blog.url&&!D.blog.advertiserName?(0,j.jsx)(r.Z,{blogName:D.blog.name,href:D.permalinkUrl,blog:D.blog,placementId:se,krakenEventName:v.J.Posts,krakenEventDetails:_e,children:ze}):(0,j.jsx)("span",{children:ze}),Qe=(0,j.jsx)("span",{className:_.Z.innerText});if(null!=D&&D.recipientName||null==D||!D.isSubmission)if(null!=D&&D.recipientName){var Je=(0,j.jsx)(r.Z,{blogName:D.recipientName,placementId:se,krakenEventName:v.J.Posts,children:D.recipientName});qe=D.isSubmission?(0,j.jsx)(Z.ZP,{comment:"Displayed when a blog has submitted a post to a secondary blog",components:{senderBlogLink:Xe,innerElement:Qe,recipientBlogLink:Je},children:"[senderBlogLink/] [innerElement]submitted to[/innerElement] [recipientBlogLink/]:"}):(0,j.jsx)(Z.ZP,{comment:"Displayed when a blog has sent a message to a secondary blog",components:{senderBlogLink:Xe,innerElement:Qe,recipientBlogLink:Je},children:"[senderBlogLink/] [innerElement]said to[/innerElement] [recipientBlogLink/]:"})}else qe=Xe;else qe=(0,j.jsx)(Z.ZP,{comment:"Displayed when a blog has submitted a post to a primary blog",components:{senderBlogLink:Xe,innerElement:Qe},children:"[senderBlogLink/] [innerElement]submitted[/innerElement]:"});var Ye=ee===E.hA.Private&&(0,j.jsxs)("div",{className:_.Z.private,children:[(0,j.jsx)("div",{className:_.Z.lock,children:(0,j.jsx)(d.Z,{size:Ie,colors:{primary:F().paletteGray65}})}),ce("Private")]}),Ke=ee!==E.hA.Private&&(Le||Ge)&&(0,j.jsxs)("div",{className:_.Z.attribution,children:[Le&&(0,j.jsx)("div",{className:i()(_.Z.postAttribution,{[_.Z.inboxAttribution]:Me}),children:qe}),Ge]}),$e=D&&V&&!Ue&&Le&&(0,j.jsx)(l.Z,{blogName:D.blog.name,blogUrl:D.blog.url,following:!!D.blog.followed,className:_.Z.followButton,isPostHeader:!0,placementId:se,earnedId:ne}),et=me&&ve&&$&&!z,tt=(0,j.jsxs)("div",{className:_.Z.leftContent,children:[Ye||Ke||$e?(0,j.jsxs)("div",{className:i()(_.Z.leftContentMain,{[_.Z.leftContentMainStacked]:Ee&&!!U}),children:[Ye,Ke,$e]}):null,(0,j.jsxs)("div",{className:_.Z.leftContentSecondary,children:[et&&(0,j.jsx)(T.Z,{className:_.Z.timestamp,date:$}),ge&&z&&(0,j.jsx)("div",{className:i()({[_.Z.sponsoredSubHeading]:!fe,[_.Z.narrowSponsoredSubHeading]:fe}),children:ce("Sponsored")}),re&&(0,j.jsx)("div",{className:i()(_.Z.sponsoredText,{[_.Z.sponsoredSubHeading]:!fe,[_.Z.narrowSponsoredSubHeading]:fe}),children:pe("Label for blaze campaigns, were Blaze is the product name.","Sponsored with Blaze ")})]})]}),st=he&&(null==D||null===(h=D.blog)||void 0===h?void 0:h.paywallAccess)&&(null==D||null===(m=D.blog)||void 0===m?void 0:m.paywallAccess)===A.bv.Member&&oe&&(0,j.jsx)(P.Z,{color:F().paletteWhite,backgroundColor:F().paletteGreen,size:20}),nt=he&&(null==D||null===(g=D.blog)||void 0===g?void 0:g.paywallAccess)&&(null==D||null===(b=D.blog)||void 0===b?void 0:b.paywallAccess)!==A.bv.Member&&oe&&(0,j.jsx)("span",{className:_.Z.lockIcon,"aria-label":pe("Indicates that the post has paywalled content that the user doesn't have access to, as they are not a subscriber.","For supporters"),children:(0,j.jsx)(c.Z,{colors:{primary:F().paletteGray65},size:{width:20,height:20}})}),ot=!te&&D&&(0,j.jsxs)("div",{className:_.Z.rightContent,children:[We,We&&(0,j.jsx)(S,{afterHideAd:ae}),!We&&(0,j.jsxs)(j.Fragment,{children:[st,nt,(0,j.jsx)("span",{className:_.Z.postMeatballsContainer,children:(0,j.jsx)(I.Z,{dismissal:K,postUrl:D.permalinkUrl,isPostPublishedOrPrivate:!!ee&&[E.hA.Published,E.hA.Private].includes(ee),blogName:D.blog.name,blogUrl:D.blog.url,blogUuid:D.blog.uuid,followed:D.blog.followed,date:$,placementId:se,renderPin:Pe,currentTumblelog:Re&&X?null==be||null===(y=be.post)||void 0===y?void 0:y.blogName:void 0,canDelete:Fe,canEdit:De,editablePost:ie,trail:Be,shouldOpenInLegacy:Re&&(null==be||null===(w=be.post)||void 0===w?void 0:w.shouldOpenInLegacy)})})]})]}),it=D&&!D.blog.isBloglessAdvertiser&&(Oe&&Ne||ee===E.hA.Queued)&&(0,j.jsx)("div",{className:_.Z.avatar,children:(0,j.jsx)(a.Z,{isAnonymous:J,imageResponse:D.blog.avatar,dimension:ee===E.hA.Queued?R.Z.mobile.avatarDimension:Se,name:D.blog.name,url:D.blog.url,isAdult:D.blog.isAdult,blog:D.blog,isLink:!te,showBlogCard:!te,placementId:se,eventName:v.J.Avatar,eventDetails:_e})});return(0,j.jsxs)("header",{role:"banner",className:i()(_.Z.header,{[_.Z.isReblog]:!(!Ee||!U),[_.Z.dogEarWrapper]:!le,[_.Z.headerBloglessAdvertiser]:null==D||null===(k=D.blog)||void 0===k?void 0:k.isBloglessAdvertiser}),"aria-label":He,children:[it,(0,j.jsxs)("div",{className:i()(Ve,{[_.Z.headerSponsored]:!!We,[_.Z.headerHasInlineAvatar]:!!it}),children:[tt,ot]}),!le&&(0,j.jsx)(B.Z,{url:null==D?void 0:D.permalinkUrl,date:$,presentation:W})]})}},45820:(e,t,s)=>{"use strict";s.d(t,{Z:()=>M});var n=s(54138),o=s.n(n),i=s(753),a=s(33970),r=s.n(a),l=s(95004),d=s(17709),c=s(49515),p=s(56305),u=s(57475),h=s(27252),m=s(62412),g=s(72835),v=s(94631),b=s(22591),x=s(52153),f=s(43684),C=s(68087),y=s(78667),w=s(43166),j=s(93613),k=s(399),S=s(63583),I=s.n(S),N=s(96467);const P={reblog:"u2tXn",reblogHeader:"fAAi8",label:"zSfnO",leftContent:"QkCNg",username:"lBFTL",userInfo:"GdjMk",followButton:"a6sXh",attribution:"sqHC2"};var T=s(2629),Z=function(e){var t,s,n,i,a=e.avatarConfiguration,S=e.labelConfiguration,Z=e.followButtonConfiguration,A=e.children,E=e.parentPlacementId,M=e.parentEarnedId,L=e.isContributedContent,O=e.shouldShowTip,R=e.isMember,D=(0,y.bp)(),F=D._c,B=D.features,_=B.paywallConsumption,U=B.timestampsEverywhere,V=D.timestamps,z=(0,j.V)().toggleToast,H=(0,w.uu)(),W=(0,l.useState)(!1),q=r()(W,2),G=q[0],X=q[1],Q=U&&V&&!!S.postTimestamp&&!M,J=null;if(a){var Y=a.avatarImageResponse,K=a.clickthrough,$=a.showsReblogIcon,ee=a.blogIsAdult,te={imageResponse:Y,dimension:Q?N.reblogAttributionAvatarWithTimestampSize:N.reblogAttributionAvatarSize,isAdult:ee};$&&(te=o()(o()({},te),{},{badge:c.Z.reblog()})),K&&(te=o()(o()({},te),{},{name:K.blogName,url:K.href,blog:S.blog})),J=(0,T.jsx)(d.Z,o()({},te))}var se=(0,T.jsx)("div",{className:P.attribution,children:(null===(t=S.blog)||void 0===t?void 0:t.advertiserName)||S.text});S.clickthrough&&S.blog&&(se=(0,T.jsx)(p.Z,{blogName:S.blog.name,blog:S.blog,postId:S.postId,href:S.clickthrough,title:S.unselectableReason,children:se}));var ne=null!=Z&&Z.canFollowBlog&&S.blog?(0,T.jsx)(u.Z,{blogName:null===(s=S.blog)||void 0===s?void 0:s.name,blogUrl:null===(n=S.blog)||void 0===n?void 0:n.url,following:!!Z.isFollowingReblogger,isReblogHeader:!0,className:P.followButton,placementId:E,earnedId:M}):null,oe=_&&(null===(i=S.blog)||void 0===i?void 0:i.isPaywallOn)&&(null==S?void 0:S.paywallAccess)!==x.bv.Member&&(null==S?void 0:S.isPaywalled)&&(0,T.jsx)("span",{className:P.lockIcon,"aria-label":F("Indicates that the post has paywalled content that the user doesn't have access to, as they are not a subscriber.","For supporters"),children:(0,T.jsx)(h.Z,{colors:{primary:I().paletteGray65},size:{width:20,height:20}})}),ie=(0,l.useCallback)((()=>{R?z((0,k.iI)(F),"tumblrbot"):X(!G)}),[G,R,z,F]);return(0,T.jsxs)("div",{className:P.reblog,"data-is-contributed-content":L,children:[(0,T.jsxs)("div",{className:P.reblogHeader,children:[(0,T.jsxs)("div",{className:P.leftContent,children:[J,(0,T.jsxs)("div",{className:P.userInfo,children:[(0,T.jsxs)("div",{className:P.username,children:[(0,T.jsx)("div",{className:P.label,children:se}),ne]}),Q&&S.postTimestamp&&(0,T.jsx)(v.Z,{className:P.timestamp,date:new Date(1e3*S.postTimestamp).toUTCString()})]})]}),(0,T.jsxs)("div",{className:P.rightContent,children:[oe,O&&S.blog&&!oe&&(0,T.jsx)(m.ZP,{width:C.OH,height:C.u5,closeForAllExternalClicks:!0,position:f.I2.AutoStart,isOpen:G,toggle:ie,usePortals:!0,component:(0,T.jsx)(b.Z,{onClose:ie,blogname:S.blog.name,postId:S.postId,canDoReply:!(H===w.Nw||!H.post.canReply)}),children:(0,T.jsx)(g.Z,{onClick:ie,size:{width:15,height:15}})})]})]}),(0,T.jsx)("div",{className:P.childrenContainer,children:A})]})};Z.defaultProps={labelConfiguration:null};const A=Z;var E=s(5700);const M=e=>{var t=e.trail,s=e.parentPlacementId,n=e.parentEarnedId,a=e.disableFollow,r=e.contentFooter;return(0,T.jsx)(T.Fragment,{children:null==t?void 0:t.map(((e,t)=>{var l,d,c,p;if((0,E.eb)(e)){var u,h=e.blog,m=h.canBeFollowed,g=!1!==h.active;if(d={text:e.blog.name},g)d=o()(o()({},d),{},{blog:e.blog,postId:e.post.id,postTimestamp:null===(u=e.post)||void 0===u?void 0:u.timestamp,clickthrough:"".concat(e.blog.url,"post/").concat(e.post.id,"/"),isPaywalled:e.post.isPaywalled,paywallAccess:e.post.paywallAccess}),l={avatarImageResponse:e.blog.avatar,blogIsAdult:e.blog.isAdult,clickthrough:{href:e.blog.url,title:e.blog.title,blogName:e.blog.name},showsReblogIcon:0!==t};c=a||e.blog.isBloglessAdvertiser?{canFollowBlog:!1}:{canFollowBlog:g&&m,isFollowingReblogger:e.blog.followed},p=e.post.id}else{var v,b,x;l={showsReblogIcon:0!==t,avatarImageResponse:null===(v=e.brokenBlog)||void 0===v?void 0:v.avatar},d={text:null===(b=e.brokenBlog)||void 0===b?void 0:b.name,blog:void 0},p="".concat(null===(x=e.brokenBlog)||void 0===x?void 0:x.name," ").concat(JSON.stringify(e.content))}return(0,T.jsxs)(A,{avatarConfiguration:l,labelConfiguration:d,followButtonConfiguration:c,isContributedContent:e.isContributedContent,parentPlacementId:s,parentEarnedId:n,shouldShowTip:!!(0,E.eb)(e)&&e.post.shouldShowTip,isMember:!!(0,E.eb)(e)&&e.blog.isMember,children:[(0,T.jsx)(i.ZP,{blocks:e.content,layouts:e.layout,postingBlog:(0,E.eb)(e)?e.blog:void 0,isOriginalPost:!1,isEdit:!0}),0===t&&r]},p)}))})}},235:(e,t,s)=>{"use strict";s.d(t,{Jj:()=>a,ZP:()=>r,q5:()=>l});var n=s(95004),o=s(45051),i=(0,n.createContext)({canFastReblog:!1,canFastQueue:!1,canFastQuote:!1,fastRebloggedPosts:[],setDefaultFastBlog:o.Z,getBlogs:()=>[]}),a=(0,n.createContext)({allPosts:[],queuedPosts:[]});const r=i;var l=()=>(0,n.useContext)(i)},94631:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s(5754),o=s.n(n),i=s(67023),a=s(78667),r=s(86225);const l="M_e0U";var d=s(2629);const c=function(e){var t=e.date,s=e.className,n=e.dateFormat,c=void 0===n?i.qC.Automatic:n,p=(0,a.bp)(),u=p._c,h=p._getRelativeDateString,m=p._getLocaleDateString,g=p.timeZone,v=m(t,i.Cx.Notes,!0),b=m(t,i.Cx.Time,!0),x=(0,r.Z)(t).toISOString();return(0,d.jsx)("time",{className:o()(l,s),dateTime:x,title:u('Tooltip text that shows when this post was posted. First variable is the date ("Aug 26, 2021"), second variable is the time ("5:20 PM").',"Posted %1$s - %2$s",[v,b]),suppressHydrationWarning:!0,children:h(t,c,void 0,g)})}},22591:(e,t,s)=>{"use strict";s.d(t,{Z:()=>j});var n=s(33970),o=s.n(n),i=s(95004),a=s(65214),r=s(43523),l=s(81584),d=s(78667),c=s(58849);const p=(0,s(80293).Z)((()=>Promise.all([s.e(744),s.e(5791),s.e(5717)]).then(s.bind(s,20492))),"AsyncTippingForm"),u=s.p+"src/assets/images/tipping/tip-jar-8d1544a0.gif",h=s.p+"src/assets/images/tipping/tip-jar@2x-56354e2e.gif";var m=s(54382);const g="kuEoR",v="mnMy1",b="ZyCBz",x="NG3pi",f="VA2AA",C="GRXS0";var y=s(2629);const w=e=>{var t=e.onAcceptTerms,s=(0,d.bp)()._c;return(0,y.jsxs)("div",{className:g,children:[(0,y.jsx)("img",{srcSet:"".concat(h," 400w, ").concat(u," 200w"),sizes:"(min-resolution: 1.3) 400w, 200w",src:u,alt:"",className:v}),(0,y.jsx)("h2",{className:b,children:s("Heading for tip jar feature description. Tip has two meanings here: a monetary reward and a peice of advice","Here's a tip")}),(0,y.jsx)("span",{className:x,children:(0,y.jsx)(m.ZP,{components:{span:(0,y.jsx)("span",{role:"img","aria-label":s("label for heart emoji","love")})},children:"Now you can send tips to the blogs you [span]❤️[/span] on Tumblr."})}),(0,y.jsx)("span",{className:f,children:(0,y.jsx)(m.ZP,{components:{termsLink:(0,y.jsx)("a",{href:"https://www.tumblr.com/policy/en/terms-of-service"}),privacyLink:(0,y.jsx)("a",{href:"https://www.tumblr.com/privacy"})},children:"By tapping “Start tipping now” below I agree to [termsLink]Tumblr’s Terms of Service[/termsLink], that I’m 18 years or older, and have read the [privacyLink]Privacy Policy[/privacyLink]."})}),(0,y.jsx)("button",{className:C,onClick:t,children:s("Button text that initiates the process of sending a tip to user","Start tipping now")})]})};const j=e=>{var t=e.blogname,s=e.canDoReply,n=e.onClose,u=e.postId,h=e.replyText,m=void 0===h?"":h,g=(0,d.bp)(),v=g.apiFetch,b=g.getUserInfo,x=g.logEvent,f=g.isLoggedIn,C=(0,c.h)().openLoginWall,j=(0,i.useState)(!0),k=o()(j,2),S=k[0],I=k[1],N=(0,i.useState)(void 0),P=o()(N,2),T=P[0],Z=P[1];(0,i.useEffect)((()=>{b().then((function(e){var t;I(e.acceptedTippingTos||!1),Z(null===(t=e.blogs)||void 0===t?void 0:t[0].avatar)}))}),[b,I,v]);var A=(0,i.useCallback)((()=>{if(x({eventName:r.J.StartTippingTap}),!f){var e=u?(0,a.Rd)({blogName:t,postId:u.toString()}):(0,a.vw)({blogName:t});return C({redirect:e})}return(0,l.ZP)(v).acceptTippingTerms().fetch().then((()=>I(!0)))}),[I,v,x,t,f,C,u]);return(0,y.jsx)("div",{children:S?(0,y.jsx)(p,{avatar:T,blogname:t,canDoReply:s,onClose:n,postId:u,replyText:m}):(0,y.jsx)(w,{onAcceptTerms:A})})}},89351:(e,t,s)=>{"use strict";s.d(t,{v:()=>u,Z:()=>h});var n=s(54138),o=s.n(n),i=s(5754),a=s.n(i),r=s(9557),l=s(25190),d=s(43684);const c={tooltip:"EZHUS",green:"pmD2_",red:"pMONo"};var p=s(2629),u={BLACK:"black",GREEN:"green",RED:"red"};const h=e=>{var t=e.children,s=e.content,n=e.tooltipOffsetModifiers,i=void 0===n?{}:n,h=e.position,m=void 0===h?d.I2.Right:h,g=e.color,v=void 0===g?u.BLACK:g,b=e.className,x=e.disable,f=void 0!==x&&x,C=e.popoverProps;return(0,l.v$)().isMobile||f?t:(0,p.jsx)(r.Z,o()(o()({hasArrow:!0,isChromeless:!0,arrowWrapperClassName:c[v],component:(0,p.jsx)("div",{className:a()(c.tooltip,c[v],b),children:s}),position:m,positionBasedOffsetModifiers:i,type:d.Oj.Hover},C),{},{children:t}))}},45451:(e,t,s)=>{"use strict";s.d(t,{Z:()=>g});var n=s(54138),o=s.n(n),i=s(33970),a=s.n(i),r=s(95004),l=s(13586),d=s(62412),c=s(43684);const p="vgL3J",u="oMP8i";var h=s(2629),m={[c.I2.Right]:{left:6,top:-2},[c.I2.Left]:{left:-6,top:-2},[c.I2.Top]:{left:4,top:10},[c.I2.Bottom]:{left:4,top:8}};const g=e=>{var t=e.children,s=e.content,n=e.tooltipOffsetModifiers,i=void 0===n?{}:n,g=e.position,v=void 0===g?c.I2.Bottom:g,b=e.popoverProps,x=e.isOpen,f=e.onFirstShow,C=e.onDismiss,y=(0,r.useState)(x),w=a()(y,2),j=w[0],k=w[1],S=(0,l.YD)(),I=a()(S,2),N=I[0],P=I[1],T=(0,r.useState)(!1),Z=a()(T,2),A=Z[0],E=Z[1];(0,r.useEffect)((()=>{k(x)}),[x,k]),(0,r.useEffect)((()=>{P&&!A&&(E(!0),null==f||f())}),[P,A,E,f]);return(0,h.jsx)(d.ZP,o()(o()({hasArrow:!0,isChromeless:!0,arrowWrapperClassName:u,component:(0,h.jsx)("div",{ref:N,className:p,onClick:()=>{k(!1),null==C||C()},role:"button",children:s}),position:v,positionBasedOffsetModifiers:o()(o()({},m),i),isOpen:j,toggle:null,skipClickToOpen:!0,skipClickToClose:!0,closeForAllExternalClicks:!0,isFlipEnabled:!1},b),{},{children:t}))}},5553:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(51641),o=s(78667);const i=()=>{var e=(0,o.bp)(),t=e.getUserInfo,s=e.isLoggedIn,i=(0,n.useQuery)("user-info",(()=>t())),a=i.isLoading,r=i.isError,l=i.data;return!s||a||r||!l?null:l.blogs}},64560:(e,t,s)=>{"use strict";var n;s.d(t,{U:()=>n}),function(e){e.Action="action",e.Web="web",e.API="api"}(n||(n={}))},29521:(e,t,s)=>{"use strict";var n;s.d(t,{g:()=>n}),function(e){e.created="Created",e.pending="Pending",e.approved="Approved",e.rejected="Rejected",e.waitingReport="WaitingReport",e.completed="Completed"}(n||(n={}))},19403:(e,t,s)=>{"use strict";s.d(t,{L:()=>r});var n=s(22979),o=s(88451),i=s(24078),a=s(51400);function r(e,t){var s=e,r=this.props.adContext,l=r.hydraConfigInstanceId,d=r.adPlacementConfiguration,c=null==d?void 0:d.signature,p=e.objectType===n.TE.Post&&!(void 0===e.adm||null===e.adm),u=e.objectType===n.TE.Announcement&&e,h=u?(0,a.w)(u).bannerId:null,m=e.adInstanceCreationTime?Date.now()-e.adInstanceCreationTime:null,g=s.adProviderId,v=s.adProviderPlacementId,b=s.adProviderForeignPlacementId,x=s.adProviderInstanceId,f=s.adRequestId,C=s.fillId,y=s.supplyRequestId,w=s.supplyProviderId,j=s.streamSessionId,k=s.streamGlobalPosition,S=s.supplyOpportunityInstanceId,I=s.mediationCandidateId,N=s.adInstanceId,P=s.price,T=s.advertiserId,Z=s.campaignId,A=s.adGroupId,E=s.adId,M=s.creativeId,L=s.earnedId,O=(0,i.c)({hydraConfigInstanceId:l,hydraSignature:c,adProviderId:g,adProviderPlacementId:v,adProviderForeignPlacementId:b,adProviderInstanceId:x,adRequestId:f,fillId:C,supplyRequestId:y,supplyProviderId:w,streamSessionId:j,streamGlobalPosition:k,supplyOpportunityInstanceId:S,mediationCandidateId:I,adInstanceId:N,price:P,isTumblrSponsoredPost:p,adInstanceAge:m,advertiserId:T,campaignId:Z,adGroupId:A,adId:E,banner_id:h,creativeId:M,earnedId:L},((e,t)=>null!=t));return t?(0,o.v)(O):O}},17901:(e,t,s)=>{"use strict";var n,o;s.d(t,{L:()=>o,w:()=>n}),function(e){e.Ask="ask",e.Blaze="blaze",e.Reblog="reblog",e.ReblogWithComment="reblog_with_comment",e.ReblogWithContentComment="reblog_with_content_comment",e.Like="like",e.Reply="reply",e.Posted="posted",e.Follower="follower",e.UserMention="user_mention",e.NoteMention="note_mention",e.Attribution="post_attribution",e.Tip="tip"}(n||(n={})),function(e){e.Conversation="conversation",e.Rollup="rollup",e.Replies="replies",e.Reblogs="reblogs_only",e.ReblogsWithTags="reblogs_with_tags",e.ReblogsWithComments="reblogs_with_comments",e.ReblogsWithContentComments="reblogs_with_content_comments",e.Likes="likes",e.ReblogGraph="reblog_graph"}(o||(o={}))},72146:(e,t,s)=>{"use strict";var n;s.d(t,{c:()=>n}),function(e){e.Search="search",e.Pin="pin",e.Hashtag="hashtag"}(n||(n={}))},68087:(e,t,s)=>{"use strict";s.d(t,{Jd:()=>n,OH:()=>o,u5:()=>i});var n="com.tumblr.tip.custom",o=360,i=510},92677:(e,t,s)=>{"use strict";var n,o,i;function a(e){return!!e&&!!e.type&&!!e.type&&Object.values(o).includes(e.type)}s.d(t,{Fj:()=>i,G6:()=>n,v_:()=>a,w3:()=>o}),function(e){e.Youtube="youtube",e.Tumblr="tumblr",e.Flickr="flickr",e.Instagram="instagram"}(n||(n={})),function(e){e.Mov="video/quicktime",e.Mp4="video/mp4",e.AppleM4v="video/x-m4v"}(o||(o={})),function(e){e.User="User",e.Glass="Glass",e.DocumentVisibility="DocumentVisibility"}(i||(i={}))},90621:(e,t,s)=>{"use strict";s.d(t,{CG:()=>c,L2:()=>h,NV:()=>u,Po:()=>l,V6:()=>p,rK:()=>m,wW:()=>d,yR:()=>g});var n=s(54138),o=s.n(n),i=s(5700),a=s(1308),r=s(60023),l=(e,t)=>{var s=t.blogName;return new r.x(e,"/v2/blog/".concat(s,"/posts/queue"),{method:"GET",queryParams:o()(o()({},(0,a.xr)(["timezoneOffset"])),{},{reblog_info:!0})})},d=(e,t)=>{var s=t.blogName,n=t.id,o=t.insertAfter;return new r.x(e,"/v2/blog/".concat(s,"/posts/queue/reorder"),{method:"POST",body:{post_id:n,insert_after:o}})},c=(e,t)=>{var s=t.blogName;return new r.x(e,"/v2/blog/".concat(s,"/posts/queue/shuffle"),{method:"POST"})},p=(e,t)=>{var s=t.blogUuid,n=t.postId;return new r.x(e,"/v2/blog/".concat(s,"/post/edit"),{method:"POST",body:{id:n,state:i.hA.Queue}})},u=(e,t)=>{var s=t.blogName;return new r.x(e,"/v2/blog/".concat(s,"/posts/queue/settings"))},h=(e,t)=>{var s=t.blogName,n=t.postFrequency,o=t.startHour,i=t.endHour;return new r.x(e,"/v2/blog/".concat(s,"/posts/queue/settings"),{method:"POST",body:{post_frequency:n,start_hour:o,end_hour:i}})},m=(e,t)=>{var s=t.blogName;return new r.x(e,"/v2/blog/".concat(s,"/posts/queueplus/settings"))},g=(e,t)=>{var s=t.blogName,n=t.interval,o=t.perInterval,i=t.startTime,a=t.endTime;return new r.x(e,"/v2/blog/".concat(s,"/posts/queueplus/settings"),{method:"POST",body:{interval:n,per_interval:o,start_time:i,end_time:a}})}},81095:(e,t,s)=>{"use strict";var n,o;s.d(t,{b:()=>n,k:()=>o}),function(e){e.SPAM="spam",e.UNBLUR="unblur"}(n||(n={})),function(e){e.Fast="fast"}(o||(o={}))},34056:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s(17276),o=s.n(n),i=s(99077),a=s.n(i);function r(e){return new Promise(((t,s)=>{setTimeout(a()(o()().mark((function n(){return o()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,navigator.clipboard.writeText(e);case 3:return n.abrupt("return",t());case 6:n.prev=6,n.t0=n.catch(0),s();case 9:case"end":return n.stop()}}),n,null,[[0,6]])}))))}))}},87517:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s(88451);function o(e,t,s){var o=e.href,i=e.method,a=e.bodyParams;return()=>t(o,{method:i,body:(0,n.v)(a)}).then(s)}},51400:(e,t,s)=>{"use strict";s.d(t,{w:()=>n});var n=e=>e.resources[0]},19370:(e,t,s)=>{"use strict";s.d(t,{x:()=>o});var n=s(5700),o=e=>{var t=e.find((e=>(0,n.RD)(e)));return t||e.find((e=>(0,n.gD)(e)))}},20041:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(95004),o=s(62412);const i=e=>{var t=e.outsideEvents,s=e.onOutsideEvent,i=(0,n.useRef)(null),a=(0,n.useContext)(o.TL),r=(0,n.useCallback)((e=>{var t,n=e.target;!(null!==(t=i.current)&&void 0!==t&&t.contains(n))&&s()}),[s,i]);return(0,n.useEffect)((()=>{var e=a();return t.forEach((t=>{null==e||e.addEventListener(t,r,!1)})),()=>{t.forEach((t=>{null==e||e.removeEventListener(t,r,!1)}))}}),[a,t,r]),i}},95867:(e,t,s)=>{"use strict";s.d(t,{ZP:()=>p,jx:()=>d,n5:()=>c});var n=s(33970),o=s.n(n),i=s(95004),a=s(5553),r=s(44561),l="lastSelectedBlog",d=e=>{var t;try{t=JSON.parse(localStorage.getItem(l)||"null")}catch(e){}return null==e?void 0:e.find((e=>{var s;return e.uuid===(null===(s=t)||void 0===s?void 0:s.uuid)}))},c=e=>{localStorage.setItem(l,JSON.stringify(e))};const p=()=>{var e=(0,i.useState)(),t=o()(e,2),s=t[0],n=t[1],l=(0,a.Z)();(0,i.useEffect)((()=>{var e=d(l||[]),t=(0,r.Z)(l||[]);n(e||t)}),[l]);return{selectedBlog:s,onChangeSelectedBlog:e=>{n(e),c(e)}}}},67657:(e,t,s)=>{"use strict";s.d(t,{AU:()=>d,NV:()=>l,uG:()=>r});var n=s(54138),o=s.n(n),i="igniteData",a=()=>{var e=localStorage.getItem(i);return e?JSON.parse(e):null},r=(e,t)=>{var s,n,o=a();return null!==(s=null==o||null===(n=o[e])||void 0===n?void 0:n[t])&&void 0!==s?s:null},l=(e,t)=>{var s=a();localStorage.setItem(i,JSON.stringify(o()(o()({},s),{},{[e]:t})))},d=e=>{var t=a();t&&(delete t[e],Object.keys(t).length?localStorage.setItem(i,JSON.stringify(t)):localStorage.removeItem(i))}},68859:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=e=>{if(!e)return!1;var t;try{t=new URL(e)}catch(e){return!1}var s=t.hostname;return"safe.txmblr.com"===s||/(?:^tumblr|\.tumblr)\.(?:com|net)$/.test(s)}},43747:(e,t,s)=>{"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return!1;var s="%[0-9a-fA-F]{2}",n=t?"(http|https):\\/\\/":"((http|https):\\/\\/)?",o='([a-zA-Z0-9$\\-_.+!*"(),;:&=]|'.concat(s,")+@"),i="(25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])",a="(".concat(i,"(\\.").concat(i,"){3})"),r="a-zA-Z0-9\\-\\_\\~",l="\\u00C0-\\u9FFF",d="([".concat(r).concat(l,"]+\\.)+([a-zA-Z]{2,})"),c="[0-9]+",p="(".concat(a,"|localhost|").concat(d,")(:").concat(c,")?"),u="".concat(r).concat(l,".:\\[\\]@!$&'()*+,;="),h="([".concat(u,"]|").concat(s,")*"),m="".concat(h,"(\\/").concat(h,")*"),g="\\?([".concat(u,"/?]|").concat(s,")*"),v="\\#([".concat(u,"/?]|").concat(s,")*"),b=new RegExp("^".concat(n,"(").concat(o,")?").concat(p,"(\\/?(").concat(m,")?(").concat(g,")?(").concat(v,")?)?$"));return!0===b.test(e)}s.d(t,{Z:()=>n})},60042:(e,t,s)=>{"use strict";s.d(t,{ag:()=>a,bG:()=>r,oL:()=>i});var n=s(94576),o=s(68859);function i(e,t){var s,i=n=>{var i=function(e){var t,s=e.origin,n=e.source,i=e.data;if(!(i&&s&&n))return null;if(!(0,o.Z)(s))return null;try{t=JSON.parse(i)}catch(e){return null}if(!t.method)return null;var a=t.method.match(/^([^:]+):(.+)$/);if(!a)return null;var r=a[1],l=a[2],d=t.args[0];return{origin:s,namespace:r,name:l,source:n,cid:t.cid,data:d}}(n);if(i&&i.namespace===e)return"_syn"===i.name?(s={namespace:e,source:i.source,origin:i.origin},void function(e,t,s,n){var o=JSON.stringify({method:"".concat(s,":_method_callback_responder"),args:[n]});e.postMessage(o,t)}(i.source,i.origin,e,{response:"ack",cid_response:i.cid})):void(t[i.name]&&t[i.name](i.data))};return n.ZP.on("message",i),{handler:i,getChannelInfo:()=>s}}var a={listen:i,unlisten:function(e){n.ZP.off("message",e)}};function r(e,t,s){var n=e.source,o=e.target,i=e.namespace,a=JSON.stringify({method:"".concat(i,":").concat(t),args:[s]});n.postMessage(a,o)}},22527:(e,t,s)=>{"use strict";s.d(t,{d:()=>o});var n=s(5700),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.find((e=>e.type===n.Gf.Cta))}},24228:(e,t,s)=>{"use strict";s.d(t,{b:()=>i});var n=s(92023),o=s(50899),i=(e,t,s)=>{var i=(0,n.T8)(e,{postId:t.toString(),postSlug:s});return"".concat(o.Cw).concat(i,"?source=share")}},97561:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=e=>{var t=e.postUrl;return{blog:e.blog,permalinkUrl:t}}},94562:(e,t,s)=>{"use strict";s.d(t,{h:()=>o});var n=s(22979),o=e=>{var t=e.editablePost,s=e.isReblog,o=e.isReblogWithPaywall,i=e.isInbox,a=e.isAsk,r=e.isPrefilledPost;return!!(s&&t&&(0,n.WN)(t))||(!!o||(!!a||(!!(null!=t&&t.isAdFreeGiftAsk||null!=t&&t.isTumblrmartGiftAsk)||(!!i||!!r))))}},16273:(e,t,s)=>{"use strict";function n(e,t){var s=Math.ceil(t-e),n=s<0?-1:1;return Array(Math.abs(s)).fill(0).map(((t,s)=>e+s*n))}s.d(t,{Z:()=>n})},82560:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s(94562);const o=e=>{var t=e.isMobile,s=e.features,o=s.redpopDesktopEditorBeta,i=s.redpopPostFormMobileCreate,a=s.redpopPostFormReblog,r=e.editablePost,l=e.isReblog,d=e.isReblogWithPaywall,c=e.isInbox,p=e.isAsk,u=e.isPrefilledPost;return!(0,n.h)({editablePost:r,isReblog:l,isReblogWithPaywall:d,isAsk:p,isInbox:c,isPrefilledPost:u})&&(!(null==r||!r.shouldOpenInLegacy)||(l?!(!t&&a||!t&&o||t):r?!(!t&&o||t):!(!t&&o||t&&i)))}},92895:(e,t,s)=>{"use strict";s.d(t,{P2:()=>r,SV:()=>a,c7:()=>i});var n=s(92677),o=s(68859),i=function(e){var t,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=void 0!==e.media,i=n&&(s||(0,o.Z)(null===(t=e.media)||void 0===t?void 0:t.url));return i},a=e=>(null==e?void 0:e.provider)===n.G6.Instagram,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!i(e,t)&&void 0!==e.embedIframe&&void 0!==e.provider}},4840:(e,t,s)=>{"use strict";e.exports=s.p+"src/assets/icons/ignite-icon-80c800c6.svg"},8705:(e,t,s)=>{"use strict";e.exports=s.p+"src/assets/icons/t-blazed-22d35ec7.svg"},7856:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},50920:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},38642:e=>{function t(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},42307:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},45182:e=>{function t(s){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},30157:(e,t,s)=>{var n=s(87856);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},41463:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},63268:(e,t,s)=>{var n=s(16544).default;function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(o=function(e){return e?s:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var s=o(t);if(s&&s.has(e))return s.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=a?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(i,r,l):i[r]=e[r]}return i.default=e,s&&s.set(e,i),i},e.exports.__esModule=!0,e.exports.default=e.exports},7537:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},88249:(e,t,s)=>{var n=s(16544).default,o=s(7856);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.__esModule=!0,e.exports.default=e.exports},87856:e=>{function t(s,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(s,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},75464:(e,t,s)=>{var n=s(20881),o=s(7537),i=s(99207),a=s(30731);e.exports=function(e){return n(e)||o(e)||i(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports}}]);